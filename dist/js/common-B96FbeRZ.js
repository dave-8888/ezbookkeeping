const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./leaflet-DqUJvPyF.js","../css/leaflet-LtasXFgS.css"])))=>i.map(i=>d[i]);
import{C as vn,j as Vl,a as me,d as Vt,r as q,c as m,u as Zl,b as Jl,e as ql,f as ls,g as Uo,h as rn,o as Oa,F as dr,i as An,k as Ci,l as kn,n as fr,m as Pn,w as qa,p as _l,q as Ql,s as Xl,t as Fo,v as Qn,x as gr,y as Ea,z as oa,A as on,B as jl}from"./vendor-common-M0sdHW0p.js";import{m as De}from"./moment-CIPJ811N.js";import{D as xn,A as ea,a as ec,b as tc,c as ac,d as nc}from"./locales-CDQiBxHT.js";class Yt{static allInstances=[];static allInstancesByType={};static Normal=new Yt(1,"Normal");static Schedule=new Yt(2,"Schedule");type;name;constructor(e,a){this.type=e,this.name=a,Yt.allInstances.push(this),Yt.allInstancesByType[e]=this}static values(){return Yt.allInstances}static valueOf(e){return Yt.allInstancesByType[e]}}class Ha{static allInstances=[];static allInstancesByType={};static Disabled=new Ha(0,"Disabled");static Weekly=new Ha(1,"Weekly");static Monthly=new Ha(2,"Monthly");type;name;constructor(e,a){this.type=e,this.name=a,Ha.allInstances.push(this),Ha.allInstancesByType[e]=this}static values(){return Ha.allInstances}static valueOf(e){return Ha.allInstancesByType[e]}}function*at(t){for(let e=0;e<t.length;e++)yield[t[e],e]}function*es(t){for(let e=t.length-1;e>=0;e--)yield t[e]}function*ld(t){for(let e=t.length-1;e>=0;e--)yield[t[e],e]}function*Xt(t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(yield[e,t[e]])}function*jt(t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(yield e)}function*ja(t,e){for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&t[a]===e&&(yield a)}function*nt(t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(yield t[e])}function na(t){return typeof t=="function"}function Qe(t){return t!==null&&typeof t<"u"}function He(t){return t!==null&&typeof t=="object"&&!xt(t)}function xt(t){return na(Array.isArray)?Array.isArray(t):Object.prototype.toString.call(t)==="[object Array]"}function Ke(t){return typeof t=="string"}function Ae(t){return typeof t=="number"}function st(t){return Number.isInteger(t)}function Rn(t){return typeof t=="boolean"}function gs(t){if(!Ke(t))return!1;const e=t.split("-");return e.length!==2?!1:!!parseInt(e[0])&&!!parseInt(e[1])}function ca(t,e){if(t===e)return!0;if(xt(t)&&xt(e)){const a=t,n=e;if(a.length!==n.length)return!1;for(let o=0;o<a.length;o++)if(!ca(a[o],n[o]))return!1;return!0}else if(He(t)&&He(e)){const a=Object.keys(t),n=Object.keys(e);if(a.length!==n.length)return!1;const o=new Map;for(let s=0;s<n.length;s++){const r=n[s];o.set(r,!0)}for(let s=0;s<a.length;s++){const r=a[s];if(!o.get(r)||!ca(t[r],e[r]))return!1}return!0}else return t===e}function Di(t,e){const a=t.split("-"),n=e.split("-");return a.length!==2||n.length!==2?!1:!!parseInt(a[0])&&!!parseInt(a[1])&&parseInt(a[0])===parseInt(n[0])&&parseInt(a[1])===parseInt(n[1])}function sc(t,e){if(t.length>e.length)return!1;const a=new Map;for(let n=0;n<e.length;n++)a.set(e[n],!0);for(let n=0;n<t.length;n++)if(!a.get(t[n]))return!1;return!0}function Tn(t){if(!t)return!0;for(const e of jt(t))return!1;return!0}function oc(t){return t.sort(function(e,a){return e-a})}function pr(t){let e=0;if(!t||!He(t))return e;for(const a of jt(t))e++;return e}function Ja(t,e,a){const n=e.replace(/([.*+?^=!:${}()|\-/\\])/g,"\\$1");return t.replace(new RegExp(n,"g"),a)}function Bo(t,e){return Ja(t,e,"")}function ic(t,e){let a=0;for(let n=0;n<t.length;n++){const o=t.charCodeAt(n);o>=1&&o<=126||65376<=o&&o<=65439?a++:a+=2}return a<=e||e<=3?t:t.substring(0,e-3)+"..."}function Po(t){return btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(t))))}function go(t){return t?atob(t):""}function rc(t){return String.fromCharCode.apply(null,Array.from(new Uint8Array(t)))}function Os(t){return Uint8Array.from(t,e=>e.charCodeAt(0)).buffer}function cd(t,e){if(xt(t)&&t.length>0){const a=t;for(const n of a)if(!(e&&n[e]))return n}else if(He(t)){const a=t;for(const n of nt(a))if(!(e&&n[e]))return n}return null}function yr(t,e,a){if(xt(t)){const n=t;for(const o of n)if(o[a]===e)return o}else if(He(t)){const n=t;for(const o of nt(n))if(o[a]===e)return o}return null}function ud(t,e){for(const a of t)if(a.value===e)return a.name;return null}function Si(t,e){for(const a of t)if(a.type===e)return a.name;return null}function Mi(t,e){for(const a of t)if(a.type===e)return a.displayName;return null}function md(t,e,a,n,o){if(xt(t)){const s=t;if(a){for(const r of s)if(r[a]===e)return r[n]}else if(Ae(e)){const r=e;if(s[r])return s[r][n]}}else if(He(t)){const s=t;if(a){for(const r of nt(s))if(r[a]===e)return r[n]}else if(Ke(e)){const r=e;if(s[r])return s[r][n]}}return o}function dd(t,e,a){if(!a||!t||!t.length)return!1;for(const n of t)if(n[e]===a)return!0;return!1}function Ni(t){const e=[];for(const a of jt(t))e.push(a);return e}function ts(t,e){const a=[];for(const n of ja(t,e))a.push(n);return a}function po(t,e){const a={};for(const n of t)a[n]=e;return a}function Li(t,e){const a={};if(!t)return a;const n=t.split(e);for(const o of n)o&&(a[o]=!0);return a}function wi(t,e){if(!t)return 0;const a=t.split(e);let n=0;for(const o of a)o&&n++;return n}function fd(t){const e=[];for(const a of nt(t))for(const n of a)e.push(n);return e}function Ei(t,e,a,n,o){const s=t[e];if(!s||s.length<1)return!1;for(const r of s)if(!(n&&r[n])){if(a&&r[a]===o)return!0;if(!a&&r===o)return!0}return!1}function lc(t,e,a,n,o,s,r){if(e)if(xt(t)){const l=t;for(const i of l)if(!(n&&i[n])&&Ei(i,e,o,s,r))return a?i[a]:i}else{const l=t;for(const i of nt(l))if(!(n&&i[n])&&Ei(i,e,o,s,r))return a?i[a]:i}return null}function hr(t,e){if(e<=0||e>=t.length)return t;const a=[];for(let n=e;n<t.length;n++)a.push(t[n]);for(let n=0;n<e;n++)a.push(t[n]);return a}class Ro{year;quarter;minUnixTime;maxUnixTime;constructor(e,a,n,o){this.year=e,this.quarter=a,this.minUnixTime=n,this.maxUnixTime=o}static of(e,a,n){return new Ro(e.year,e.quarter,a,n)}}class Yo{year;month0base;minUnixTime;maxUnixTime;constructor(e,a,n,o){this.year=e,this.month0base=a,this.minUnixTime=n,this.maxUnixTime=o}static of(e,a,n){return new Yo(e.year,e.month0base,a,n)}}class zo{year;month;day;minUnixTime;maxUnixTime;constructor(e,a,n,o,s){this.year=e,this.month=a,this.day=n,this.minUnixTime=o,this.maxUnixTime=s}static of(e,a,n){return new zo(e.year,e.month,e.day,a,n)}}class Jt{static allInstances=[];static January=new Jt(1,"January");static February=new Jt(2,"February");static March=new Jt(3,"March");static April=new Jt(4,"April");static May=new Jt(5,"May");static June=new Jt(6,"June");static July=new Jt(7,"July");static August=new Jt(8,"August");static September=new Jt(9,"September");static October=new Jt(10,"October");static November=new Jt(11,"November");static December=new Jt(12,"December");month;name;constructor(e,a){this.month=e,this.name=a,Jt.allInstances.push(this)}static values(){return Jt.allInstances}static valueOf(e){return Jt.allInstances[e-1]}}class mt{static allInstances=[];static allInstancesByName={};static Sunday=new mt(0,"Sunday");static Monday=new mt(1,"Monday");static Tuesday=new mt(2,"Tuesday");static Wednesday=new mt(3,"Wednesday");static Thursday=new mt(4,"Thursday");static Friday=new mt(5,"Friday");static Saturday=new mt(6,"Saturday");static DefaultFirstDay=mt.Sunday;type;name;constructor(e,a){this.type=e,this.name=a,mt.allInstances.push(this),mt.allInstancesByName[a]=this}static values(){return mt.allInstances}static valueOf(e){return mt.allInstances[e]}static parse(e){return mt.allInstancesByName[e]}}class Ua{static allInstances=[];static AM=new Ua(0,"AM");static PM=new Ua(1,"PM");type;name;constructor(e,a){this.type=e,this.name=a,Ua.allInstances.push(this)}static values(){return Ua.allInstances}}class gt{static allInstances=[];static DefaultDateTime=new gt("YYYY-MM-DD HH:mm:ss",/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) ([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/);static DefaultDateTimeWithTimezone=new gt("YYYY-MM-DD HH:mm:ssZ",/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) ([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](Z|[+-](0[0-9]|1[0-4]):[0-5][0-9])$/);static DefaultDateTimeWithoutSecond=new gt("YYYY-MM-DD HH:mm",/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) ([0-1][0-9]|2[0-3]):[0-5][0-9]$/);static DefaultDate=new gt("YYYY-MM-DD",/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$/);static RFC3339=new gt("YYYY-MM-DDTHH:mm:ssZ",/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])T([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](Z|[+-](0[0-9]|1[0-4]):[0-5][0-9])$/);static YYYYMMDDSlashWithTime=new gt("YYYY/MM/DD HH:mm:ss",/^\d{4}\/(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|3[0-1]) ([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/);static MMDDYYSlashWithTime=new gt("MM/DD/YYYY HH:mm:ss",/^(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|3[0-1])\/\d{4} ([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/);static DDMMYYSlashWithTime=new gt("DD/MM/YYYY HH:mm:ss",/^(0[1-9]|[1-2][0-9]|3[0-1])\/(0[1-9]|1[0-2])\/\d{4} ([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/);static YYYYMMDDDotWithTime=new gt("YYYY.MM.DD HH:mm:ss",/^\d{4}\.(0[1-9]|1[0-2])\.(0[1-9]|[1-2][0-9]|3[0-1]) ([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/);static MMDDYYDotWithTime=new gt("MM.DD.YYYY HH:mm:ss",/^(0[1-9]|1[0-2])\.(0[1-9]|[1-2][0-9]|3[0-1])\.\d{4} ([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/);static DDMMYYDotWithTime=new gt("DD.MM.YYYY HH:mm:ss",/^(0[1-9]|[1-2][0-9]|3[0-1])\.(0[1-9]|1[0-2])\.\d{4} ([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/);static YYYYMMDDSlash=new gt("YYYY/MM/DD",/^\d{4}\/(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|3[0-1])$/);static MMDDYYSlash=new gt("MM/DD/YYYY",/^(0[1-9]|1[0-2])\/(0[1-9]|[1-2][0-9]|3[0-1])\/\d{4}$/);static DDMMYYSlash=new gt("DD/MM/YYYY",/^(0[1-9]|[1-2][0-9]|3[0-1])\/(0[1-9]|1[0-2])\/\d{4}$/);static YYYYMMDDDot=new gt("YYYY.MM.DD",/^\d{4}\.(0[1-9]|1[0-2])\.(0[1-9]|[1-2][0-9]|3[0-1])$/);static MMDDYYDot=new gt("MM.DD.YYYY",/^(0[1-9]|1[0-2])\.(0[1-9]|[1-2][0-9]|3[0-1])\.\d{4}$/);static DDMMYYDot=new gt("DD.MM.YYYY",/^(0[1-9]|[1-2][0-9]|3[0-1])\.(0[1-9]|1[0-2])\.\d{4}$/);static YYYYMMDD=new gt("YYYYMMDD",/^\d{4}(0[1-9]|1[0-2])(0[1-9]|[1-2][0-9]|3[0-1])$/);format;regex;constructor(e,a){this.format=e,this.regex=a,gt.allInstances.push(this)}isValid(e){return this.regex.test(e)}static values(){return gt.allInstances}static detect(e){const a=[];for(const n of gt.allInstances)n.isValid(e)&&a.push(n);return a.length>0?a:void 0}static detectMulti(e){const a={};for(const o of e){const s=gt.detect(o);if(s)for(const r of s)a[r.format]=(a[r.format]||0)+1;else return}const n=[];for(const o of gt.allInstances)a[o.format]===e.length&&n.push(o);return n.length>0?n:void 0}}const Us=0;class ot{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static YYYYMMDD=new ot(1,"YYYYMMDD","yyyy_mm_dd",!0);static MMDDYYYY=new ot(2,"MMDDYYYY","mm_dd_yyyy",!1);static DDMMYYYY=new ot(3,"DDMMYYYY","dd_mm_yyyy",!1);static Default=ot.YYYYMMDD;type;typeName;key;isMonthAfterYear;constructor(e,a,n,o){this.type=e,this.typeName=a,this.key=n,this.isMonthAfterYear=o,ot.allInstances.push(this),ot.allInstancesByType[e]=this,ot.allInstancesByTypeName[a]=this}static values(){return ot.allInstances}static all(){return ot.allInstancesByTypeName}static valueOf(e){return ot.allInstancesByType[e]}}class Je{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static YYYYMMDD=new Je(1,"YYYYMMDD","yyyy_mm_dd",!0);static MMDDYYYY=new Je(2,"MMDDYYYY","mm_dd_yyyy",!1);static DDMMYYYY=new Je(3,"DDMMYYYY","dd_mm_yyyy",!1);static Default=Je.YYYYMMDD;type;typeName;key;isMonthAfterYear;constructor(e,a,n,o){this.type=e,this.typeName=a,this.key=n,this.isMonthAfterYear=o,Je.allInstances.push(this),Je.allInstancesByType[e]=this,Je.allInstancesByTypeName[a]=this}static values(){return Je.allInstances}static all(){return Je.allInstancesByTypeName}static valueOf(e){return Je.allInstancesByType[e]}}class Dt{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static HHMMSS=new Dt(1,"HHMMSS","hh_mm_ss",!0,null);static AHHMMSS=new Dt(2,"AHHMMSS","a_hh_mm_ss",!1,!0);static HHMMSSA=new Dt(3,"HHMMSSA","hh_mm_ss_a",!1,!1);static Default=Dt.HHMMSS;type;typeName;key;is24HourFormat;isMeridiemIndicatorFirst;constructor(e,a,n,o,s){this.type=e,this.typeName=a,this.key=n,this.is24HourFormat=o,this.isMeridiemIndicatorFirst=s,Dt.allInstances.push(this),Dt.allInstancesByType[e]=this,Dt.allInstancesByTypeName[a]=this}static values(){return Dt.allInstances}static all(){return Dt.allInstancesByTypeName}static valueOf(e){return Dt.allInstancesByType[e]}}class St{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static HHMM=new St(1,"HHMM","hh_mm",!0,null);static AHHMM=new St(2,"AHHMM","a_hh_mm",!1,!0);static HHMMA=new St(3,"HHMMA","hh_mm_a",!1,!1);static Default=St.HHMM;type;typeName;key;is24HourFormat;isMeridiemIndicatorFirst;constructor(e,a,n,o,s){this.type=e,this.typeName=a,this.key=n,this.is24HourFormat=o,this.isMeridiemIndicatorFirst=s,St.allInstances.push(this),St.allInstancesByType[e]=this,St.allInstancesByTypeName[a]=this}static values(){return St.allInstances}static all(){return St.allInstancesByTypeName}static valueOf(e){return St.allInstancesByType[e]}}var ha=(t=>(t[t.Normal=0]="Normal",t[t.TrendAnalysis=1]="TrendAnalysis",t[t.AssetTrends=2]="AssetTrends",t[t.InsightsExplore=3]="InsightsExplore",t))(ha||{});class te{static allInstances=[];static allInstancesByType={};static All=new te(0,"All",!1,!1,0,1,2,3);static Today=new te(1,"Today",!1,!1,0,3);static Yesterday=new te(2,"Yesterday",!1,!1,0,3);static LastSevenDays=new te(3,"Recent 7 days",!1,!1,0,2,3);static LastThirtyDays=new te(4,"Recent 30 days",!1,!1,0,2,3);static ThisWeek=new te(5,"This week",!1,!1,0,2,3);static LastWeek=new te(6,"Last week",!1,!1,0,2,3);static ThisMonth=new te(7,"This month",!1,!1,0,2,3);static LastMonth=new te(8,"Last month",!1,!1,0,2,3);static ThisYear=new te(9,"This year",!1,!1,0,1,2,3);static LastYear=new te(10,"Last year",!1,!1,0,1,2,3);static ThisFiscalYear=new te(11,"This fiscal year",!1,!0,0,1,2,3);static LastFiscalYear=new te(12,"Last fiscal year",!1,!0,0,1,2,3);static CurrentBillingCycle=new te(51,"Current Billing Cycle",!0,!0,0);static PreviousBillingCycle=new te(52,"Previous Billing Cycle",!0,!0,0);static RecentTwelveMonths=new te(101,"Recent 12 months",!1,!1,1,2,3);static RecentTwentyFourMonths=new te(102,"Recent 24 months",!1,!1,1,2,3);static RecentThirtySixMonths=new te(103,"Recent 36 months",!1,!1,1,2,3);static RecentTwoYears=new te(104,"Recent 2 years",!1,!1,1,2,3);static RecentThreeYears=new te(105,"Recent 3 years",!1,!1,1,2,3);static RecentFiveYears=new te(106,"Recent 5 years",!1,!1,1,2,3);static Custom=new te(255,"Custom Date",!1,!0,0,1,2,3);type;name;isBillingCycle;isUserCustomRange;availableScenes;constructor(e,a,n,o,...s){if(this.type=e,this.name=a,this.isBillingCycle=n,this.isUserCustomRange=o,this.availableScenes={},s)for(const r of s)this.availableScenes[r]=!0;te.allInstances.push(this),te.allInstancesByType[e]=this}isAvailableForScene(e){return this.availableScenes[e]||!1}static values(){return te.allInstances}static valueOf(e){return te.allInstancesByType[e]}static isAvailableForScene(e,a){return te.allInstancesByType[e]?.isAvailableForScene(a)||!1}static isBillingCycle(e){return te.allInstancesByType[e]?.isBillingCycle||!1}}class Ca{static allInstances=[];static allInstancesByValue={};static HHColonMM=new Ca("±HH:mm",!1,"Z",/^[+-]?([0-1][0-9]|2[0-3]):[0-5][0-9]$/);static HHMM=new Ca("±HHmm",!1,"ZZ",/^[+-]?([0-1][0-9]|2[0-3])[0-5][0-9]$/);static IANAName=new Ca("IANA Time Zone Name",!0,"zzz",/^[A-Za-z_]+\/[A-Za-z_]+(\/[A-Za-z_]+)?$/);name;nameSupportedI18n;value;regex;constructor(e,a,n,o){this.name=e,this.nameSupportedI18n=a,this.value=n,this.regex=o,Ca.allInstances.push(this),Ca.allInstancesByValue[n]=this}isValid(e){return this.regex.test(e)}static values(){return Ca.allInstances}static valueOf(e){return Ca.allInstancesByValue[e]}static detect(e){const a=[];for(const n of Ca.allInstances)n.isValid(e)&&a.push(n);return a.length>0?a:void 0}static detectMulti(e){const a={};for(const o of e){const s=Ca.detect(o);if(s)for(const r of s)a[r.value]=(a[r.value]||0)+1;else return}const n=[];for(const o of Ca.allInstances)a[o.value]===e.length&&n.push(o);return n.length>0?n:void 0}}class ia{static ApplicationTimezone=new ia(0,"Application Timezone");static TransactionTimezone=new ia(1,"Transaction Timezone");static Default=ia.ApplicationTimezone;type;name;constructor(e,a){this.type=e,this.name=a}}var Hn=(t=>(t[t.None=0]="None",t[t.Symbol=1]="Symbol",t[t.Code=2]="Code",t[t.Unit=3]="Unit",t[t.Name=4]="Name",t))(Hn||{}),yo=(t=>(t[t.BeforeAmount=0]="BeforeAmount",t[t.AfterAmount=1]="AfterAmount",t))(yo||{});class ct{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static LanguageDefaultType=0;static None=new ct(1,"None","None",2,0,void 0,"");static SymbolBeforeAmount=new ct(2,"SymbolBeforeAmount","Currency Symbol",2,1,0," ");static SymbolAfterAmount=new ct(3,"SymbolAfterAmount","Currency Symbol",2,1,1," ");static SymbolBeforeAmountWithoutSpace=new ct(4,"SymbolBeforeAmountWithoutSpace","Currency Symbol",2,1,0,"");static SymbolAfterAmountWithoutSpace=new ct(5,"SymbolAfterAmountWithoutSpace","Currency Symbol",2,1,1,"");static CodeBeforeAmount=new ct(6,"CodeBeforeAmount","Currency Code",2,2,0," ");static CodeAfterAmount=new ct(7,"CodeAfterAmount","Currency Code",2,2,1," ");static UnitBeforeAmount=new ct(8,"UnitBeforeAmount","Currency Unit",2,3,0," ");static UnitAfterAmount=new ct(9,"UnitAfterAmount","Currency Unit",2,3,1," ");static NameBeforeAmount=new ct(10,"NameBeforeAmount","Currency Name",2,4,0," ");static NameAfterAmount=new ct(11,"NameAfterAmount","Currency Name",2,4,1," ");static Default=ct.SymbolBeforeAmount;type;typeName;name;fraction;symbol;location;separator;constructor(e,a,n,o,s,r,l){this.type=e,this.typeName=a,this.name=n,this.fraction=o,this.symbol=s,this.location=r,this.separator=l,ct.allInstances.push(this),ct.allInstancesByType[e]=this,ct.allInstancesByTypeName[a]=this}static values(){return ct.allInstances}static valueOf(e){return ct.allInstancesByType[e]}static parse(e){return ct.allInstancesByTypeName[e]}}class Ma{static allInstances=[];static Name=new Ma(0,"Currency Name");static CurrencyCode=new Ma(1,"Currency Code");static ExchangeRate=new Ma(2,"Exchange Rate");static Default=Ma.Name;type;name;constructor(e,a){this.type=e,this.name=a,Ma.allInstances.push(this)}static values(){return Ma.allInstances}}var Ue=(t=>(t[t.CategoricalAnalysis=0]="CategoricalAnalysis",t[t.TrendAnalysis=1]="TrendAnalysis",t[t.AssetTrends=2]="AssetTrends",t))(Ue||{}),cc=(t=>(t[t.Sum=0]="Sum",t[t.Last=1]="Last",t))(cc||{});class _t{static allInstancesForAll=[];static allInstancesForDesktop=[];static allInstancesByType={};static Pie=new _t(0,"Pie Chart",!1);static Bar=new _t(1,"Bar Chart",!1);static Radar=new _t(2,"Radar Chart",!0);static Default=_t.Pie;type;name;desktopOnly=!1;constructor(e,a,n){this.type=e,this.name=a,this.desktopOnly=n,n||_t.allInstancesForAll.push(this),_t.allInstancesForDesktop.push(this),_t.allInstancesByType[e]=this}static isValidType(e){return!!_t.allInstancesByType[e]}static values(e){return e?_t.allInstancesForDesktop:_t.allInstancesForAll}}class Et{static allInstances=[];static allInstancesByType={};static Area=new Et(0,"Area Chart");static Column=new Et(1,"Column Chart");static Bubble=new Et(2,"Bubble Chart");static Default=Et.Column;type;name;constructor(e,a){this.type=e,this.name=a,Et.allInstances.push(this),Et.allInstancesByType[e]=this}static isValidType(e){return!!Et.allInstancesByType[e]}static values(){return Et.allInstances}}class yn{static allInstances=[];static Area=new yn(0,"Area Chart");static Column=new yn(1,"Column Chart");static Candlestick=new yn(2,"Candlestick Chart");static Default=Et.Column;type;name;constructor(e,a){this.type=e,this.name=a,yn.allInstances.push(this)}static values(){return yn.allInstances}}class K{static allInstancesForAll=[];static allInstancesForDesktop=[];static allInstancesByType={};static Overview=new K(16,"Overview",!0,!0,0);static OutflowsByAccount=new K(11,"Outflows By Account",!1,!1,0,1);static ExpenseByAccount=new K(0,"Expense By Account",!1,!1,0,1);static ExpenseByPrimaryCategory=new K(1,"Expense By Primary Category",!1,!1,0,1);static ExpenseBySecondaryCategory=new K(2,"Expense By Secondary Category",!1,!1,0,1);static InflowsByAccount=new K(12,"Inflows By Account",!1,!1,0,1);static IncomeByAccount=new K(3,"Income By Account",!1,!1,0,1);static IncomeByPrimaryCategory=new K(4,"Income By Primary Category",!1,!1,0,1);static IncomeBySecondaryCategory=new K(5,"Income By Secondary Category",!1,!1,0,1);static AccountTotalAssets=new K(6,"Account Total Assets",!1,!1,0,2);static AccountTotalLiabilities=new K(7,"Account Total Liabilities",!1,!1,0,2);static TotalOutflows=new K(13,"Total Outflows",!1,!1,1);static TotalExpense=new K(8,"Total Expense",!1,!1,1);static TotalInflows=new K(14,"Total Inflows",!1,!1,1);static TotalIncome=new K(9,"Total Income",!1,!1,1);static NetCashFlow=new K(15,"Net Cash Flow",!1,!1,1);static NetIncome=new K(10,"Net Income",!1,!1,1);static NetWorth=new K(17,"Net Worth",!1,!1,2);static Default=K.ExpenseByPrimaryCategory;static DefaultForAssetTrends=K.NetWorth;type;name;desktopOnly=!1;specialChart=!1;availableAnalysisTypes;constructor(e,a,n,o,...s){if(this.type=e,this.name=a,this.desktopOnly=n,this.specialChart=o,this.availableAnalysisTypes={},s)for(const r of s)this.availableAnalysisTypes[r]=!0;n||K.allInstancesForAll.push(this),K.allInstancesForDesktop.push(this),K.allInstancesByType[e]=this}isAvailableAnalysisType(e){return this.availableAnalysisTypes[e]||!1}static values(e,a){const n=a?K.allInstancesForDesktop:K.allInstancesForAll;if(e===void 0)return n;const o=[];for(const s of n)s.isAvailableAnalysisType(e)&&o.push(s);return o}static valueOf(e){return K.allInstancesByType[e]}static isAvailableForAnalysisType(e,a){return K.allInstancesByType[e]?.isAvailableAnalysisType(a)||!1}}class Wt{static allInstances=[];static allInstancesByType={};static Amount=new Wt(0,"Amount","Sort by Amount");static DisplayOrder=new Wt(1,"Display Order","Sort by Display Order");static Name=new Wt(2,"Name","Sort by Name");static Default=Wt.Amount;type;name;fullName;constructor(e,a,n){this.type=e,this.name=a,this.fullName=n,Wt.allInstances.push(this),Wt.allInstancesByType[e]=this}static values(){return Wt.allInstances}static valueOf(e){return Wt.allInstancesByType[e]}}class tt{static allInstances=[];static allInstancesByType={};static Day=new tt(4,"Daily","Aggregate by Day",2);static Month=new tt(0,"Monthly","Aggregate by Month",1,2);static Quarter=new tt(1,"Quarterly","Aggregate by Quarter",1,2);static Year=new tt(2,"Yearly","Aggregate by Year",1,2);static FiscalYear=new tt(3,"FiscalYearly","Aggregate by Fiscal Year",1,2);static Default=tt.Month;type;shortName;fullName;availableAnalysisTypes;constructor(e,a,n,...o){if(this.type=e,this.shortName=a,this.fullName=n,this.availableAnalysisTypes={},o)for(const s of o)this.availableAnalysisTypes[s]=!0;tt.allInstances.push(this),tt.allInstancesByType[e]=this}isAvailableAnalysisType(e){return this.availableAnalysisTypes[e]||!1}static values(e){const a=tt.allInstances;if(e===void 0)return a;const n=[];for(const o of a)o.isAvailableAnalysisType(e)&&n.push(o);return n}static valueOf(e){return tt.allInstancesByType[e]}}const Ts=te.ThisMonth,vs=te.ThisYear,As=te.ThisYear;var Rt=(t=>(t.First="first",t.And="and",t.Or="or",t))(Rt||{});const xi={first:0,or:1,and:2};var tn=(t=>(t.TransactionType="transactionType",t.TransactionCategory="transactionCategory",t.SourceAccount="sourceAccount",t.DestinationAccount="destinationAccount",t.SourceAmount="sourceAmount",t.DestinationAmount="destinationAmount",t.TransactionTag="transactionTag",t.Description="description",t))(tn||{});class $e{static allInstances=[];static allInstancesByValue={};static TransactionType=new $e("Transaction Type","transactionType");static TransactionCategory=new $e("Category","transactionCategory");static SourceAccount=new $e("Source Account","sourceAccount");static DestinationAccount=new $e("Destination Account","destinationAccount");static SourceAmount=new $e("Amount","sourceAmount");static DestinationAmount=new $e("Transfer In Amount","destinationAmount");static TransactionTag=new $e("Tags","transactionTag");static Description=new $e("Description","description");name;value;constructor(e,a){this.name=e,this.value=a,$e.allInstances.push(this),$e.allInstancesByValue[a]=this}static values(){return $e.allInstances}static valueOf(e){return $e.allInstancesByValue[e]}}var le=(t=>(t.In="in",t.GreaterThan="greaterThan",t.LessThan="lessThan",t.Equals="equals",t.NotEquals="notEquals",t.Between="between",t.NotBetween="notBetween",t.HasAny="hasAny",t.HasAll="hasAll",t.NotHasAny="notHasAny",t.NotHasAll="notHasAll",t.IsEmpty="isEmpty",t.IsNotEmpty="isNotEmpty",t.Contains="contains",t.NotContains="notContains",t.StartsWith="startsWith",t.NotStartsWith="notStartsWith",t.EndsWith="endsWith",t.NotEndsWith="notEndsWith",t))(le||{});class pt{static allInstances=[];static allInstancesByValue={};static In=new pt("In","in");static GreaterThan=new pt("Greater than","greaterThan");static LessThan=new pt("Less than","lessThan");static Equals=new pt("Equal to","equals");static NotEquals=new pt("Not equal to","notEquals");static Between=new pt("Between","between");static NotBetween=new pt("Not between","notBetween");static HasAny=new pt("Has any","hasAny");static HasAll=new pt("Has all","hasAll");static NotHasAny=new pt("Not has any","notHasAny");static NotHasAll=new pt("Not has all","notHasAll");static IsEmpty=new pt("Is empty","isEmpty");static IsNotEmpty=new pt("Is not empty","isNotEmpty");static Contains=new pt("Contains","contains");static NotContains=new pt("Not contains","notContains");static StartsWith=new pt("Starts with","startsWith");static NotStartsWith=new pt("Not starts with","notStartsWith");static EndsWith=new pt("Ends with","endsWith");static NotEndsWith=new pt("Not ends with","notEndsWith");name;value;constructor(e,a){this.name=e,this.value=a,pt.allInstances.push(this),pt.allInstancesByValue[a]=this}static values(){return pt.allInstances}static valueOf(e){return pt.allInstancesByValue[e]}}class aa{static allInstances=[];static allInstancesByValue={};static Pie=new aa("Pie Chart","pie",!1);static Radar=new aa("Radar Chart","radar",!1);static Default=aa.Pie;name;value;seriesDimensionRequired;constructor(e,a,n){this.name=e,this.value=a,this.seriesDimensionRequired=n,aa.allInstances.push(this),aa.allInstancesByValue[a]=this}static values(){return aa.allInstances}static valueOf(e){return aa.allInstancesByValue[e]}}class Ie{static allInstances=[];static allInstancesByValue={};static None=new Ie("None","none");static Query=new Ie("Query","query");static DateTime=new Ie("Transaction Time","dateTime");static DateTimeByYearMonthDay=new Ie("Transaction Date","dateTimeByYearMonthDay");static DateTimeByYearMonth=new Ie("Transaction Year-Month","dateTimeByYearMonth");static DateTimeByYearQuarter=new Ie("Transaction Year-Quarter","dateTimeByYearQuarter");static DateTimeByYear=new Ie("Transaction Year","dateTimeByYear");static DateTimeByFiscalYear=new Ie("Transaction Fiscal Year","dateTimeByFiscalYear");static DateTimeByDayOfWeek=new Ie("Transaction Day of Week","dateTimeByDayOfWeek");static DateTimeByDayOfMonth=new Ie("Transaction Day of Month","dateTimeByDayOfMonth");static DateTimeByMonthOfYear=new Ie("Transaction Month of Year","dateTimeByMonthOfYear");static DateTimeByQuarterOfYear=new Ie("Transaction Quarter of Year","dateTimeByQuarterOfYear");static TransactionType=new Ie("Transaction Type","transactionType");static SourceAccount=new Ie("Source Account","sourceAccount");static SourceAccountCategory=new Ie("Source Account Category","sourceAccountCategory");static SourceAccountCurrency=new Ie("Source Account Currency","sourceAccountCurrency");static DestinationAccount=new Ie("Destination Account","destinationAccount");static DestinationAccountCategory=new Ie("Destination Account Category","destinationAccountCategory");static DestinationAccountCurrency=new Ie("Destination Account Currency","destinationAccountCurrency");static PrimaryCategory=new Ie("Primary Category","primaryCategory");static SecondaryCategory=new Ie("Secondary Category","secondaryCategory");static SourceAmount=new Ie("Amount","sourceAmount");static DestinationAmount=new Ie("Transfer In Amount","destinationAmount");static CategoryDimensionDefault=Ie.Query;static SeriesDimensionDefault=Ie.None;name;value;constructor(e,a){this.name=e,this.value=a,Ie.allInstances.push(this),Ie.allInstancesByValue[a]=this}static values(){return Ie.allInstances}static valueOf(e){return Ie.allInstancesByValue[e]}}class Mt{static allInstances=[];static allInstancesByValue={};static TransactionCount=new Mt("Transaction Count","transactionCount",!1);static SourceAmountSum=new Mt("Total Amount","sourceAmountSum",!0);static SourceAmountAverage=new Mt("Average Amount","sourceAmountAverage",!0);static SourceAmountMedian=new Mt("Median Amount","sourceAmountMedian",!0);static SourceAmountMinimum=new Mt("Minimum Amount","sourceAmountMinimum",!0);static SourceAmountMaximum=new Mt("Maximum Amount","sourceAmountMaximum",!0);static Default=Mt.SourceAmountSum;name;value;isAmount;constructor(e,a,n){this.name=e,this.value=a,this.isAmount=n,Mt.allInstances.push(this),Mt.allInstancesByValue[a]=this}static values(){return Mt.allInstances}static valueOf(e){return Mt.allInstancesByValue[e]}}const Is=te.ThisMonth,as={AED:{code:"AED",fraction:2,symbol:{normal:"Dh",plural:"Dhs"},unit:"Dirham"},AFN:{code:"AFN",fraction:2,symbol:{normal:"Af.",plural:"Afs."},unit:"Afghani"},ALL:{code:"ALL",fraction:2,symbol:{normal:"L"},unit:"Lek"},AMD:{code:"AMD",fraction:2,symbol:{normal:"֏"},unit:"Dram"},ANG:{code:"ANG",fraction:2,symbol:{normal:"ƒ"},unit:"Guilder"},AOA:{code:"AOA",fraction:2,symbol:{normal:"Kz"},unit:"Kwanza"},ARS:{code:"ARS",fraction:2,symbol:{normal:"$"},unit:"Peso"},AUD:{code:"AUD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},AWG:{code:"AWG",fraction:2,symbol:{normal:"Afl."},unit:"Florin"},AZN:{code:"AZN",fraction:2,symbol:{normal:"₼"},unit:"Manat"},BAM:{code:"BAM",fraction:2,symbol:{normal:"KM"},unit:"Mark"},BBD:{code:"BBD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},BDT:{code:"BDT",fraction:2,symbol:{normal:"৳"},unit:"Taka"},BGN:{code:"BGN",fraction:2,symbol:{normal:"лв"},unit:"Lev"},BHD:{code:"BHD",fraction:3,symbol:{normal:"BD"},unit:"Dinar"},BIF:{code:"BIF",fraction:0,symbol:{normal:"FBu"},unit:"Franc"},BMD:{code:"BMD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},BND:{code:"BND",fraction:2,symbol:{normal:"$"},unit:"Dollar"},BOB:{code:"BOB",fraction:2,symbol:{normal:"Bs"},unit:"Boliviano"},BRL:{code:"BRL",fraction:2,symbol:{normal:"R$"},unit:"Real"},BSD:{code:"BSD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},BTN:{code:"BTN",fraction:2,symbol:{normal:"Nu."},unit:"Ngultrum"},BWP:{code:"BWP",fraction:2,symbol:{normal:"P"},unit:"Pula"},BYN:{code:"BYN",fraction:2,symbol:{normal:"Rbl",plural:"Rbls"},unit:"Ruble"},BZD:{code:"BZD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},CAD:{code:"CAD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},CDF:{code:"CDF",fraction:2,symbol:{normal:"FC"},unit:"Franc"},CHF:{code:"CHF",fraction:2,symbol:{normal:"CHF"},unit:"Franc"},CLP:{code:"CLP",fraction:0,symbol:{normal:"$"},unit:"Peso"},CNY:{code:"CNY",fraction:2,symbol:{normal:"¥"},unit:"Yuan"},COP:{code:"COP",fraction:2,symbol:{normal:"$"},unit:"Peso"},CRC:{code:"CRC",fraction:2,symbol:{normal:"₡"},unit:"Colon"},CUC:{code:"CUC",fraction:2,symbol:{normal:"$"},unit:"Peso"},CUP:{code:"CUP",fraction:2,symbol:{normal:"$"},unit:"Peso"},CVE:{code:"CVE",fraction:2,symbol:{normal:"$"},unit:"Escudo"},CZK:{code:"CZK",fraction:2,symbol:{normal:"Kč"},unit:"Koruna"},DJF:{code:"DJF",fraction:0,symbol:{normal:"Fdj"},unit:"Franc"},DKK:{code:"DKK",fraction:2,symbol:{normal:"kr."},unit:"Krone"},DOP:{code:"DOP",fraction:2,symbol:{normal:"$"},unit:"Peso"},DZD:{code:"DZD",fraction:2,symbol:{normal:"DA"},unit:"Dinar"},EGP:{code:"EGP",fraction:2,symbol:{normal:"£"},unit:"Pound"},ERN:{code:"ERN",fraction:2,symbol:{normal:"Nfk"},unit:"Nakfa"},ETB:{code:"ETB",fraction:2,symbol:{normal:"Br"},unit:"Birr"},EUR:{code:"EUR",fraction:2,symbol:{normal:"€"},unit:"Euro"},FJD:{code:"FJD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},FKP:{code:"FKP",fraction:2,symbol:{normal:"£"},unit:"Pound"},GBP:{code:"GBP",fraction:2,symbol:{normal:"£"},unit:"Pound"},GEL:{code:"GEL",fraction:2,symbol:{normal:"ლ"},unit:"Lari"},GHS:{code:"GHS",fraction:2,symbol:{normal:"GH₵"},unit:"Cedi"},GIP:{code:"GIP",fraction:2,symbol:{normal:"£"},unit:"Pound"},GMD:{code:"GMD",fraction:2,symbol:{normal:"D"},unit:"Dalasi"},GNF:{code:"GNF",fraction:0,symbol:{normal:"FG"},unit:"Franc"},GTQ:{code:"GTQ",fraction:2,symbol:{normal:"Q"},unit:"Quetzal"},GYD:{code:"GYD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},HKD:{code:"HKD",fraction:2,symbol:{normal:"HK$"},unit:"Dollar"},HNL:{code:"HNL",fraction:2,symbol:{normal:"L"},unit:"Lempira"},HTG:{code:"HTG",fraction:2,symbol:{normal:"G"},unit:"Gourde"},HUF:{code:"HUF",fraction:2,symbol:{normal:"Ft"},unit:"Forint"},IDR:{code:"IDR",fraction:2,symbol:{normal:"Rp"},unit:"Rupiah"},ILS:{code:"ILS",fraction:2,symbol:{normal:"₪"},unit:"Shekel"},INR:{code:"INR",fraction:2,symbol:{normal:"₹"},unit:"Rupee"},IQD:{code:"IQD",fraction:3,symbol:{normal:"ID"},unit:"Dinar"},IRR:{code:"IRR",fraction:2,symbol:{normal:"Rl",plural:"Rls"},unit:"Rial"},ISK:{code:"ISK",fraction:0,symbol:{normal:"kr"},unit:"Krona"},JMD:{code:"JMD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},JOD:{code:"JOD",fraction:3,symbol:{normal:"د.أ"},unit:"Dinar"},JPY:{code:"JPY",fraction:0,symbol:{normal:"¥"},unit:"Yen"},KES:{code:"KES",fraction:2,symbol:{normal:"/="},unit:"Shilling"},KGS:{code:"KGS",fraction:2,symbol:{normal:"⃀"},unit:"Som"},KHR:{code:"KHR",fraction:2,symbol:{normal:"៛"},unit:"Riel"},KMF:{code:"KMF",fraction:0,symbol:{normal:"CF"},unit:"Franc"},KPW:{code:"KPW",fraction:2,symbol:{normal:"₩"},unit:"Won"},KRW:{code:"KRW",fraction:0,symbol:{normal:"₩"},unit:"Won"},KWD:{code:"KWD",fraction:3,symbol:{normal:"KD"},unit:"Dinar"},KYD:{code:"KYD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},KZT:{code:"KZT",fraction:2,symbol:{normal:"₸"},unit:"Tenge"},LAK:{code:"LAK",fraction:2,symbol:{normal:"₭"},unit:"Kip"},LBP:{code:"LBP",fraction:2,symbol:{normal:"LL"},unit:"Pound"},LKR:{code:"LKR",fraction:2,symbol:{normal:"රු"},unit:"Rupee"},LRD:{code:"LRD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},LSL:{code:"LSL",fraction:2,symbol:{normal:"L",plural:"M"},unit:"Loti"},LYD:{code:"LYD",fraction:3,symbol:{normal:"LD"},unit:"Dinar"},MAD:{code:"MAD",fraction:2,symbol:{normal:"DH"},unit:"Dirham"},MDL:{code:"MDL",fraction:2,symbol:{normal:"L"},unit:"Leu"},MGA:{code:"MGA",fraction:2,symbol:{normal:"Ar"},unit:"Ariary"},MKD:{code:"MKD",fraction:2,symbol:{normal:"DEN"},unit:"Denar"},MMK:{code:"MMK",fraction:2,symbol:{normal:"K",plural:"Ks."},unit:"Kyat"},MNT:{code:"MNT",fraction:2,symbol:{normal:"₮"},unit:"Tugrik"},MOP:{code:"MOP",fraction:2,symbol:{normal:"$"},unit:"Pataca"},MRU:{code:"MRU",fraction:2,symbol:{normal:"UM"},unit:"Ouguiya"},MUR:{code:"MUR",fraction:2,symbol:{normal:"Re.",plural:"Rs."},unit:"Rupee"},MVR:{code:"MVR",fraction:2,symbol:{normal:"Rf."},unit:"Rufiyaa"},MWK:{code:"MWK",fraction:2,symbol:{normal:"K"},unit:"Kwacha"},MXN:{code:"MXN",fraction:2,symbol:{normal:"$"},unit:"Peso"},MYR:{code:"MYR",fraction:2,symbol:{normal:"RM"},unit:"Ringgit"},MZN:{code:"MZN",fraction:2,symbol:{normal:"MT"},unit:"Metical"},NAD:{code:"NAD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},NGN:{code:"NGN",fraction:2,symbol:{normal:"₦"},unit:"Naira"},NIO:{code:"NIO",fraction:2,symbol:{normal:"C$"},unit:"Cordoba"},NOK:{code:"NOK",fraction:2,symbol:{normal:"kr"},unit:"Krone"},NPR:{code:"NPR",fraction:2,symbol:{normal:"रु"},unit:"Rupee"},NZD:{code:"NZD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},OMR:{code:"OMR",fraction:3,symbol:{normal:"R.O"},unit:"Rial"},PAB:{code:"PAB",fraction:2,symbol:{normal:"B/."},unit:"Balboa"},PEN:{code:"PEN",fraction:2,symbol:{normal:"S/"},unit:"Sol"},PGK:{code:"PGK",fraction:2,symbol:{normal:"K"},unit:"Kina"},PHP:{code:"PHP",fraction:2,symbol:{normal:"₱"},unit:"Peso"},PKR:{code:"PKR",fraction:2,symbol:{normal:"Re.",plural:"Rs."},unit:"Rupee"},PLN:{code:"PLN",fraction:2,symbol:{normal:"zł"},unit:"Zloty"},PYG:{code:"PYG",fraction:0,symbol:{normal:"₲"},unit:"Guarani"},QAR:{code:"QAR",fraction:2,symbol:{normal:"QR"},unit:"Rial"},RON:{code:"RON",fraction:2,symbol:{normal:"L"},unit:"Leu"},RSD:{code:"RSD",fraction:2,symbol:{normal:"din."},unit:"Dinar"},RUB:{code:"RUB",fraction:2,symbol:{normal:"₽"},unit:"Ruble"},RWF:{code:"RWF",fraction:0,symbol:{normal:"FRw"},unit:"Franc"},SAR:{code:"SAR",fraction:2,symbol:{normal:"SAR"},unit:"Riyal"},SBD:{code:"SBD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},SCR:{code:"SCR",fraction:2,symbol:{normal:"Re.",plural:"Rs."},unit:"Rupee"},SDG:{code:"SDG",fraction:2,symbol:{normal:"LS"},unit:"Pound"},SEK:{code:"SEK",fraction:2,symbol:{normal:"kr"},unit:"Krona"},SGD:{code:"SGD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},SHP:{code:"SHP",fraction:2,symbol:{normal:"£"},unit:"Pound"},SLE:{code:"SLE",fraction:2,symbol:{normal:"Le"},unit:"Leone"},SOS:{code:"SOS",fraction:2,symbol:{normal:"Sh.So."},unit:"Shilling"},SRD:{code:"SRD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},SSP:{code:"SSP",fraction:2,symbol:{normal:"SS£"},unit:"Pound"},STN:{code:"STN",fraction:2,symbol:{normal:"Db"},unit:"Dobra"},SVC:{code:"SVC",fraction:2,symbol:{normal:"₡"},unit:"Colon"},SYP:{code:"SYP",fraction:2,symbol:{normal:"LS"},unit:"Pound"},SZL:{code:"SZL",fraction:2,symbol:{normal:"E"},unit:"Lilangeni"},THB:{code:"THB",fraction:2,symbol:{normal:"฿"},unit:"Baht"},TJS:{code:"TJS",fraction:2,symbol:{normal:"SM"},unit:"Somoni"},TMT:{code:"TMT",fraction:2,symbol:{normal:"m"},unit:"Manat"},TND:{code:"TND",fraction:3,symbol:{normal:"DT"},unit:"Dinar"},TOP:{code:"TOP",fraction:2,symbol:{normal:"T$"},unit:"Paanga"},TRY:{code:"TRY",fraction:2,symbol:{normal:"₺"},unit:"Lira"},TTD:{code:"TTD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},TWD:{code:"TWD",fraction:2,symbol:{normal:"NT$"},unit:"Dollar"},TZS:{code:"TZS",fraction:2,symbol:{normal:"/="},unit:"Shilling"},UAH:{code:"UAH",fraction:2,symbol:{normal:"₴"},unit:"Hryvnia"},UGX:{code:"UGX",fraction:0,symbol:{normal:"/="},unit:"Shilling"},USD:{code:"USD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},UYU:{code:"UYU",fraction:2,symbol:{normal:"$"},unit:"Peso"},UZS:{code:"UZS",fraction:2,unit:"Sum"},VED:{code:"VED",fraction:2,symbol:{normal:"Bs.D"},unit:"Bolivar"},VES:{code:"VES",fraction:2,symbol:{normal:"Bs.S"},unit:"Bolivar"},VND:{code:"VND",fraction:0,symbol:{normal:"₫"},unit:"Dong"},VUV:{code:"VUV",fraction:0,symbol:{normal:"VT"},unit:"Vatu"},WST:{code:"WST",fraction:2,symbol:{normal:"$"},unit:"Tala"},XAF:{code:"XAF",fraction:0,symbol:{normal:"F.CFA"},unit:"Franc"},XCD:{code:"XCD",fraction:2,symbol:{normal:"$"},unit:"Dollar"},XOF:{code:"XOF",fraction:0,symbol:{normal:"F.CFA"},unit:"Franc"},XPF:{code:"XPF",fraction:0,symbol:{normal:"F"},unit:"Franc"},XSU:{code:"XSU",symbol:{normal:"S/."},unit:"Sucre"},YER:{code:"YER",fraction:2,symbol:{normal:"YRl",plural:"YRls"},unit:"Rial"},ZAR:{code:"ZAR",fraction:2,symbol:{normal:"R"},unit:"Rand"},ZMW:{code:"ZMW",fraction:2,symbol:{normal:"K"},unit:"Kwacha"},ZWG:{code:"ZWG",fraction:2,symbol:{normal:"ZiG"},unit:"ZiG"},ZWL:{code:"ZWL",fraction:2,symbol:{normal:"$"},unit:"Dollar"}},uc="¤",mc=as.USD.code,Tr="---";var wn=(t=>(t.String="string",t.Number="number",t.Boolean="boolean",t.StringBooleanMap="string_boolean_map",t))(wn||{});const ao={showAccountBalance:"boolean",showAmountInHomePage:"boolean",timezoneUsedForStatisticsInHomePage:"number",overviewAccountFilterInHomePage:"string_boolean_map",overviewTransactionCategoryFilterInHomePage:"string_boolean_map",itemsCountInTransactionListPage:"number",showTotalAmountInTransactionListPage:"boolean",showTagInTransactionListPage:"boolean",autoSaveTransactionDraft:"string",autoGetCurrentGeoLocation:"boolean",alwaysShowTransactionPicturesInMobileTransactionEditPage:"boolean",insightsExploreDefaultDateRangeType:"number",timezoneUsedForInsightsExplorePage:"number",totalAmountExcludeAccountIds:"string_boolean_map",currencySortByInExchangeRatesPage:"number","statistics.defaultChartDataType":"number","statistics.defaultTimezoneType":"number","statistics.defaultAccountFilter":"string_boolean_map","statistics.defaultTransactionCategoryFilter":"string_boolean_map","statistics.defaultSortingType":"number","statistics.defaultCategoricalChartType":"number","statistics.defaultCategoricalChartDataRangeType":"number","statistics.defaultTrendChartType":"number","statistics.defaultTrendChartDataRangeType":"number","statistics.defaultAssetTrendsChartType":"number","statistics.defaultAssetTrendsChartDataRangeType":"number"},On={debug:!1,theme:"auto",fontSize:1,timeZone:"",autoUpdateExchangeRatesData:!0,showAccountBalance:!0,swipeBack:!0,animate:!0,applicationLock:!1,applicationLockWebAuthn:!1,showAddTransactionButtonInDesktopNavbar:!0,showAmountInHomePage:!0,timezoneUsedForStatisticsInHomePage:ia.Default.type,overviewAccountFilterInHomePage:{},overviewTransactionCategoryFilterInHomePage:{},itemsCountInTransactionListPage:15,showTotalAmountInTransactionListPage:!0,showTagInTransactionListPage:!0,autoSaveTransactionDraft:"disabled",autoGetCurrentGeoLocation:!1,alwaysShowTransactionPicturesInMobileTransactionEditPage:!1,insightsExploreDefaultDateRangeType:Is.type,timezoneUsedForInsightsExplorePage:ia.Default.type,totalAmountExcludeAccountIds:{},currencySortByInExchangeRatesPage:Ma.Default.type,statistics:{defaultChartDataType:K.Default.type,defaultTimezoneType:ia.Default.type,defaultAccountFilter:{},defaultTransactionCategoryFilter:{},defaultSortingType:Wt.Default.type,defaultCategoricalChartType:_t.Default.type,defaultCategoricalChartDataRangeType:Ts.type,defaultTrendChartType:Et.Default.type,defaultTrendChartDataRangeType:vs.type,defaultAssetTrendsChartType:Et.Default.type,defaultAssetTrendsChartDataRangeType:As.type}},dc={currency:mc,firstDayOfWeek:mt.DefaultFirstDay.type},$o="ebk_app_settings",ho="ebk_current_language";function fc(){try{const t=localStorage.getItem($o)||"{}";return JSON.parse(t)}catch(t){return console.warn("settings in local storage is invalid",t),{}}}function Ga(){const t=fc();for(const e of jt(t))typeof On[e]=="object"&&(t[e]=Object.assign({},On[e],t[e]));return Object.assign({},On,t)}function gc(){return Object.assign({},dc)}function vr(t){const e=JSON.stringify(t);return localStorage.setItem($o,e)}function vt(t,e){if(!Object.prototype.hasOwnProperty.call(On,t))return;const a=Ga();return a[t]=e,vr(a)}function Aa(t,e,a){if(!Object.prototype.hasOwnProperty.call(On,t)||!Object.prototype.hasOwnProperty.call(On[t],e))return;const n=Ga();let o=n[t];return o||(o={}),o[e]=a,n[t]=o,vr(n)}function pc(){return Ga().debug}function gd(){return Ga().theme}function yc(){return Ga().timeZone}function cs(){return Ga().applicationLock}function pd(){return Ga().swipeBack}function yd(){return Ga().animate}function hc(){localStorage.removeItem($o)}function Tc(){return sessionStorage.getItem(ho)||""}function vc(t){if(!t){sessionStorage.removeItem(ho);return}sessionStorage.setItem(ho,t)}function Ac(t,e){pc()&&(e?console.debug("[ezBookkeeping Debug] "+t,e):console.debug("[ezBookkeeping Debug] "+t))}function Ic(t,e){e?console.info("[ezBookkeeping Info] "+t,e):console.info("[ezBookkeeping Info] "+t)}function bc(t,e){e?console.warn("[ezBookkeeping Warn] "+t,e):console.warn("[ezBookkeeping Warn] "+t)}function Cc(t,e){e?console.error("[ezBookkeeping Error] "+t,e):console.error("[ezBookkeeping Error] "+t)}const X={debug:Ac,info:Ic,warn:bc,error:Cc},Go="EBK_LOCK_SECRET_",Ba="ebk_user_token",Ks="ebk_user_webauthn_config",Ko="ebk_user_info",Ho="ebk_user_draft_transaction",Pa="ebk_user_session_token",en="ebk_user_session_encrypted_token",un="ebk_user_app_lock_state";function Wo(t){return vn.SHA256(Go+t).toString().substring(0,24)}function Vo(t,e){const a=vn.SHA256(`${Go}|${e.username}|${e.secret}`).toString();return vn.AES.encrypt(t,a).toString()}function Hs(t,e){const a=vn.SHA256(`${Go}|${e.username}|${e.secret}`).toString();return vn.AES.decrypt(t,a).toString(vn.enc.Utf8)}function Dc(){return!!localStorage.getItem(Ba)}function hd(){return Dc()?cs()?!!sessionStorage.getItem(un)&&!!sessionStorage.getItem(Pa):!0:!1}function bs(){return!!_a()}function _a(){const t=sessionStorage.getItem(un);if(!t)return null;const e=JSON.parse(t);return!e||!e.username||!e.secret?null:e}function Td(t,e,a){const n=localStorage.getItem(Ks);if(!n)throw new Error("WebAuthn credential is not set");if(JSON.parse(n).credentialId!==t)throw new Error("WebAuthn credential is invalid");const s=localStorage.getItem(Ba);if(!s)throw new Error("No token in local storage");const r={username:e,secret:a},l=Hs(s,r);sessionStorage.setItem(un,JSON.stringify(r)),sessionStorage.setItem(en,s),sessionStorage.setItem(Pa,l)}function vd(t,e){const a=localStorage.getItem(Ba);if(!a)throw new Error("No token in local storage");const n={username:t,secret:Wo(e)},o=Hs(a,n);sessionStorage.setItem(un,JSON.stringify(n)),sessionStorage.setItem(en,a),sessionStorage.setItem(Pa,o)}function Ad(t,e){const a=localStorage.getItem(Ba);if(!a)throw new Error("No token in local storage");const n={username:t,secret:Wo(e)},o=Vo(a,n);sessionStorage.setItem(un,JSON.stringify(n)),sessionStorage.setItem(en,o),sessionStorage.setItem(Pa,a),localStorage.setItem(Ba,o)}function Id(){const t=sessionStorage.getItem(Pa);if(!t)throw new Error("No token in session storage");localStorage.setItem(Ba,t),sessionStorage.removeItem(Pa),sessionStorage.removeItem(en),sessionStorage.removeItem(un)}function bd(t){const e=Wo(t),a=_a();return a?a&&e===a.secret:!1}function gn(){if(cs()){const t=sessionStorage.getItem(en),e=localStorage.getItem(Ba);if(!t||!e)return null;if(t===e)return sessionStorage.getItem(Pa);X.warn("encrypted token in local storage does not equal to the one in session storage, need to re-decrypt");const a=_a();if(!a)return null;const n=Hs(e,a);return sessionStorage.setItem(en,e),sessionStorage.setItem(Pa,n),n}else return localStorage.getItem(Ba)}function nn(t){if(Ke(t))if(cs()&&bs()){const e=_a(),a=Vo(t,e);sessionStorage.setItem(en,a),sessionStorage.setItem(Pa,t),localStorage.setItem(Ba,a)}else localStorage.setItem(Ba,t)}function Sc(){return!!Mc()}function Mc(){const t=localStorage.getItem(Ks);return t?JSON.parse(t).credentialId:void 0}function Cd(t){const e={credentialId:t};localStorage.setItem(Ks,JSON.stringify(e))}function Ln(){localStorage.removeItem(Ks)}function Nc(){const t=localStorage.getItem(Ko);return t?JSON.parse(t):null}function Lc(t){He(t)&&localStorage.setItem(Ko,JSON.stringify(t))}function Ar(){localStorage.removeItem(Ko)}function ki(){let t=localStorage.getItem(Ho);if(!t)return null;if(cs()){const e=_a();if(!e)return null;t=Hs(t,e)}return JSON.parse(t)}function wc(t){if(!He(t))return;let e=JSON.stringify(t);if(cs()){const a=_a();if(!a)return;e=Vo(e,a)}localStorage.setItem(Ho,e)}function Ir(){localStorage.removeItem(Ho)}function Ec(){sessionStorage.removeItem(Pa),sessionStorage.removeItem(en),sessionStorage.removeItem(un)}function En(t){t&&sessionStorage.removeItem(un),sessionStorage.removeItem(Pa),sessionStorage.removeItem(en),localStorage.removeItem(Ba),Ir(),Ar()}var pn=(t=>(t.LTR="ltr",t.RTL="rtl",t))(pn||{}),wt=(t=>(t[t.Gregorian=0]="Gregorian",t[t.Buddhist=1]="Buddhist",t[t.Chinese=2]="Chinese",t[t.Persian=3]="Persian",t))(wt||{});class zt{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static LanguageDefaultType=0;static Gregorian=new zt(1,"Gregorian","Gregorian",0);static Buddhist=new zt(2,"Buddhist","Buddhist",1);static GregorianWithChinese=new zt(3,"GregorianWithChinese","Gregorian with Chinese Calendar",0,2);static GregorianWithPersian=new zt(4,"GregorianWithPersian","Gregorian with Persian Calendar",0,3);static Default=zt.Gregorian;type;typeName;name;primaryCalendarType;secondaryCalendarType;constructor(e,a,n,o,s){this.type=e,this.typeName=a,this.name=n,this.primaryCalendarType=o,this.secondaryCalendarType=s,zt.allInstances.push(this),zt.allInstancesByType[e]=this,zt.allInstancesByTypeName[a]=this}static values(){return zt.allInstances}static valueOf(e){return zt.allInstancesByType[e]}static parse(e){return zt.allInstancesByTypeName[e]}}class $t{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static LanguageDefaultType=0;static Gregorian=new $t(1,"Gregorian","Gregorian",0);static Buddhist=new $t(2,"Buddhist","Buddhist",1);static Persian=new $t(3,"Persian","Persian",3);static Default=$t.Gregorian;type;typeName;name;calendarType;constructor(e,a,n,o){this.type=e,this.typeName=a,this.name=n,this.calendarType=o,$t.allInstances.push(this),$t.allInstancesByType[e]=this,$t.allInstancesByTypeName[a]=this}static values(){return $t.allInstances}static valueOf(e){return $t.allInstancesByType[e]}static parse(e){return $t.allInstancesByTypeName[e]}}class be{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static allDigitsToWesternArabic={};static allDigitsToNumeralSystem={};static LanguageDefaultType=0;static WesternArabicNumerals=new be(1,"WesternArabicNumerals","Western Arabic Numerals","0");static EasternArabicNumerals=new be(2,"EasternArabicNumerals","Eastern Arabic Numerals","٠");static PersianDigits=new be(3,"PersianDigits","Persian Digits","۰");static BurmeseNumerals=new be(4,"BurmeseNumerals","Burmese Numerals","၀");static DevanagariNumerals=new be(5,"DevanagariNumerals","Devanagari Numerals","०");static Default=be.WesternArabicNumerals;type;typeName;name;digitZero;doubleDigitZero;textualAllDigits;allDigits;digitsToWesternArabic={};constructor(e,a,n,o){this.type=e,this.typeName=a,this.name=n,this.digitZero=o,this.doubleDigitZero=o+o,this.allDigits=[],this.digitsToWesternArabic={};for(let s=0;s<10;s++){const r=String.fromCharCode(this.digitZero.charCodeAt(0)+s);this.allDigits.push(r),this.digitsToWesternArabic[r]=s,be.allDigitsToWesternArabic[r]=s,be.allDigitsToNumeralSystem[r]=this}this.textualAllDigits=this.allDigits.join(""),be.allInstances.push(this),be.allInstancesByType[e]=this,be.allInstancesByTypeName[a]=this}getAllDigits(){return this.allDigits.slice()}isDigit(e){return this.digitsToWesternArabic.hasOwnProperty(e)}getLocalizedDigit(e){return e<0||e>9?"":this.allDigits[e]}parseInt(e){if(!e)return Number.NaN;if(this.type===be.WesternArabicNumerals.type)return parseInt(e,10);{const a=this.replaceLocalizedDigitsToWesternArabicDigits(e);return parseInt(a,10)}}formatNumber(e){return Number.isNaN(e)||!Number.isFinite(e)?e.toString():this.type===be.WesternArabicNumerals.type?e.toString(10):e===0?this.digitZero:this.replaceWesternArabicDigitsToLocalizedDigits(e.toString(10))}replaceWesternArabicDigitsToLocalizedDigits(e){if(!e)return"";let a="";for(let n=0;n<e.length;n++){const o=e.charAt(n);if(be.WesternArabicNumerals.isDigit(o)){const s=be.WesternArabicNumerals.digitsToWesternArabic[o];a+=this.allDigits[s]}else a+=o}return a}replaceLocalizedDigitsToWesternArabicDigits(e){if(!e)return"";let a="";for(let n=0;n<e.length;n++){const o=e.charAt(n);if(this.isDigit(o)){const s=this.digitsToWesternArabic[o];a+=be.WesternArabicNumerals.allDigits[s]}else a+=o}return a}static values(){return be.allInstances}static valueOf(e){return be.allInstancesByType[e]}static parse(e){return be.allInstancesByTypeName[e]}static detect(e){return be.allDigitsToNumeralSystem[e]}static toNumber(e){return be.allDigitsToWesternArabic[e]}}class _e{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static LanguageDefaultType=0;static Dot=new _e(1,"Dot",".");static Comma=new _e(2,"Comma",",");static Default=_e.Dot;type;name;symbol;constructor(e,a,n){this.type=e,this.name=a,this.symbol=n,_e.allInstances.push(this),_e.allInstancesByType[e]=this,_e.allInstancesByTypeName[a]=this}static values(){return _e.allInstances}static valueOf(e){return _e.allInstancesByType[e]}static parse(e){return _e.allInstancesByTypeName[e]}}class it{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static LanguageDefaultType=0;static Dot=new it(1,"Dot",".");static Comma=new it(2,"Comma",",");static Space=new it(3,"Space"," ");static Apostrophe=new it(4,"Apostrophe","'");static Default=it.Comma;type;name;symbol;constructor(e,a,n){this.type=e,this.name=a,this.symbol=n,it.allInstances.push(this),it.allInstancesByType[e]=this,it.allInstancesByTypeName[a]=this}static values(){return it.allInstances}static valueOf(e){return it.allInstancesByType[e]}static parse(e){return it.allInstancesByTypeName[e]}}class Ut{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static LanguageDefaultType=0;static None=new Ut(1,"None","None",!1,e=>e.join(""));static ThousandsSeparator=new Ut(2,"ThousandsSeparator","Thousands Separator",!0,(e,a)=>{if(e.length<=3)return e.join("");let n="";for(let o=e.length-1,s=0;o>=0;o--,s++)s>0&&s%3===0&&(n=a+n),n=e[o]+n;return n});static IndianNumberGrouping=new Ut(3,"IndianNumberGrouping","Indian Number Grouping",!0,(e,a)=>{if(e.length<=3)return e.join("");let n="";const o=e.length;for(let s=o-1,r=0;s>=0;s--,r++)(r===3||r>3&&(r-3)%2===0)&&(n=a+n),n=e[s]+n;return n});static Default=Ut.ThousandsSeparator;type;typeName;name;enabled;format;constructor(e,a,n,o,s){this.type=e,this.typeName=a,this.name=n,this.enabled=o,this.format=s,Ut.allInstances.push(this),Ut.allInstancesByType[e]=this,Ut.allInstancesByTypeName[a]=this}static values(){return Ut.allInstances}static valueOf(e){return Ut.allInstancesByType[e]}static parse(e){return Ut.allInstancesByTypeName[e]}}class qt{static allInstances=[];static allInstancesByType={};static DotDecimalSeparator=new qt("1234.56",_e.Dot,void 0,/^-?[0-9]+(\.[0-9]+)?$/);static CommaDecimalSeparator=new qt("1234,56",_e.Comma,void 0,/^-?[0-9]+(,[0-9]+)?$/);static DotDecimalSeparatorWithCommaGroupingSymbol=new qt("1,234.56",_e.Dot,it.Comma,/^-?([0-9]+,)*[0-9]+(\.[0-9]+)?$/);static CommaDecimalSeparatorWithDotGroupingSymbol=new qt("1.234,56",_e.Comma,it.Dot,/^-?([0-9]+\.)*[0-9]+(,[0-9]+)?$/);static DotDecimalSeparatorWithSpaceGroupingSymbol=new qt("1 234.56",_e.Dot,it.Space,/^-?([0-9]+([    ]))*[0-9]+(\.[0-9]+)?$/);static CommaDecimalSeparatorWithSpaceGroupingSymbol=new qt("1 234,56",_e.Comma,it.Space,/^-?([0-9]+([    ]))*[0-9]+(,[0-9]+)?$/);static DotDecimalSeparatorWithApostropheGroupingSymbol=new qt("1'234.56",_e.Dot,it.Apostrophe,/^-?([0-9]+')*[0-9]+(\.[0-9]+)?$/);static CommaDecimalSeparatorWithApostropheGroupingSymbol=new qt("1'234,56",_e.Comma,it.Apostrophe,/^-?([0-9]+')*[0-9]+(,[0-9]+)?$/);format;decimalSeparator;digitGroupingSymbol;type;regex;constructor(e,a,n,o){this.format=e,this.decimalSeparator=a,this.digitGroupingSymbol=n,this.type=this.decimalSeparator.type+"-"+(this.digitGroupingSymbol?this.digitGroupingSymbol.type:0).toString(),this.regex=o,qt.allInstances.push(this),qt.allInstancesByType[this.type]=this}isValid(e){return this.regex.test(e)}static values(){return qt.allInstances}static valueOf(e){return qt.allInstancesByType[e]}static detect(e){const a=[];for(const n of qt.allInstances)n.isValid(e)&&a.push(n);return a.length>0?a:void 0}static detectMulti(e){const a={};for(const o of e){const s=qt.detect(o);if(s)for(const r of s)a[r.type]=(a[r.type]||0)+1;else return}const n=[];for(const o of qt.allInstances)a[o.type]===e.length&&n.push(o);return n.length>0?n:void 0}}class ga{static allInstances=[];static allInstancesByType={};static GreaterThan=new ga("gt","Greater than",1,(e,...a)=>a&&a.length>0&&e>a[0]);static LessThan=new ga("lt","Less than",1,(e,...a)=>a&&a.length>0&&e<a[0]);static EqualTo=new ga("eq","Equal to",1,(e,...a)=>a&&a.length>0&&e===a[0]);static NotEqualTo=new ga("ne","Not equal to",1,(e,...a)=>a&&a.length>0&&e!==a[0]);static Between=new ga("bt","Between",2,(e,...a)=>a&&a.length>1&&e>=a[0]&&e<=a[1]);static NotBetween=new ga("nb","Not between",2,(e,...a)=>a&&a.length>1&&(e<a[0]||e>a[1]));type;name;paramCount;matchFn;constructor(e,a,n,o){this.type=e,this.name=a,this.paramCount=n,this.matchFn=o,ga.allInstances.push(this),ga.allInstancesByType[e]=this}toTextualFilter(...e){return this.paramCount===1?`${this.type}:${e[0]??""}`:this.paramCount===2?`${this.type}:${e[0]??""}:${e[1]??""}`:""}static match(e,a){const n=e.split(":");if(n.length<2)return!1;const o=ga.valueOf(n[0]);if(!o||n.length-1!==o.paramCount)return!1;const s=[];for(let r=1;r<n.length;r++){const l=parseInt(n[r]);if(Number.isNaN(l))return!1;s.push(l)}return o.matchFn(a,...s)}static values(){return ga.allInstances}static valueOf(e){return ga.allInstancesByType[e]}}class Xe{static JanuaryFirstDay=new Xe(1,1);static Default=Xe.JanuaryFirstDay;static MONTH_MAX_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31];month;day;value;constructor(e,a){this.month=e,this.day=a,this.value=e<<8|a}static of(e,a){if(Xe.isValidFiscalYearMonthDay(e,a))return new Xe(e,a)}static valueOf(e){if(e<257||e>3103)return;const a=e>>8&255,n=e&255;return Xe.of(a,n)}static parse(e){if(!e||!e.includes("-"))return;const a=e.split("-");if(a.length!==2)return;const n=parseInt(a[0],10),o=parseInt(a[1],10);return Xe.of(n,o)}toMonthDashDayString(){return`${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toMonthDay(){return{month:this.month,day:this.day}}static isValidFiscalYearMonthDay(e,a){return 1<=e&&e<=12&&1<=a&&a<=Xe.MONTH_MAX_DAYS[e-1]}}const xc=0;class At{static allInstances=[];static allInstancesByType={};static allInstancesByTypeName={};static StartYYYY_EndYYYY=new At(1,"StartYYYY_EndYYYY");static StartYYYY_EndYY=new At(2,"StartYYYY_EndYY");static StartYY_EndYY=new At(3,"StartYY_EndYY");static EndYYYY=new At(4,"EndYYYY");static EndYY=new At(5,"EndYY");static Default=At.EndYYYY;type;typeName;constructor(e,a){this.type=e,this.typeName=a,At.allInstances.push(this),At.allInstancesByType[e]=this,At.allInstancesByTypeName[a]=this}static values(){return At.allInstances}static valueOf(e){return At.allInstancesByType[e]}static parse(e){return At.allInstancesByTypeName[e]}}var To=(t=>(t[t.LatitudeLongitude=0]="LatitudeLongitude",t[t.LongitudeLatitude=1]="LongitudeLatitude",t))(To||{}),Cs=(t=>(t[t.DecimalDegrees=0]="DecimalDegrees",t[t.DecimalMinutes=1]="DecimalMinutes",t[t.DegreesMinutesSeconds=2]="DegreesMinutesSeconds",t))(Cs||{}),vo=(t=>(t[t.Signed=0]="Signed",t[t.Directional=1]="Directional",t))(vo||{});class Ht{static allInstances=[];static allInstancesByType={};static SystemDefaultType=0;static LatitudeLongitudeDecimalDegrees=new Ht(1,"Latitude Longitude D.D°",0,0,0);static LongitudeLatitudeDecimalDegrees=new Ht(2,"Longitude Latitude D.D°",1,0,0);static LatitudeLongitudeDecimalMinutes=new Ht(3,"Latitude Longitude D°M.M'",0,1,1);static LongitudeLatitudeDecimalMinutes=new Ht(4,"Longitude Latitude D°M.M'",1,1,1);static LatitudeLongitudeDegreesMinutesSeconds=new Ht(5,`Latitude Longitude D°M'S"`,0,2,1);static LongitudeLatitudeDegreesMinutesSeconds=new Ht(6,`Longitude Latitude D°M'S"`,1,2,1);static Default=Ht.LatitudeLongitudeDecimalDegrees;type;name;displayOrder;displayFormat;directionFormat;constructor(e,a,n,o,s){this.type=e,this.name=a,this.displayOrder=n,this.displayFormat=o,this.directionFormat=s,Ht.allInstances.push(this),Ht.allInstancesByType[e]=this}static values(){return Ht.allInstances}static valueOf(e){return Ht.allInstancesByType[e]}}function br(t){if(!t)return t;const e=Math.max(-90,Math.min(90,t.latitude)),a=((t.longitude+180)%360+360)%360-180;return{latitude:e,longitude:a}}class yt{static allInstances=[];static allInstancesByType={};static SystemDefaultType=0;static Green=new yt(1,"Green","#009688","#009688","expense-amount-color-green","income-amount-color-green");static Red=new yt(2,"Red","#d43f3f","#d43f3f","expense-amount-color-red","income-amount-color-red");static Yellow=new yt(3,"Yellow","#e2b60a","#e2b60a","expense-amount-color-yellow","income-amount-color-yellow");static BlackOrWhite=new yt(4,"Black or White","#413935","#fcf0e3","expense-amount-color-blackorwhite","income-amount-color-blackorwhite");static DefaultExpenseColor=yt.Green;static DefaultIncomeColor=yt.Red;type;name;lightThemeColor;darkThemeColor;expenseClassName;incomeClassName;constructor(e,a,n,o,s,r){this.type=e,this.name=a,this.lightThemeColor=n,this.darkThemeColor=o,this.expenseClassName=s,this.incomeClassName=r,yt.allInstances.push(this),yt.allInstancesByType[e]=this}static values(){return yt.allInstances}static valueOf(e){return yt.allInstancesByType[e]}}class Ne{static allInstances=[];static SingleAccount=new Ne(1,"Single Account");static MultiSubAccounts=new Ne(2,"Multiple Sub-accounts");type;name;constructor(e,a){this.type=e,this.name=a,Ne.allInstances.push(this)}static values(){return Ne.allInstances}}class Ve{static allInstances=[];static allInstancesByType={};static Cash=new Ve(1,1,"Cash",!0,!1,"1");static CheckingAccount=new Ve(2,2,"Checking Account",!0,!1,"100");static SavingsAccount=new Ve(8,3,"Savings Account",!0,!1,"100");static CreditCard=new Ve(3,4,"Credit Card",!1,!0,"100");static VirtualAccount=new Ve(4,5,"Virtual Account",!0,!1,"500");static DebtAccount=new Ve(5,6,"Debt Account",!1,!0,"600");static Receivables=new Ve(6,7,"Receivables",!0,!1,"700");static CertificateOfDeposit=new Ve(9,8,"Certificate of Deposit",!0,!1,"110");static InvestmentAccount=new Ve(7,9,"Investment Account",!0,!1,"800");static Default=Ve.Cash;type;displayOrder;name;isAsset;isLiability;defaultAccountIconId;constructor(e,a,n,o,s,r){this.type=e,this.displayOrder=a,this.name=n,this.isAsset=o,this.isLiability=s,this.defaultAccountIconId=r,Ve.allInstances.push(this),Ve.allInstancesByType[e]=this}static values(){return Ve.allInstances}static valueOf(e){return Ve.allInstancesByType[e]}}var ve=(t=>(t[t.Income=1]="Income",t[t.Expense=2]="Expense",t[t.Transfer=3]="Transfer",t))(ve||{});const kc=[1,2,3];var ie=(t=>(t[t.ModifyBalance=1]="ModifyBalance",t[t.Income=2]="Income",t[t.Expense=3]="Expense",t[t.Transfer=4]="Transfer",t))(ie||{}),Wn=(t=>(t[t.TransferFrom=1]="TransferFrom",t[t.TransferTo=2]="TransferTo",t))(Wn||{});class Da{static allInstances=[];static None=new Da(0,"None");static All=new Da(1,"All");static TodayOrLater=new Da(2,"Today or later");static Recent24HoursOrLater=new Da(3,"Recent 24 hours or later");static ThisWeekOrLater=new Da(4,"This week or later");static ThisMonthOrLater=new Da(5,"This month or later");static ThisYearOrLater=new Da(6,"This year or later");type;name;constructor(e,a){this.type=e,this.name=a,Da.allInstances.push(this)}static values(){return Da.allInstances}}class It{static allInstances=[];static allInstancesByType={};static HasAny=new It(0,"Include Any Selected Tags");static HasAll=new It(1,"Include All Selected Tags");static NotHasAny=new It(2,"Exclude Any Selected Tags");static NotHasAll=new It(3,"Exclude All Selected Tags");type;name;constructor(e,a){this.type=e,this.name=a,It.allInstances.push(this),It.allInstancesByType[e]=this}static values(){return It.allInstances}static parse(e){return It.allInstancesByType[e]}}class ut{static allInstances=[];static TransactionTime=new ut(1,"Transaction Time");static TransactionTimezone=new ut(2,"Transaction Timezone");static TransactionType=new ut(3,"Transaction Type");static Category=new ut(4,"Category");static SubCategory=new ut(5,"Secondary Category");static AccountName=new ut(6,"Account Name");static AccountCurrency=new ut(7,"Currency");static Amount=new ut(8,"Amount");static RelatedAccountName=new ut(9,"Transfer In Account Name");static RelatedAccountCurrency=new ut(10,"Transfer In Currency");static RelatedAmount=new ut(11,"Transfer In Amount");static GeographicLocation=new ut(12,"Geographic Location");static Tags=new ut(13,"Tags");static Description=new ut(14,"Description");type;name;constructor(e,a){this.type=e,this.name=a,ut.allInstances.push(this)}static values(){return ut.allInstances}}class ft{static JSON_ROOT_FIELD="ezBookkeepingImportTransactionDataMapping";static DEFAULT_INCLUDE_HEADER=!0;static DEFAULT_TIME_FORMAT="";static DEFAULT_TIMEZONE_FORMAT="";static DEFAULT_AMOUNT_FORMAT="";static DEFAULT_GEO_LOCATION_SEPARATOR=" ";static DEFAULT_GEO_LOCATION_ORDER="lonlat";static DEFAULT_TAG_SEPARATOR=";";includeHeader;dataColumnMapping;transactionTypeMapping;timeFormat;timezoneFormat;amountFormat;geoLocationSeparator;geoLocationOrder;tagSeparator;constructor(e,a,n,o,s,r,l,i,c){this.includeHeader=e,this.dataColumnMapping=a,this.transactionTypeMapping=n,this.timeFormat=o,this.timezoneFormat=s,this.amountFormat=r,this.geoLocationSeparator=l,this.geoLocationOrder=i,this.tagSeparator=c}isColumnMappingSet(e){return this.dataColumnMapping.hasOwnProperty(e.type)&&typeof this.dataColumnMapping[e.type]=="number"}toggleIncludeHeader(){this.includeHeader=!this.includeHeader}toggleDataMappingColumn(e,a){this.dataColumnMapping[a]===e?delete this.dataColumnMapping[a]:this.dataColumnMapping[a]=e;for(const n of jt(this.dataColumnMapping))n!==a.toString()&&this.dataColumnMapping[parseInt(n)]===e&&delete this.dataColumnMapping[parseInt(n)]}setGeoLocationFormat(e,a){this.geoLocationSeparator=e,this.geoLocationOrder=a}formatGeoLocation(e,a){return this.geoLocationOrder==="latlon"?`${e}${this.geoLocationSeparator}${a}`:`${a}${this.geoLocationSeparator}${e}`}parseFileAllTransactionTypes(e){if(!e||!e.length||!this.isColumnMappingSet(ut.TransactionType))return[];const a={},n=[],o=this.dataColumnMapping[ut.TransactionType.type],s=this.includeHeader?1:0;for(let r=s;r<e.length;r++){const l=e[r];if(!l||l.length<=o)continue;const i=l[o];i&&!a[i]&&(n.push(i),a[i]=!0)}return n}parseFileValidMappedTransactionTypes(e){if(!e||!e.length||!this.isColumnMappingSet(ut.TransactionType))return{};const a={};if(!this.transactionTypeMapping)return a;for(const[n,o]of Xt(this.transactionTypeMapping))ie.ModifyBalance<=o&&o<=ie.Transfer&&(a[n]=o);return a}parseFileAutoDetectedTimeFormat(e){if(!e||!e.length||!this.isColumnMappingSet(ut.TransactionTime))return;const a=[],n=this.dataColumnMapping[ut.TransactionTime.type],o=this.includeHeader?1:0;for(let r=o;r<e.length;r++){const l=e[r];if(!l||l.length<=n)continue;const i=l[n];i&&a.push(i)}const s=gt.detectMulti(a);if(!(!s||!s.length||s.length>1))return s[0].format}parseFileAutoDetectedTimezoneFormat(e){if(!e||!e.length||!this.isColumnMappingSet(ut.TransactionTimezone))return;const a=[],n=this.dataColumnMapping[ut.TransactionTimezone.type],o=this.includeHeader?1:0;for(let r=o;r<e.length;r++){const l=e[r];if(!l||l.length<=n)continue;const i=l[n];i&&a.push(i)}const s=Ca.detectMulti(a);if(!(!s||!s.length||s.length>1))return s[0].value}parseFileAutoDetectedAmountFormat(e){if(!e||!e.length||!this.isColumnMappingSet(ut.Amount))return;const a=[],n=this.dataColumnMapping[ut.Amount.type],o=this.includeHeader?1:0;for(let r=o;r<e.length;r++){const l=e[r];if(!l||l.length<=n)continue;const i=l[n];i&&a.push(i)}const s=qt.detectMulti(a);if(!(!s||!s.length))return s[0].type}reset(){this.includeHeader=ft.DEFAULT_INCLUDE_HEADER,this.dataColumnMapping={},this.transactionTypeMapping={},this.timeFormat=ft.DEFAULT_TIME_FORMAT,this.timezoneFormat=ft.DEFAULT_TIMEZONE_FORMAT,this.amountFormat=ft.DEFAULT_AMOUNT_FORMAT,this.geoLocationSeparator=ft.DEFAULT_GEO_LOCATION_SEPARATOR,this.geoLocationOrder=ft.DEFAULT_GEO_LOCATION_ORDER,this.tagSeparator=ft.DEFAULT_TAG_SEPARATOR}toJson(){return JSON.stringify({[ft.JSON_ROOT_FIELD]:{includeHeader:this.includeHeader,dataColumnMapping:this.dataColumnMapping,transactionTypeMapping:this.transactionTypeMapping,timeFormat:this.timeFormat,timezoneFormat:this.timezoneFormat,amountFormat:this.amountFormat,geoLocationSeparator:this.geoLocationSeparator,geoLocationOrder:this.geoLocationOrder,tagSeparator:this.tagSeparator}})}static createEmpty(){return new ft(ft.DEFAULT_INCLUDE_HEADER,{},{},ft.DEFAULT_TIME_FORMAT,ft.DEFAULT_TIMEZONE_FORMAT,ft.DEFAULT_AMOUNT_FORMAT,ft.DEFAULT_GEO_LOCATION_SEPARATOR,ft.DEFAULT_GEO_LOCATION_ORDER,ft.DEFAULT_TAG_SEPARATOR)}static parseFromJson(e){try{const n=JSON.parse(e)[ft.JSON_ROOT_FIELD];return n?new ft(n.includeHeader??ft.DEFAULT_INCLUDE_HEADER,n.dataColumnMapping??{},n.transactionTypeMapping??{},n.timeFormat??ft.DEFAULT_TIME_FORMAT,n.timezoneFormat??ft.DEFAULT_TIMEZONE_FORMAT,n.amountFormat??ft.DEFAULT_AMOUNT_FORMAT,n.geoLocationSeparator??ft.DEFAULT_GEO_LOCATION_SEPARATOR,n.geoLocationOrder??ft.DEFAULT_GEO_LOCATION_ORDER,n.tagSeparator??ft.DEFAULT_TAG_SEPARATOR):null}catch{return null}}}class Fs{dataType;sourceValue;targetId;constructor(e,a,n){this.dataType=e,this.sourceValue=a,this.targetId=n}toJsonObject(){return{type:this.dataType,sourceValue:this.sourceValue,targetId:this.targetId}}static of(e,a,n){return new Fs(e,a,n)}static parse(e){return!e||typeof e!="object"||!("type"in e)||!("sourceValue"in e)||!("targetId"in e)||typeof e.type!="string"||typeof e.sourceValue!="string"||typeof e.targetId!="string"||e.type!=="expenseCategory"&&e.type!=="incomeCategory"&&e.type!=="transferCategory"&&e.type!=="account"&&e.type!=="tag"?null:new Fs(e.type,e.sourceValue,e.targetId)}}class Vn{static JSON_ROOT_FIELD="ezBookkeepingImportTransactionReplaceRules";rules;constructor(e){this.rules=e}getRules(){return this.rules}toJson(){const e=[];for(const a of this.rules)e.push(a.toJsonObject());return JSON.stringify({[Vn.JSON_ROOT_FIELD]:e})}static of(e){return new Vn(e)}static parseFromJson(e){try{const n=JSON.parse(e)[Vn.JSON_ROOT_FIELD];if(!n||!("length"in n))return null;const o=new Vn([]);for(const s of n){const r=Fs.parse(s);r&&o.rules.push(r)}return o}catch{return null}}}class Qt{static allInstancesByExtension={};static JSON=new Qt("json","application/json");static CSV=new Qt("csv","text/csv");static TSV=new Qt("tsv","text/tab-separated-values");static TXT=new Qt("txt","text/text");static MARKDOWN=new Qt("md","text/markdown");static JS=new Qt("js","application/javascript");static JPG=new Qt("jpg","image/jpeg");extension;contentType;constructor(e,a){this.extension=e,this.contentType=a,Qt.allInstancesByExtension[e]=this}isSameType(e){return e?this.contentType===e||e.indexOf(this.contentType)===0:!1}formatFileName(e){return e.endsWith(`.${this.extension}`)?e:`${e}.${this.extension}`}createBlob(e){return new Blob([e],{type:this.contentType})}createFile(e,a){return new File([e],this.formatFileName(a),{type:this.contentType})}createFileFromBlob(e,a){return new File([e],this.formatFileName(a),{type:this.contentType})}static parse(e){return Qt.allInstancesByExtension[e]}}const Oc=2,Uc=2,ta="***",Va="+",Cr={displayName:"Coordinated Universal Time",timezoneName:"Etc/GMT"},Fc=[{displayName:"International Date Line West",timezoneName:"Etc/GMT+12"},{displayName:"Coordinated Universal Time-11",timezoneName:"Etc/GMT+11"},{displayName:"Aleutian Islands",timezoneName:"America/Adak"},{displayName:"Hawaii",timezoneName:"Pacific/Honolulu"},{displayName:"Marquesas Islands",timezoneName:"Pacific/Marquesas"},{displayName:"Alaska",timezoneName:"America/Anchorage"},{displayName:"Coordinated Universal Time-09",timezoneName:"Etc/GMT+9"},{displayName:"Baja California",timezoneName:"America/Tijuana"},{displayName:"Coordinated Universal Time-08",timezoneName:"Etc/GMT+8"},{displayName:"Pacific Time (US & Canada)",timezoneName:"America/Los_Angeles"},{displayName:"Arizona",timezoneName:"America/Phoenix"},{displayName:"La Paz, Mazatlan",timezoneName:"America/Chihuahua"},{displayName:"Mountain Time (US & Canada)",timezoneName:"America/Denver"},{displayName:"Yukon",timezoneName:"America/Whitehorse"},{displayName:"Central America",timezoneName:"America/Guatemala"},{displayName:"Central Time (US & Canada)",timezoneName:"America/Chicago"},{displayName:"Easter Island",timezoneName:"Pacific/Easter"},{displayName:"Guadalajara, Mexico City, Monterrey",timezoneName:"America/Mexico_City"},{displayName:"Saskatchewan",timezoneName:"America/Regina"},{displayName:"Bogota, Lima, Quito, Rio Branco",timezoneName:"America/Bogota"},{displayName:"Chetumal",timezoneName:"America/Cancun"},{displayName:"Eastern Time (US & Canada)",timezoneName:"America/New_York"},{displayName:"Haiti",timezoneName:"America/Port-au-Prince"},{displayName:"Havana",timezoneName:"America/Havana"},{displayName:"Indiana (East)",timezoneName:"America/Indianapolis"},{displayName:"Turks and Caicos",timezoneName:"America/Grand_Turk"},{displayName:"Asuncion",timezoneName:"America/Asuncion"},{displayName:"Atlantic Time (Canada)",timezoneName:"America/Halifax"},{displayName:"Caracas",timezoneName:"America/Caracas"},{displayName:"Cuiaba",timezoneName:"America/Cuiaba"},{displayName:"Georgetown, La Paz, Manaus, San Juan",timezoneName:"America/La_Paz"},{displayName:"Santiago",timezoneName:"America/Santiago"},{displayName:"Newfoundland",timezoneName:"America/St_Johns"},{displayName:"Araguaina",timezoneName:"America/Araguaina"},{displayName:"Brasilia",timezoneName:"America/Sao_Paulo"},{displayName:"Cayenne, Fortaleza",timezoneName:"America/Cayenne"},{displayName:"City of Buenos Aires",timezoneName:"America/Buenos_Aires"},{displayName:"Montevideo",timezoneName:"America/Montevideo"},{displayName:"Punta Arenas",timezoneName:"America/Punta_Arenas"},{displayName:"Saint Pierre and Miquelon",timezoneName:"America/Miquelon"},{displayName:"Salvador",timezoneName:"America/Bahia"},{displayName:"Coordinated Universal Time-02",timezoneName:"Etc/GMT+2"},{displayName:"Greenland",timezoneName:"America/Godthab"},{displayName:"Azores",timezoneName:"Atlantic/Azores"},{displayName:"Cabo Verde Is",timezoneName:"Atlantic/Cape_Verde"},Cr,{displayName:"Dublin, Edinburgh, Lisbon, London",timezoneName:"Europe/London"},{displayName:"Monrovia, Reykjavik",timezoneName:"Atlantic/Reykjavik"},{displayName:"Sao Tome",timezoneName:"Africa/Sao_Tome"},{displayName:"Casablanca",timezoneName:"Africa/Casablanca"},{displayName:"Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",timezoneName:"Europe/Berlin"},{displayName:"Belgrade, Bratislava, Budapest, Ljubljana, Prague",timezoneName:"Europe/Budapest"},{displayName:"Brussels, Copenhagen, Madrid, Paris",timezoneName:"Europe/Paris"},{displayName:"Sarajevo, Skopje, Warsaw, Zagreb",timezoneName:"Europe/Warsaw"},{displayName:"West Central Africa",timezoneName:"Africa/Lagos"},{displayName:"Athens, Bucharest",timezoneName:"Europe/Bucharest"},{displayName:"Beirut",timezoneName:"Asia/Beirut"},{displayName:"Cairo",timezoneName:"Africa/Cairo"},{displayName:"Chisinau",timezoneName:"Europe/Chisinau"},{displayName:"Gaza, Hebron",timezoneName:"Asia/Gaza"},{displayName:"Harare, Pretoria",timezoneName:"Africa/Johannesburg"},{displayName:"Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",timezoneName:"Europe/Kiev"},{displayName:"Jerusalem",timezoneName:"Asia/Jerusalem"},{displayName:"Juba",timezoneName:"Africa/Juba"},{displayName:"Kaliningrad",timezoneName:"Europe/Kaliningrad"},{displayName:"Khartoum",timezoneName:"Africa/Khartoum"},{displayName:"Tripoli",timezoneName:"Africa/Tripoli"},{displayName:"Windhoek",timezoneName:"Africa/Windhoek"},{displayName:"Amman",timezoneName:"Asia/Amman"},{displayName:"Baghdad",timezoneName:"Asia/Baghdad"},{displayName:"Damascus",timezoneName:"Asia/Damascus"},{displayName:"Istanbul",timezoneName:"Europe/Istanbul"},{displayName:"Kuwait, Riyadh",timezoneName:"Asia/Riyadh"},{displayName:"Minsk",timezoneName:"Europe/Minsk"},{displayName:"Moscow, St Petersburg",timezoneName:"Europe/Moscow"},{displayName:"Nairobi",timezoneName:"Africa/Nairobi"},{displayName:"Volgograd",timezoneName:"Europe/Volgograd"},{displayName:"Tehran",timezoneName:"Asia/Tehran"},{displayName:"Abu Dhabi, Muscat",timezoneName:"Asia/Dubai"},{displayName:"Astrakhan, Ulyanovsk",timezoneName:"Europe/Astrakhan"},{displayName:"Baku",timezoneName:"Asia/Baku"},{displayName:"Izhevsk, Samara",timezoneName:"Europe/Samara"},{displayName:"Port Louis",timezoneName:"Indian/Mauritius"},{displayName:"Saratov",timezoneName:"Europe/Saratov"},{displayName:"Tbilisi",timezoneName:"Asia/Tbilisi"},{displayName:"Yerevan",timezoneName:"Asia/Yerevan"},{displayName:"Kabul",timezoneName:"Asia/Kabul"},{displayName:"Ashgabat, Tashkent",timezoneName:"Asia/Tashkent"},{displayName:"Astana",timezoneName:"Asia/Qyzylorda"},{displayName:"Ekaterinburg",timezoneName:"Asia/Yekaterinburg"},{displayName:"Islamabad, Karachi",timezoneName:"Asia/Karachi"},{displayName:"Chennai, Kolkata, Mumbai, New Delhi",timezoneName:"Asia/Calcutta"},{displayName:"Sri Jayawardenepura",timezoneName:"Asia/Colombo"},{displayName:"Kathmandu",timezoneName:"Asia/Kathmandu"},{displayName:"Bishkek",timezoneName:"Asia/Bishkek"},{displayName:"Dhaka",timezoneName:"Asia/Dhaka"},{displayName:"Omsk",timezoneName:"Asia/Omsk"},{displayName:"Yangon (Rangoon)",timezoneName:"Asia/Rangoon"},{displayName:"Bangkok, Hanoi, Jakarta",timezoneName:"Asia/Bangkok"},{displayName:"Barnaul, Gorno-Altaysk",timezoneName:"Asia/Barnaul"},{displayName:"Hovd",timezoneName:"Asia/Hovd"},{displayName:"Krasnoyarsk",timezoneName:"Asia/Krasnoyarsk"},{displayName:"Novosibirsk",timezoneName:"Asia/Novosibirsk"},{displayName:"Tomsk",timezoneName:"Asia/Tomsk"},{displayName:"Beijing, Chongqing, Hong Kong SAR, Urumqi",timezoneName:"Asia/Shanghai"},{displayName:"Irkutsk",timezoneName:"Asia/Irkutsk"},{displayName:"Kuala Lumpur, Singapore",timezoneName:"Asia/Singapore"},{displayName:"Perth",timezoneName:"Australia/Perth"},{displayName:"Taipei",timezoneName:"Asia/Taipei"},{displayName:"Ulaanbaatar",timezoneName:"Asia/Ulaanbaatar"},{displayName:"Eucla",timezoneName:"Australia/Eucla"},{displayName:"Chita",timezoneName:"Asia/Chita"},{displayName:"Osaka, Sapporo, Tokyo",timezoneName:"Asia/Tokyo"},{displayName:"Pyongyang",timezoneName:"Asia/Pyongyang"},{displayName:"Seoul",timezoneName:"Asia/Seoul"},{displayName:"Yakutsk",timezoneName:"Asia/Yakutsk"},{displayName:"Adelaide",timezoneName:"Australia/Adelaide"},{displayName:"Darwin",timezoneName:"Australia/Darwin"},{displayName:"Brisbane",timezoneName:"Australia/Brisbane"},{displayName:"Canberra, Melbourne, Sydney",timezoneName:"Australia/Sydney"},{displayName:"Guam, Port Moresby",timezoneName:"Pacific/Port_Moresby"},{displayName:"Hobart",timezoneName:"Australia/Hobart"},{displayName:"Vladivostok",timezoneName:"Asia/Vladivostok"},{displayName:"Lord Howe Island",timezoneName:"Australia/Lord_Howe"},{displayName:"Bougainville Island",timezoneName:"Pacific/Bougainville"},{displayName:"Chokurdakh",timezoneName:"Asia/Srednekolymsk"},{displayName:"Magadan",timezoneName:"Asia/Magadan"},{displayName:"Norfolk Island",timezoneName:"Pacific/Norfolk"},{displayName:"Sakhalin",timezoneName:"Asia/Sakhalin"},{displayName:"Solomon Is, New Caledonia",timezoneName:"Pacific/Guadalcanal"},{displayName:"Anadyr, Petropavlovsk-Kamchatsky",timezoneName:"Asia/Kamchatka"},{displayName:"Auckland, Wellington",timezoneName:"Pacific/Auckland"},{displayName:"Coordinated Universal Time+12",timezoneName:"Etc/GMT-12"},{displayName:"Fiji",timezoneName:"Pacific/Fiji"},{displayName:"Chatham Islands",timezoneName:"Pacific/Chatham"},{displayName:"Coordinated Universal Time+13",timezoneName:"Etc/GMT-13"},{displayName:"Nukualofa",timezoneName:"Pacific/Tongatapu"},{displayName:"Samoa",timezoneName:"Pacific/Apia"},{displayName:"Kiritimati Island",timezoneName:"Pacific/Kiritimati"}],Bc=[{name:"Food & Drink",categoryIconId:"1",color:"ff6b22",subCategories:[{name:"Food",categoryIconId:"2",color:"ff6b22"},{name:"Drink",categoryIconId:"30",color:"ff6b22"},{name:"Fruit & Snack",categoryIconId:"70",color:"ff6b22"}]},{name:"Clothing & Appearance",categoryIconId:"100",color:"673ab7",subCategories:[{name:"Clothing",categoryIconId:"110",color:"673ab7"},{name:"Jewelry",categoryIconId:"170",color:"673ab7"},{name:"Cosmetic",categoryIconId:"180",color:"673ab7"},{name:"Hair Cuts & Salon",categoryIconId:"190",color:"673ab7"}]},{name:"Housing & Houseware",categoryIconId:"200",color:"000000",subCategories:[{name:"Houseware",categoryIconId:"210",color:"000000"},{name:"Electronics",categoryIconId:"230",color:"000000"},{name:"Repairs & Maintenance",categoryIconId:"250",color:"000000"},{name:"Housekeeping Services",categoryIconId:"260",color:"000000"},{name:"Utilities Expense",categoryIconId:"270",color:"000000"},{name:"Rent & Mortgage",categoryIconId:"290",color:"000000"}]},{name:"Transportation",categoryIconId:"300",color:"009688",subCategories:[{name:"Public Transit",categoryIconId:"310",color:"009688"},{name:"Taxi & Car Rental",categoryIconId:"320",color:"009688"},{name:"Personal Car Expense",categoryIconId:"330",color:"009688"},{name:"Train Tickets",categoryIconId:"370",color:"009688"},{name:"Airline Tickets",categoryIconId:"390",color:"009688"}]},{name:"Communication",categoryIconId:"400",color:"2196f3",subCategories:[{name:"Telephone Bill",categoryIconId:"420",color:"2196f3"},{name:"Internet Bill",categoryIconId:"430",color:"2196f3"},{name:"Express Fee",categoryIconId:"480",color:"2196f3"}]},{name:"Entertainment",categoryIconId:"500",color:"ff2d55",subCategories:[{name:"Sports & Fitness",categoryIconId:"510",color:"ff2d55"},{name:"Party Expense",categoryIconId:"540",color:"ff2d55"},{name:"Movies & Shows",categoryIconId:"550",color:"ff2d55"},{name:"Toys & Games",categoryIconId:"560",color:"ff2d55"},{name:"Subscriptions",categoryIconId:"570",color:"ff2d55"},{name:"Pet Expense",categoryIconId:"580",color:"ff2d55"},{name:"Travelling",categoryIconId:"590",color:"ff2d55"}]},{name:"Education & Studying",categoryIconId:"600",color:"cddc39",subCategories:[{name:"Books & Newspaper & Magazines",categoryIconId:"610",color:"cddc39"},{name:"Training Courses",categoryIconId:"660",color:"cddc39"},{name:"Certification & Examination",categoryIconId:"680",color:"cddc39"}]},{name:"Gifts & Donations",categoryIconId:"700",color:"4cd964",subCategories:[{name:"Gifts",categoryIconId:"710",color:"4cd964"},{name:"Donations",categoryIconId:"780",color:"4cd964"}]},{name:"Medical & Healthcare",categoryIconId:"800",color:"ff3b30",subCategories:[{name:"Diagnosis & Treatment",categoryIconId:"840",color:"ff3b30"},{name:"Medications",categoryIconId:"860",color:"ff3b30"},{name:"Medical Devices",categoryIconId:"890",color:"ff3b30"}]},{name:"Finance & Insurance",categoryIconId:"900",color:"ff9500",subCategories:[{name:"Tax Expense",categoryIconId:"910",color:"ff9500"},{name:"Service Charge",categoryIconId:"930",color:"ff9500"},{name:"Insurance Expense",categoryIconId:"950",color:"ff9500"},{name:"Interest Expense",categoryIconId:"970",color:"ff9500"},{name:"Compensation & Fine",categoryIconId:"990",color:"ff9500"}]},{name:"Miscellaneous",categoryIconId:"1000",color:"8e8e93",subCategories:[{name:"Other Expense",categoryIconId:"1010",color:"8e8e93"}]}],Pc=[{name:"Occupational Earnings",categoryIconId:"2000",color:"ff6b22",subCategories:[{name:"Salary Income",categoryIconId:"2010",color:"ff6b22"},{name:"Bonus Income",categoryIconId:"2020",color:"ff6b22"},{name:"Overtime Pay",categoryIconId:"231",color:"ff6b22"},{name:"Side Job Income",categoryIconId:"2080",color:"ff6b22"}]},{name:"Finance & Investment",categoryIconId:"900",color:"ff9500",subCategories:[{name:"Investment Income",categoryIconId:"2100",color:"ff9500"},{name:"Rental Income",categoryIconId:"290",color:"ff9500"},{name:"Interest Income",categoryIconId:"970",color:"ff9500"}]},{name:"Miscellaneous",categoryIconId:"1000",color:"8e8e93",subCategories:[{name:"Gift & Lucky Money",categoryIconId:"710",color:"8e8e93"},{name:"Winnings Income",categoryIconId:"564",color:"8e8e93"},{name:"Windfall",categoryIconId:"5200",color:"8e8e93"},{name:"Other Income",categoryIconId:"3010",color:"8e8e93"}]}],Rc=[{name:"General Transfer",categoryIconId:"4000",color:"ff6b22",subCategories:[{name:"Bank Transfer",categoryIconId:"900",color:"ff6b22"},{name:"Credit Card Repayment",categoryIconId:"980",color:"ff6b22"},{name:"Deposits & Withdrawals",categoryIconId:"981",color:"ff6b22"}]},{name:"Loan & Debt",categoryIconId:"950",color:"ff9500",subCategories:[{name:"Borrowing Money",categoryIconId:"910",color:"ff9500"},{name:"Lending Money",categoryIconId:"290",color:"ff9500"},{name:"Repayment",categoryIconId:"930",color:"ff9500"},{name:"Debt Collection",categoryIconId:"5030",color:"ff9500"}]},{name:"Miscellaneous",categoryIconId:"1000",color:"8e8e93",subCategories:[{name:"Out-of-Pocket Expense",categoryIconId:"2010",color:"8e8e93"},{name:"Reimbursement",categoryIconId:"920",color:"8e8e93"},{name:"Other Transfer",categoryIconId:"4900",color:"8e8e93"}]}],Yc="/api",zc="/qrcode",Oi="/proxy",$c="/_AMapService",Dr=1e4,ps=3e4,Ui=18e4,Gc=18e5,no=18e5,Kc=6e5,Hc="https://maps.googleapis.com/maps/api/js",Wc="https://api.map.baidu.com/api?v=3.0",Vc="https://webapi.amap.com/maps?v=2.0";var Ao=(t=>(t[t.ApiNotFound=100001]="ApiNotFound",t[t.ValidatorError=2e5]="ValidatorError",t[t.UserEmailNotVerified=201020]="UserEmailNotVerified",t[t.TwoFactorAuthorizationPasscodeEmpty=203005]="TwoFactorAuthorizationPasscodeEmpty",t[t.TransactionCannotCreateInThisTime=205017]="TransactionCannotCreateInThisTime",t[t.TransactionCannotModifyInThisTime=205018]="TransactionCannotModifyInThisTime",t[t.TransactionPictureNotFound=211001]="TransactionPictureNotFound",t))(Ao||{});const Fi={"/api/authorize.json":{message:"Username/password login is disabled"},"/api/register.json":{message:"User registration is disabled"},"/api/2fa/authorize.json":{message:"Two-factor authentication is disabled"},"/api/2fa/recovery.json":{message:"Two-factor authentication is disabled"},"/api/verify_email/resend.json":{message:"Email verification is disabled"},"/api/verify_email/by_token.json":{message:"Email verification is disabled"},"/api/forget_password/request.json":{message:"Forget password is disabled"},"/api/forget_password/reset/by_token.json":{message:"Forget password is disabled"},"/api/v1/users/verify_email/resend.json":{message:"Email verification is disabled"},"/api/v1/users/external_auth/list.json":{message:"External login is disabled"},"/api/v1/users/external_auth/unlink.json":{message:"External login is disabled"},"/api/v1/users/2fa/status.json":{message:"Two-factor authentication is disabled"},"/api/v1/users/2fa/enable/request.json":{message:"Two-factor authentication is disabled"},"/api/v1/users/2fa/enable/confirm.json":{message:"Two-factor authentication is disabled"},"/api/v1/users/2fa/disable.json":{message:"Two-factor authentication is disabled"},"/api/v1/users/2fa/recovery/regenerate.json":{message:"Two-factor authentication is disabled"},"/api/v1/transactions/parse_dsv_file.json":{message:"Transaction importing is disabled"},"/api/v1/transactions/parse_import.json":{message:"Transaction importing is disabled"},"/api/v1/transactions/import.json":{message:"Transaction importing is disabled"},"/api/v1/transactions/import/process.json":{message:"Transaction importing is disabled"},"/api/v1/transaction/pictures/upload.json":{message:"Transaction picture is disabled"},"/api/v1/transaction/pictures/remove_unused.json":{message:"Transaction picture is disabled"},"/api/v1/llm/transactions/recognize_receipt_image.json":{message:"AI image recognition is disabled"}},Zc=[{localeKey:"parameter invalid",regex:/^parameter "(\w+)" is invalid$/,parameters:[{field:"parameter",localized:!0}]},{localeKey:"parameter required",regex:/^parameter "(\w+)" is required$/,parameters:[{field:"parameter",localized:!0}]},{localeKey:"parameter too large",regex:/^parameter "(\w+)" must be less than (\d+)$/,parameters:[{field:"parameter",localized:!0},{field:"number",localized:!1}]},{localeKey:"parameter too long",regex:/^parameter "(\w+)" must be less than (\d+) characters$/,parameters:[{field:"parameter",localized:!0},{field:"length",localized:!1}]},{localeKey:"parameter too small",regex:/^parameter "(\w+)" must be more than (\d+)$/,parameters:[{field:"parameter",localized:!0},{field:"number",localized:!1}]},{localeKey:"parameter too short",regex:/^parameter "(\w+)" must be more than (\d+) characters$/,parameters:[{field:"parameter",localized:!0},{field:"length",localized:!1}]},{localeKey:"parameter length not equal",regex:/^parameter "(\w+)" length is not equal to (\d+)$/,parameters:[{field:"parameter",localized:!0},{field:"length",localized:!1}]},{localeKey:"parameter cannot be blank",regex:/^parameter "(\w+)" cannot be blank$/,parameters:[{field:"parameter",localized:!0}]},{localeKey:"parameter invalid username format",regex:/^parameter "(\w+)" is invalid username format$/,parameters:[{field:"parameter",localized:!0}]},{localeKey:"parameter invalid email format",regex:/^parameter "(\w+)" is invalid email format$/,parameters:[{field:"parameter",localized:!0}]},{localeKey:"parameter invalid currency",regex:/^parameter "(\w+)" is invalid currency$/,parameters:[{field:"parameter",localized:!0}]},{localeKey:"parameter invalid color",regex:/^parameter "(\w+)" is invalid color$/,parameters:[{field:"parameter",localized:!0}]},{localeKey:"parameter invalid amount filter",regex:/^parameter "(\w+)" is invalid amount filter$/,parameters:[{field:"parameter",localized:!0}]},{localeKey:"parameter invalid tag filter",regex:/^parameter "(\w+)" is invalid tag filter$/,parameters:[{field:"parameter",localized:!0}]}],Bi={nextcloud:"Nextcloud",gitea:"Gitea",github:"GitHub"},Dd=".jpg,.jpeg,.png,.gif,.webp",Sr="en",so={DEFAULT_DOCUMENT_LANGUAGE_FOR_IMPORT_FILE:Sr,"zh-Hans":"zh-Hans","zh-Hant":"zh-Hans"},Zo="utf-8",Jc=[Zo,"utf-8-bom","utf-16le","utf-16be","utf-16le-bom","utf-16be-bom","cp437","cp863","cp037","cp1047","cp1140","iso-8859-1","cp850","cp858","windows-1252","iso-8859-15","iso-8859-4","iso-8859-10","cp865","iso-8859-2","cp852","windows-1250","iso-8859-14","iso-8859-3","cp860","iso-8859-7","windows-1253","iso-8859-9","windows-1254","iso-8859-13","windows-1257","iso-8859-16","iso-8859-5","cp855","cp866","windows-1251","koi8r","koi8u","iso-8859-6","windows-1256","iso-8859-8","cp862","windows-1255","windows-874","windows-1258","gb18030","gbk","big5","euc-kr","euc-jp","iso-2022-jp","shift_jis"],qc={"UTF-8":Zo,"UTF-16LE":"utf-16le","UTF-16BE":"utf-16be","ISO-2022-JP":"iso-2022-jp",Shift_JIS:"shift_jis",Big5:"big5","EUC-JP":"euc-jp","EUC-KR":"euc-kr",GB18030:"gb18030","ISO-8859-1":"iso-8859-1","ISO-8859-2":"iso-8859-2","ISO-8859-5":"iso-8859-5","ISO-8859-6":"iso-8859-6","ISO-8859-7":"iso-8859-7","ISO-8859-8":"iso-8859-8","ISO-8859-9":"iso-8859-9","windows-1250":"windows-1250","windows-1251":"windows-1251","windows-1252":"windows-1252","windows-1253":"windows-1253","windows-1254":"windows-1254","windows-1255":"windows-1255","windows-1256":"windows-1256","KOI8-R":"koi8r"},_c=[{categoryName:"ezBookkeeping File Format",fileTypes:[{type:"ezbookkeeping",name:"ezbookkeeping Data Export File",extensions:".csv,.tsv",subTypes:[{type:"ezbookkeeping_csv",name:"CSV (Comma-separated values) File",extensions:".csv"},{type:"ezbookkeeping_tsv",name:"TSV (Tab-separated values) File",extensions:".tsv"}],document:{supportMultiLanguages:!0,anchor:"export-transactions"}}]},{categoryName:"Custom File Format",fileTypes:[{type:"dsv",name:"Delimiter-separated Values (DSV) File",extensions:".csv,.tsv",subTypes:[{type:"custom_csv",name:"CSV (Comma-separated values) File",extensions:".csv"},{type:"custom_tsv",name:"TSV (Tab-separated values) File",extensions:".tsv,.txt"}],supportedEncodings:Jc,document:{supportMultiLanguages:!0,anchor:"how-to-import-delimiter-separated-values-dsv-file-or-data"}},{type:"dsv_data",name:"Delimiter-separated Values (DSV) Data",extensions:".csv,.tsv",subTypes:[{type:"custom_csv",name:"CSV (Comma-separated values) File",extensions:".csv"},{type:"custom_tsv",name:"TSV (Tab-separated values) File",extensions:".tsv,.txt"}],dataFromTextbox:!0,document:{supportMultiLanguages:!0,anchor:"how-to-import-delimiter-separated-values-dsv-file-or-data"}}]},{categoryName:"General Data Exchange Format",fileTypes:[{type:"ofx",name:"Open Financial Exchange (OFX) File",extensions:".ofx"},{type:"qfx",name:"Quicken Financial Exchange (QFX) File",extensions:".qfx"},{type:"qif",name:"Quicken Interchange Format (QIF) File",extensions:".qif",subTypes:[{type:"qif_ymd",name:"Year-month-day format"},{type:"qif_mdy",name:"Month-day-year format"},{type:"qif_dmy",name:"Day-month-year format"}],supportedAdditionalOptions:{payeeAsTag:!1,payeeAsDescription:!0}},{type:"iif",name:"Intuit Interchange Format (IIF) File",extensions:".iif"}]},{categoryName:"General Bank Statement Format",fileTypes:[{type:"camt053",name:"Camt.053 Bank to Customer Statement File",extensions:".xml"},{type:"mt940",name:"MT940 Consumer Statement Message File",extensions:".txt"}]},{categoryName:"Other Bank/Payment App Statement File",fileTypes:[{type:"alipay_app_csv",name:"Alipay (App) Statement File",extensions:".csv",document:{supportMultiLanguages:"zh-Hans",anchor:"如何获取支付宝app交易流水文件"}},{type:"alipay_web_csv",name:"Alipay (Web) Statement File",extensions:".csv",document:{supportMultiLanguages:"zh-Hans",anchor:"如何获取支付宝网页版交易流水文件"}},{type:"wechat_pay_app",name:"WeChat Pay Statement File",extensions:".xlsx,.csv",subTypes:[{type:"wechat_pay_app_xlsx",name:"Excel Workbook File",extensions:".xlsx"},{type:"wechat_pay_app_csv",name:"CSV (Comma-separated values) File",extensions:".csv"}],document:{supportMultiLanguages:"zh-Hans",anchor:"如何获取微信支付账单文件"}},{type:"jdcom_finance_app_csv",name:"JD.com Finance Statement File",extensions:".csv",document:{supportMultiLanguages:"zh-Hans",anchor:"如何获取京东金融账单文件"}}]},{categoryName:"Other Finance App File Format",fileTypes:[{type:"gnucash",name:"GnuCash XML Database File",extensions:".gnucash",document:{supportMultiLanguages:!0,anchor:"how-to-get-gnucash-xml-database-file"}},{type:"firefly_iii_csv",name:"Firefly III Data Export File",extensions:".csv",document:{supportMultiLanguages:!0,anchor:"how-to-get-firefly-iii-data-export-file"}},{type:"beancount",name:"Beancount Data File",extensions:".beancount"},{type:"feidee_mymoney_csv",name:"Feidee MyMoney (App) Data Export File",extensions:".csv",supportedAdditionalOptions:{memberAsTag:!1,projectAsTag:!1,merchantAsTag:!1},document:{supportMultiLanguages:"zh-Hans",anchor:"如何获取随手记app数据导出文件"}},{type:"feidee_mymoney_xls",name:"Feidee MyMoney (Web) Data Export File",extensions:".xls",supportedAdditionalOptions:{memberAsTag:!1,projectAsTag:!1,merchantAsTag:!1},document:{supportMultiLanguages:"zh-Hans",anchor:"如何获取随手记web版数据导出文件"}},{type:"feidee_mymoney_elecloud_xlsx",name:"Feidee MyMoney (Elecloud) Data Export File",extensions:".xlsx",supportedAdditionalOptions:{memberAsTag:!1,projectAsTag:!1,merchantAsTag:!1},document:{supportMultiLanguages:"zh-Hans",anchor:"如何获取随手记神象云账本数据导出文件"}}]}],Mr="1",Nr={1:{icon:"las la-wallet"},10:{icon:"las la-coins"},20:{icon:"las la-money-bill-alt"},30:{icon:"las la-piggy-bank"},100:{icon:"las la-credit-card"},110:{icon:"las la-money-check-alt"},500:{icon:"las la-digital-tachograph"},510:{icon:"las la-ticket-alt"},520:{icon:"las la-envelope"},530:{icon:"las la-box"},540:{icon:"las la-donate"},560:{icon:"las la-shield-alt"},600:{icon:"las la-calendar-minus"},601:{icon:"las la-calendar-plus"},700:{icon:"las la-file-invoice-dollar"},701:{icon:"las la-receipt"},800:{icon:"las la-chart-area"},801:{icon:"las la-chart-line"},900:{icon:"las la-user-friends"},901:{icon:"las la-users"},910:{icon:"las la-home"},911:{icon:"las la-building"},912:{icon:"las la-industry"},990:{icon:"las la-globe"},1e3:{icon:"las la-dollar-sign"},1001:{icon:"las la-euro-sign"},1002:{icon:"las la-pound-sign"},1003:{icon:"las la-yen-sign"},1004:{icon:"las la-ruble-sign"},1005:{icon:"las la-rupee-sign"},1006:{icon:"las la-won-sign"},1007:{icon:"las la-shekel-sign"},1008:{icon:"las la-hryvnia"},1009:{icon:"las la-tenge"},1500:{icon:"lab la-bitcoin"},1501:{icon:"lab la-ethereum"},5e3:{icon:"lab la-cc-visa"},5001:{icon:"lab la-cc-mastercard"},5002:{icon:"lab la-cc-amex"},5100:{icon:"lab la-cc-discover"},5200:{icon:"lab la-cc-jcb"},5300:{icon:"lab la-cc-diners-club"},8e3:{icon:"lab la-paypal"},8100:{icon:"lab la-apple-pay"},8101:{icon:"lab la-google-wallet"},8200:{icon:"lab la-amazon-pay"},8201:{icon:"lab la-stripe"},8300:{icon:"lab la-alipay"},8301:{icon:"lab la-qq"},8302:{icon:"lab la-weixin"}},Ds=Nr[Mr],Lr="1",Sd="561",wr={1:{icon:"las la-utensils"},2:{icon:"las la-concierge-bell"},10:{icon:"las la-hamburger"},11:{icon:"las la-pizza-slice"},12:{icon:"las la-hotdog"},13:{icon:"las la-bread-slice"},30:{icon:"las la-mug-hot"},31:{icon:"las la-coffee"},32:{icon:"las la-cocktail"},40:{icon:"las la-beer"},41:{icon:"las la-wine-bottle"},42:{icon:"las la-wine-glass-alt"},43:{icon:"las la-glass-martini"},44:{icon:"las la-glass-whiskey"},60:{icon:"las la-apple-alt"},61:{icon:"las la-lemon"},70:{icon:"las la-ice-cream"},71:{icon:"las la-cookie"},72:{icon:"las la-candy-cane"},100:{icon:"las la-user-tie"},110:{icon:"las la-tshirt"},130:{icon:"las la-hat-cowboy"},140:{icon:"las la-mitten"},150:{icon:"las la-socks"},170:{icon:"las la-gem"},171:{icon:"las la-ring"},180:{icon:"las la-spray-can"},190:{icon:"las la-cut"},200:{icon:"las la-home"},210:{icon:"las la-toilet-paper"},211:{icon:"las la-umbrella"},212:{icon:"las la-baby-carriage"},220:{icon:"las la-couch"},221:{icon:"las la-bed"},222:{icon:"las la-chair"},223:{icon:"las la-bath"},224:{icon:"las la-toilet"},230:{icon:"las la-plug"},231:{icon:"las la-lightbulb"},232:{icon:"las la-fan"},240:{icon:"las la-camera"},241:{icon:"las la-print"},250:{icon:"las la-tools"},251:{icon:"las la-wrench"},252:{icon:"las la-toolbox"},260:{icon:"las la-broom"},270:{icon:"las la-tint"},271:{icon:"las la-fire"},290:{icon:"las la-file-invoice"},300:{icon:"las la-traffic-light"},310:{icon:"las la-bus"},311:{icon:"las la-tram"},320:{icon:"las la-taxi"},330:{icon:"las la-car"},331:{icon:"las la-shuttle-van"},332:{icon:"las la-truck"},333:{icon:"las la-tractor"},340:{icon:"las la-charging-station"},341:{icon:"las la-gas-pump"},342:{icon:"las la-oil-can"},343:{icon:"las la-car-battery"},350:{icon:"las la-bicycle"},351:{icon:"las la-motorcycle"},370:{icon:"las la-train"},380:{icon:"las la-ship"},390:{icon:"las la-plane"},391:{icon:"las la-helicopter"},400:{icon:"las la-phone-volume"},410:{icon:"las la-fax"},420:{icon:"las la-mobile"},421:{icon:"las la-tablet"},430:{icon:"las la-desktop"},431:{icon:"las la-laptop"},440:{icon:"las la-wifi"},441:{icon:"las la-satellite-dish"},442:{icon:"las la-satellite"},450:{icon:"las la-tv"},451:{icon:"las la-broadcast-tower"},460:{icon:"las la-envelope"},470:{icon:"las la-dolly"},471:{icon:"las la-dolly-flatbed"},480:{icon:"las la-shipping-fast"},500:{icon:"las la-heart"},510:{icon:"las la-dumbbell"},511:{icon:"las la-walking"},512:{icon:"las la-running"},513:{icon:"las la-swimmer"},514:{icon:"las la-biking"},515:{icon:"las la-skating"},516:{icon:"las la-skiing"},517:{icon:"las la-snowboarding"},518:{icon:"las la-hiking"},520:{icon:"las la-futbol"},521:{icon:"las la-basketball-ball"},522:{icon:"las la-football-ball"},523:{icon:"las la-volleyball-ball"},524:{icon:"las la-baseball-ball"},530:{icon:"las la-table-tennis"},531:{icon:"las la-bowling-ball"},532:{icon:"las la-golf-ball"},540:{icon:"las la-microphone-alt"},541:{icon:"las la-guitar"},542:{icon:"las la-drum"},550:{icon:"las la-film"},551:{icon:"las la-record-vinyl"},552:{icon:"las la-video"},553:{icon:"las la-music"},554:{icon:"las la-headphones"},555:{icon:"las la-vr-cardboard"},560:{icon:"las la-gamepad"},561:{icon:"las la-shapes"},562:{icon:"las la-puzzle-piece"},563:{icon:"las la-dice-d6"},564:{icon:"las la-dice"},565:{icon:"las la-chess"},570:{icon:"las la-id-card-alt"},571:{icon:"las la-podcast"},580:{icon:"las la-dog"},581:{icon:"las la-fish"},582:{icon:"las la-crow"},589:{icon:"las la-bone"},590:{icon:"las la-umbrella-beach"},591:{icon:"las la-swimming-pool"},592:{icon:"las la-parachute-box"},593:{icon:"las la-hot-tub"},594:{icon:"las la-monument"},595:{icon:"las la-mountain"},596:{icon:"las la-campground"},597:{icon:"las la-hotel"},599:{icon:"las la-passport"},600:{icon:"las la-book-reader"},610:{icon:"las la-book-open"},611:{icon:"las la-book"},620:{icon:"las la-newspaper"},640:{icon:"las la-graduation-cap"},660:{icon:"las la-chalkboard-teacher"},680:{icon:"las la-award"},700:{icon:"las la-glass-cheers"},710:{icon:"las la-gift"},711:{icon:"las la-gifts"},720:{icon:"las la-birthday-cake"},760:{icon:"las la-ribbon"},780:{icon:"las la-donate"},800:{icon:"las la-briefcase-medical"},810:{icon:"las la-hospital"},811:{icon:"las la-ambulance"},820:{icon:"las la-user-nurse"},821:{icon:"las la-user-md"},840:{icon:"las la-stethoscope"},850:{icon:"las la-syringe"},860:{icon:"las la-capsules"},861:{icon:"las la-tablets"},862:{icon:"las la-pills"},863:{icon:"las la-band-aid"},870:{icon:"las la-x-ray"},880:{icon:"las la-glasses"},890:{icon:"las la-thermometer"},891:{icon:"las la-microscope"},892:{icon:"las la-pager"},893:{icon:"las la-vial"},900:{icon:"las la-landmark"},910:{icon:"las la-coins"},920:{icon:"las la-receipt"},930:{icon:"las la-hand-holding-usd"},950:{icon:"las la-file-invoice-dollar"},960:{icon:"las la-clipboard-check"},970:{icon:"las la-percentage"},980:{icon:"las la-credit-card"},981:{icon:"las la-piggy-bank"},990:{icon:"las la-gavel"},1e3:{icon:"las la-pen"},1010:{icon:"las la-minus-circle"},2e3:{icon:"las la-suitcase"},2010:{icon:"las la-wallet"},2020:{icon:"las la-trophy"},2021:{icon:"las la-medal"},2080:{icon:"las la-user-clock"},2100:{icon:"las la-chart-area"},2101:{icon:"las la-chart-line"},3010:{icon:"las la-plus-circle"},3100:{icon:"las la-recycle"},4e3:{icon:"las la-exchange-alt"},4900:{icon:"las la-arrow-circle-right"},5e3:{icon:"las la-star"},5010:{icon:"las la-magic"},5020:{icon:"las la-infinity"},5030:{icon:"las la-clipboard-list"},5040:{icon:"las la-trash-alt"},5050:{icon:"las la-weight-hanging"},5100:{icon:"las la-shopping-bag"},5101:{icon:"las la-shopping-basket"},5102:{icon:"las la-shopping-cart"},5200:{icon:"las la-money-bill-wave-alt"},6e3:{icon:"lab la-amazon"},6001:{icon:"lab la-ebay"},6100:{icon:"lab la-app-store"},6101:{icon:"lab la-google-play"},6200:{icon:"lab la-windows"},6300:{icon:"lab la-kickstarter"},6400:{icon:"lab la-uber"},6500:{icon:"lab la-fedex"},6501:{icon:"lab la-ups"},6502:{icon:"lab la-usps"},6503:{icon:"lab la-dhl"},7e3:{icon:"lab la-playstation"},7001:{icon:"lab la-xbox"},7100:{icon:"lab la-steam"},7200:{icon:"lab la-youtube"},7300:{icon:"lab la-spotify"},7301:{icon:"lab la-itunes"},8e3:{icon:"lab la-evernote"},8100:{icon:"lab la-adobe"},9e3:{icon:"lab la-aws"},9001:{icon:"lab la-linode"},9002:{icon:"lab la-digital-ocean"},9100:{icon:"lab la-github"},9101:{icon:"lab la-bitbucket"}},Io=wr[Lr],Jo="000000",Er=Jo,Un=Jo,ns=Jo,Ws="var(--default-icon-color)",xr=["000000","8e8e93","ff3b30","ff2d55","ff6b22","ff9500","ffcc00","cddc39","009688","4cd964","5ac8fa","2196f3","673ab7","9c27b0"],Md=xr,Nd=xr,Pi=["cc4a66","e3564a","fc892c","ffc349","4dd291","24ceb3","2ab4d0","065786","713670","8e1d51"];class bt{id;name;parentId;category;type;icon;color;currency;balance;balanceTime;comment;creditCardStatementDate;displayOrder;visible;subAccounts;_isAsset;_isLiability;constructor(e,a,n,o,s,r,l,i,c,f,A,T,C,Y,k,$,F){this.id=e,this.name=a,this.parentId=n,this.category=o,this.type=s,this.icon=r,this.color=l,this.currency=i,this.balance=c,this.balanceTime=C,this.comment=f,this.displayOrder=A,this.visible=T,this.creditCardStatementDate=Y,this._isAsset=k,this._isLiability=$,typeof F<"u"?this.subAccounts=F:this.subAccounts=void 0}get isAsset(){if(typeof this._isAsset<"u")return this._isAsset;const e=Ve.valueOf(this.category);return e?e.isAsset:!1}get isLiability(){if(typeof this._isLiability<"u")return this._isLiability;const e=Ve.valueOf(this.category);return e?e.isLiability:!1}get hidden(){return!this.visible}equals(e){if(!(this.id===e.id&&this.name===e.name&&this.parentId===e.parentId&&this.category===e.category&&this.type===e.type&&this.icon===e.icon&&this.color===e.color&&this.currency===e.currency&&this.balance===e.balance&&this.balanceTime===e.balanceTime&&this.comment===e.comment&&this.displayOrder===e.displayOrder&&this.visible===e.visible&&this.creditCardStatementDate===e.creditCardStatementDate))return!1;if(this.subAccounts&&e.subAccounts){if(this.subAccounts.length!==e.subAccounts.length)return!1;for(let n=0;n<this.subAccounts.length;n++)if(!this.subAccounts[n].equals(e.subAccounts[n]))return!1}else if(this.subAccounts&&this.subAccounts.length||e.subAccounts&&e.subAccounts.length)return!1;return!0}fillFrom(e){this.id=e.id,this.category=e.category,this.type=e.type,this.name=e.name,this.icon=e.icon,this.color=e.color,this.currency=e.currency,this.balance=e.balance,this.balanceTime=e.balanceTime,this.comment=e.comment,this.creditCardStatementDate=e.creditCardStatementDate,this.visible=e.visible}setSuitableIcon(e,a){const n=Ve.values();for(const o of n)if(o.type===e){if(this.icon!==o.defaultAccountIconId)return;break}for(const o of n)o.type===a&&(this.icon=o.defaultAccountIconId)}toCreateRequest(e,a,n){let o;if(this.type===Ne.MultiSubAccounts.type&&(o=[],a||(a=this.subAccounts),a))for(const s of a)o.push(s.toCreateRequest(e,void 0,this));return{name:this.name,category:n?n.category:this.category,type:n?Ne.SingleAccount.type:this.type,icon:this.icon,color:this.color,currency:n||this.type===Ne.SingleAccount.type?this.currency:Tr,balance:n||this.type===Ne.SingleAccount.type?this.balance:0,balanceTime:(n||this.type===Ne.SingleAccount.type)&&this.balanceTime?this.balanceTime:0,comment:this.comment,creditCardStatementDate:!n&&this.category===Ve.CreditCard.type?this.creditCardStatementDate:void 0,subAccounts:n?void 0:o,clientSessionId:n?void 0:e}}toModifyRequest(e,a,n){let o;if(this.type===Ne.MultiSubAccounts.type&&(o=[],a||(a=this.subAccounts),a))for(const s of a)o.push(s.toModifyRequest(e,void 0,this));return{id:this.id||"0",name:this.name,category:n?n.category:this.category,icon:this.icon,color:this.color,currency:n&&(!this.id||this.id==="0")?this.currency:void 0,balance:n&&(!this.id||this.id==="0")?this.balance:void 0,balanceTime:n&&(!this.id||this.id==="0")?this.balanceTime:void 0,comment:this.comment,creditCardStatementDate:!n&&this.category===Ve.CreditCard.type?this.creditCardStatementDate:void 0,hidden:!this.visible,subAccounts:n?void 0:o,clientSessionId:n?void 0:e}}getAccountOrSubAccountId(e){if(this.type===Ne.SingleAccount.type)return this.id;if(this.type===Ne.MultiSubAccounts.type&&!e)return this.id;if(this.type===Ne.MultiSubAccounts.type&&e){if(!this.subAccounts||!this.subAccounts.length)return null;for(const a of this.subAccounts)if(e&&e===a.id)return a.id;return null}else return null}isAccountOrSubAccountHidden(e){if(this.type===Ne.SingleAccount.type)return this.hidden;if(this.type===Ne.MultiSubAccounts.type&&!e)return this.hidden;if(this.type===Ne.MultiSubAccounts.type&&e){if(!this.subAccounts||!this.subAccounts.length)return!1;for(const a of this.subAccounts)if(e&&e===a.id)return a.hidden;return!1}else return!1}getAccountOrSubAccountComment(e){if(this.type===Ne.SingleAccount.type)return this.comment;if(this.type===Ne.MultiSubAccounts.type&&!e)return this.comment;if(this.type===Ne.MultiSubAccounts.type&&e){if(!this.subAccounts||!this.subAccounts.length)return null;for(const a of this.subAccounts)if(e&&e===a.id)return a.comment;return null}else return null}getAccountOrSubAccount(e){if(this.type===Ne.SingleAccount.type)return this;if(this.type===Ne.MultiSubAccounts.type&&!e)return this;if(this.type===Ne.MultiSubAccounts.type&&e){if(!this.subAccounts||!this.subAccounts.length)return null;for(const a of this.subAccounts)if(e&&e===a.id)return a;return null}else return null}getSubAccount(e){if(!this.subAccounts||!this.subAccounts.length)return null;for(const a of this.subAccounts)if(e&&e===a.id)return a;return null}getSubAccountCurrencies(e,a){if(!this.subAccounts||!this.subAccounts.length)return[];const n={},o=[];for(const s of this.subAccounts)if(!(!e&&s.hidden)){if(a&&a===s.id)return[s.currency];n[s.currency]||(n[s.currency]=!0,o.push(s.currency))}return o}cloneSelf(){return new bt(this.id,this.name,this.parentId,this.category,this.type,this.icon,this.color,this.currency,this.balance,this.comment,this.displayOrder,this.visible,this.balanceTime,this.creditCardStatementDate,this.isAsset,this.isLiability)}clone(){return new bt(this.id,this.name,this.parentId,this.category,this.type,this.icon,this.color,this.currency,this.balance,this.comment,this.displayOrder,this.visible,this.balanceTime,this.creditCardStatementDate,this.isAsset,this.isLiability,typeof this.subAccounts<"u"?bt.cloneAccounts(this.subAccounts):void 0)}createNewSubAccount(e,a){return new bt("","","",0,0,this.icon,this.color,e,0,"",0,!0,a,0)}static createNewAccount(e,a){return new bt("","","",Ve.Cash.type,Ne.SingleAccount.type,Mr,Un,e,0,"",0,!0,a,0)}static of(e){return new bt(e.id,e.name,e.parentId,e.category,e.type,e.icon,e.color,e.currency,e.balance,e.comment,e.displayOrder,!e.hidden,void 0,e.creditCardStatementDate,e.isAsset,e.isLiability,e.subAccounts?bt.ofMulti(e.subAccounts):void 0)}static ofMulti(e){const a=[];for(const n of e)a.push(bt.of(n));return a}static findAccountNameById(e,a,n){for(const o of e)if(o.id===a)return o.name;return n}static cloneAccounts(e){const a=[];for(const n of e)a.push(n.clone());return a}static sortAccounts(e,a){return!e||!e.length?e:e.sort(function(n,o){if(n.category!==o.category){const l=Ve.valueOf(n.category),i=Ve.valueOf(o.category);return l?i?l.displayOrder-i.displayOrder:-1:1}if(n.parentId===o.parentId)return n.displayOrder-o.displayOrder;if(n.id===o.parentId)return-1;if(o.id===n.parentId)return 1;let s=n.displayOrder,r=o.displayOrder;return n.parentId&&n.parentId!=="0"&&(a&&a[n.parentId]?s=a[n.parentId].displayOrder:s=null),o.parentId&&o.parentId!=="0"&&(a&&a[o.parentId]?r=a[o.parentId].displayOrder:r=null),s!==null&&r!==null?s-r:n.id.localeCompare(o.id)})}}class Xn extends bt{displayBalance;constructor(e,a){super(e.id,e.name,e.parentId,e.category,e.type,e.icon,e.color,e.currency,e.balance,e.comment,e.displayOrder,e.visible,e.balanceTime,e.creditCardStatementDate,e.isAsset,e.isLiability,e.subAccounts),this.displayBalance=a}static fromAccount(e,a){return new Xn(e,a)}}class qo{category;name;icon;accounts;displayBalance;constructor(e,a,n,o,s){this.category=e,this.name=a,this.icon=n,this.accounts=o,this.displayBalance=s}static of(e,a,n){return new qo(e.category,e.name,e.icon,a,n)}}const bn=1999,Yn=2100,Qc=1999,Xc=2,jc=16,eu=[75200,103104,111272,108864,111776,60068,44352,87918,19360,75168,103786,86688,92480,95560,88736,43954,38720,84832,41709,42336,86624,62120,54592,88736,46756,38592,85452,84416,107712,120010,109152,46400,60742,77216,38390,38304,84384,106861,107680,109120,113290,92992,44448,43876,37728,84718,84320,87200,91307,55872,88896,38599,75488,37872,37600,51552,53581,119968,54592,85385,87488,75200,107974,103104,109230,108864,111776,47786,44352,85408,43944,42400,86896,86688,92480,93516,88736,43840,87880,84832,42336,91366,53856,58990,54592,88736,38571,38592,84704,43464,107200,119504,109120,111936,54605,44448,38336,86952,83360,107168,124068,109120],tu=["6K4J6L5K6L6M7N8N8N9O8N7M","6L4J5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J6L5K6L6L7N8N8N8N7M7M","6K4J6L5K6L6M7N8N8N9O8N7M","6L4J5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J6L5K5L6L7N7N8N8N7M7M","6K4J6L5K6L6M7N8N8N9O8N7M","6L4J5K4K5L5L7M7N7M8N7M7L","5K4I5K4K5L5L7N7N7N8N7M7M","5K4J6L5K5L6L7N7N8N8N7M7M","6K4J6L5K6L6M7N8N8N8O8N7M","6L4J5K4K5K5L7M7N7M8N7M7L","5K4I5K4K5L5L7M7N7N8N7M7M","5K4J6L5K5L6L7N7N8N8N7M7M","6K4J6L5K6L6M7N8N8N8O8M7M","6K4J5K4J5K5L7M7N7M8N7M7L","5K3I5K4K5L5L7M7N7N8N7M7M","5K4J5L5K5L6L7N7N8N8N7M7M","5K4J6L5K6L6L7N8N8N8O8M7M","6K4J5K4J5K5L6M7M7M8N7M7L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4J5K5K5L6L7N7N7N8N7M7M","5K4J6L5K6L6L7N8N8N8O8M7M","6K4J5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J6L5K6L6L7N8N8N8N7M7M","6K4J5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J6L5K6L6L7N8N8N8N7M7M","6K4J5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J6L5K5L6L7N7N8N8N7M7M","6K4J5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J6L5K5L6L7N7N8N8N7M7M","6K4J5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5K5L7M7N7M8N7M7L","5K4I5K4K5L5L7N7N7N8N7M7M","5K4J6L5K5L6L7N7N8N8N7M7M","6K4J5K4J5K5L6M7M7M7N7M6L","5K3I5K4J5K5L7M7N7M8N7M7L","5K4I5K4K5L5L7M7N7N8N7M7M","5K4J6L5K5L6L7N7N8N8N7M7M","6K4J5K4J5K5K6M7M7M7N7L6L","5J3I5K4J5K5L6M7M7M8N7M7L","5K3I5K4K5L5L7M7N7N8N7M7M","5K4J5K5K5L6L7N7N7N8N7M7M","5K4J5K4J5K5K6M7M7M7N7L6L","5J3I5K4J5K5L6M7M7M8N7M7L","5K3I5K4K5L5L7M7N7N8N7M7M","5K4J5K5K5L5L7N7N7N8N7M7M","5K4J5K4J5K5K6M7M7M7N7L6L","5J3I5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4J5K5K5L5L7N7N7N8N7M7M","5K4J5K4J5K5K6M7M7M7M6L6L","5J3I5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J5K4J5K5K6M7M7M7M6L6L","5J3I5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J5K4J4K5K6M6M7M7M6L6L","5J3I5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5K5L7M7N7M8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M","5K4J5K4J4K5K6M6M7M7M6L6L","5J3I5K4J5K5L6M7M7M7N7M6L","5K3I5K4K5K5L7M7N7M8N7M7L","5K4I5K4K5L5L7M7N7N8N7M7M","5K4J5K4J4K5K6M6M7M7M6L6L","5J3I5K4J5K5L6M7M7M7N7M6L","5K3I5K4J5K5L6M7N7M8N7M7L","5K4I5K4K5L5L7M7N7N8N7M7M","5K4J5K4J4K5K6M6M7M7M6L6L","5J3I5K4J5K5K6M7M7M7N7L6L","5K3I5K4J5K5L6M7M7M8N7M7L","5K3I5K4K5L5L7M7N7N8N7M7M","5K4J4J4J4K5K6M6M6M7M6L6L","4J3I5K4J5K5K6M7M7M7N7L6L","5J3I5K4J5K5L6M7M7M8N7M7L","5K3I5K4K5L5L7M7N7N8N7M7M","5K4J4J4J4K4K6M6M6M7M6L6L","4J3I5K4J5K5K6M7M7M7N7L6L","5J3I5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4J4J4J4K4K6M6M6M7M6L6L","4J3I5K4J5K5K6M7M7M7M6L6L","5J3I5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4I4J4J4K4K6M6M6M7M6L6L","4J3I5K4J5K5K6M6M7M7M6L6L","5J3I5K4J5K5L6M7M7M8N7M6L","5K3I5K4K5L5L7M7N7N8N7M7L","5K4I5K5K5L5L7N7N7N8N7M7M"],Bs=12,oo=30,io=29,au=nu();function nu(){const t=[],e=new Date(Qc,Xc-1,jc);for(let a=bn;a<=Yn;a++){const n=eu[a-bn];if(!n)return t;const o=n>>5,s=n>>1&15;let r=[],l,i=o,c=0;for(let A=12;A>=1;A--){const T=(i&1)===1;i=i>>1,T?(r.push(oo),c+=oo):(r.push(io),c+=io)}s>0&&(l=(n&1)===1?oo:io,c+=l),r=r.reverse();const f={year:a,totalDays:c,firstDayGregorianMonth:e.getMonth()+1,firstDayGregorianDay:e.getDate(),normalMonthDays:r,leapMonth:s>0?s:void 0,leapMonthDays:l};e.setDate(e.getDate()+c),t.push(f)}return t}function su(t,e){if(t<0)return"";const a=48;return t.toString().split("").map(n=>{const o=n.charCodeAt(0)-a;return o<0||o>9?n:e.numerals[o]}).join("")}function bo(t){if(!(t<bn||t>Yn))return au[t-bn]}function ou(t,e){if(t<bn||t>Yn||e<1||e>12)return[0,0,0,0];const a=t-bn,n=tu[a];if(!n)return[0,0,0,0];const o=(e-1)*2,s=n.charAt(o),r=n.charAt(o+1);let l=0,i=0,c=0,f=0;return s&&(l=parseInt(s,36),i=o),r&&(c=parseInt(r,36),f=o+1),[l,i,c,f]}function iu(t,e){if(e==null||!e.solarTermNames)return"";const[a,n,o,s]=ou(t.year,t.month);return a>0&&a===t.day?e.solarTermNames[n]??"":o>0&&o===t.day?e.solarTermNames[s]??"":""}function kr(t){if(t.year<bn||t.year>Yn||t.month<1||t.month>12)return;const e=bo(t.year);if(!e)return;let a=0,n=1,o=1;e.firstDayGregorianMonth<t.month||e.firstDayGregorianMonth===t.month&&e.firstDayGregorianDay<=t.day?a=t.year:a=t.year-1;const s=bo(a);if(!s)return;if(a===t.year&&t.month===s.firstDayGregorianMonth&&t.day===s.firstDayGregorianDay)return{year:a,month:n,day:o,isLeapMonth:s.leapMonth===1};const r=zr({year:s.year,month:s.firstDayGregorianMonth,day:s.firstDayGregorianDay},t);if(r<0)return;let l=r;for(;l>0;){let i=s.normalMonthDays[n-1];if(!i)return;let c=!1,f=!1,A=!1;if(l>=i?(l-=i,f=!0):(o+=l,l=0),o>i&&(o=i-o),f&&l>0&&n===s.leapMonth&&(i=s.leapMonthDays||0,c=!0,l>=i?(l-=i,A=!0):(o+=l,l=0)),o>i&&(o=i-o),A?n++:f&&!c&&(n===s.leapMonth?c=!0:n++),n>Bs&&(n=n-Bs,a++,a>Yn))return;if(l===0)return{year:a,month:n,day:o,isLeapMonth:c}}}function Co(t,e,a){return{gregorianYear:t.year,gregorianMonth:t.month,gregorianDay:t.day,year:e.year,month:e.month,day:e.day,displayYear:su(e.year,a),displayMonth:(e.isLeapMonth?a.leapMonthPrefix:"")+a.monthNames[e.month-1],displayDay:a.dayNames[e.day-1]??"",isLeapMonth:e.isLeapMonth,solarTermName:iu(t,a)}}function ru(t,e){const a={year:t.year,month:t.month1base,day:1},n=kr(a);if(!n)return;const o=bo(n.year);if(!o)return;const s=[];s.push(Co(a,n,e));const r=new Date(a.year,a.month-1,a.day);let l=n.year,i=n.month,c=n.day,f=n.isLeapMonth,A=Yr(t)-1;for(;A>0;){const T=f?o.leapMonthDays:o.normalMonthDays[i-1];if(!T)return;if(r.setDate(r.getDate()+1),c++,A--,c>T){if(c=c-T,o.leapMonth===i&&!f)f=!0;else if(i++,i>Bs&&(i=i-Bs,l++,l>Yn))return}s.push(Co({year:r.getFullYear(),month:r.getMonth()+1,day:r.getDate()},{year:l,month:i,day:c,isLeapMonth:f},e))}return s}function Or(t,e){const a=kr(t);if(a)return Co(t,a,e)}function Ri(t){let e=t.displayDay;return t.day===1&&(e=t.displayMonth),t.solarTermName&&(e=t.solarTermName),{year:t.gregorianYear,month:t.gregorianMonth,day:t.gregorianDay,displayDate:e}}const lu=-720,cu=840;function ma(t){return`Fixed/Timezone${t}`}(function(){for(let e=lu;e<=cu;e+=15){const a=ma(e);De.tz.zone(a)||De.tz.add(De.tz.pack({name:a,abbrs:[`FIX${e}`],offsets:[-e],untils:[0]}))}})();class Ct{static tokenFormatFuncs={YY:(e,a)=>({value:e.getLocalizedCalendarYear(a),hasNumeral:!0,minNumeralLength:2,maxLength:2}),YYYY:(e,a)=>({value:e.getLocalizedCalendarYear(a),hasNumeral:!0,minNumeralLength:4}),M:(e,a)=>({value:e.getLocalizedCalendarMonth(a),hasNumeral:!0}),MM:(e,a)=>({value:e.getLocalizedCalendarMonth(a),hasNumeral:!0,minNumeralLength:2}),MMM:(e,a)=>({value:e.getLocalizedCalendarMonthDisplayShortName(a)}),MMMM:(e,a)=>({value:e.getLocalizedCalendarMonthDisplayName(a)}),D:(e,a)=>({value:e.getLocalizedCalendarDay(a),hasNumeral:!0}),DD:(e,a)=>({value:e.getLocalizedCalendarDay(a),hasNumeral:!0,minNumeralLength:2}),dd:(e,a)=>({value:e.getWeekDayDisplayMinName(a)}),ddd:(e,a)=>({value:e.getWeekDayDisplayShortName(a)}),dddd:(e,a)=>({value:e.getWeekDayDisplayName(a)}),H:e=>({value:e.getHour()}),HH:e=>({value:e.getHour(),minNumeralLength:2}),h:e=>({value:$i(e.getHour())}),hh:e=>({value:$i(e.getHour()),minNumeralLength:2}),m:e=>({value:e.getMinute()}),mm:e=>({value:e.getMinute(),minNumeralLength:2}),s:e=>({value:e.getSecond()}),ss:e=>({value:e.getSecond(),minNumeralLength:2}),A:(e,a)=>({value:e.getDisplayAMPM(a)}),Z:e=>({value:Cn(e.getTimezoneUtcOffsetMinutes()),hasNumeral:!0})};instance;chineseDateInfo=void 0;persianDateInfo=void 0;constructor(e){this.instance=e}getUnixTime(){return this.instance.unix()}getLocalizedCalendarYear(e){return e&&e.calendarType===wt.Buddhist?(this.instance.year()+543).toString():e&&e.calendarType===wt.Chinese?this.getChineseDateInfo(e.chineseCalendarLocaleData)?.displayYear??"":e&&e.calendarType===wt.Persian?this.getPersianDateInfo().jy.toString():this.instance.year().toString()}getGregorianCalendarYear(){return this.instance.year()}getGregorianCalendarQuarter(){return this.instance.quarter()}getLocalizedCalendarQuarter(e){return this.instance.quarter()}getGregorianCalendarMonth(){return this.instance.month()+1}getGregorianCalendarMonthDisplayName(e){return!e||!e.localeData?"":e.localeData.months()[this.getGregorianCalendarMonth()-1]||""}getGregorianCalendarMonthDisplayShortName(e){return!e||!e.localeData?"":e.localeData.monthsShort()[this.getGregorianCalendarMonth()-1]||""}getLocalizedCalendarMonth(e){return e&&e.calendarType===wt.Chinese?this.getChineseDateInfo(e.chineseCalendarLocaleData)?.displayMonth??"":e&&e.calendarType===wt.Persian?this.getPersianDateInfo().jm.toString():(this.instance.month()+1).toString()}getLocalizedCalendarMonthDisplayName(e){return!e||!e.localeData?"":e&&e.calendarType===wt.Chinese?this.getChineseDateInfo(e.chineseCalendarLocaleData)?.displayMonth??"":e&&e.calendarType===wt.Persian?e.persianCalendarLocaleData.monthNames[this.getPersianDateInfo().jm-1]??"":e.localeData.months()[this.instance.month()]||""}getLocalizedCalendarMonthDisplayShortName(e){return!e||!e.localeData?"":e&&e.calendarType===wt.Chinese?this.getChineseDateInfo(e.chineseCalendarLocaleData)?.displayMonth??"":e&&e.calendarType===wt.Persian?e.persianCalendarLocaleData.monthShortNames[this.getPersianDateInfo().jm-1]??"":e.localeData.monthsShort()[this.instance.month()]||""}getGregorianCalendarDay(){return this.instance.date()}getLocalizedCalendarDay(e){return e&&e.calendarType===wt.Chinese?this.getChineseDateInfo(e.chineseCalendarLocaleData)?.displayDay??"":e&&e.calendarType===wt.Persian?this.getPersianDateInfo().jd.toString():this.instance.date().toString()}isLocalizedCalendarFirstDayOfMonth(e){return e&&e.calendarType===wt.Chinese?this.getChineseDateInfo(e.chineseCalendarLocaleData)?.day===1:e&&e.calendarType===wt.Persian?this.getPersianDateInfo().jd===1:this.instance.date()===1}getGregorianCalendarYearDashMonthDashDay(){return this.instance.year()+"-"+(this.instance.month()+1).toString().padStart(2,be.WesternArabicNumerals.digitZero)+"-"+this.instance.date().toString().padStart(2,be.WesternArabicNumerals.digitZero)}getGregorianCalendarYearDashMonth(){return this.instance.year()+"-"+(this.instance.month()+1).toString().padStart(2,be.WesternArabicNumerals.digitZero)}getWeekDay(){return mt.valueOf(this.instance.day())}getWeekDayDisplayName(e){return!e||!e.localeData?"":e.localeData.weekdays()[this.instance.day()]||""}getWeekDayDisplayShortName(e){return!e||!e.localeData?"":e.localeData.weekdaysShort()[this.instance.day()]||""}getWeekDayDisplayMinName(e){return!e||!e.localeData?"":e.localeData.weekdaysMin()[this.instance.day()]||""}getHour(){return this.instance.hour()}getMinute(){return this.instance.minute()}getSecond(){return this.instance.second()}getDisplayAMPM(e){return!e||!e.localeData?"":e.localeData.meridiem(this.getHour(),this.getMinute(),!1)}getTimezoneUtcOffsetMinutes(){return this.instance.utcOffset()}getDateTimeAfterDays(e){return Ct.of(this.instance.clone().add(e,"days"))}toGregorianCalendarYearMonthDay(){return{year:this.instance.year(),month:this.instance.month()+1,day:this.instance.date()}}toGregorianCalendarYear0BasedMonth(){return{year:this.instance.year(),month0base:this.instance.month()}}format(e,a){let n="",o=0;for(;o<e.length;){let s=!1;for(let r=4;r>0;r--){const l=e.substring(o,o+r),i=Ct.tokenFormatFuncs[l];if(na(i)){const c=i(this,a);let f=c.value.toString();Qe(c.minNumeralLength)&&(f=f.padStart(c.minNumeralLength,be.WesternArabicNumerals.digitZero)),Qe(c.maxLength)&&f.length>c.maxLength&&(f=f.substring(f.length-c.maxLength)),Ae(c.value)?a&&a.numeralSystem&&(f=a.numeralSystem.replaceWesternArabicDigitsToLocalizedDigits(f)):Ke(f)&&c.hasNumeral&&a&&a.numeralSystem&&(f=a.numeralSystem.replaceWesternArabicDigitsToLocalizedDigits(f)),n+=f,o+=r,s=!0;break}}s||(n+=e[o],o++)}return n}static of(e){return new Ct(e)}static now(){return new Ct(De())}getChineseDateInfo(e){return this.chineseDateInfo||(this.chineseDateInfo=Or({year:this.instance.year(),month:this.instance.month()+1,day:this.instance.date()},e)),this.chineseDateInfo}getPersianDateInfo(){return this.persianDateInfo||(this.persianDateInfo=Vl.toJalaali(this.instance.year(),this.instance.month()+1,this.instance.date())),this.persianDateInfo}static isGregorianCalendarYearFirstTime(e){const a=e.instance.clone().set({millisecond:0}).unix(),n=e.instance.clone().set({millisecond:0}).startOf("year").unix();return a===n}static isGregorianCalendarYearLastTime(e){const a=e.instance.clone().set({millisecond:999}).unix(),n=e.instance.clone().set({millisecond:999}).endOf("year").unix();return a===n}static isGregorianCalendarMonthFirstTime(e){const a=e.instance.clone().set({millisecond:0}).unix(),n=e.instance.clone().set({millisecond:0}).startOf("month").unix();return a===n}static isGregorianCalendarMonthLastTime(e){const a=e.instance.clone().set({millisecond:999}).unix(),n=e.instance.clone().set({millisecond:999}).endOf("month").unix();return a===n}}function Ur(){return[2e3,De().year()+1]}function Ps(t,e){return!Ae(t)||!Ae(e)?!1:t>0&&e>=0&&e<=11}function Yi(t){const e=De.unix(t);return{year:e.year(),month0base:e.month()}}function ss(t){if(!Ke(t))return null;const e=t.split("-");if(e.length!==2)return null;const a=parseInt(e[0]),n=parseInt(e[1])-1;return Ps(a,n)?{year:a,month0base:n}:null}function zi(t){return!t||!Ps(t.year,t.month0base)?"":`${t.year}-${t.month0base+1}`}function $i(t){return t=t%12,t===0&&(t=12),t}function Fr(t){return t>11}function uu(t,e){const a=De.unix(t),n=De.unix(e);return a.year()===n.year()&&a.month()===n.month()&&a.date()===n.date()}function mu(t,e){const a=De.unix(t),n=De.unix(e);return a.year()===n.year()&&a.month()===n.month()&&a.date()===n.date()&&a.hour()===n.hour()}function Cn(t){const e=Math.trunc(Math.abs(t)/60),a=Math.abs(t)-e*60,n=e.toString().padStart(2,be.WesternArabicNumerals.digitZero),o=a.toString().padStart(2,be.WesternArabicNumerals.digitZero);return t>=0?`+${n}:${o}`:`-${n}:${o}`}function ro(t,e){return Cn(Ta(t,e))}function Ta(t,e){return e?De.unix(t).tz(e).utcOffset():De.unix(t).utcOffset()}function du(t){return Cn(Br(t))}function Br(t){return-Dn(os(Pe(t)).getUnixTime()).getTimezoneOffset()}function Vs(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}function Dn(t){return new Date(t*1e3)}function Pr(t){return Math.floor(t.getTime()/1e3)}function _o(t){const e=De().set({year:t.getGregorianCalendarYear(),month:t.getGregorianCalendarMonth()-1,date:t.getGregorianCalendarDay(),hour:t.getHour(),minute:t.getMinute(),second:t.getSecond(),millisecond:0});return Ct.of(e)}function os(t){const e=De().tz(Vs()).set({year:t.getGregorianCalendarYear(),month:t.getGregorianCalendarMonth()-1,date:t.getGregorianCalendarDay(),hour:t.getHour(),minute:t.getMinute(),second:t.getSecond(),millisecond:0});return Ct.of(e)}function fu(t,e){const a=De().tz(ma(e)).set({year:t.getGregorianCalendarYear(),month:t.getGregorianCalendarMonth()-1,date:t.getGregorianCalendarDay(),hour:t.getHour(),minute:t.getMinute(),second:t.getSecond(),millisecond:0});return Ct.of(a)}function Rr(){return Ct.now()}function za(){return De().unix()}function ua(t,e,a){const n=De().set({year:t,month:e-1,date:a,hour:0,minute:0,second:0,millisecond:0});return Ct.of(n)}function Pe(t){return Ct.of(De.unix(t))}function Zs(t){return Ct.of(De.unix(t).tz(Vs()))}function ra(t,e){return Ct.of(De.unix(t).tz(ma(e)))}function Ld(t,e){const a=De(t,e.format);if(a.isValid())return Ct.of(a)}function Gi(t,e){const a=De(t,e);if(a.isValid())return Ct.of(a)}function Kt(t,e,a){return t.format(e,a)}function Ia(t,e,a){return Pe(t).format(e,a)}function Ki(t,e){return Ct.now().format(t,e)}function gu(t,e,a){return Ct.of(De(t,"YYYY-MM-DD")).format(e,a)}function pu(t,e,a){return Ct.of(De(t,"MM-DD")).format(e,a)}function wd(t){if(!Ke(t))return null;const e=t.split("-");if(e.length!==3)return null;const a=parseInt(e[0]),n=parseInt(e[1]),o=parseInt(e[2]);if(!Ae(a)||!Ae(n)||!Ae(o)||a<1e3||a>9999||n<1||n>12||o<1||o>31)return null;const s=new Date(a,n-1,o);return s.getFullYear()!==a||s.getMonth()!==n-1||s.getDate()!==o?null:s}function Ed(t){if(!t)return"";const e=t.getFullYear().toString().padStart(4,be.WesternArabicNumerals.digitZero),a=(t.getMonth()+1).toString().padStart(2,be.WesternArabicNumerals.digitZero),n=t.getDate().toString().padStart(2,be.WesternArabicNumerals.digitZero);return`${e}-${a}-${n}`}function zn(t){return t?Pe(t).getGregorianCalendarYearDashMonth():""}function Yr(t){return De().set({year:t.year,month:t.month1base-1}).daysInMonth()}function xd(t){return Fr(t)?Ua.PM.name:Ua.AM.name}function qe(t,e,a){return De.unix(t).subtract(e,a).unix()}function Fn(t,e,a){return De.unix(t).add(e,a).unix()}function zr(t,e){const a=De().set({year:t.year,month:t.month-1,date:t.day,hour:0,minute:0,second:0,millisecond:0});return De().set({year:e.year,month:e.month-1,date:e.day,hour:0,minute:0,second:0,millisecond:0}).diff(a,"days")}function yu(t){const e=Math.trunc(Math.abs(t)/60),a=Math.abs(t)-e*60;return{offsetHours:e,offsetMinutes:a}}function sa(){return De().set({hour:0,minute:0,second:0,millisecond:0}).unix()}function Zn(){return De.unix(sa()).add(1,"days").subtract(1,"seconds").unix()}function Rs(t){const e=De.unix(sa());Ae(t)||(t=0);let a=e.day()-t;return a<0&&(a+=7),e.subtract(a,"days").unix()}function Do(t){return De.unix(Rs(t)).add(7,"days").subtract(1,"seconds").unix()}function xa(){const t=De.unix(sa());return t.subtract(t.date()-1,"days").unix()}function Jn(){return De.unix(xa()).add(1,"months").subtract(1,"seconds").unix()}function So(t){return De().set({date:t,hour:0,minute:0,second:0,millisecond:0}).unix()}function Hi(t){return De.unix(So(t)).add(1,"days").subtract(1,"seconds").unix()}function Za(){const t=De.unix(sa());return t.subtract(t.dayOfYear()-1,"days").unix()}function hn(){return De.unix(Za()).add(1,"years").subtract(1,"seconds").unix()}function $r(t,e){let a=De.unix(t);return Ae(e)&&(a=a.tz(ma(e))),a.set({hour:0,minute:0,second:0,millisecond:0}).subtract(a.dayOfYear()-1,"days").unix()}function Gr(t,e){let a=De.unix(t);Ae(e)&&(a=a.tz(ma(e))),a=a.set({hour:0,minute:0,second:0,millisecond:0});const n=a.month(),o=Math.floor(n/3)*3;return a.set({month:o,date:1}).unix()}function Js(t,e){let a=De.unix(t);return Ae(e)&&(a=a.tz(ma(e))),a.set({hour:0,minute:0,second:0,millisecond:0}).subtract(a.date()-1,"days").unix()}function Kr(t,e){let a=De.unix(Js(t,e));return Ae(e)&&(a=a.tz(ma(e))),a.add(1,"months").subtract(1,"seconds").unix()}function Qo(t,e){let a=De.unix(t);return Ae(e)&&(a=a.tz(ma(e))),a.set({hour:0,minute:0,second:0,millisecond:0}).unix()}function hu(t,e){let a=De.unix(t);return Ae(e)&&(a=a.tz(ma(e))),a.set({hour:0,minute:0,second:0,millisecond:0}).add(1,"days").subtract(1,"seconds").unix()}function Hr(t){return De().set({year:t,month:0,date:1,hour:0,minute:0,second:0,millisecond:0}).unix()}function Tu(t){return De.unix(Hr(t)).add(1,"years").subtract(1,"seconds").unix()}function Wr(t){return De().set({year:t.year,month:(t.quarter-1)*3,date:1,hour:0,minute:0,second:0,millisecond:0}).unix()}function vu(t){return De.unix(Wr(t)).add(3,"months").subtract(1,"seconds").unix()}function cn(t){let e=null;return Ke(t)?e=ss(t):He(t)&&"month0base"in t&&Ps(t.year,t.month0base)?e=t:He(t)&&"month1base"in t&&Ps(t.year,t.month1base-1)&&(e={year:t.year,month0base:t.month1base-1}),e?De().set({year:e.year,month:e.month0base,date:1,hour:0,minute:0,second:0,millisecond:0}).unix():0}function is(t){return De.unix(cn(t)).add(1,"months").subtract(1,"seconds").unix()}function qs(t,e){let a=null,n=null;return Ke(t)?a=ss(t):He(t)&&"month0base"in t?a=t:He(t)&&"month1base"in t&&(a={year:t.year,month0base:t.month1base-1}),Ke(e)?n=ss(e):He(e)&&"month0base"in e?n=e:He(e)&&"month1base"in e&&(n={year:e.year,month0base:e.month1base-1}),!a||!n?null:{startYearMonth:a,endYearMonth:n}}function Au(t,e){const a=[],n=qs(t,e);if(!n)return a;for(let o=n.startYearMonth.year;o<=n.endYearMonth.year;o++){const s={year:o,minUnixTime:Hr(o),maxUnixTime:Tu(o)};a.push(s)}return a}function Iu(t,e,a){const n=[],o=qs(t,e);if(!o)return n;const s=cn(o.startYearMonth),r=is(o.endYearMonth);let l=Xe.valueOf(a);l||(l=Xe.Default);for(let i=o.startYearMonth.year-1;i<=o.endYearMonth.year+1;i++){const c=cn({year:i,month1base:l.month}),f=Sn(c,l.value),A=zs(c,l.value),T=_r(f,l.value);if(f<=r&&A>=s){const C={year:T,minUnixTime:f,maxUnixTime:A};n.push(C)}if(f>r)break}return n}function bu(t,e){const a=[],n=qs(t,e);if(!n)return a;for(let o=n.startYearMonth.year,s=n.startYearMonth.month0base;o<n.endYearMonth.year||o===n.endYearMonth.year&&Math.floor(s/3)<=Math.floor(n.endYearMonth.month0base/3);){const r={year:o,quarter:Math.floor(s/3)+1},l=Wr(r),i=vu(r);if(a.push(Ro.of(r,l,i)),o===n.endYearMonth.year&&s>=n.endYearMonth.month0base)break;s>=9?(o++,s=0):s+=3}return a}function Cu(t,e){const a=[],n=qs(t,e);if(!n)return a;for(let o=n.startYearMonth.year,s=n.startYearMonth.month0base;o<=n.endYearMonth.year||s<=n.endYearMonth.month0base;){const r={year:o,month0base:s},l=cn(r),i=is(r);if(a.push(Yo.of(r,l,i)),o===n.endYearMonth.year&&s===n.endYearMonth.month0base)break;s>=11?(o++,s=0):s++}return a}function Vr(t,e){const a=[];if(!t||!e)return a;let n=t;for(;n<=e;){const o=Pe(n),s=Qo(n),r=hu(n);a.push(zo.of(o.toGregorianCalendarYearMonthDay(),s,r)),n=r+1}return a}function Du(t,e,a,n,o){return a>Us&&e[a-1]&&e[a-1].key?e[a-1]:a===Us&&t[n]&&t[n].key?t[n]:o}function Su(t,e,a){const n=De.unix(Pe(t).getUnixTime()).set({millisecond:0}),o=De.unix(Pe(e).getUnixTime()).set({millisecond:999}),s=n.clone().startOf("month"),r=o.clone().endOf("month");if(s.unix()===n.unix()&&r.unix()===o.unix()){const i=o.year()*12+(o.month()+1)-n.year()*12-(n.month()+1)+1,c=n.add(i*a,"months"),f=c.clone().add(i,"months").subtract(1,"seconds");return{minTime:c.unix(),maxTime:f.unix()}}if(n.clone().add(1,"years").subtract(1,"seconds").unix()===o.unix()||o.clone().subtract(1,"years").add(1,"seconds").unix()===n.unix()){const i=n.add(1*a,"years"),c=o.add(1*a,"years");return{minTime:i.unix(),maxTime:c.unix()}}if(n.clone().add(1,"months").subtract(1,"seconds").unix()===o.unix()||o.clone().subtract(1,"months").add(1,"seconds").unix()===n.unix()){const i=n.add(1*a,"months"),c=o.add(1*a,"months");return{minTime:i.unix(),maxTime:c.unix()}}const l=(e-t+1)*a;return{minTime:t+l,maxTime:e+l}}function kd(t,e,a,n,o,s){const r=Su(t,e,a);return{dateType:Zr(r.minTime,r.maxTime,n,o,s),minTime:r.minTime,maxTime:r.maxTime}}function Od(t,e,a,n,o,s,r){if(!r||!te.PreviousBillingCycle.isAvailableForScene(s)||!te.CurrentBillingCycle.isAvailableForScene(s))return null;const l=Ys(te.PreviousBillingCycle.type,n,o,r),i=Ys(te.CurrentBillingCycle.type,n,o,r);return l&&qe(l.maxTime,1,"months")===e&&qe(l.minTime,1,"months")===t&&a===1?l:l&&l.maxTime===e&&l.minTime===t&&a===1?i:i&&i.maxTime===e&&i.minTime===t&&a===-1?l:i&&Fn(i.maxTime,1,"months")===e&&Fn(i.minTime,1,"months")===t&&a===-1?i:null}function Zr(t,e,a,n,o){const s=te.values();let r=te.Custom.type;for(const l of s){if(!l.isAvailableForScene(o))continue;const i=$a(l.type,a,n);if(i&&i.minTime===t&&i.maxTime===e){r=l.type;break}}return r}function Ud(t,e,a,n,o,s){if(!s||!te.PreviousBillingCycle.isAvailableForScene(o)||!te.CurrentBillingCycle.isAvailableForScene(o))return null;const r=Ys(te.PreviousBillingCycle.type,a,n,s),l=Ys(te.CurrentBillingCycle.type,a,n,s);return r&&r.maxTime===e&&r.minTime===t?r.dateType:l&&l.maxTime===e&&l.minTime===t?l.dateType:null}function $a(t,e,a){let n=0,o=0;if(t===te.All.type)n=0,o=0;else if(t===te.Today.type)n=Zn(),o=sa();else if(t===te.Yesterday.type)n=qe(Zn(),1,"days"),o=qe(sa(),1,"days");else if(t===te.LastSevenDays.type)n=Zn(),o=qe(sa(),6,"days");else if(t===te.LastThirtyDays.type)n=Zn(),o=qe(sa(),29,"days");else if(t===te.ThisWeek.type)n=Do(e),o=Rs(e);else if(t===te.LastWeek.type)n=qe(Do(e),7,"days"),o=qe(Rs(e),7,"days");else if(t===te.ThisMonth.type)n=Jn(),o=xa();else if(t===te.LastMonth.type)n=qe(xa(),1,"seconds"),o=qe(xa(),1,"months");else if(t===te.ThisYear.type)n=hn(),o=Za();else if(t===te.LastYear.type)n=qe(hn(),1,"years"),o=qe(Za(),1,"years");else if(t===te.ThisFiscalYear.type)n=zs(sa(),a),o=Sn(sa(),a);else if(t===te.LastFiscalYear.type)n=qe(zs(sa(),a),1,"years"),o=qe(Sn(sa(),a),1,"years");else if(t===te.RecentTwelveMonths.type)n=Jn(),o=qe(xa(),11,"months");else if(t===te.RecentTwentyFourMonths.type)n=Jn(),o=qe(xa(),23,"months");else if(t===te.RecentThirtySixMonths.type)n=Jn(),o=qe(xa(),35,"months");else if(t===te.RecentTwoYears.type)n=hn(),o=qe(Za(),1,"years");else if(t===te.RecentThreeYears.type)n=hn(),o=qe(Za(),2,"years");else if(t===te.RecentFiveYears.type)n=hn(),o=qe(Za(),4,"years");else return null;return{dateType:t,maxTime:n,minTime:o}}function Ys(t,e,a,n){let o=0,s=0;if(t===te.PreviousBillingCycle.type||t===te.CurrentBillingCycle.type)if(n)Rr().getGregorianCalendarDay()<=n?(o=Hi(n),s=qe(Fn(So(n),1,"days"),1,"months")):(o=Fn(Hi(n),1,"months"),s=Fn(So(n),1,"days")),t===te.PreviousBillingCycle.type&&(o=qe(o,1,"months"),s=qe(s,1,"months"));else{let r=null;t===te.CurrentBillingCycle.type?r=$a(te.ThisMonth.type,e,a):t===te.PreviousBillingCycle.type&&(r=$a(te.LastMonth.type,e,a)),r&&(o=r.maxTime,s=r.minTime)}else return null;return{dateType:t,maxTime:o,minTime:s}}function Mu(t){const e=[],a=xa();for(let n=0;n<t;n++){let o=a;n>0&&(o=qe(a,n,"months"));const s=qe(Fn(o,1,"months"),1,"seconds");let r=te.Custom.type;const l=Pe(o).getGregorianCalendarYear(),i=Pe(o).getGregorianCalendarMonth();n===0?r=te.ThisMonth.type:n===1&&(r=te.LastMonth.type),e.push({dateType:r,minTime:o,maxTime:s,year:l,month:i})}return e}function lo(t,e){for(const[a,n]of at(t))if(!a.isPreset&&a.dateType===e)return n;return-1}function Fd(t,e,a,n,o,s){let r=$a(e,o,s);if(r&&r.dateType===te.All.type)return lo(t,te.All.type);if(!r&&(!n||!a))return lo(t,te.Custom.type);r||(r={dateType:te.Custom.type,maxTime:n,minTime:a});for(const[l,i]of at(t))if(l.isPreset&&l.minTime===r.minTime&&l.maxTime===r.maxTime)return i;return lo(t,te.Custom.type)}function Bd(t,e,a,n){if(qr(t,e))return null;if(!t)return $a(te.ThisMonth.type,a,n);const o=Js(t),s=Kr(t);return{dateType:Zr(o,s,a,n,ha.Normal),maxTime:s,minTime:o}}function Pd(t,e,a,n,o,s,r){const l=new Date(t.valueOf());let i=e.parseInt(a);const c=e.parseInt(n),f=e.parseInt(o);return r||(i===12&&(i=0),s===Ua.PM.name&&(i+=12)),l.setHours(i),l.setMinutes(c),l.setSeconds(f),l}function Rd(t,e){const a=De(),n=De.unix(Kr(t));if(e){const o=e.split("-");if(o.length===3){const s=parseInt(o[2]);if(s<n.date())return Ct.of(n.set({date:s})).getGregorianCalendarYearDashMonthDashDay()}}return n.year()===a.year()&&n.month()===a.month()?Ct.of(a).getGregorianCalendarYearDashMonthDashDay():Ct.of(n).getGregorianCalendarYearDashMonthDashDay()}function Nu(t,e){const a=Pe(t),n=Pe(e);return Ct.isGregorianCalendarYearFirstTime(a)&&Ct.isGregorianCalendarYearLastTime(n)}function Jr(t,e){const a=Pe(t),n=Pe(e);return Ct.isGregorianCalendarMonthFirstTime(a)&&Ct.isGregorianCalendarMonthLastTime(n)}function qr(t,e){const a=Pe(t),n=Pe(e);return a.getGregorianCalendarYear()!==n.getGregorianCalendarYear()||a.getGregorianCalendarMonth()!==n.getGregorianCalendarMonth()?!1:Jr(t,e)}function _r(t,e,a){let n=De.unix(t);if(Ae(a)&&(n=n.tz(ma(a))),e===Xe.JanuaryFirstDay.value)return n.year();const o=n.month()+1,s=n.date(),r=n.year();let l=Xe.valueOf(e);return l||(l=Xe.Default),o<l.month||o===l.month&&s<l.day?r:r+1}function Sn(t,e,a){let n=De.unix(t);if(Ae(a)&&(n=n.tz(ma(a))),e===Xe.JanuaryFirstDay.value){let f=De();return Ae(a)&&(f=f.tz(ma(a))),f.year(n.year()).month(0).date(1).hour(0).minute(0).second(0).millisecond(0).unix()}let o=Xe.valueOf(e);o||(o=Xe.Default);const s=n.month()+1,r=n.date(),l=n.year();let i=l-1;(s>o.month||s===o.month&&r>=o.day)&&(i=l);let c=De();return Ae(a)&&(c=c.tz(ma(a))),c.set({year:i,month:o.month-1,date:o.day,hour:0,minute:0,second:0,millisecond:0}).unix()}function zs(t,e,a){let n=De.unix(Sn(t,e));return Ae(a)&&(n=n.tz(ma(a))),n.add(1,"years").subtract(1,"seconds").unix()}function Wi(t,e,a){const n=Sn(t,e,a),o=zs(t,e,a);return{year:_r(t,e,a),minUnixTime:n,maxUnixTime:o}}function Lu(t,e){const a=t;let n=Xe.valueOf(e);n||(n=Xe.Default);const o=e===Xe.JanuaryFirstDay.value?a:a-1,s=De().set({year:o,month:n.month-1,date:n.day,hour:0,minute:0,second:0,millisecond:0}).unix(),r=De.unix(s).add(1,"years").subtract(1,"seconds").unix();return{year:a,minUnixTime:s,maxUnixTime:r}}function wu(t){let e=0;for(const a of t)e+=a;return e}function $n(t,e){if(!t)return t;const a=e.numeralSystem||be.Default,n=e.digitGrouping,o=e.digitGroupingSymbol||it.Default.symbol,s=e.decimalSeparator||_e.Default.symbol,r=t.charAt(0)==="-";r&&(t=t.substring(1));const l=[],i=[];let c="";if(t===ta){for(let C=0;C<t.length-2;C++)l.push(t.charAt(C));const T=Math.max(0,t.length-2);for(let C=T;C<t.length;C++)i.push(t.charAt(C))}else for(let T=0;T<t.length;T++){const C=t.charAt(T);if(!c)a.isDigit(C)?l.push(C):c=C;else if(a.isDigit(C))i.push(C);else throw new Error('Number "'+t+'" is not a valid textual number')}let f="";n?f=n.format(l,o):f=l.join("");const A=i.join("");return A?t=`${f}${s}${A}`:t=f,r&&(t=`-${t}`),t}function Eu(t,e){if(!Ke(t)||!t||t.length<1)return 0;const a=t.charAt(0)==="-";if(a&&(t=t.substring(1)),!t||t.length<1)return 0;const n=a?-1:1,o=e.numeralSystem||be.Default,s=e.decimalSeparator||_e.Default.symbol,r=e.digitGroupingSymbol||it.Default.symbol;t.indexOf(r)>=0&&(t=Bo(t,r));let l=t.indexOf(s);if(l<0)return n*o.parseInt(t)*100;l===0&&(t=o.digitZero+t,l++);const i=t.substring(0,l),c=t.substring(l+1,t.length);return c.length<1?n*o.parseInt(i)*100:c.length===1?n*o.parseInt(i)*100+n*o.parseInt(c)*10:c.length===2?n*o.parseInt(i)*100+n*o.parseInt(c):n*o.parseInt(i)*100+n*o.parseInt(c.substring(0,2))}function Vi(t,e){if(!Number.isSafeInteger(t))throw new Error('Number "'+t+'" is not amount number');const a=e.numeralSystem||be.Default;let n=a.formatNumber(t);if(!n)return n;const o=n.charAt(0)==="-";o&&(n=n.substring(1));const s=e.digitGrouping,r=e.digitGroupingSymbol||it.Default.symbol,l=e.decimalSeparator||_e.Default.symbol;let i=e.decimalNumberCount;(!Ae(i)||i>Uc)&&(i=Oc);let c=a.digitZero,f=a.doubleDigitZero;return n.length>2?(c=n.substring(0,n.length-2),f=n.substring(n.length-2)):n.length===2?f=n:n.length===1&&(f=a.digitZero+n),i===0?f===a.doubleDigitZero?f="":f.charAt(1)===a.digitZero&&(f=f.charAt(0)):i===1&&f.charAt(1)===a.digitZero&&(f=f.charAt(0)),e.trimTailZero&&(f.charAt(0)===a.digitZero&&f.charAt(1)===a.digitZero?f="":f.charAt(0)!==a.digitZero&&f.charAt(1)===a.digitZero&&(f=f.charAt(0))),c&&c.length>1&&s&&(c=s.format(c.split(""),r)),f?n=`${c}${l}${f}`:n=c,o&&(n=`-${n}`),n}function xu(t,e){return $n(t,e)}function Qr(t,e,a){const n=e.numeralSystem||be.Default;if(Qe(a)){const o=Math.pow(10,a),s=Math.trunc(t*o),r=n.formatNumber(s/o);return $n(r,e)}else{const o=n.formatNumber(t);return $n(o,e)}}function ku(t,e,a,n){const o=n.numeralSystem||be.Default,s=Math.pow(10,e),r=Math.trunc(t*s);if(t>0&&r<1&&a){const l=_e.Dot.symbol,i=n.decimalSeparator||_e.Default.symbol;return a=o.replaceWesternArabicDigitsToLocalizedDigits(a),l===i?a+"%":Ja(a,l,i)+"%"}return Qr(t,n,e)+"%"}function Zi(t,e){return e===0?Math.trunc(t/100)*100:e===1?Math.trunc(t/10)*10:t}function Mo(t,e){const a=e.numeralSystem||be.Default,n=a.formatNumber(t),o=_e.Dot.symbol;if(n.indexOf(o)<0)return $n(n,e);{let s=0;for(let l=0;l<n.length;l++)if(n.charAt(l)!==o&&n.charAt(l)!==a.digitZero){s=Math.min(l+4,n.length);break}const r=n.substring(0,Math.max(6,Math.max(s,n.indexOf(o)+2)));return $n(r,e)}}function Ou(t,e,a,n,o){const s=a.numeralSystem||be.Default;if(!t||!e||t===e){if(!n||!n.rate||!o||!o.rate)return null;t=parseFloat(n.rate),e=parseFloat(o.rate)}if(t>e){const r=t/e;return`${Mo(r,a)} : ${s.getLocalizedDigit(1)}`}else{const r=e/t,l=Mo(r,a);return`${s.getLocalizedDigit(1)} : ${l}`}}function Xo(t,e,a){const n=parseFloat(a)/parseFloat(e);return Ae(n)?t*n:null}function Xr(t){return t?as[t]?.fraction:void 0}function Ji(t,e,a,n,o,s){const r=jr(e,a,n,o,s);if(!r)return t;const l=e.separator||"";let i=t;return r.prependText&&(i=r.prependText+l+i),r.appendText&&(i=i+l+r.appendText),i}function jr(t,e,a,n,o){if(!t)return null;let s="";if(t.symbol===Hn.Symbol){const r=as[e];r&&r.symbol&&r.symbol.normal&&(s=r.symbol.normal,o&&r.symbol.plural&&(s=r.symbol.plural)),s||(s=uc)}else t.symbol===Hn.Code?s=e:t.symbol===Hn.Unit?s=a:t.symbol===Hn.Name&&(s=n);return t.location===yo.BeforeAmount?{prependText:s}:t.location===yo.AfterAmount?{appendText:s}:null}function $s(t){const e={};for(const a of t){if(!e[a.category]){const o=Ve.valueOf(a.category);o&&(e[a.category]={category:a.category,name:o.name,icon:o.defaultAccountIconId,accounts:[]})}const n=e[a.category];n&&n.accounts.push(a)}return e}function Uu(t){const e=[],a=Ve.values(),n=$s(t);for(const o of a){if(!n[o.type])continue;const s=n[o.type];s&&e.push(s)}return e}function Yd(t){const e={};if(!t)return e;for(const a of t)if(a.type===Ne.SingleAccount.type)e[a.name]=a;else if(a.type===Ne.MultiSubAccounts.type&&a.subAccounts)for(const n of a.subAccounts)e[n.name]=n;return e}function Fu(t,e,a){const n={},o=Ve.values(),s=e?e.toLowerCase():"";for(const r of o){const l=t[r.type];if(!l||!l.accounts||l.accounts.length<1)continue;const i=[];for(const c of l.accounts){if(!a&&c.hidden)continue;const f=!s||c.name.toLowerCase().includes(s),A=[];if(c.subAccounts)for(const C of c.subAccounts){if(!a&&C.hidden||!f&&s&&!C.name.toLowerCase().includes(s))continue;const Y=C.clone();A.push(Y)}if(!f&&A.length<1)continue;const T=c.cloneSelf();T.type===Ne.MultiSubAccounts.type&&(T.subAccounts=A),i.push(T)}i.length>0&&(n[r.type]={category:l.category,name:l.name,icon:l.icon,accounts:i})}return n}function qn(t,e){const a=Ve.values(),n=[];for(const o of a){const s=t[o.type];if(!(!s||!s.accounts)){for(const r of s.accounts)if(!(r.hidden||!e(r))){if(r.type===Ne.SingleAccount.type)n.push({balance:r.balance,isAsset:!!r.isAsset,isLiability:!!r.isLiability,currency:r.currency});else if(r.type===Ne.MultiSubAccounts.type&&r.subAccounts)for(const l of r.subAccounts)l.hidden||!e(l)||n.push({balance:l.balance,isAsset:!!l.isAsset,isLiability:!!l.isLiability,currency:l.currency})}}}return n}function Ss(t,e){let a="";if(!t)return a;for(const n of nt(t))e&&!el(n,e)||(a.length>0&&(a+=","),a+=n.id);return a}function Bu(t,e,a){if(!e)return a;let n="";for(const o of ja(e,!0)){const s=t[o];if(s&&s.currency!==Tr){if(n==="")n=s.currency;else if(n!==s.currency)return a}}return n||a}function qi(t,e,a){if(e.type===Ne.SingleAccount.type)t[e.id]=a;else if(e.type===Ne.MultiSubAccounts.type){if(!e.subAccounts||!e.subAccounts.length)return;for(const n of e.subAccounts)t[n.id]=a}}function zd(t,e){for(const a of jt(t)){const n=e[a];n&&n.type===Ne.SingleAccount.type&&(t[n.id]=!1)}}function $d(t,e){for(const a of jt(t)){const n=e[a];n&&n.type===Ne.SingleAccount.type&&(t[n.id]=!0)}}function Gd(t,e){for(const a of jt(t)){const n=e[a];n&&n.type===Ne.SingleAccount.type&&(t[n.id]=!t[n.id])}}function el(t,e){if(!t.subAccounts)return!e[t.id];for(const a of t.subAccounts)if(e[a.id])return!1;return!0}function Kd(t,e){if(!t.subAccounts)return!1;let a=0;for(const n of t.subAccounts)e[n.id]||a++;return a>0&&a<t.subAccounts.length}class la{id;name;parentId;type;icon;color;comment;displayOrder;visible;subCategories;constructor(e,a,n,o,s,r,l,i,c,f){this.id=e,this.name=a,this.parentId=n,this.type=o,this.icon=s,this.color=r,this.comment=l,this.displayOrder=i,this.visible=c,f?this.subCategories=f:!f&&(!n||n==="0")&&(this.subCategories=[])}get hidden(){return!this.visible}equals(e){if(!(this.id===e.id&&this.name===e.name&&this.parentId===e.parentId&&this.type===e.type&&this.icon===e.icon&&this.color===e.color&&this.comment===e.comment&&this.displayOrder===e.displayOrder&&this.visible===e.visible))return!1;if(this.subCategories&&e.subCategories){if(this.subCategories.length!==e.subCategories.length)return!1;for(let n=0;n<this.subCategories.length;n++)if(!this.subCategories[n].equals(e.subCategories[n]))return!1}else if(this.subCategories&&this.subCategories.length||e.subCategories&&e.subCategories.length)return!1;return!0}fillFrom(e){this.id=e.id,this.name=e.name,this.parentId=e.parentId,this.type=e.type,this.icon=e.icon,this.color=e.color,this.comment=e.comment,this.visible=e.visible}clone(){return new la(this.id,this.name,this.parentId,this.type,this.icon,this.color,this.comment,this.displayOrder,this.visible)}toCreateRequest(e){return{name:this.name,type:this.type,parentId:this.parentId,icon:this.icon,color:this.color,comment:this.comment,clientSessionId:e}}toModifyRequest(){return{id:this.id,name:this.name,parentId:this.parentId,icon:this.icon,color:this.color,comment:this.comment,hidden:!this.visible}}static of(e){return new la(e.id,e.name,e.parentId,e.type,e.icon,e.color,e.comment,e.displayOrder,!e.hidden,e.subCategories?la.ofMulti(e.subCategories):void 0)}static ofMulti(e){const a=[];for(const n of e)a.push(la.of(n));return a}static ofMap(e){const a={};for(const[n,o]of Xt(e))a[parseInt(n)]=la.ofMulti(o);return a}static findNameById(e,a){for(const n of e)if(n.id===a)return n.name;return null}static createNewCategory(e,a){return new la("","",a||"0",e||ve.Income,Lr,ns,"",0,!0)}}class ln{id;name;displayOrder;hidden;constructor(e,a,n,o){this.id=e,this.name=a,this.displayOrder=n,this.hidden=o}toCreateRequest(){return{name:this.name}}toModifyRequest(){return{id:this.id,name:this.name}}static of(e){return new ln(e.id,e.name,e.displayOrder,e.hidden)}static ofMulti(e){const a=[];for(const n of e)a.push(ln.of(n));return a}static createNewTag(e){return new ln("",e||"",0,!1)}}class In{pictureId;originalUrl;constructor(e,a){this.pictureId=e,this.originalUrl=a}static of(e){return new In(e.pictureId,e.originalUrl)}static ofMulti(e){const a=[];for(const n of e)a.push(In.of(n));return a}}class Fa{id;timeSequenceId;type;expenseCategoryId="";incomeCategoryId="";transferCategoryId="";time;timeZone;utcOffset;sourceAccountId;destinationAccountId;sourceAmount;destinationAmount;hideAmount;tagIds;comment;editable;_pictures;_geoLocation;_category;_sourceAccount;_destinationAccount;_tags;_gregorianCalendarYearDashMonthDashDay=void 0;_gregorianCalendarDayOfMonth=void 0;_displayDayOfWeek=void 0;constructor(e,a,n,o,s,r,l,i,c,f,A,T,C,Y,k){this.id=e,this.timeSequenceId=a,this.type=n,this.time=s,this.timeZone=r,this.utcOffset=l,this.sourceAccountId=i,this.destinationAccountId=c,this.sourceAmount=f,this.destinationAmount=A,this.hideAmount=T,this.tagIds=C,this.comment=Y,this.editable=k,this.setCategoryId(o)}get pictures(){const e=[];if(this._pictures)for(const a of this._pictures)e.push(a);return e}get geoLocation(){return this._geoLocation}set geoLocation(e){this._geoLocation=Bn.of(e)}get categoryId(){return this.getCategoryId()}get category(){return this._category}get sourceAccount(){return this._sourceAccount}get destinationAccount(){return this._destinationAccount}get tags(){const e=[];if(this._tags)for(const a of this._tags)e.push(a);return e}get gregorianCalendarYearDashMonthDashDay(){return this._gregorianCalendarYearDashMonthDashDay}get gregorianCalendarDayOfMonth(){return this._gregorianCalendarDayOfMonth}get displayDayOfWeek(){return this._displayDayOfWeek}getCategoryId(){return this.type===ie.Expense?this.expenseCategoryId:this.type===ie.Income?this.incomeCategoryId:this.type===ie.Transfer?this.transferCategoryId:""}setCategoryId(e){this.type===ie.Expense?this.expenseCategoryId=e:this.type===ie.Income?this.incomeCategoryId=e:this.type===ie.Transfer&&(this.transferCategoryId=e)}setCategory(e){this._category=e}setSourceAccount(e){this._sourceAccount=e}setDestinationAccount(e){this._destinationAccount=e}setTags(e){this._tags=e}getPictureIds(){const e=[];if(this._pictures)for(const a of this._pictures)e.push(a.pictureId);return e}setPictures(e){this._pictures=e}addPicture(e){this._pictures||(this._pictures=[]),this._pictures.push(In.of(e))}removePicture(e){if(this._pictures)for(const[a,n]of at(this._pictures))a.pictureId===e.pictureId&&this._pictures.splice(n,1)}clearPictures(){this._pictures=[]}getNormalizedGeoLocation(){if(this._geoLocation)return this._geoLocation.toNormalizedCoordinate()}setGeoLocation(e){e?this._geoLocation=Bn.createNewGeoLocation(e.latitude,e.longitude):this._geoLocation=void 0}setLatitudeAndLongitude(e,a){this._geoLocation=Bn.createNewGeoLocation(e,a)}removeGeoLocation(){this._geoLocation=void 0}setDisplayDate(e,a,n){this._gregorianCalendarYearDashMonthDashDay=e,this._gregorianCalendarDayOfMonth=a,this._displayDayOfWeek=n}toCreateRequest(e){return{type:this.type,categoryId:this.getCategoryId(),time:this.time,utcOffset:this.utcOffset,sourceAccountId:this.sourceAccountId,destinationAccountId:this.type===ie.Transfer?this.destinationAccountId:"0",sourceAmount:this.sourceAmount,destinationAmount:this.type===ie.Transfer?this.destinationAmount:0,hideAmount:this.hideAmount,tagIds:this.tagIds,pictureIds:this.getPictureIds(),comment:this.comment,geoLocation:this.getNormalizedGeoLocation(),clientSessionId:e}}toModifyRequest(){let e=this.getCategoryId();return this.type===ie.ModifyBalance&&(e="0"),{id:this.id,categoryId:e,time:this.time,utcOffset:this.utcOffset,sourceAccountId:this.sourceAccountId,destinationAccountId:this.type===ie.Transfer?this.destinationAccountId:"0",sourceAmount:this.sourceAmount,destinationAmount:this.type===ie.Transfer?this.destinationAmount:0,hideAmount:this.hideAmount,tagIds:this.tagIds,pictureIds:this.getPictureIds(),comment:this.comment,geoLocation:this.getNormalizedGeoLocation()}}toTransactionDraft(){return this.type!==ie.Expense&&this.type!==ie.Income&&this.type!==ie.Transfer?null:{type:this.type,categoryId:this.getCategoryId(),sourceAccountId:this.sourceAccountId,sourceAmount:this.sourceAmount,destinationAccountId:this.type===ie.Transfer?this.destinationAccountId:"0",destinationAmount:this.type===ie.Transfer?this.destinationAmount:0,hideAmount:this.hideAmount,tagIds:this.tagIds,pictures:this.pictures,comment:this.comment}}static createNewTransaction(e,a,n,o){return new Fa("","",e,"",a,n,o,"","",0,0,!1,[],"",!0)}static of(e){const a=new Fa(e.id,e.timeSequenceId,e.type,e.categoryId,e.time,void 0,e.utcOffset,e.sourceAccountId,e.destinationAccountId,e.sourceAmount,e.destinationAmount,e.hideAmount,e.tagIds,e.comment,e.editable);if(e.category&&a.setCategory(la.of(e.category)),e.sourceAccount&&a.setSourceAccount(bt.of(e.sourceAccount)),e.destinationAccount&&a.setDestinationAccount(bt.of(e.destinationAccount)),e.tags&&a.setTags(ln.ofMulti(e.tags)),e.pictures){const n=[];for(const o of e.pictures)n.push(In.of(o));a.setPictures(n)}return e.geoLocation&&a.setLatitudeAndLongitude(e.geoLocation.latitude,e.geoLocation.longitude),a}static ofMulti(e){const a=[];for(const n of e)a.push(Fa.of(n));return a}static ofDraft(e){if(!e||e.type!==ie.Expense&&e.type!==ie.Income&&e.type!==ie.Transfer)return null;const a=new Fa("","",e.type,e.categoryId??"",0,void 0,0,e.sourceAccountId??"",e.destinationAccountId??"",e.sourceAmount??0,e.destinationAmount??0,e.hideAmount??!1,e.tagIds??[],e.comment??"",!0);if(e.pictures){const n=[];for(const o of e.pictures)n.push(In.of(o));a.setPictures(n)}return a}}class Bn{latitude;longitude;constructor(e,a){this.latitude=e,this.longitude=a}static createNewGeoLocation(e,a){return new Bn(e,a)}static of(e){return new Bn(e.latitude,e.longitude)}toNormalizedCoordinate(){return br(this)}}class ya{tagIds;type;static TransactionNoTagFilterValue="none";constructor(e,a){this.tagIds=e,this.type=a}static create(e){return new ya([],e)}static of(e){return new ya([e],It.HasAny)}static parse(e){const a=[];if(!e||e===ya.TransactionNoTagFilterValue)return a;const n=e.split(";");for(const o of n){const s=o.split(":");if(s.length!==2)continue;const r=parseInt(s[0],10);if(Number.isNaN(r)||!Number.isFinite(r))continue;const l=It.parse(r);if(!l)continue;const i=s[1].split(","),c=new ya(i,l);a.push(c)}return a}static toTextualTagFilters(e){const a=[];for(const n of e)a.push(n.toTextualTagFilter());return a.join(";")}toTextualTagFilter(){return`${this.type.type}:${this.tagIds.join(",")}`}}const tl=["today","thisWeek","thisMonth","thisYear","lastMonth","monthBeforeLastMonth","monthBeforeLast2Months","monthBeforeLast3Months","monthBeforeLast4Months","monthBeforeLast5Months","monthBeforeLast6Months","monthBeforeLast7Months","monthBeforeLast8Months","monthBeforeLast9Months","monthBeforeLast10Months"],Hd=["monthBeforeLast10Months","monthBeforeLast9Months","monthBeforeLast8Months","monthBeforeLast7Months","monthBeforeLast6Months","monthBeforeLast5Months","monthBeforeLast4Months","monthBeforeLast3Months","monthBeforeLast2Months","monthBeforeLastMonth","lastMonth","thisMonth"];class jo{useTransactionTimezone;query;constructor(e,a){this.useTransactionTimezone=e,this.query=a}buildQuery(){return`use_transaction_timezone=${this.useTransactionTimezone}`+(this.query.length?"&query="+this.query:"")}static of(e){const a=[];return tl.forEach(n=>{e[n]&&a.push(`${n}_${e[n].startTime}_${e[n].endTime}`)}),new jo(e.useTransactionTimezone,a.length?a.join("|"):"")}}var Pt=(t=>(t.IncomeByPrimaryCategory="incomeByPrimaryCategory",t.IncomeBySecondaryCategory="incomeBySecondaryCategory",t.IncomeByAccount="incomeByAccount",t.ExpenseByAccount="expenseByAccount",t.NetCashFlow="netCashFlow",t.ExpenseBySecondaryCategory="expenseBySecondaryCategory",t.ExpenseByPrimaryCategory="expenseByPrimaryCategory",t))(Pt||{});const ys={items:[],totalCount:0};function je(t){return(window.EZBOOKKEEPING_SERVER_SETTINGS||{})[t]}function Wd(){return je("a")!==0}function Vd(){return je("o")===1}function Zd(){return je("r")===1}function Jd(){return je("f")===1}function qd(){return je("t")===1}function _d(){return je("v")===1}function Qd(){return je("p")===1}function Xd(){return je("s")===1}function jd(){return je("e")===1}function ef(){return je("i")===1}function Pu(){return je("op")}function Ru(){return je("ocn")}function tf(){return je("mcp")===1}function af(){return je("llmt")===1}function Yu(){return je("lpt")}function al(){return je("m")}function _i(){return je("mp")===1}function zu(){return je("cmsu")}function $u(){return je("cmau")}function Gu(){return je("cmap")===1}function Qi(){const t=(je("cmzl")||"").split("-");return t&&t[0]?parseInt(t[0]):1}function Xi(){const t=(je("cmzl")||"").split("-");return t&&t[1]?parseInt(t[1]):18}function Ku(){const t=(je("cmzl")||"").split("-");return t&&t[2]?parseInt(t[2]):14}function Hu(){return je("tmak")}function Wu(){return je("tdak")}function Vu(){return je("gmak")}function Zu(){return je("bmak")}function Ju(){return je("amak")}function co(){return je("amsv")}function qu(){return je("amep")}function _u(){return je("amas")}function Qu(){return je("errt")}function ei(t,e){return new Promise(function(a,n){let o=!1,s=null;if(t==="js")s=document.querySelector('script[src="'+e+'"]');else if(t==="css")s=document.querySelector('link[href="'+e+'"]');else{n({type:t,assetUrl:e,error:"notsupport"});return}if(!s)t==="js"?(s=document.createElement("script"),s.setAttribute("type","text/javascript"),s.setAttribute("async","true"),s.setAttribute("src",e)):t==="css"&&(s=document.createElement("link"),s.setAttribute("rel","stylesheet"),s.setAttribute("type","text/css"),s.setAttribute("href",e)),o=!0;else if(s.hasAttribute("data-loaded")){a({type:t,assetUrl:e});return}if(!s){n({type:t,assetUrl:e,error:"unexpected"});return}s.addEventListener("load",()=>{s.setAttribute("data-loaded","true"),a({type:t,assetUrl:e})}),s.addEventListener("error",()=>{n({type:t,assetUrl:e,error:"error"})}),s.addEventListener("abort",()=>{n({type:t,assetUrl:e,error:"abort"})}),o&&document.head.appendChild(s)})}function ti(){let t="ebk_"+new Date().getTime();if(crypto&&crypto.getRandomValues){const e=new Uint8Array(256);crypto.getRandomValues(e),t+="_"+Po(e.buffer)}else t+="_"+Math.random();return vn.SHA256(t).toString()}function ji(){const t=ti();return t.substring(0,8)+"-"+t.substring(8,12)+"-8"+t.substring(13,16)+"-"+(8|parseInt(t.charAt(16),16)&3).toString(16)+t.substring(17,20)+"-"+t.substring(20,32)}function ka(){const t=window.location.pathname,e=t.lastIndexOf("/");return e<0?t:t.substring(0,e)}function nf(t){window.location.replace(`${t}#/`)}let No=!1;const Lo=[],_n={};me.defaults.baseURL=ka()+Yc;me.defaults.timeout=Dr;me.interceptors.request.use(t=>{const e=gn();e&&!t.noAuth&&(t.headers.Authorization=`Bearer ${e}`),t.headers["X-Timezone-Offset"]=Ta(za());let a=yc();return(!a||a.trim().length<1)&&(a=Vs()),t.headers["X-Timezone-Name"]=a,No&&!t.ignoreBlocked?new Promise(n=>{Lo.push(o=>{o&&(t.headers.Authorization=`Bearer ${o}`),n(t)})}):t},t=>Promise.reject(t));me.interceptors.response.use(t=>"cancelableUuid"in t.config&&t.config.cancelableUuid&&_n[t.config.cancelableUuid]?(X.debug("Response canceled by user request, url: "+t.config.url+", cancelableUuid: "+t.config.cancelableUuid),delete _n[t.config.cancelableUuid],Promise.reject({canceled:!0})):t,t=>{if("cancelableUuid"in t.response.config&&t.response.config.cancelableUuid&&_n[t.response.config.cancelableUuid])return X.debug("Response canceled by user request, url: "+t.response.config.url+", cancelableUuid: "+t.response.config.cancelableUuid),delete _n[t.response.config.cancelableUuid],Promise.reject({canceled:!0});if(t.response&&!t.response.config.ignoreError&&t.response.data&&t.response.data.errorCode){const e=t.response.data.errorCode;if(e===202001||e===202002||e===202003||e===202004||e===202005||e===202006||e===202012)return En(!1),location.reload(),Promise.reject({processed:!0})}return Promise.reject(t)});const re={setLocale:t=>{me.defaults.headers.common["Accept-Language"]=t},authorize:t=>me.post("authorize.json",t),authorize2FA:({passcode:t,token:e})=>me.post("2fa/authorize.json",{passcode:t},{noAuth:!0,headers:{Authorization:`Bearer ${e}`}}),authorize2FAByBackupCode:({recoveryCode:t,token:e})=>me.post("2fa/recovery.json",{recoveryCode:t},{noAuth:!0,headers:{Authorization:`Bearer ${e}`}}),authorizeOAuth2:({password:t,passcode:e,callbackToken:a})=>{const n={password:t,passcode:e,token:gn()||void 0};return me.post("oauth2/authorize.json",n,{noAuth:!0,headers:{Authorization:`Bearer ${a}`}})},register:t=>me.post("register.json",t),verifyEmail:({token:t,requestNewToken:e})=>me.post("verify_email/by_token.json?token="+t,{requestNewToken:e},{noAuth:!0,ignoreError:!0}),resendVerifyEmailByUnloginUser:t=>me.post("verify_email/resend.json",t),requestResetPassword:t=>me.post("forget_password/request.json",t),resetPassword:({email:t,token:e,password:a})=>me.post("forget_password/reset/by_token.json?token="+e,{email:t,password:a},{noAuth:!0,ignoreError:!0}),logout:()=>me.get("logout.json"),refreshToken:()=>new Promise(t=>{No=!0,me.post("v1/tokens/refresh.json",{},{ignoreBlocked:!0}).then(e=>{const a=e.data;return t(e),No=!1,a.result.newToken}).then(e=>{Lo.forEach(a=>a(e)),Lo.length=0})}),getExternalAuths:()=>me.get("v1/users/external_auth/list.json"),unlinkExternalAuth:t=>me.post("v1/users/external_auth/unlink.json",t),getTokens:()=>me.get("v1/tokens/list.json"),generateAPIToken:t=>me.post("v1/tokens/generate/api.json",t),generateMCPToken:t=>me.post("v1/tokens/generate/mcp.json",t),revokeToken:({tokenId:t,ignoreError:e})=>{const a={tokenId:t};return me.post("v1/tokens/revoke.json",a,{ignoreError:!!e})},revokeAllTokens:()=>me.post("v1/tokens/revoke_all.json"),getProfile:()=>me.get("v1/users/profile/get.json"),updateProfile:t=>me.post("v1/users/profile/update.json",t),updateAvatar:({avatarFile:t})=>me.postForm("v1/users/avatar/update.json",{avatar:t},{timeout:ps}),removeAvatar:()=>me.post("v1/users/avatar/remove.json"),resendVerifyEmailByLoginedUser:()=>me.post("v1/users/verify_email/resend.json"),getUserApplicationCloudSettings:()=>me.get("v1/users/settings/cloud/get.json"),updateUserApplicationCloudSettings:t=>me.post("v1/users/settings/cloud/update.json",t),disableUserApplicationCloudSettings:()=>me.post("v1/users/settings/cloud/disable.json"),get2FAStatus:()=>me.get("v1/users/2fa/status.json"),enable2FA:()=>me.post("v1/users/2fa/enable/request.json"),confirmEnable2FA:t=>me.post("v1/users/2fa/enable/confirm.json",t),disable2FA:t=>me.post("v1/users/2fa/disable.json",t),regenerate2FARecoveryCode:t=>me.post("v1/users/2fa/recovery/regenerate.json",t),getUserDataStatistics:()=>me.get("v1/data/statistics.json"),getExportedUserData:(t,e)=>{let a="";if(e){const n=encodeURIComponent(e.tagFilter),o=encodeURIComponent(e.amountFilter),s=encodeURIComponent(e.keyword);a=`max_time=${e.maxTime}&min_time=${e.minTime}&type=${e.type}&category_ids=${e.categoryIds}&account_ids=${e.accountIds}&tag_filter=${n}&amount_filter=${o}&keyword=${s}`}else a="max_time=0&min_time=0&type=0&category_ids=&account_ids=&tag_filter=&amount_filter=&keyword=";return t==="csv"?me.get("v1/data/export.csv?"+a,{timeout:Ui}):t==="tsv"?me.get("v1/data/export.tsv?"+a,{timeout:Ui}):Promise.reject("Parameter Invalid")},clearAllData:t=>me.post("v1/data/clear/all.json",t,{timeout:no}),clearAllTransactions:t=>me.post("v1/data/clear/transactions.json",t,{timeout:no}),clearAllTransactionsOfAccount:t=>me.post("v1/data/clear/transactions/by_account.json",t,{timeout:no}),getAllAccounts:({visibleOnly:t})=>me.get("v1/accounts/list.json?visible_only="+t),getAccount:({id:t})=>me.get("v1/accounts/get.json?id="+t),addAccount:t=>me.post("v1/accounts/add.json",t),modifyAccount:t=>me.post("v1/accounts/modify.json",t),hideAccount:t=>me.post("v1/accounts/hide.json",t),moveAccount:t=>me.post("v1/accounts/move.json",t),deleteAccount:t=>me.post("v1/accounts/delete.json",t),deleteSubAccount:t=>me.post("v1/accounts/sub_account/delete.json",t),modifyAccountBalance:({id:t,balance:e})=>me.post("v1/accounts/balance/modify.json",{id:t.toString(),balance:e}),modifyBatchAccountBalances:({accountIds:t,operation:e,amount:a})=>me.post("v1/accounts/balance/batch_modify.json",{accountIds:t.map(n=>n.toString()),operation:e,amount:a}),getTransactions:t=>{const e=encodeURIComponent(t.tagFilter),a=encodeURIComponent(t.amountFilter),n=encodeURIComponent(t.keyword);return me.get(`v1/transactions/list.json?max_time=${t.maxTime}&min_time=${t.minTime}&type=${t.type}&category_ids=${t.categoryIds}&account_ids=${t.accountIds}&tag_filter=${e}&amount_filter=${a}&keyword=${n}&count=${t.count}&page=${t.page}&with_count=${t.withCount}&trim_account=true&trim_category=true&trim_tag=true`)},getAllTransactionsByMonth:t=>{const e=encodeURIComponent(t.tagFilter),a=encodeURIComponent(t.amountFilter),n=encodeURIComponent(t.keyword);return me.get(`v1/transactions/list/by_month.json?year=${t.year}&month=${t.month}&type=${t.type}&category_ids=${t.categoryIds}&account_ids=${t.accountIds}&tag_filter=${e}&amount_filter=${a}&keyword=${n}&trim_account=true&trim_category=true&trim_tag=true`)},getAllTransactions:t=>me.get(`v1/transactions/list/all.json?trim_account=true&trim_category=true&trim_tag=true&start_time=${t.startTime}&end_time=${t.endTime}`),getReconciliationStatements:t=>me.get(`v1/transactions/reconciliation_statements.json?account_id=${t.accountId}&start_time=${t.startTime}&end_time=${t.endTime}`),getTransactionStatistics:t=>{const e=[];return t.startTime&&e.push(`start_time=${t.startTime}`),t.endTime&&e.push(`end_time=${t.endTime}`),t.tagFilter&&e.push(`tag_filter=${encodeURIComponent(t.tagFilter)}`),t.keyword&&e.push(`keyword=${encodeURIComponent(t.keyword)}`),me.get(`v1/transactions/statistics.json?use_transaction_timezone=${t.useTransactionTimezone}`+(e.length?"&"+e.join("&"):""))},getTransactionStatisticsTrends:t=>{const e=[];return t.startYearMonth&&e.push(`start_year_month=${t.startYearMonth}`),t.endYearMonth&&e.push(`end_year_month=${t.endYearMonth}`),t.tagFilter&&e.push(`tag_filter=${encodeURIComponent(t.tagFilter)}`),t.keyword&&e.push(`keyword=${encodeURIComponent(t.keyword)}`),me.get(`v1/transactions/statistics/trends.json?use_transaction_timezone=${t.useTransactionTimezone}`+(e.length?"&"+e.join("&"):""))},getTransactionStatisticsAssetTrends:t=>{const e=[];return t.startTime&&e.push(`start_time=${t.startTime}`),t.endTime&&e.push(`end_time=${t.endTime}`),me.get("v1/transactions/statistics/asset_trends.json"+(e.length?"?"+e.join("&"):""))},getTransactionAmounts:(t,e,a)=>{let o=jo.of(t).buildQuery();return e&&e.length&&(o=o+`&exclude_account_ids=${e.join(",")}`),a&&a.length&&(o=o+`&exclude_category_ids=${a.join(",")}`),me.get(`v1/transactions/amounts.json?${o}`)},getTransaction:({id:t,withPictures:e})=>(Qe(e)||(e=!0),me.get(`v1/transactions/get.json?id=${t}&with_pictures=${e}&trim_account=true&trim_category=true&trim_tag=true`)),addTransaction:t=>me.post("v1/transactions/add.json",t),modifyTransaction:t=>me.post("v1/transactions/modify.json",t),moveAllTransactionsBetweenAccounts:t=>me.post("v1/transactions/move/all.json",t),deleteTransaction:t=>me.post("v1/transactions/delete.json",t),parseImportDsvFile:({fileType:t,fileEncoding:e,importFile:a})=>me.postForm("v1/transactions/parse_dsv_file.json",{fileType:t,fileEncoding:e,file:a},{timeout:ps}),parseImportTransaction:({fileType:t,additionalOptions:e,fileEncoding:a,importFile:n,columnMapping:o,transactionTypeMapping:s,hasHeaderLine:r,timeFormat:l,timezoneFormat:i,amountDecimalSeparator:c,amountDigitGroupingSymbol:f,geoSeparator:A,geoOrder:T,tagSeparator:C})=>{let Y,k,$,F;return e&&(Y=ts(e,!0).join(",")),o&&(k=JSON.stringify(o)),s&&($=JSON.stringify(s)),r&&(F="true"),me.postForm("v1/transactions/parse_import.json",{fileType:t,options:Y,fileEncoding:a,file:n,columnMapping:k,transactionTypeMapping:$,hasHeaderLine:F,timeFormat:l,timezoneFormat:i,amountDecimalSeparator:c,amountDigitGroupingSymbol:f,geoSeparator:A,geoOrder:T,tagSeparator:C},{timeout:ps})},importTransactions:t=>me.post("v1/transactions/import.json",t,{timeout:Gc}),getImportTransactionsProcess:t=>me.get("v1/transactions/import/process.json?client_session_id="+t,{ignoreError:!0}),uploadTransactionPicture:({pictureFile:t,clientSessionId:e})=>me.postForm("v1/transaction/pictures/upload.json",{picture:t,clientSessionId:e},{timeout:ps}),removeUnusedTransactionPicture:t=>me.post("v1/transaction/pictures/remove_unused.json",t),getAllTransactionCategories:()=>me.get("v1/transaction/categories/list.json"),getTransactionCategory:({id:t})=>me.get("v1/transaction/categories/get.json?id="+t),addTransactionCategory:t=>me.post("v1/transaction/categories/add.json",t),addTransactionCategoryBatch:t=>me.post("v1/transaction/categories/add_batch.json",t),modifyTransactionCategory:t=>me.post("v1/transaction/categories/modify.json",t),hideTransactionCategory:t=>me.post("v1/transaction/categories/hide.json",t),moveTransactionCategory:t=>me.post("v1/transaction/categories/move.json",t),deleteTransactionCategory:t=>me.post("v1/transaction/categories/delete.json",t),getAllTransactionTags:()=>me.get("v1/transaction/tags/list.json"),getTransactionTag:({id:t})=>me.get("v1/transaction/tags/get.json?id="+t),addTransactionTag:t=>me.post("v1/transaction/tags/add.json",t),addTransactionTagBatch:t=>me.post("v1/transaction/tags/add_batch.json",t),modifyTransactionTag:t=>me.post("v1/transaction/tags/modify.json",t),hideTransactionTag:t=>me.post("v1/transaction/tags/hide.json",t),moveTransactionTag:t=>me.post("v1/transaction/tags/move.json",t),deleteTransactionTag:t=>me.post("v1/transaction/tags/delete.json",t),getAllTransactionTemplates:({templateType:t})=>me.get("v1/transaction/templates/list.json?templateType="+t),getTransactionTemplate:({id:t})=>me.get("v1/transaction/templates/get.json?id="+t),addTransactionTemplate:t=>me.post("v1/transaction/templates/add.json",t),modifyTransactionTemplate:t=>me.post("v1/transaction/templates/modify.json",t),hideTransactionTemplate:t=>me.post("v1/transaction/templates/hide.json",t),moveTransactionTemplate:t=>me.post("v1/transaction/templates/move.json",t),deleteTransactionTemplate:t=>me.post("v1/transaction/templates/delete.json",t),recognizeReceiptImage:({imageFile:t,cancelableUuid:e})=>me.postForm("v1/llm/transactions/recognize_receipt_image.json",{image:t},{timeout:Kc,cancelableUuid:e}),getLatestExchangeRates:t=>me.get("v1/exchange_rates/latest.json",{ignoreError:!!t.ignoreError,timeout:Qu()||Dr}),updateUserCustomExchangeRate:t=>me.post("v1/exchange_rates/user_custom/update.json",t),deleteUserCustomExchangeRate:t=>me.post("v1/exchange_rates/user_custom/delete.json",t),getServerVersion:()=>me.get("v1/systems/version.json"),cancelRequest:t=>{_n[t]=!0},generateOAuth2LoginUrl:(t,e)=>`${ka()}/oauth2/login?platform=${t}&client_session_id=${e}`,generateOAuth2LinkUrl:(t,e)=>`${ka()}/oauth2/login?platform=${t}&client_session_id=${e}&token=${gn()}`,generateQrCodeUrl:t=>`${ka()}${zc}/${t}.png`,generateMapProxyTileImageUrl:(t,e)=>{const a=gn();let n=`${ka()}${Oi}/map/tile/{z}/{x}/{y}.png?provider=${t}&token=${a}`;return e&&(n=n+`&language=${e}`),n},generateMapProxyAnnotationImageUrl:(t,e)=>{const a=gn();let n=`${ka()}${Oi}/map/annotation/{z}/{x}/{y}.png?provider=${t}&token=${a}`;return e&&(n=n+`&language=${e}`),n},generateGoogleMapJavascriptUrl:(t,e)=>{let a=`${Hc}?key=${Vu()}&libraries=core,marker&callback=${e}`;return t&&(a=a+`&language=${t}`),a},generateBaiduMapJavascriptUrl:t=>`${Wc}&ak=${Zu()}&callback=${t}`,generateAmapJavascriptUrl:t=>`${Vc}&key=${Ju()}&plugin=AMap.ToolBar&callback=${t}`,generateAmapApiInternalProxyUrl:()=>`${window.location.origin}${ka()}${$c}`,getInternalAvatarUrlWithToken(t,e){if(!t)return t;const a=[];return a.push("token="+gn()),e&&(Rn(e)?a.push("_nocache="+ji()):a.push("_nocache="+e)),t.indexOf("?")>=0?t+"&"+a.join("&"):t+"?"+a.join("&")},getTransactionPictureUrlWithToken(t,e){if(!t)return t;const a=[];return a.push("token="+gn()),e&&(Rn(e)?a.push("_nocache="+ji()):a.push("_nocache="+e)),t.indexOf("?")>=0?t+"&"+a.join("&"):t+"?"+a.join("&")}},ht=Vt("settings",()=>{const t=q(Ga()),e=q({}),a=q(gc()),n=m(()=>pr(e.value)>0);function o(U,ye){const Se=U.split("."),he=Se[0];if(Se.length===1)vt(he,ye),t.value[he]=ye;else if(Se.length===2){const Me=Se[1];Aa(he,Me,ye),t.value[he][Me]=ye}else X.warn(`cannot load application cloud setting "${U}", because it has invalid key format`)}function s(U){const ye=ao[U];if(!ye)return X.warn(`cannot get application cloud setting "${U}", because it is not supported to sync`),null;const Se=U.split(".");let he=t.value[U];if(Se.length===2){const ze=Se[0],Ee=Se[1];he=t.value[ze][Ee]}else if(Se.length>2)return X.warn(`cannot get application cloud setting "${U}", because it has invalid key format`),null;let Me="";return ye===wn.String?he?Me=he.toString():Me="":Me=JSON.stringify(he),{settingKey:U,settingValue:Me}}function r(U,ye){if(!e.value||!e.value[U]||!ao[U])return;const he=Ke(ye)?ye:JSON.stringify(ye);re.updateUserApplicationCloudSettings({settings:[{settingKey:U,settingValue:he}],fullUpdate:!1}).then(Me=>{const ze=Me.data;if(!ze||!ze.success||!ze.result){X.debug(`failed to update user application cloud setting "${U}" with value "${he}"`);return}X.debug(`update user application cloud setting "${U}" with value "${he}" successfully`)}).catch(Me=>{X.debug(`failed to update user application cloud setting "${U}" with value "${he}"`,Me)})}function l(U){vt("theme",U),t.value.theme=U}function i(U){vt("fontSize",U),t.value.fontSize=U}function c(U){vt("timeZone",U),t.value.timeZone=U}function f(U){vt("autoUpdateExchangeRatesData",U),t.value.autoUpdateExchangeRatesData=U}function A(U){vt("showAccountBalance",U),t.value.showAccountBalance=U,r("showAccountBalance",U)}function T(U){vt("swipeBack",U),t.value.swipeBack=U}function C(U){vt("animate",U),t.value.animate=U}function Y(U){vt("applicationLock",U),t.value.applicationLock=U}function k(U){vt("applicationLockWebAuthn",U),t.value.applicationLockWebAuthn=U}function $(U){vt("showAddTransactionButtonInDesktopNavbar",U),t.value.showAddTransactionButtonInDesktopNavbar=U}function F(U){vt("showAmountInHomePage",U),t.value.showAmountInHomePage=U,r("showAmountInHomePage",U)}function H(U){vt("timezoneUsedForStatisticsInHomePage",U),t.value.timezoneUsedForStatisticsInHomePage=U,r("timezoneUsedForStatisticsInHomePage",U)}function w(U){vt("overviewAccountFilterInHomePage",U),t.value.overviewAccountFilterInHomePage=U,r("overviewAccountFilterInHomePage",U)}function z(U){vt("overviewTransactionCategoryFilterInHomePage",U),t.value.overviewTransactionCategoryFilterInHomePage=U,r("overviewTransactionCategoryFilterInHomePage",U)}function y(U){vt("itemsCountInTransactionListPage",U),t.value.itemsCountInTransactionListPage=U,r("itemsCountInTransactionListPage",U)}function v(U){vt("showTotalAmountInTransactionListPage",U),t.value.showTotalAmountInTransactionListPage=U,r("showTotalAmountInTransactionListPage",U)}function p(U){vt("showTagInTransactionListPage",U),t.value.showTagInTransactionListPage=U,r("showTagInTransactionListPage",U)}function I(U){vt("autoSaveTransactionDraft",U),t.value.autoSaveTransactionDraft=U,r("autoSaveTransactionDraft",U)}function d(U){vt("autoGetCurrentGeoLocation",U),t.value.autoGetCurrentGeoLocation=U,r("autoGetCurrentGeoLocation",U)}function x(U){vt("alwaysShowTransactionPicturesInMobileTransactionEditPage",U),t.value.alwaysShowTransactionPicturesInMobileTransactionEditPage=U,r("alwaysShowTransactionPicturesInMobileTransactionEditPage",U)}function O(U){vt("insightsExploreDefaultDateRangeType",U),t.value.insightsExploreDefaultDateRangeType=U,r("insightsExploreDefaultDateRangeType",U)}function N(U){vt("timezoneUsedForInsightsExplorePage",U),t.value.timezoneUsedForInsightsExplorePage=U,r("timezoneUsedForInsightsExplorePage",U)}function Q(U){vt("totalAmountExcludeAccountIds",U),t.value.totalAmountExcludeAccountIds=U,r("totalAmountExcludeAccountIds",U)}function j(U){vt("currencySortByInExchangeRatesPage",U),t.value.currencySortByInExchangeRatesPage=U,r("currencySortByInExchangeRatesPage",U)}function ae(U){Aa("statistics","defaultChartDataType",U),t.value.statistics.defaultChartDataType=U,r("statistics.defaultChartDataType",U)}function de(U){Aa("statistics","defaultTimezoneType",U),t.value.statistics.defaultTimezoneType=U,r("statistics.defaultTimezoneType",U)}function ge(U){Aa("statistics","defaultAccountFilter",U),t.value.statistics.defaultAccountFilter=U,r("statistics.defaultAccountFilter",U)}function M(U){Aa("statistics","defaultTransactionCategoryFilter",U),t.value.statistics.defaultTransactionCategoryFilter=U,r("statistics.defaultTransactionCategoryFilter",U)}function h(U){Aa("statistics","defaultSortingType",U),t.value.statistics.defaultSortingType=U,r("statistics.defaultSortingType",U)}function L(U){Aa("statistics","defaultCategoricalChartType",U),t.value.statistics.defaultCategoricalChartType=U,r("statistics.defaultCategoricalChartType",U)}function g(U){Aa("statistics","defaultCategoricalChartDataRangeType",U),t.value.statistics.defaultCategoricalChartDataRangeType=U,r("statistics.defaultCategoricalChartDataRangeType",U)}function B(U){Aa("statistics","defaultTrendChartType",U),t.value.statistics.defaultTrendChartType=U,r("statistics.defaultTrendChartType",U)}function b(U){Aa("statistics","defaultTrendChartDataRangeType",U),t.value.statistics.defaultTrendChartDataRangeType=U,r("statistics.defaultTrendChartDataRangeType",U)}function S(U){Aa("statistics","defaultAssetTrendsChartType",U),t.value.statistics.defaultAssetTrendsChartType=U,r("statistics.defaultAssetTrendsChartType",U)}function R(U){Aa("statistics","defaultAssetTrendsChartDataRangeType",U),t.value.statistics.defaultAssetTrendsChartDataRangeType=U,r("statistics.defaultAssetTrendsChartDataRangeType",U)}function V(){hc(),t.value=Ga()}function Z(U){if(!U||U.length<1)return[];const ye=[];for(const Se of U){const he=s(Se);he&&ye.push(he)}return ye}function ee(U){if(!U||U.length<1){e.value={};return}e.value=po(U.map(ye=>ye.settingKey),!0);for(const ye of U){if(!ye||!ye.settingKey)continue;const Se=ao[ye.settingKey];if(!Se){X.warn(`cannot load application cloud setting "${ye.settingKey}", because it is not supported to sync`);continue}if(Se===wn.String)o(ye.settingKey,ye.settingValue);else if(Se===wn.Number){const he=parseFloat(ye.settingValue);if(isNaN(he)){X.warn(`cannot load application cloud setting "${ye.settingKey}", because it has invalid number value`);continue}o(ye.settingKey,he)}else if(Se===wn.Boolean){if(ye.settingValue!=="true"&&ye.settingValue!=="false"){X.warn(`cannot load application cloud setting "${ye.settingKey}", because it has invalid boolean value`);continue}o(ye.settingKey,ye.settingValue==="true")}else if(Se===wn.StringBooleanMap)try{const he=JSON.parse(ye.settingValue);let Me=He(he);if(Me){for(const ze of nt(he))if(!Rn(ze)){Me=!1;break}}if(!Me){X.warn(`cannot load application cloud setting "${ye.settingKey}", because it has invalid map value`);continue}o(ye.settingKey,he)}catch(he){X.warn(`cannot load application cloud setting "${ye.settingKey}", because cannot parse JSON (${he})`)}else X.warn(`cannot load application cloud setting "${ye.settingKey}", because it has unknown type "${Se}"`)}}function W(U){!U||U.length<1?e.value={}:e.value=po(U,!0)}function G(U){U&&(a.value.currency=U.currency,a.value.firstDayOfWeek=U.firstDayOfWeek)}return{appSettings:t,syncedAppSettings:e,localeDefaultSettings:a,enableApplicationCloudSync:n,setTheme:l,setFontSize:i,setTimeZone:c,setAutoUpdateExchangeRatesData:f,setShowAccountBalance:A,setEnableSwipeBack:T,setEnableAnimate:C,setEnableApplicationLock:Y,setEnableApplicationLockWebAuthn:k,setShowAddTransactionButtonInDesktopNavbar:$,setShowAmountInHomePage:F,setTimezoneUsedForStatisticsInHomePage:H,setOverviewAccountFilterInHomePage:w,setOverviewTransactionCategoryFilterInHomePage:z,setItemsCountInTransactionListPage:y,setShowTotalAmountInTransactionListPage:v,setShowTagInTransactionListPage:p,setAutoSaveTransactionDraft:I,setAutoGetCurrentGeoLocation:d,setAlwaysShowTransactionPicturesInMobileTransactionEditPage:x,setInsightsExploreDefaultDateRangeType:O,setTimezoneUsedForInsightsExplorePage:N,setTotalAmountExcludeAccountIds:Q,setCurrencySortByInExchangeRatesPage:j,setStatisticsDefaultChartDataType:ae,setStatisticsDefaultTimezoneType:de,setStatisticsDefaultAccountFilter:ge,setStatisticsDefaultTransactionCategoryFilter:M,setStatisticsSortingType:h,setStatisticsDefaultCategoricalChartType:L,setStatisticsDefaultCategoricalChartDateRange:g,setStatisticsDefaultTrendChartType:B,setStatisticsDefaultTrendChartDateRange:b,setStatisticsDefaultAssetTrendsChartType:S,setStatisticsDefaultAssetTrendsChartDateRange:R,clearAppSettings:V,createApplicationCloudSettings:Z,setApplicationSettingsFromCloudSettings:ee,updateApplicationSyncSettingKeys:W,updateLocalizedDefaultSettings:G}});class Gn{username="";password="";confirmPassword="";email="";nickname="";language;defaultCurrency;firstDayOfWeek;defaultAccountId=Ye.defaultAccountId;transactionEditScope=Ye.transactionEditScope;fiscalYearStart=Ye.fiscalYearStart;calendarDisplayType=Ye.calendarDisplayType;dateDisplayType=Ye.dateDisplayType;longDateFormat=Ye.longDateFormat;shortDateFormat=Ye.shortDateFormat;longTimeFormat=Ye.longTimeFormat;shortTimeFormat=Ye.shortTimeFormat;fiscalYearFormat=Ye.fiscalYearFormat;currencyDisplayType=Ye.currencyDisplayType;numeralSystem=Ye.numeralSystem;decimalSeparator=Ye.decimalSeparator;digitGroupingSymbol=Ye.digitGroupingSymbol;digitGrouping=Ye.digitGrouping;coordinateDisplayType=Ye.coordinateDisplayType;expenseAmountColor=Ye.expenseAmountColor;incomeAmountColor=Ye.incomeAmountColor;constructor(e,a,n){this.language=e,this.defaultCurrency=a,this.firstDayOfWeek=n}fillFrom(e){this.username=e.username,this.email=e.email,this.nickname=e.nickname,this.defaultAccountId=e.defaultAccountId,this.transactionEditScope=e.transactionEditScope,this.language=e.language,this.defaultCurrency=e.defaultCurrency,this.firstDayOfWeek=e.firstDayOfWeek,this.fiscalYearStart=e.fiscalYearStart,this.calendarDisplayType=e.calendarDisplayType,this.dateDisplayType=e.dateDisplayType,this.longDateFormat=e.longDateFormat,this.shortDateFormat=e.shortDateFormat,this.longTimeFormat=e.longTimeFormat,this.shortTimeFormat=e.shortTimeFormat,this.fiscalYearFormat=e.fiscalYearFormat,this.currencyDisplayType=e.currencyDisplayType,this.numeralSystem=e.numeralSystem,this.decimalSeparator=e.decimalSeparator,this.digitGroupingSymbol=e.digitGroupingSymbol,this.digitGrouping=e.digitGrouping,this.coordinateDisplayType=e.coordinateDisplayType,this.expenseAmountColor=e.expenseAmountColor,this.incomeAmountColor=e.incomeAmountColor}toRegisterRequest(e){return{username:this.username,email:this.email,nickname:this.nickname,password:this.password,language:this.language,defaultCurrency:this.defaultCurrency,firstDayOfWeek:this.firstDayOfWeek,categories:e}}toProfileUpdateRequest(e){return{email:this.email,nickname:this.nickname,password:this.password,oldPassword:e,defaultAccountId:this.defaultAccountId,transactionEditScope:this.transactionEditScope,language:this.language,defaultCurrency:this.defaultCurrency,firstDayOfWeek:this.firstDayOfWeek,fiscalYearStart:this.fiscalYearStart,calendarDisplayType:this.calendarDisplayType,dateDisplayType:this.dateDisplayType,longDateFormat:this.longDateFormat,shortDateFormat:this.shortDateFormat,longTimeFormat:this.longTimeFormat,shortTimeFormat:this.shortTimeFormat,fiscalYearFormat:this.fiscalYearFormat,currencyDisplayType:this.currencyDisplayType,numeralSystem:this.numeralSystem,decimalSeparator:this.decimalSeparator,digitGroupingSymbol:this.digitGroupingSymbol,digitGrouping:this.digitGrouping,coordinateDisplayType:this.coordinateDisplayType,expenseAmountColor:this.expenseAmountColor,incomeAmountColor:this.incomeAmountColor}}static of(e){const a=new Gn(e.language,e.defaultCurrency,e.firstDayOfWeek);return a.defaultAccountId=e.defaultAccountId,a.transactionEditScope=e.transactionEditScope,a.fiscalYearStart=e.fiscalYearStart,a.calendarDisplayType=e.calendarDisplayType,a.dateDisplayType=e.dateDisplayType,a.longDateFormat=e.longDateFormat,a.shortDateFormat=e.shortDateFormat,a.longTimeFormat=e.longTimeFormat,a.shortTimeFormat=e.shortTimeFormat,a.fiscalYearFormat=e.fiscalYearFormat,a.currencyDisplayType=e.currencyDisplayType,a.numeralSystem=e.numeralSystem,a.decimalSeparator=e.decimalSeparator,a.digitGroupingSymbol=e.digitGroupingSymbol,a.digitGrouping=e.digitGrouping,a.coordinateDisplayType=e.coordinateDisplayType,a.expenseAmountColor=e.expenseAmountColor,a.incomeAmountColor=e.incomeAmountColor,a}static createNewUser(e,a,n){return new Gn(e,a,n)}}const Ye={username:"",email:"",nickname:"",avatar:"",avatarProvider:void 0,defaultAccountId:"",transactionEditScope:Da.All.type,language:"",defaultCurrency:"",firstDayOfWeek:-1,fiscalYearStart:Xe.Default.value,calendarDisplayType:zt.Default.type,dateDisplayType:$t.Default.type,longDateFormat:ot.Default.type,shortDateFormat:Je.Default.type,longTimeFormat:Dt.Default.type,shortTimeFormat:St.Default.type,fiscalYearFormat:At.Default.type,currencyDisplayType:ct.Default.type,numeralSystem:be.Default.type,decimalSeparator:_e.LanguageDefaultType,digitGroupingSymbol:it.LanguageDefaultType,digitGrouping:Ut.LanguageDefaultType,coordinateDisplayType:Ht.Default.type,expenseAmountColor:yt.DefaultExpenseColor.type,incomeAmountColor:yt.DefaultIncomeColor.type,emailVerified:!1},kt=Vt("user",()=>{const t=ht(),e=q(Nc()),a=m(()=>{const g=e.value||Ye;return g.nickname||g.username||null}),n=m(()=>{const g=e.value||Ye;return L(g,!1)}),o=m(()=>(e.value||Ye).defaultAccountId),s=m(()=>(e.value||Ye).language),r=m(()=>(e.value||Ye).defaultCurrency||t.localeDefaultSettings.currency),l=m(()=>{const g=e.value||Ye;return Ae(g.firstDayOfWeek)&&mt.valueOf(g.firstDayOfWeek)?g.firstDayOfWeek:t.localeDefaultSettings.firstDayOfWeek}),i=m(()=>{const g=e.value||Ye;return Ae(g.fiscalYearStart)&&Xe.valueOf(g.fiscalYearStart)?g.fiscalYearStart:Ye.fiscalYearStart}),c=m(()=>(e.value||Ye).calendarDisplayType),f=m(()=>(e.value||Ye).dateDisplayType),A=m(()=>(e.value||Ye).longDateFormat),T=m(()=>(e.value||Ye).shortDateFormat),C=m(()=>(e.value||Ye).longTimeFormat),Y=m(()=>(e.value||Ye).shortTimeFormat),k=m(()=>(e.value||Ye).fiscalYearFormat),$=m(()=>(e.value||Ye).currencyDisplayType),F=m(()=>(e.value||Ye).numeralSystem),H=m(()=>(e.value||Ye).decimalSeparator),w=m(()=>(e.value||Ye).digitGroupingSymbol),z=m(()=>(e.value||Ye).digitGrouping),y=m(()=>(e.value||Ye).coordinateDisplayType),v=m(()=>(e.value||Ye).expenseAmountColor),p=m(()=>(e.value||Ye).incomeAmountColor);function I(g){return Gn.createNewUser(g,t.localeDefaultSettings.currency,t.localeDefaultSettings.firstDayOfWeek)}function d(g){e.value=g,Lc(g)}function x(){e.value=null,Ar()}function O(){return new Promise((g,B)=>{re.getProfile().then(b=>{const S=b.data;if(!S||!S.success||!S.result){B({message:"Unable to retrieve user profile"});return}g(S.result)}).catch(b=>{X.error("failed to retrieve user profile",b),b.response&&b.response.data&&b.response.data.errorMessage?B({error:b.response.data}):b.processed?B(b):B({message:"Unable to retrieve user profile"})})})}function N({transactionEditScope:g}){return new Promise((B,b)=>{re.updateProfile({transactionEditScope:g}).then(S=>{const R=S.data;if(!R||!R.success||!R.result||!R.result.user||!He(R.result.user)){b({message:"Unable to update editable transaction range"});return}d(R.result.user),B(R.result)}).catch(S=>{X.error("failed to save editable transaction range",S),S.response&&S.response.data&&S.response.data.errorMessage?b({error:S.response.data}):S.processed?b(S):b({message:"Unable to update editable transaction range"})})})}function Q({avatarFile:g}){return new Promise((B,b)=>{re.updateAvatar({avatarFile:g}).then(S=>{const R=S.data;if(!R||!R.success||!R.result){b({message:"Unable to update user avatar"});return}d(R.result),B(R.result)}).catch(S=>{X.error("failed to update user avatar",S),S.response&&S.response.data&&S.response.data.errorMessage?b({error:S.response.data}):S.processed?b(S):b({message:"Unable to update user avatar"})})})}function j(){return new Promise((g,B)=>{re.removeAvatar().then(b=>{const S=b.data;if(!S||!S.success||!S.result){B({message:"Unable to remove user avatar"});return}d(S.result),g(S.result)}).catch(b=>{X.error("failed to remove user avatar",b),b.response&&b.response.data&&b.response.data.errorMessage?B({error:b.response.data}):b.processed?B(b):B({message:"Unable to remove user avatar"})})})}function ae(){return new Promise((g,B)=>{re.getUserApplicationCloudSettings().then(b=>{const S=b.data;if(!S||!S.success||!S.result){g(S.result);return}g(S.result)}).catch(b=>{X.error("failed to load user synchronized application settings",b),b.response&&b.response.data&&b.response.data.errorMessage?B({error:b.response.data}):b.processed?B(b):B({message:"Unable to retrieve user synchronized application settings"})})})}function de(g){const B=t.createApplicationCloudSettings(g);return new Promise((b,S)=>{re.updateUserApplicationCloudSettings({settings:B,fullUpdate:!0}).then(R=>{const V=R.data;if(!V||!V.success||!V.result){S({message:"Unable to update user synchronized application settings"});return}t.updateApplicationSyncSettingKeys(g),b(V.result)}).catch(R=>{X.error("failed to update user synchronized application settings",R),R.response&&R.response.data&&R.response.data.errorMessage?S({error:R.response.data}):R.processed?S(R):S({message:"Unable to update user synchronized application settings"})})})}function ge(){return new Promise((g,B)=>{re.disableUserApplicationCloudSettings().then(b=>{const S=b.data;if(!S||!S.success||!S.result){B({message:"Unable to disable user synchronized application settings"});return}t.updateApplicationSyncSettingKeys(void 0),g(S.result)}).catch(b=>{X.error("failed to disable user synchronized application settings",b),b.response&&b.response.data&&b.response.data.errorMessage?B({error:b.response.data}):b.processed?B(b):B({message:"Unable to disable user synchronized application settings"})})})}function M(){return new Promise((g,B)=>{re.getUserDataStatistics().then(b=>{const S=b.data;if(!S||!S.success||!S.result){B({message:"Unable to retrieve user statistics data"});return}g(S.result)}).catch(b=>{X.error("failed to retrieve user statistics data",b),b.response&&b.response.data&&b.response.data.errorMessage?B({error:b.response.data}):b.processed?B(b):B({message:"Unable to retrieve user statistics data"})})})}function h(g,B){return new Promise((b,S)=>{re.getExportedUserData(g,B).then(R=>{if(R&&R.headers){const Z=R.headers["content-type"]?.toString()||"";if(g==="csv"&&!Qt.CSV.isSameType(Z)){S({message:"Unable to retrieve exported user data"});return}else if(g==="tsv"&&!Qt.TSV.isSameType(Z)){S({message:"Unable to retrieve exported user data"});return}}const V=new Blob([R.data],{type:R.headers["content-type"]});b(V)}).catch(R=>{X.error("failed to retrieve user statistics data",R),R.response&&Qt.TXT.isSameType(R.response.headers["content-type"])&&R.response&&R.response.data?S({message:"error."+R.response.data}):R.processed?S(R):S({message:"Unable to retrieve exported user data"})})})}function L(g,B){let b="";return He(g)?b=g.avatar:Ke(g)&&(b=g),b?re.getInternalAvatarUrlWithToken(b,B):null}return{currentUserBasicInfo:e,currentUserNickname:a,currentUserAvatar:n,currentUserDefaultAccountId:o,currentUserLanguage:s,currentUserDefaultCurrency:r,currentUserFirstDayOfWeek:l,currentUserFiscalYearStart:i,currentUserCalendarDisplayType:c,currentUserDateDisplayType:f,currentUserLongDateFormat:A,currentUserShortDateFormat:T,currentUserLongTimeFormat:C,currentUserShortTimeFormat:Y,currentUserFiscalYearFormat:k,currentUserCurrencyDisplayType:$,currentUserNumeralSystem:F,currentUserDecimalSeparator:H,currentUserDigitGroupingSymbol:w,currentUserDigitGrouping:z,currentUserCoordinateDisplayType:y,currentUserExpenseAmountColor:v,currentUserIncomeAmountColor:p,generateNewUserModel:I,storeUserBasicInfo:d,resetUserBasicInfo:x,getCurrentUserProfile:O,updateUserTransactionEditScope:N,updateUserAvatar:Q,removeUserAvatar:j,getUserApplicationCloudSettings:ae,fullUpdateUserApplicationCloudSettings:de,disableUserApplicationCloudSettings:ge,getUserDataStatistics:M,getExportedUserData:h,getUserAvatarUrl:L}}),ai="ebk_app_exchange_rates",Xu="user_custom";function er(){const t=localStorage.getItem(ai)||"{}";return JSON.parse(t)}function uo(t){const e=JSON.stringify(t);localStorage.setItem(ai,e)}function ju(){localStorage.removeItem(ai)}const va=Vt("exchangeRates",()=>{const t=q(er()),e=m(()=>!t.value||!t.value.data?!1:t.value.data.dataSource===Xu),a=m(()=>{const A=t.value||{};return A&&A.data?A.data.updateTime:null}),n=m(()=>{const A={};if(!t.value||!t.value.data||!t.value.data.exchangeRates)return A;for(const T of t.value.data.exchangeRates)A[T.currency]=T;return A});function o(A,T){if(!t.value||!t.value.data||!t.value.data.exchangeRates)return;const C=t.value.data.exchangeRates;let Y=!1;for(const[k,$]of at(C))if(k.currency===A.currency){C.splice($,1,A),Y=!0;break}Y||(C.push(A),Y=!0),t.value.data.updateTime=T,Y&&uo(t.value)}function s(A){if(!t.value||!t.value.data||!t.value.data.exchangeRates)return;const T=t.value.data.exchangeRates;let C=!1;for(const[Y,k]of at(T))if(Y.currency===A){T.splice(k,1),C=!0;break}C&&uo(t.value)}function r(){t.value={},ju()}function l({silent:A,force:T}){const C=t.value,Y=za();return!T&&(C&&C.time&&C.data&&uu(C.data.updateTime,Y)||C&&C.time&&C.data&&mu(C.time,Y))?Promise.resolve(C.data):new Promise((k,$)=>{re.getLatestExchangeRates({ignoreError:A}).then(F=>{const H=F.data;if(!H||!H.success||!H.result){$({message:"Unable to retrieve exchange rates data"});return}const w=er();if(T&&w&&w.data&&ca(w.data,H.result)){$({message:"Exchange rates data is up to date",isUpToDate:!0});return}t.value={time:Y,data:H.result},uo(t.value),k(H.result)}).catch(F=>{X.error("failed to retrieve latest exchange rates data",F),F&&F.processed?$(F):F.response&&F.response.data&&F.response.data.errorMessage?$({error:F.response.data}):$({message:"Unable to retrieve exchange rates data"})})})}function i({currency:A,rate:T}){return new Promise((C,Y)=>{re.updateUserCustomExchangeRate({currency:A,rate:T.toString()}).then(k=>{const $=k.data;if(!$||!$.success||!$.result){Y({message:"Unable to update user custom exchange rate"});return}const F={currency:$.result.currency,rate:$.result.rate};o(F,$.result.updateTime),C($.result)}).catch(k=>{X.error("failed to update user custom exchange rate",k),k.response&&k.response.data&&k.response.data.errorMessage?Y({error:k.response.data}):k.processed?Y(k):Y({message:"Unable to update user custom exchange rate"})})})}function c({currency:A,beforeResolve:T}){return new Promise((C,Y)=>{re.deleteUserCustomExchangeRate({currency:A}).then(k=>{const $=k.data;if(!$||!$.success||!$.result){Y({message:"Unable to delete this user custom exchange rate"});return}T?T(()=>{s(A)}):s(A),C($.result)}).catch(k=>{X.error("failed to delete user custom exchange rate",k),k.response&&k.response.data&&k.response.data.errorMessage?Y({error:k.response.data}):k.processed?Y(k):Y({message:"Unable to delete this user custom exchange rate"})})})}function f(A,T,C){if(A===0)return 0;if(!t.value||!t.value.data||!t.value.data.exchangeRates)return null;const Y=t.value.data.exchangeRates,k={};for(const H of Y)k[H.currency]=H;const $=k[T],F=k[C];return!$||!F?null:Xo(A,$.rate,F.rate)}return{latestExchangeRates:t,isUserCustomExchangeRates:e,exchangeRatesLastUpdateTime:a,latestExchangeRateMap:n,resetLatestExchangeRates:r,getLatestExchangeRates:l,updateUserCustomExchangeRate:i,deleteUserCustomExchangeRate:c,getExchangedAmount:f}});function sf(){return{legacy:!1,locale:xn,fallbackLocale:xn,formatFallbackMessages:!0,messages:(function(){const t={};for(const[e,a]of Xt(ea))t[e]=a.content;return t})()}}function of(){const t={};for(const[e,a]of Xt(ea))a.textDirection==="rtl"&&(t[e]=!0);return t}function Ze(){const{t,locale:e}=Zl(),a=ht(),n=kt(),o=va();function s(u){return t(`language.${u}`)}function r(){if(!window||!window.navigator)return xn;let u=window.navigator.browserLanguage||window.navigator.language;if(!u)return xn;if(ea[u])return u;let D=l(u);if(D&&ea[D])return D;const P=u.split("-");if(P.length>2){if(u=P[0]+"-"+P[1],ea[u])return u;if(D=l(u),D&&ea[D])return D}if(P.length>1){if(u=P[0],ea[u])return u;if(D=l(u),D&&ea[D])return D}return D=i(u),D&&ea[D]?D:xn}function l(u){for(const[D,P]of Xt(ea)){if(D.toLowerCase()===u.toLowerCase())return D;const J=P.aliases;if(!(!J||J.length<1)){for(const se of J)if(se.toLowerCase()===u.toLowerCase())return D}}return null}function i(u){for(const D of jt(ea)){if(D.indexOf("-")<0)continue;if(D.split("-")[0].toLowerCase()===u.toLowerCase())return D}return null}function c(u){if(u.errorCode===Ao.ApiNotFound&&Fi[u.path])return{message:`${Fi[u.path].message}`};if(u.errorCode!==Ao.ValidatorError)return{message:`error.${u.errorMessage}`};for(const D of Zc){const P=u.errorMessage.match(D.regex);if(P&&P.length===D.parameters.length+1)return{message:`parameterizedError.${D.localeKey}`,parameters:D.parameters.map((J,se)=>({key:J.field,localized:J.localized,value:P[se+1]}))}}return{message:`error.${u.errorMessage}`}}function f(u){const D={};if(u)for(const P of u)P.localized?D[P.key]=t(`parameter.${P.value}`):D[P.key]=P.value;return D}function A(){return De.localeData()}function T(){const u=ec[e.value]??tc;return{numerals:u.numerals,monthNames:u.monthNames,dayNames:u.dayNames,leapMonthPrefix:u.leapMonthPrefix,solarTermNames:u.solarTermNames}}function C(){const u=ac[e.value]??nc;return{monthNames:u.monthNames,monthShortNames:u.monthShortNames}}function Y(u,D){const P=t("default.currencyDisplayType");let J=ct.parse(P);J||(J=ct.Default);const se=n.currentUserDefaultCurrency,pe=[],Ce=fn(12345,se,J,u,D);pe.push({type:ct.LanguageDefaultType,displayName:`${t("Language Default")} (${Ce})`});const Re=ct.values();for(const Le of Re){const et=fn(12345,se,Le,u,D),rt=`${t(Le.name)} (${et})`;pe.push({type:Le.type,displayName:rt})}return pe}function k(u,D,P,J){let se=D;se||(se=P);const pe=[];pe.push({type:J,displayName:`${t("Language Default")} (${t("calendar."+se.name)})`});for(const Ce of u)pe.push({type:Ce.type,displayName:t("calendar."+Ce.name)});return pe}function $(u){const D=[];for(const P of u)D.push({type:P.type,displayName:t(P.name)});return D}function F(u){const D=[];for(const P of u)D.push({name:t(P.name),value:P.value});return D}function H(u,D,P){const J=[];J.push({type:D,displayName:t("System Default")+(P.name?` (${t(P.name)})`:"")});for(const se of u)J.push({type:se.type,displayName:t(se.name)});return J}function w(u,D,P,J){let se=D;se||(se=P);const pe=[];pe.push({type:J,symbol:se.symbol,displayName:`${t("Language Default")} (${se.symbol})`});for(const Ce of u)pe.push({type:Ce.type,symbol:Ce.symbol,displayName:`${t("numeral."+Ce.name)} (${Ce.symbol})`});return pe}function z(u,D){const P=[],J=tt.values(u);for(const se of J)P.push({type:se.type,displayName:t(D?se.fullName:`granularity.${se.shortName}`)});return P}function y(u){const D=[],P=Jt.values();for(const J of P)D.push(t(`datetime.${J.name}.${u}`));return D}function v(u){const D=[],P=mt.values();for(const J of P)D.push(t(`datetime.${J.name}.${u}`));return D}function p(u,D,P,J,se){return Du(u,D,P,t(`default.${J}`),se)}function I(u,D,P,J,se,pe){const Ce=p(D,P,J,se,pe);return t(`format.${u}.${Ce.key}`)}function d(){return I("longDate",ot.all(),ot.values(),n.currentUserLongDateFormat,"longDateFormat",ot.Default)}function x(){return I("shortDate",Je.all(),Je.values(),n.currentUserShortDateFormat,"shortDateFormat",Je.Default)}function O(){return I("longYear",ot.all(),ot.values(),n.currentUserLongDateFormat,"longDateFormat",ot.Default)}function N(){return I("shortYear",Je.all(),Je.values(),n.currentUserShortDateFormat,"shortDateFormat",Je.Default)}function Q(){return I("longYearMonth",ot.all(),ot.values(),n.currentUserLongDateFormat,"longDateFormat",ot.Default)}function j(){return I("shortYearMonth",Je.all(),Je.values(),n.currentUserShortDateFormat,"shortDateFormat",Je.Default)}function ae(){return I("longMonthDay",ot.all(),ot.values(),n.currentUserLongDateFormat,"longDateFormat",ot.Default)}function de(){return I("shortMonthDay",Je.all(),Je.values(),n.currentUserShortDateFormat,"shortDateFormat",Je.Default)}function ge(){return I("shortDay",Je.all(),Je.values(),n.currentUserShortDateFormat,"shortDateFormat",Je.Default)}function M(){return I("longTime",Dt.all(),Dt.values(),n.currentUserLongTimeFormat,"longTimeFormat",Dt.Default)}function h(){return I("shortTime",St.all(),St.values(),n.currentUserShortTimeFormat,"shortTimeFormat",St.Default)}function L(u){let D=u?.numeralSystem,P=u?.calendarType;return Qe(D)||(D=Ka()),Qe(P)||(P=Xs().calendarType),{numeralSystem:D,calendarType:P,localeData:A(),chineseCalendarLocaleData:T(),persianCalendarLocaleData:C()}}function g({numeralSystem:u,digitGrouping:D,decimalSeparator:P,currencyCode:J}){return Qe(u)||(u=Ka()),Qe(D)||(D=Ti()),Qe(P)||(P=yi()),{numeralSystem:u,digitGrouping:D,digitGroupingSymbol:hi(),decimalSeparator:P,decimalNumberCount:Xr(J)}}function B(u,D){const P=as[u];return P&&P.unit?t(D?`currency.unit.${P.unit}.plural`:`currency.unit.${P.unit}.normal`):""}function b(u){return u===wt.Gregorian||u===wt.Buddhist}function S(){const u=Xs();return b(u.calendarType)?u.calendarType:wt.Gregorian}function R(u,D){return Qs(D)?t("format.yearQuarter.content",{year:u,quarter:Qs(D)}):""}function V(u,D,P,J){u||(u=At.Default),Qe(J)?b(J)||(J=wt.Gregorian):J=S();const se=L({calendarType:J,numeralSystem:P});return t("format.fiscalYear."+u.typeName,{StartYYYY:Ia(D.minUnixTime,"YYYY",se),StartYY:Ia(D.minUnixTime,"YY",se),EndYYYY:Ia(D.maxUnixTime,"YYYY",se),EndYY:Ia(D.maxUnixTime,"YY",se)})}function Z(){let u=ct.valueOf(n.currentUserCurrencyDisplayType);if(!u){const D=t("default.currencyDisplayType");u=ct.parse(D)}return u||(u=ct.Default),u}function ee(u,D){let J=Ka().replaceWesternArabicDigitsToLocalizedDigits(u.getLocalizedCalendarDay(D));return u.isLocalizedCalendarFirstDayOfMonth(D)&&(J=u.getLocalizedCalendarMonthDisplayShortName(D)),{year:u.getGregorianCalendarYear(),month:u.getGregorianCalendarMonth(),day:u.getGregorianCalendarDay(),displayDate:J}}function W(u,D){return Qe(u)?D?t(u):u:""}function G(u){let D="",P={};if(He(u)&&He(u.error)){const J=c(u.error);D=J.message,P=f(J.parameters)}else if(Ke(u))D=u;else return"";return t(D,P)}function U(u){if(!u||!u.length)return"";const D=t("format.misc.multiTextJoinSeparator");return u.join(D)}function ye(u){if(!u)return"";const D=Se();return Ke(u[D])?u[D]:u.default||""}function Se(){return e.value}function he(){const u=an(e.value);return u||an(r())}function Me(){return he().displayName}function ze(){return he().textDirection==="rtl"?pn.RTL:pn.LTR}function Ee(){return t("default.currency")}function xe(){return t("default.firstDayOfWeek")}function Ge(u){const D=[];for(const[P,J]of Xt(ea)){const se=J.displayName,pe=s(J.name);D.push({languageTag:P,displayName:pe,nativeDisplayName:se})}return D.sort(function(P,J){return P.languageTag.localeCompare(J.languageTag)}),u&&D.splice(0,0,{languageTag:"",displayName:"",nativeDisplayName:t("System Default")}),D}function E(){return[{value:!0,displayName:t("Enable")},{value:!1,displayName:t("Disable")}]}function fe(){const u=[];for(const D of jt(as)){const P={currencyCode:D,displayName:Kn(D)};u.push(P)}return u.sort(function(D,P){return D.displayName.localeCompare(P.displayName)}),u}function ue(){const u=Ua.values(),D=[];for(const P of u)D.push({name:t(`datetime.${P.name}.content`),value:P.name});return D}function ce(){return y("long")}function ne(){return y("short")}function oe(){return v("long")}function Te(){return v("short")}function Oe(){return v("min")}function We(u){const D=[],P=mt.values();Ae(u)||(u=mt.DefaultFirstDay.type);for(let J=u;J<P.length;J++){const se=P[J];D.push({type:se.type,displayName:t(`datetime.${se.name}.long`)})}for(let J=0;J<u;J++){const se=P[J];D.push({type:se.type,displayName:t(`datetime.${se.name}.long`)})}return D}function Be(u,D,P,J,se,pe,Ce){const Re=I(u,D,P,Us,J,se),Le=[],et=L({numeralSystem:pe,calendarType:Ce});Le.push({type:Us,format:Re,displayName:`${t("Language Default")} (${Ki(Re,et)})`});for(const rt of P){const Bt=t(`format.${u}.${rt.key}`);Le.push({type:rt.type,format:Bt,displayName:Ki(Bt,et)})}return Le}function Tt(u,D,P){const J=[],se=te.values();for(const pe of se)if(pe.isAvailableForScene(u)){if(pe.isBillingCycle){P&&J.push({type:pe.type,displayName:t(pe.name),isBillingCycle:pe.isBillingCycle,isUserCustomRange:pe.isUserCustomRange});continue}(D||pe.type!==te.Custom.type)&&J.push({type:pe.type,displayName:t(pe.name),isBillingCycle:pe.isBillingCycle,isUserCustomRange:pe.isUserCustomRange})}return J}function _(u,D){const P=[],J=Mu(12),se=dn(),pe=L({calendarType:se.primaryCalendarType});u&&P.push({dateType:te.All.type,minTime:0,maxTime:0,displayName:t("All")});for(const Ce of J)P.push({dateType:Ce.dateType,minTime:Ce.minTime,maxTime:Ce.maxTime,year:Ce.year,month:Ce.month,isPreset:!0,displayName:Ia(Ce.minTime,Q(),pe)});return D&&P.push({dateType:te.Custom.type,minTime:0,maxTime:0,displayName:t("Custom Date")}),P}function ke(u,D){const P=Ka(),J=P.replaceWesternArabicDigitsToLocalizedDigits(du(u)),se=Br(u),pe=[];for(const Ce of Fc){const Re=Ce.timezoneName!==Cr.timezoneName?P.replaceWesternArabicDigitsToLocalizedDigits(ro(u,Ce.timezoneName)):"",Le=t(`timezone.${Ce.displayName}`);pe.push({name:Ce.timezoneName,utcOffset:Re,utcOffsetMinutes:Ta(u,Ce.timezoneName),displayName:Le,displayNameWithUtcOffset:`(UTC${Re}) ${Le}`})}if(D){const Ce=t("System Default");pe.push({name:"",utcOffset:J,utcOffsetMinutes:se,displayName:Ce,displayNameWithUtcOffset:`(UTC${J}) ${Ce}`})}return pe.sort(function(Ce,Re){const Le=Ce.utcOffsetMinutes,et=Re.utcOffsetMinutes;return Le!==et?Le-et:Ce.displayName.localeCompare(Re.displayName)}),pe}function Fe(u){const P=Ka().replaceWesternArabicDigitsToLocalizedDigits(ro(za(),u));return[{type:ia.ApplicationTimezone.type,displayName:t(ia.ApplicationTimezone.name)+` (UTC${P})`},{type:ia.TransactionTimezone.type,displayName:t(ia.TransactionTimezone.name)}]}function dt(u,D){const P=za();let J=n.currentUserFiscalYearStart;J||(J=Xe.Default.value);const se=Wi(P,J);let pe=At.parse(t("default.fiscalYearFormat"));pe||(pe=At.Default);const Ce=[];Ce.push({type:xc,displayName:`${t("Language Default")} (${V(pe,se,u,D)})`});const Re=At.values();for(const Le of Re)Ce.push({type:Le.type,displayName:V(Le,se,u,D)});return Ce}function Ot(){const u=t("default.numeralSystem");let D=be.parse(u);D||(D=be.Default);const P=[];P.push({type:be.LanguageDefaultType,displayName:`${t("Language Default")} (${D.textualAllDigits})`});const J=be.values();for(const se of J)P.push({type:se.type,displayName:`${t("numeral."+se.name)} (${se.textualAllDigits})`});return P}function Gt(u,D){const P=t("default.digitGrouping");let J=Ut.parse(P);J||(J=Ut.Default);const se=[];se.push({type:Ut.LanguageDefaultType,enabled:J.enabled,displayName:`${t("Language Default")} (${t("numeral."+J.name)})`});const pe=Ut.values(),Ce=u.replaceWesternArabicDigitsToLocalizedDigits("123456789").split("");for(const Re of pe){const Le=Re.format(Ce,D);se.push({type:Re.type,enabled:Re.enabled,displayName:`${t("numeral."+Re.name)} (${Le})`})}return se}function we(u){const D=[];let P="";u===ve.Expense?P=yt.DefaultExpenseColor.name:u===ve.Income&&(P=yt.DefaultIncomeColor.name),P&&(P=t("color.amount."+P)),D.push({type:yt.SystemDefaultType,displayName:t("System Default")+(P?` (${P})`:"")});const J=yt.values();for(const se of J)D.push({type:se.type,displayName:t("color.amount."+se.name)});return D}function Nt(){const u=[],D=Ve.values();for(const P of D)u.push({type:P.type,displayName:t(P.name),defaultAccountIconId:P.defaultAccountIconId});return u}function Ft(u,D){const P={},J=[];u===0?J.push(...kc):J.push(u);for(const se of J){const pe=[];let Ce=[];se===ve.Income?Ce=Pc:se===ve.Expense?Ce=Bc:se===ve.Transfer&&(Ce=Rc);for(const Re of Ce){const Le={name:t("category."+Re.name,{},{locale:D}),type:se,icon:Re.categoryIconId,color:Re.color,subCategories:[]};for(const et of Re.subCategories){const rt={name:t("category."+et.name,{},{locale:D}),type:se,icon:et.categoryIconId,color:et.color};Le.subCategories.push(rt)}pe.push(Le)}P[`${se}`]=pe}return P}function La(u){const D=[];if(!u||!u.exchangeRates)return D;for(const P of u.exchangeRates)D.push({currencyCode:P.currency,currencyDisplayName:Kn(P.currency),rate:P.rate});return a.appSettings.currencySortByInExchangeRatesPage===Ma.Name.type?D.sort(function(P,J){return P.currencyDisplayName.localeCompare(J.currencyDisplayName)}):a.appSettings.currencySortByInExchangeRatesPage===Ma.CurrencyCode.type?D.sort(function(P,J){return P.currencyCode.localeCompare(J.currencyCode)}):a.appSettings.currencySortByInExchangeRatesPage===Ma.ExchangeRate.type&&D.sort(function(P,J){const se=parseFloat(P.rate),pe=parseFloat(J.rate);return se>pe?1:se<pe?-1:0}),D}function fa(){const u=[];for(const D of _c){const P={displayCategoryName:t(D.categoryName),fileTypes:[]};for(const J of D.fileTypes){let se;if(J.document){let Le="",et="",rt="";J.document.supportMultiLanguages===!0?(Le=Se(),so[Le]===Le?rt=t(`document.anchor.export_and_import.${J.document.anchor}`):so[Le]?(Le=so[Le],rt=t(`document.anchor.export_and_import.${J.document.anchor}`,{},{locale:Le})):(Le=Sr,rt=t(`document.anchor.export_and_import.${J.document.anchor}`,{},{locale:Le}))):Ke(J.document.supportMultiLanguages)&&ea[J.document.supportMultiLanguages]&&(Le=J.document.supportMultiLanguages,rt=J.document.anchor),Le&&Le!==Se()&&ea[Le]&&(et=s(ea[Le].name)),Le&&(Le=Le.replace(/-/g,"_")),rt&&(rt=rt.toLowerCase().replace(/ /g,"-")),Le===xn&&(Le=""),se={language:Le,displayLanguageName:et,anchor:rt}}else se=void 0;const pe=[];if(J.subTypes)for(const Le of J.subTypes){const et={type:Le.type,displayName:t(Le.name),extensions:Le.extensions};pe.push(et)}const Ce=[];if(J.supportedEncodings)for(const Le of J.supportedEncodings){const et={encoding:Le,displayName:t(`encoding.${Le}`)};Ce.push(et)}const Re={type:J.type,displayName:t(J.name),extensions:J.extensions,subTypes:pe.length?pe:void 0,supportedEncodings:Ce.length?Ce:void 0,dataFromTextbox:J.dataFromTextbox,supportedAdditionalOptions:J.supportedAdditionalOptions,document:se};P.fileTypes.push(Re)}u.push(P)}return u}function an(u){return ea[u]}function dl(u){return t(`datetime.${u}.short`)}function fl(u){return t(`datetime.${u}.long`)}function ms(u){return t(`datetime.monthDayOrdinal.${u}`)}function gl(u){return t("format.misc.monthDay",{ordinal:ms(u)})}function pl(u){return t(`datetime.${u.name}.short`)}function yl(u){return t(`datetime.${u.name}.long`)}function Qs(u){return 1<=u&&u<=4?t("datetime.quarter.q"+u):""}function hl(u){return u?u.length===1?t("format.misc.monthDay",{ordinal:ms(u[0])}):t("format.misc.monthDays",{multiMonthDays:U(u.map(D=>t("format.misc.eachMonthDayInMonthDays",{ordinal:ms(D)})))}):""}function Tl(u,D){const P={};Ae(D)||(D=mt.DefaultFirstDay.type);for(const pe of u)P[pe]=!0;const J=We(D),se=[];for(const pe of J)P[pe.type]&&se.push(pe.displayName);return U(se)}function vl(){return Ka().getAllDigits()}function ci(){const u=t("default.calendarDisplayType");let D=zt.parse(u);return D||(D=zt.Default),D}function ui(){const u=t("default.dateDisplayType");let D=$t.parse(u);return D||(D=$t.Default),D}function mi(){const u=t("default.numeralSystem");let D=be.parse(u);return D||(D=be.Default),D}function di(){const u=t("default.decimalSeparator");let D=_e.parse(u);return D||(D=_e.Default),D}function fi(){const u=t("default.digitGroupingSymbol");let D=it.parse(u);return D||(D=it.Default),D}function gi(){const u=t("default.digitGrouping");let D=Ut.parse(u);return D||(D=Ut.Default),D}function pi(){const u=t("default.fiscalYearFormat");let D=At.parse(u);return D||(D=At.Default),D}function dn(){return zt.valueOf(n.currentUserCalendarDisplayType)??ci()}function Xs(){return $t.valueOf(n.currentUserDateDisplayType)??ui()}function Ka(){return be.valueOf(n.currentUserNumeralSystem)??mi()}function yi(){return _e.valueOf(n.currentUserDecimalSeparator)?.symbol??di().symbol}function hi(){return it.valueOf(n.currentUserDigitGroupingSymbol)?.symbol??fi().symbol}function Ti(){return Ut.valueOf(n.currentUserDigitGrouping)??gi()}function js(){return At.valueOf(n.currentUserFiscalYearFormat)?.type??pi().type}function Kn(u){return u?t(`currency.name.${u}`):""}function Al(){return p(ot.all(),ot.values(),n.currentUserLongDateFormat,"longDateFormat",ot.Default).isMonthAfterYear}function Il(){return p(Je.all(),Je.values(),n.currentUserShortDateFormat,"shortDateFormat",Je.Default).isMonthAfterYear}function bl(){return p(Dt.all(),Dt.values(),n.currentUserLongTimeFormat,"longTimeFormat",Dt.Default).is24HourFormat}function Cl(){return p(Dt.all(),Dt.values(),n.currentUserLongTimeFormat,"longTimeFormat",Dt.Default).isMeridiemIndicatorFirst||!1}function Dl(){return p(St.all(),St.values(),n.currentUserShortTimeFormat,"shortTimeFormat",St.Default).is24HourFormat}function Sl(){return p(St.all(),St.values(),n.currentUserShortTimeFormat,"shortTimeFormat",St.Default).isMeridiemIndicatorFirst||!1}function Ml(){const u=M();return u.indexOf("HH")>=0||u.indexOf("hh")>=0}function Nl(){return M().indexOf("mm")>=0}function Ll(){return M().indexOf("ss")>=0}function vi(u,D){const P=S();return pu(u,ae(),L({calendarType:P,numeralSystem:D}))}function wl(u){const D=S(),P=L({calendarType:D}),J=u.getLocalizedCalendarYear(P),se=u.getLocalizedCalendarQuarter(P);return R(J,se)}function El(u,D){const P=S(),J=L({calendarType:P}),pe=ua(u,1,1).getLocalizedCalendarYear(J);return R(pe,D)}function xl(u){let D=At.valueOf(js());D||(D=At.Default);const P=Wi(u,n.currentUserFiscalYearStart);return V(D,P)}function kl(u){let D=At.valueOf(js());D||(D=At.Default);const P=Lu(u,n.currentUserFiscalYearStart);return V(D,P)}function Ol(u,D){let P=Xe.valueOf(u);return P||(P=Xe.Default),vi(P.toMonthDashDayString(),D)}function Ul(u,D,P){if(u===te.All.type)return t(te.All.name);const J=te.values(),se=S(),pe=L(),Ce=L({calendarType:se});for(const lt of J)if(lt&&lt.type!==te.Custom.type&&lt.type===u&&lt.name)return t(lt.name);if(Nu(D,P)){const lt=N(),Ra=Ia(D,lt,Ce),Zt=Ia(P,lt,Ce);return Ra!==Zt?`${Ra} ~ ${Zt}`:Ra}if(Jr(D,P)){const lt=j(),Ra=Ia(D,lt,Ce),Zt=Ia(P,lt,Ce);return Ra!==Zt?`${Ra} ~ ${Zt}`:Ra}const Re=Pe(D).getLocalizedCalendarYear(Ce),Le=Pe(P).getLocalizedCalendarYear(Ce),et=x(),rt=Ia(D,et,pe),Bt=Ia(P,et,pe);if(rt===Bt)return rt;if(Re===Le){const lt=Ia(P,de(),Ce);return`${rt} ~ ${lt}`}return`${rt} ~ ${Bt}`}function Fl(u,D){const P=Ka(),J=Ta(u),se=yu(D-J);return D>J?se.offsetMinutes?t("format.misc.hoursMinutesAheadOfDefaultTimezone",{hours:P.formatNumber(se.offsetHours),minutes:P.formatNumber(se.offsetMinutes)}):t("format.misc.hoursAheadOfDefaultTimezone",{hours:P.formatNumber(se.offsetHours)}):D<J?se.offsetMinutes?t("format.misc.hoursMinutesBehindDefaultTimezone",{hours:P.formatNumber(se.offsetHours),minutes:P.formatNumber(se.offsetMinutes)}):t("format.misc.hoursBehindDefaultTimezone",{hours:P.formatNumber(se.offsetHours)}):t("Same time as default timezone")}function Bl(u){const D=dn().secondaryCalendarType;if(!D)return;const P=L({calendarType:D});if(D===wt.Chinese){const J=T(),se=ru(u,J);if(!se)return;const pe=[];for(const Ce of se){const Re=Ri(Ce);pe.push(Re)}return pe}else if(D===wt.Persian){const J=Yr(u),se=[];for(let pe=1;pe<=J;pe++){const Ce=ua(u.year,u.month1base,pe);se.push(ee(Ce,P))}return se}}function Pl(u){const D=dn().secondaryCalendarType;if(!D)return;const P=L({calendarType:D});if(D===wt.Chinese){const J=T(),se=Or(u,J);return se?Ri(se):void 0}else if(D===wt.Persian){const J=ua(u.year,u.month,u.day);return ee(J,P)}}function Ai(u,D){const P=g({numeralSystem:D});return Eu(u,P)}function ds(u,D,P,J){const se=g({numeralSystem:D,digitGrouping:P,currencyCode:J});return Vi(u,se)}function fn(u,D,P,J,se){let pe="";!Rn(D)&&!D?pe=n.currentUserDefaultCurrency:Rn(D)&&!D?pe="":pe=D,P||(P=Z()),J||(J=Ka());let Ce="";He(u)&&Ae(u.value)&&Ke(u.suffix)&&(Ce=u.suffix,u=u.value);const Re=g({numeralSystem:J,decimalSeparator:se,currencyCode:pe}),Le=Kn(pe);if(Ae(u)){const et=u!==100&&u!==-100,rt=Vi(u,Re);if(!pe)return rt;const Bt=B(pe,et),lt=Ji(rt,P,pe,Bt,Le,et);return Ce?lt+Ce:lt}else if(Ke(u)){const rt=xu(u,Re);if(!pe)return rt;const Bt=B(pe,!0);return Ji(rt,P,pe,Bt,Le,!0)}else return""}function Ii(u,D,P){const J=g({numeralSystem:D,digitGrouping:Ut.None});return Qr(u,J,P)}function bi(u,D,P,J){const se=g({numeralSystem:J});return ku(u,D,P,se)}function Rl(u,D){const P=g({numeralSystem:D});return Mo(u,P)}function Yl(u,D,P,J){const se=g({});return Ou(u,D,se,P,J)}function zl(u,D){const P=Z(),J=B(u,D),se=Kn(u);return jr(P,u,J,se,D)}function $l(u,D){const P=[],J=n.currentUserDefaultCurrency,se=Ve.values(),pe=$s(bt.cloneAccounts(u));for(const Ce of se){const Re=pe[Ce.type];if(!Re)continue;const Le=[];if(Re.accounts)for(const Bt of Re.accounts){let lt;D&&Bt.isAsset?lt=Xn.fromAccount(Bt,fn(Bt.balance,Bt.currency)):D&&Bt.isLiability?lt=Xn.fromAccount(Bt,fn(-Bt.balance,Bt.currency)):lt=Xn.fromAccount(Bt,ta),Le.push(lt)}let et="";if(D){const Bt=qn(pe,Zt=>Zt.category===Re.category);let lt=0,Ra=!1;for(const Zt of Bt)if(Zt.currency===J)Zt.isAsset?lt+=Zt.balance:Zt.isLiability&&(lt-=Zt.balance);else{const to=o.getExchangedAmount(Zt.balance,Zt.currency,J);if(!Ae(to)){Ra=!0;continue}Zt.isAsset?lt+=Math.trunc(to):Zt.isLiability&&(lt-=Math.trunc(to))}et=fn(lt,J),Ra&&(et=et+Va)}else et=ta;const rt=qo.of(Re,Le,et);P.push(rt)}return P}function Gl(u){return t(`encoding.${u}`)}function Kl(u,D){if(u==="oidc"){const P=ye(D);return P||"Connect ID"}else{const P=Bi[u];return P||"OAuth 2.0"}}function Hl(u,D){if(u==="oidc"){const P=ye(D);return P?t("format.misc.loginWithCustomProvider",{name:P}):t("Log in with Connect ID")}else{const P=Bi[u];return P?t("format.misc.loginWithCustomProvider",{name:P}):t("Log in with OAuth 2.0")}}function fs(u,D){u||(u=r(),X.info(`No specified language, use browser default language ${u}`));const P=an(u);if(P||(u=r(),X.warn(`Not found language ${u}, use browser default language ${u}`)),!D&&e.value===u)return X.info(`Current locale is already ${u}`),null;if(X.info(`Apply current language to ${u}`),e.value=u,De.updateLocale(u,{months:ce(),monthsShort:ne(),weekdays:oe(),weekdaysShort:Te(),weekdaysMin:Oe(),meridiem:function(Re){return Fr(Re)?t(`datetime.${Ua.PM.name}.content`):t(`datetime.${Ua.AM.name}.content`)}}),vc(u),re.setLocale(u),document.querySelector("html")?.setAttribute("lang",u),document.querySelector("html")?.getAttribute("data-dir-mode")==="static"){if(P&&P.textDirection===pn.LTR){if(location.search.includes("rtl")){const Re=new URL(window.location.href);Re.search="",Re.hash="#/",window.location.replace(Re.toString())}}else if(P&&P.textDirection===pn.RTL&&!location.search.includes("rtl")){const Re=new URL(window.location.href);Re.searchParams.set("rtl",""),Re.hash="#/",window.location.replace(Re.toString())}}else P&&P.textDirection===pn.LTR?document.querySelector("html")?.removeAttribute("dir"):P&&P.textDirection===pn.RTL&&document.querySelector("html")?.setAttribute("dir","rtl");const J=Ee(),se=xe();let pe=mt.DefaultFirstDay.type;return mt.parse(se)&&(pe=mt.parse(se).type),{currency:J,firstDayOfWeek:pe}}function eo(u){u?De.tz.setDefault(u):De.tz.setDefault()}function Wl(u,D){const P=Tc();let J=null;return u&&an(u)?(X.info(`Last user language is ${u}`),J=fs(u,!0)):P&&an(P)?(X.info(`Session language is ${P}`),J=fs(P,!0)):J=fs(null,!0),D?(X.info(`Current timezone is ${D}`),eo(D)):(X.info(`No timezone is set, use browser default ${ro(za())} (${Vs()})`),eo("")),J}return{tt:t,ti:W,te:G,joinMultiText:U,getServerMultiLanguageConfigContent:ye,getCurrentLanguageTag:Se,getCurrentLanguageInfo:he,getCurrentLanguageDisplayName:Me,getCurrentLanguageTextDirection:ze,getDefaultCurrency:Ee,getDefaultFirstDayOfWeek:xe,getAllLanguageOptions:Ge,getAllEnableDisableOptions:E,getAllCurrencies:fe,getAllMeridiemIndicators:ue,getAllLongMonthNames:ce,getAllShortMonthNames:ne,getAllLongWeekdayNames:oe,getAllShortWeekdayNames:Te,getAllMinWeekdayNames:Oe,getAllWeekDays:We,getAllCalendarDisplayTypes:()=>k(zt.values(),zt.parse(t("default.calendarDisplayType")),zt.Default,zt.LanguageDefaultType),getAllDateDisplayTypes:()=>k($t.values(),$t.parse(t("default.dateDisplayType")),$t.Default,$t.LanguageDefaultType),getAllLongDateFormats:(u,D)=>Be("longDate",ot.all(),ot.values(),"longDateFormat",ot.Default,u,D),getAllShortDateFormats:(u,D)=>Be("shortDate",Je.all(),Je.values(),"shortDateFormat",Je.Default,u,D),getAllLongTimeFormats:u=>Be("longTime",Dt.all(),Dt.values(),"longTimeFormat",Dt.Default,u),getAllShortTimeFormats:u=>Be("shortTime",St.all(),St.values(),"shortTimeFormat",St.Default,u),getAllFiscalYearFormats:dt,getAllDateRanges:Tt,getAllRecentMonthDateRanges:_,getAllTimezones:ke,getAllTimezoneTypesUsedForStatistics:Fe,getAllNumeralSystemTypes:Ot,getAllDecimalSeparators:()=>w(_e.values(),_e.parse(t("default.decimalSeparator")),_e.Default,_e.LanguageDefaultType),getAllDigitGroupingSymbols:()=>w(it.values(),it.parse(t("default.digitGroupingSymbol")),it.Default,it.LanguageDefaultType),getAllDigitGroupingTypes:Gt,getAllCurrencyDisplayTypes:Y,getAllCurrencySortingTypes:()=>$(Ma.values()),getAllCoordinateDisplayTypes:()=>H(Ht.values(),Ht.SystemDefaultType,Ht.Default),getAllExpenseAmountColors:()=>we(ve.Expense),getAllIncomeAmountColors:()=>we(ve.Income),getAllAccountCategories:Nt,getAllAccountTypes:()=>$(Ne.values()),getAllCategoricalChartTypes:u=>$(_t.values(!!u)),getAllTrendChartTypes:()=>$(Et.values()),getAllAccountBalanceTrendChartTypes:()=>$(yn.values()),getAllStatisticsChartDataTypes:(u,D)=>$(K.values(u,D)),getAllStatisticsSortingTypes:()=>$(Wt.values()),getAllStatisticsDateAggregationTypes:u=>z(u,!0),getAllStatisticsDateAggregationTypesWithShortName:u=>z(u,!1),getAllTransactionEditScopeTypes:()=>$(Da.values()),getAllTransactionScheduledFrequencyTypes:()=>$(Ha.values()),getAllImportTransactionColumnTypes:()=>$(ut.values()),getAllTransactionDefaultCategories:Ft,getAllDisplayExchangeRates:La,getAllSupportedImportFileCagtegoryAndTypes:fa,getAllTransactionExploreConditionFields:()=>F($e.values()),getAllTransactionExploreConditionOperators:u=>F(u??pt.values()),getAllTransactionExploreDataDimensions:u=>F(u??Ie.values()),getAllTransactionExploreValueMetrics:u=>F(u??Mt.values()),getAllTransactionExploreChartTypes:u=>F(u??aa.values()),getLanguageInfo:an,getMonthShortName:dl,getMonthLongName:fl,getMonthdayOrdinal:ms,getMonthdayShortName:gl,getWeekdayShortName:pl,getWeekdayLongName:yl,getQuarterName:Qs,getMultiMonthdayShortNames:hl,getMultiWeekdayLongNames:Tl,getAllLocalizedDigits:vl,getLocaleDefaultCalendarDisplayType:ci,getLocaleDefaultDateDisplayType:ui,getLocaleDefaultNumeralSystemType:mi,getLocaleDefaultDecimalSeparator:di,getLocaleDefaultDigitGroupingSymbol:fi,getLocaleDefaultDigitGroupingType:gi,getLocaleFiscalYearFormatType:pi,getCurrentCalendarDisplayType:dn,getCurrentDateDisplayType:Xs,getCurrentNumeralSystemType:Ka,getCurrentDecimalSeparator:yi,getCurrentDigitGroupingSymbol:hi,getCurrentDigitGroupingType:Ti,getCurrentFiscalYearFormatType:js,getCurrencyName:Kn,isLongDateMonthAfterYear:Al,isShortDateMonthAfterYear:Il,isLongTime24HourFormat:bl,isLongTimeMeridiemIndicatorFirst:Cl,isShortTime24HourFormat:Dl,isShortTimeMeridiemIndicatorFirst:Sl,isLongTimeHourTwoDigits:Ml,isLongTimeMinuteTwoDigits:Nl,isLongTimeSecondTwoDigits:Ll,getCalendarDisplayShortYearFromDateTime:(u,D)=>Kt(u,N(),L({calendarType:dn().primaryCalendarType,numeralSystem:D})),getCalendarDisplayShortMonthFromDateTime:(u,D)=>Kt(u,"MMM",L({calendarType:dn().primaryCalendarType,numeralSystem:D})),getCalendarDisplayDayOfMonthFromDateTime:(u,D)=>Kt(u,ge(),L({calendarType:dn().primaryCalendarType,numeralSystem:D})),parseDateTimeFromLongDateTime:u=>Gi(u,d()+" "+M()),parseDateTimeFromShortDateTime:u=>Gi(u,x()+" "+h()),formatDateTimeToLongDateTime:u=>Kt(u,d()+" "+M(),L()),formatDateTimeToShortDateTime:u=>Kt(u,x()+" "+h(),L()),formatDateTimeToLongDate:u=>Kt(u,d(),L()),formatDateTimeToShortDate:u=>Kt(u,x(),L()),formatDateTimeToLongMonthDay:u=>Kt(u,ae(),L()),formatDateTimeToShortMonthDay:u=>Kt(u,de(),L()),formatDateTimeToLongTime:u=>Kt(u,M(),L()),formatDateTimeToShortTime:u=>Kt(u,h(),L()),formatGregorianTextualYearMonthDayToLongDate:u=>gu(u,d(),L()),formatDateTimeToGregorianLikeLongYear:u=>Kt(u,O(),L({calendarType:S()})),formatDateTimeToGregorianLikeShortYear:u=>Kt(u,N(),L({calendarType:S()})),formatDateTimeToGregorianLikeLongYearMonth:u=>Kt(u,Q(),L({calendarType:S()})),formatDateTimeToGregorianLikeShortYearMonth:u=>Kt(u,j(),L({calendarType:S()})),formatDateTimeToGregorianLikeLongMonth:u=>Kt(u,"MMMM",L({calendarType:S()})),formatDateTimeToGregorianLikeShortMonth:u=>Kt(u,"MMM",L({calendarType:S()})),formatGregorianTextualMonthDayToGregorianLikeLongMonthDay:vi,formatDateTimeToGregorianLikeYearQuarter:wl,formatYearQuarterToGregorianLikeYearQuarter:El,formatDateTimeToGregorianLikeFiscalYear:u=>xl(u.getUnixTime()),formatGregorianYearToGregorianLikeFiscalYear:kl,formatFiscalYearStartToGregorianLikeLongMonth:Ol,formatDateTimeToGregorianDefaultDateTime:u=>Kt(u,gt.DefaultDateTime.format,L({numeralSystem:be.WesternArabicNumerals,calendarType:wt.Gregorian})),formatDateRange:Ul,getTimezoneDifferenceDisplayText:Fl,getCalendarAlternateDates:Bl,getCalendarAlternateDate:Pl,parseAmountFromLocalizedNumerals:u=>Ai(u),parseAmountFromWesternArabicNumerals:u=>Ai(u,be.WesternArabicNumerals),formatAmountToLocalizedNumerals:(u,D)=>ds(u,void 0,void 0,D),formatAmountToWesternArabicNumerals:(u,D)=>ds(u,be.WesternArabicNumerals,void 0,D),formatAmountToLocalizedNumeralsWithoutDigitGrouping:(u,D)=>ds(u,void 0,Ut.None,D),formatAmountToWesternArabicNumeralsWithoutDigitGrouping:(u,D)=>ds(u,be.WesternArabicNumerals,Ut.None,D),formatAmountToLocalizedNumeralsWithCurrency:(u,D,P)=>fn(u,D,P),formatAmountToWesternArabicNumeralsWithCurrency:(u,D,P)=>fn(u,D,P,be.WesternArabicNumerals),formatNumberToLocalizedNumerals:(u,D)=>Ii(u,void 0,D),formatNumberToWesternArabicNumerals:(u,D)=>Ii(u,be.WesternArabicNumerals,D),formatPercentToLocalizedNumerals:(u,D,P)=>bi(u,D,P),formatPercentToWesternArabicNumerals:(u,D,P)=>bi(u,D,P,be.WesternArabicNumerals),formatExchangeRateAmountToWesternArabicNumerals:u=>Rl(u,be.WesternArabicNumerals),appendDigitGroupingSymbolAndDecimalSeparator:u=>$n(u,g({})),getAdaptiveAmountRate:Yl,getAmountPrependAndAppendText:zl,getCategorizedAccountsWithDisplayBalance:$l,getLocalizedFileEncodingName:Gl,getLocalizedOAuth2ProviderName:Kl,getLocalizedOAuth2LoginText:Hl,setLanguage:fs,setTimeZone:eo,initLocale:Wl}}const da=Vt("accounts",()=>{const t=ht(),e=kt(),a=va(),n=q([]),o=q({}),s=q({}),r=q(!0),l=m(()=>{const S=[];for(const R of n.value)if(R.type===Ne.SingleAccount.type)S.push(R);else if(R.type===Ne.MultiSubAccounts.type&&R.subAccounts)for(const V of R.subAccounts)S.push(V);return bt.sortAccounts(S,o.value)}),i=m(()=>{const S=[];for(const R of n.value)if(R.type===Ne.SingleAccount.type)S.push(R);else if(R.type===Ne.MultiSubAccounts.type&&(S.push(R),R.subAccounts))for(const V of R.subAccounts)S.push(V);return bt.sortAccounts(S,o.value)}),c=m(()=>{const S=[];for(const R of n.value)if(!R.hidden){if(R.type===Ne.SingleAccount.type)S.push(R);else if(R.type===Ne.MultiSubAccounts.type&&R.subAccounts)for(const V of R.subAccounts)V.hidden||S.push(V)}return bt.sortAccounts(S,o.value)}),f=m(()=>{let S=0;for(const R of nt(s.value))S+=R.accounts.length;return S}),A=m(()=>{let S=0;for(const R of nt(s.value)){const V=R.accounts;for(const Z of V)Z.hidden||S++}return S});function T(S){n.value=S,o.value={};for(const R of S)if(o.value[R.id]=R,R.subAccounts)for(const V of R.subAccounts)o.value[V.id]=V;s.value=$s(S)}function C(S){const R=Ve.valueOf(S.category);let V=n.value.length;if(R)for(const[Z,ee]of at(n.value)){const W=Ve.valueOf(Z.category);if(W&&W.displayOrder>R.displayOrder){V=ee;break}}if(n.value.splice(V,0,S),o.value[S.id]=S,S.subAccounts)for(const Z of S.subAccounts)o.value[Z.id]=Z;s.value[S.category]?s.value[S.category].accounts.push(S):s.value=$s(n.value)}function Y(S,R){for(const[V,Z]of at(n.value))if(V.id===R.id){n.value.splice(Z,1,R);break}if(S.subAccounts)for(const V of S.subAccounts)o.value[V.id]&&delete o.value[V.id];if(o.value[R.id]=R,R.subAccounts)for(const V of R.subAccounts)o.value[V.id]=V;if(s.value[R.category]){const V=s.value[R.category].accounts;for(const[Z,ee]of at(V))if(Z.id===R.id){V.splice(ee,1,R);break}}}function k({account:S,from:R,to:V,updateListOrder:Z,updateGlobalListOrder:ee}){let W=null,G=null;if(s.value[S.category]){const U=s.value[S.category].accounts;Z?(W=U[R],G=U[V],U.splice(V,0,U.splice(R,1)[0])):(W=U[V],R<V?G=U[V-1]:R>V&&(G=U[V+1]))}if(ee&&W&&G){let U=-1,ye=-1;for(const[Se,he]of at(n.value))Se.id===W.id?U=he:Se.id===G.id&&(ye=he);U>=0&&ye>=0&&n.value.splice(ye,0,n.value.splice(U,1)[0])}}function $({account:S,hidden:R}){o.value[S.id]&&(o.value[S.id].visible=!R)}function F(S){for(const[R,V]of at(n.value))if(R.id===S.id){n.value.splice(V,1);break}if(o.value[S.id]&&o.value[S.id].subAccounts){const R=o.value[S.id].subAccounts;for(const V of R)o.value[V.id]&&delete o.value[V.id]}if(o.value[S.id]&&delete o.value[S.id],s.value[S.category]){const R=s.value[S.category].accounts;for(const[V,Z]of at(R))if(V.id===S.id){R.splice(Z,1);break}}}function H(S){for(const R of n.value){if(R.type!==Ne.MultiSubAccounts.type||!R.subAccounts)continue;const V=R.subAccounts;for(const[Z,ee]of at(V))if(Z.id===S.id){V.splice(ee,1);break}}if(o.value[S.id]&&delete o.value[S.id],s.value[S.category]){const R=s.value[S.category].accounts;for(const V of R){if(V.type!==Ne.MultiSubAccounts.type||!V.subAccounts)continue;const Z=V.subAccounts;for(const[ee,W]of at(Z))if(ee.id===S.id){Z.splice(W,1);break}}}}function w(S){r.value=S}function z(){n.value=[],o.value={},s.value={},r.value=!0}function y(S){const R={accounts:{},subAccounts:{}};for(const[V,Z]of Xt(s.value)){if(!Z||!Z.accounts)continue;const ee=Z.accounts;for(const W of ee){if(W.type===Ne.MultiSubAccounts.type&&W.subAccounts){for(const G of W.subAccounts)if(S||!G.hidden){R.subAccounts[W.id]=G.id;break}}if(S||!W.hidden){R.accounts[parseInt(V)]=W.id;break}}}return R}function v(S){const R={accounts:{},subAccounts:{}};for(const[V,Z]of Xt(s.value)){if(!Z||!Z.accounts)continue;const ee=Z.accounts;for(const W of es(ee)){if(W.type===Ne.MultiSubAccounts.type&&W.subAccounts){for(const G of es(W.subAccounts))if(S||!G.hidden){R.subAccounts[W.id]=G.id;break}}if(S||!W.hidden){R.accounts[parseInt(V)]=W.id;break}}}return R}function p(S){if(!S)return null;const R=S.split(",");let V=null;for(const Z of R){let ee=o.value[Z];if(!ee||(ee.parentId!=="0"&&(ee=o.value[ee.parentId]),!ee))return null;if(V){if(V.id!==ee.id)return null;continue}V=ee}return V&&V.category===Ve.CreditCard.type?V.creditCardStatementDate:null}function I(S){if(!S)return ta;const R=qn(s.value,ee=>!(ee.type===Ne.SingleAccount.type&&t.appSettings.totalAmountExcludeAccountIds[ee.id]));let V=0,Z=!1;for(const ee of R)if(ee.currency===e.currentUserDefaultCurrency)V+=ee.balance;else{const W=a.getExchangedAmount(ee.balance,ee.currency,e.currentUserDefaultCurrency);if(!Ae(W)){Z=!0;continue}V+=Math.trunc(W)}return Z?{value:V,suffix:Va}:V}function d(S){if(!S)return ta;const R=qn(s.value,ee=>(ee.isAsset||!1)&&!(ee.type===Ne.SingleAccount.type&&t.appSettings.totalAmountExcludeAccountIds[ee.id]));let V=0,Z=!1;for(const ee of R)if(ee.currency===e.currentUserDefaultCurrency)V+=ee.balance;else{const W=a.getExchangedAmount(ee.balance,ee.currency,e.currentUserDefaultCurrency);if(!Ae(W)){Z=!0;continue}V+=Math.trunc(W)}return Z?{value:V,suffix:Va}:V}function x(S){if(!S)return ta;const R=qn(s.value,ee=>(ee.isLiability||!1)&&!(ee.type===Ne.SingleAccount.type&&t.appSettings.totalAmountExcludeAccountIds[ee.id]));let V=0,Z=!1;for(const ee of R)if(ee.currency===e.currentUserDefaultCurrency)V-=ee.balance;else{const W=a.getExchangedAmount(ee.balance,ee.currency,e.currentUserDefaultCurrency);if(!Ae(W)){Z=!0;continue}V-=Math.trunc(W)}return Z?{value:V,suffix:Va}:V}function O(S,R){if(!S)return ta;const V=qn(s.value,W=>W.category===R.type);let Z=0,ee=!1;for(const W of V)if(W.currency===e.currentUserDefaultCurrency)W.isAsset?Z+=W.balance:W.isLiability?Z-=W.balance:Z+=W.balance;else{const G=a.getExchangedAmount(W.balance,W.currency,e.currentUserDefaultCurrency);if(!Ae(G)){ee=!0;continue}W.isAsset?Z+=Math.trunc(G):W.isLiability?Z-=Math.trunc(G):Z+=Math.trunc(G)}return ee?{value:Z,suffix:Va}:Z}function N(S,R){return R.type!==Ne.SingleAccount.type?null:S?R.isAsset?R.balance:R.isLiability?-R.balance:R.balance:ta}function Q(S,R,V,Z){if(V.type!==Ne.MultiSubAccounts.type)return null;let ee=e.currentUserDefaultCurrency;if(!V.subAccounts||!V.subAccounts.length)return{balance:S?0:ta,currency:ee};const W={},G=[];let U=0;for(const he of V.subAccounts)!R&&he.hidden||W[he.currency]||(W[he.currency]=!0,G.push(he.currency));if(G.length===0)return{balance:S?0:ta,currency:ee};G.length===1&&(ee=G[0]);let ye=!1;for(const he of V.subAccounts)if(!(!R&&he.hidden)){if(Z&&Z===he.id)return{balance:S?N(S,he):ta,currency:he.currency};if(he.currency===ee)he.isAsset?U+=he.balance:he.isLiability?U-=he.balance:U+=he.balance;else{const Me=a.getExchangedAmount(he.balance,he.currency,ee);if(!Ae(Me)){ye=!0;continue}he.isAsset?U+=Math.trunc(Me):he.isLiability?U-=Math.trunc(Me):U+=Math.trunc(Me)}}return Z?null:{balance:S?{value:U,suffix:ye?Va:""}:ta,currency:ee}}function j(S,R){const V=s.value[S.type];if(!V||!V.accounts||!V.accounts.length)return!1;let Z=0;for(const ee of V.accounts)(!R||!ee.hidden)&&Z++;return Z>0}function ae(S,R){if(!R||R.type!==Ne.MultiSubAccounts.type||!R.subAccounts)return!1;for(const V of R.subAccounts)if(S||!V.hidden)return!0;return!1}function de({force:S}){return!S&&!r.value?new Promise(R=>{R(n.value)}):new Promise((R,V)=>{re.getAllAccounts({visibleOnly:!1}).then(Z=>{const ee=Z.data;if(!ee||!ee.success||!ee.result){V({message:"Unable to retrieve account list"});return}r.value&&w(!1);const W=bt.sortAccounts(bt.ofMulti(ee.result));if(S&&ee.result&&ca(n.value,W)){V({message:"Account list is up to date",isUpToDate:!0});return}T(W),R(W)}).catch(Z=>{S?X.error("failed to force load account list",Z):X.error("failed to load account list",Z),Z.response&&Z.response.data&&Z.response.data.errorMessage?V({error:Z.response.data}):Z.processed?V(Z):V({message:"Unable to retrieve account list"})})})}function ge({accountId:S}){return new Promise((R,V)=>{re.getAccount({id:S}).then(Z=>{const ee=Z.data;if(!ee||!ee.success||!ee.result){V({message:"Unable to retrieve account"});return}const W=bt.of(ee.result);R(W)}).catch(Z=>{X.error("failed to load account info",Z),Z.response&&Z.response.data&&Z.response.data.errorMessage?V({error:Z.response.data}):Z.processed?V(Z):V({message:"Unable to retrieve account"})})})}function M({account:S,subAccounts:R,isEdit:V,clientSessionId:Z}){return new Promise((ee,W)=>{const G=V?o.value[S.id]:null;let U=null;V?U=re.modifyAccount(S.toModifyRequest(Z,R)):U=re.addAccount(S.toCreateRequest(Z,R)),U.then(ye=>{const Se=ye.data;if(!Se||!Se.success||!Se.result){W(V?{message:"Unable to save account"}:{message:"Unable to add account"});return}const he=bt.of(Se.result);V?G&&G.category===he.category?Y(G,he):w(!0):C(he),ee(he)}).catch(ye=>{X.error("failed to save account",ye),ye.response&&ye.response.data&&ye.response.data.errorMessage?W({error:ye.response.data}):ye.processed?W(ye):W(V?{message:"Unable to save account"}:{message:"Unable to add account"})})})}function h({accountId:S,from:R,to:V,updateListOrder:Z,updateGlobalListOrder:ee}){const W=o.value[S];return new Promise((G,U)=>{if(!W||!s.value[W.category]||!s.value[W.category].accounts||!s.value[W.category].accounts[V]){U({message:"Unable to move account"});return}r.value||w(!0),k({account:W,from:R,to:V,updateListOrder:Z,updateGlobalListOrder:ee}),G()})}function L(){const S=[];for(const R of nt(s.value))for(const[V,Z]of at(R.accounts))S.push({id:V.id,displayOrder:Z+1});return new Promise((R,V)=>{re.moveAccount({newDisplayOrders:S}).then(Z=>{const ee=Z.data;if(!ee||!ee.success||!ee.result){V({message:"Unable to move account"});return}r.value&&w(!1),R(ee.result)}).catch(Z=>{X.error("failed to save accounts display order",Z),Z.response&&Z.response.data&&Z.response.data.errorMessage?V({error:Z.response.data}):Z.processed?V(Z):V({message:"Unable to move account"})})})}function g({account:S,hidden:R}){return new Promise((V,Z)=>{re.hideAccount({id:S.id,hidden:R}).then(ee=>{const W=ee.data;if(!W||!W.success||!W.result){Z(R?{message:"Unable to hide this account"}:{message:"Unable to unhide this account"});return}$({account:S,hidden:R}),V(W.result)}).catch(ee=>{X.error("failed to change account visibility",ee),ee.response&&ee.response.data&&ee.response.data.errorMessage?Z({error:ee.response.data}):ee.processed?Z(ee):Z(R?{message:"Unable to hide this account"}:{message:"Unable to unhide this account"})})})}function B({account:S,beforeResolve:R}){return new Promise((V,Z)=>{re.deleteAccount({id:S.id}).then(ee=>{const W=ee.data;if(!W||!W.success||!W.result){Z({message:"Unable to delete this account"});return}R?R(()=>{F(S)}):F(S),V(W.result)}).catch(ee=>{X.error("failed to delete account",ee),ee.response&&ee.response.data&&ee.response.data.errorMessage?Z({error:ee.response.data}):ee.processed?Z(ee):Z({message:"Unable to delete this account"})})})}function b({subAccount:S,beforeResolve:R}){return new Promise((V,Z)=>{re.deleteSubAccount({id:S.id}).then(ee=>{const W=ee.data;if(!W||!W.success||!W.result){Z({message:"Unable to delete this sub-account"});return}R?R(()=>{H(S)}):H(S),V(W.result)}).catch(ee=>{X.error("failed to delete sub-account",ee),ee.response&&ee.response.data&&ee.response.data.errorMessage?Z({error:ee.response.data}):ee.processed?Z(ee):Z({message:"Unable to delete this sub-account"})})})}return{allAccounts:n,allAccountsMap:o,allCategorizedAccountsMap:s,accountListStateInvalid:r,allPlainAccounts:l,allMixedPlainAccounts:i,allVisiblePlainAccounts:c,allAvailableAccountsCount:f,allVisibleAccountsCount:A,updateAccountListInvalidState:w,resetAccounts:z,getFirstShowingIds:y,getLastShowingIds:v,getAccountStatementDate:p,getNetAssets:I,getTotalAssets:d,getTotalLiabilities:x,getAccountCategoryTotalBalance:O,getAccountBalance:N,getAccountSubAccountBalance:Q,hasAccount:j,hasVisibleSubAccount:ae,loadAllAccounts:de,getAccount:ge,saveAccount:M,changeAccountDisplayOrder:h,updateAccountDisplayOrders:L,hideAccount:g,deleteAccount:B,deleteSubAccount:b}});function rf(t){return t===ie.Income?ve.Income:t===ie.Expense?ve.Expense:t===ie.Transfer?ve.Transfer:null}function wo(t){return t===ve.Income?ie.Income:t===ve.Expense?ie.Expense:t===ve.Transfer?ie.Transfer:null}function em(t){const e=[];for(const n of t.subCategories){const o={name:n.name,type:n.type,parentId:"0",icon:n.icon,color:n.color,comment:"",clientSessionId:""};e.push(o)}return{name:t.name,type:t.type,icon:t.icon,color:t.color,subCategories:e}}function lf(t){const e=[];for(const a of t){const n=em(a);e.push(n)}return e}function cf(t){const e={};if(!t)return e;for(const a of t)if(a.subCategories)for(const n of a.subCategories)e[n.name]=n;return e}function uf(t,e){if(!e)return"";for(const a of e){const n=a.subCategories;if(n){for(const o of n)if(o.id===t)return a.name}}return""}function mf(t,e){if(!e)return"";for(const a of e){const n=a.subCategories;if(n){for(const o of n)if(o.id===t)return o.name}}return""}function tm(t,e,a,n){const o={},s=e&&(e[ve.Income]||e[ve.Expense]||e[ve.Transfer]),r=[ve.Income,ve.Expense,ve.Transfer],l=a?a.toLowerCase():"";for(const i of r){const c=t[i];if(!c||c.length<1||s&&!e[i])continue;const f=[];for(const A of c){if(!n&&A.hidden)continue;const T=!l||A.name.toLowerCase().includes(l),C=[];if(A.subCategories)for(const k of A.subCategories){if(!n&&k.hidden||!T&&l&&!k.name.toLowerCase().includes(l))continue;const $=k.clone();C.push($)}if(!T&&C.length<1)continue;const Y=A.clone();Y.subCategories=C,f.push(Y)}o[`${i}`]=f}return o}function am(t,e){const a=t[e],n=[];if(!a)return n;for(const o of a)o.hidden||n.push(o);return n}function Ms(t,e){let a="";if(!t)return a;for(const n of nt(t))e&&!nl(n,e)||(a.length>0&&(a+=","),a+=n.id);return a}function mo(t,e){if(!t||!t.length)return!1;for(const a of t){if(a.hidden)continue;const n=a.subCategories;if(n){for(const o of n)if(!o.hidden&&o.id===e)return!0}}return!1}function Qa(t){if(!t||!t.length)return"";for(const e of t){if(e.hidden)continue;const a=e.subCategories;if(a){for(const n of a)if(!n.hidden)return n.id}}return""}function fo(t,e){if(!t||!t.length)return"";for(const a of t){if(a.hidden||a.id!==e)continue;const n=a.subCategories;if(!n)return"";for(const o of n)if(!o.hidden)return o.id;return""}return""}function df(t,e){for(const a of t)if(e||!a.hidden)return!1;return!0}function ff(t,e){let a=0;for(const n of t)(e||!n.hidden)&&a++;return a}function gf(t,e){for(const a of t)if(e||!a.hidden)return a.id;return null}function pf(t,e){for(const a of es(t))if(e||!a.hidden)return a.id;return null}function tr(t,e,a){if(!(!a||!a.subCategories||!a.subCategories.length))for(const n of a.subCategories)t[n.id]=e}function yf(t,e){for(const a of jt(t)){const n=e[a];n&&(t[n.id]=!1)}}function hf(t,e){for(const a of jt(t)){const n=e[a];n&&(t[n.id]=!0)}}function Tf(t,e){for(const a of jt(t)){const n=e[a];n&&(t[n.id]=!t[n.id])}}function nl(t,e){if(!t.subCategories||t.subCategories.length<1)return!e[t.id];for(const a of t.subCategories)if(e[a.id])return!1;return!0}function vf(t,e){if(!t.subCategories||t.subCategories.length<1)return!1;for(const a of t.subCategories)if(e[a.id])return!1;return!0}function Af(t,e){let a=0;if(!t.subCategories||t.subCategories.length<1)return!1;for(const n of t.subCategories)e[n.id]||a++;return a>0&&a<t.subCategories.length}const Na=Vt("transactionCategories",()=>{const t=q({}),e=q({}),a=q(!0),n=m(()=>{let d=0;for(const x of nt(t.value))d+=x.length;return d}),o=m(()=>{let d=0;for(const x of nt(t.value))for(const O of x)O.subCategories&&(d+=O.subCategories.length);return d}),s=m(()=>!t.value||!t.value[ve.Expense]||!t.value[ve.Expense].length?!1:Qa(t.value[ve.Expense])!==""),r=m(()=>!t.value||!t.value[ve.Income]||!t.value[ve.Income].length?!1:Qa(t.value[ve.Income])!==""),l=m(()=>!t.value||!t.value[ve.Transfer]||!t.value[ve.Transfer].length?!1:Qa(t.value[ve.Transfer])!=="");function i(d){t.value=d,e.value={};for(const x of nt(d))for(const O of x)if(e.value[O.id]=O,!!O.subCategories)for(const N of O.subCategories)e.value[N.id]=N}function c(d){let x;!d.parentId||d.parentId==="0"?x=t.value[d.type]:e.value[d.parentId]&&(x=e.value[d.parentId].subCategories),x&&x.push(d),e.value[d.id]=d}function f(d,x){if(x&&d.parentId!==x.parentId)return!1;let O;if(!d.parentId||d.parentId==="0"?O=t.value[d.type]:e.value[d.parentId]&&(O=e.value[d.parentId].subCategories),O){for(const[N,Q]of at(O))if(N.id===d.id){(!d.parentId||d.parentId==="0")&&(d.subCategories=N.subCategories),O.splice(Q,1,d);break}}return e.value[d.id]=d,!0}function A({category:d,from:x,to:O}){let N;!d.parentId||d.parentId==="0"?N=t.value[d.type]:e.value[d.parentId]&&(N=e.value[d.parentId].subCategories),N&&N.splice(O,0,N.splice(x,1)[0])}function T({category:d,hidden:x}){e.value[d.id]&&(e.value[d.id].visible=!x)}function C(d){let x;if(!d.parentId||d.parentId==="0"?x=t.value[d.type]:e.value[d.parentId]&&(x=e.value[d.parentId].subCategories),x){for(const[O,N]of at(x))if(O.id===d.id){x.splice(N,1);break}}if(e.value[d.id]&&e.value[d.id].subCategories){const O=e.value[d.id].subCategories;if(O)for(const N of O)e.value[N.id]&&delete e.value[N.id]}e.value[d.id]&&delete e.value[d.id]}function Y(d){a.value=d}function k(){t.value={},e.value={},a.value=!0}function $({force:d}){return!d&&!a.value?new Promise(x=>{x(t.value)}):new Promise((x,O)=>{re.getAllTransactionCategories().then(N=>{const Q=N.data;if(!Q||!Q.success||!Q.result){O({message:"Unable to retrieve category list"});return}Q.result[ve.Income]||(Q.result[ve.Income]=[]),Q.result[ve.Expense]||(Q.result[ve.Expense]=[]),Q.result[ve.Transfer]||(Q.result[ve.Transfer]=[]),a.value&&Y(!1);const j=la.ofMap(Q.result);if(d&&Q.result&&ca(t.value,j)){O({message:"Category list is up to date",isUpToDate:!0});return}i(j),x(j)}).catch(N=>{d?X.error("failed to force load category list",N):X.error("failed to load category list",N),N.response&&N.response.data&&N.response.data.errorMessage?O({error:N.response.data}):N.processed?O(N):O({message:"Unable to retrieve category list"})})})}function F({categoryId:d}){return new Promise((x,O)=>{re.getTransactionCategory({id:d}).then(N=>{const Q=N.data;if(!Q||!Q.success||!Q.result){O({message:"Unable to retrieve category"});return}const j=la.of(Q.result);x(j)}).catch(N=>{X.error("failed to load category info",N),N.response&&N.response.data&&N.response.data.errorMessage?O({error:N.response.data}):N.processed?O(N):O({message:"Unable to retrieve category"})})})}function H({category:d,isEdit:x,clientSessionId:O}){return new Promise((N,Q)=>{let j;x?j=re.modifyTransactionCategory(d.toModifyRequest()):j=re.addTransactionCategory(d.toCreateRequest(O)),j.then(ae=>{const de=ae.data;if(!de||!de.success||!de.result){Q(x?{message:"Unable to save category"}:{message:"Unable to add category"});return}const ge=la.of(de.result);x?!f(ge,e.value[d.id])&&!a.value&&Y(!0):c(ge),N(ge)}).catch(ae=>{X.error("failed to save category",ae),ae.response&&ae.response.data&&ae.response.data.errorMessage?Q({error:ae.response.data}):ae.processed?Q(ae):Q(x?{message:"Unable to save category"}:{message:"Unable to add category"})})})}function w(d){return new Promise((x,O)=>{re.addTransactionCategoryBatch(d).then(N=>{const Q=N.data;if(!Q||!Q.success||!Q.result){O({message:"Unable to add category"});return}a.value||Y(!0);const j=la.ofMap(Q.result);x(j)}).catch(N=>{X.error("failed to add categories",N),N.response&&N.response.data&&N.response.data.errorMessage?O({error:N.response.data}):N.processed?O(N):O({message:"Unable to add category"})})})}function z(d){return new Promise((x,O)=>{re.addTransactionCategoryBatch(d).then(N=>{const Q=N.data;if(!Q||!Q.success||!Q.result){O({message:"Unable to add preset categories"});return}a.value||Y(!0);const j=la.ofMap(Q.result);x(j)}).catch(N=>{X.error("failed to add preset categories",N),N.response&&N.response.data&&N.response.data.errorMessage?O({error:N.response.data}):N.processed?O(N):O({message:"Unable to add preset categories"})})})}function y({categoryId:d,from:x,to:O}){const N=e.value[d];return new Promise((Q,j)=>{if(!N){j({message:"Unable to move category"});return}if(!N.parentId||N.parentId==="0"){if(!t.value[N.type]||!t.value[N.type][O]){j({message:"Unable to move category"});return}}else{const ae=e.value[N.parentId]?.subCategories;if(!ae||!ae[O]){j({message:"Unable to move category"});return}}a.value||Y(!0),A({category:N,from:x,to:O}),Q()})}function v({type:d,parentId:x}){const O=[];let N;if(!x||x==="0"?N=t.value[d]:e.value[x]&&(N=e.value[x].subCategories),N)for(const[Q,j]of at(N))O.push({id:Q.id,displayOrder:j+1});return new Promise((Q,j)=>{re.moveTransactionCategory({newDisplayOrders:O}).then(ae=>{const de=ae.data;if(!de||!de.success||!de.result){j({message:"Unable to move category"});return}a.value&&Y(!1),Q(de.result)}).catch(ae=>{X.error("failed to save categories display order",ae),ae.response&&ae.response.data&&ae.response.data.errorMessage?j({error:ae.response.data}):ae.processed?j(ae):j({message:"Unable to move category"})})})}function p({category:d,hidden:x}){return new Promise((O,N)=>{re.hideTransactionCategory({id:d.id,hidden:x}).then(Q=>{const j=Q.data;if(!j||!j.success||!j.result){N(x?{message:"Unable to hide this category"}:{message:"Unable to unhide this category"});return}T({category:d,hidden:x}),O(j.result)}).catch(Q=>{X.error("failed to change category visibility",Q),Q.response&&Q.response.data&&Q.response.data.errorMessage?N({error:Q.response.data}):Q.processed?N(Q):N(x?{message:"Unable to hide this category"}:{message:"Unable to unhide this category"})})})}function I({category:d,beforeResolve:x}){return new Promise((O,N)=>{re.deleteTransactionCategory({id:d.id}).then(Q=>{const j=Q.data;if(!j||!j.success||!j.result){N({message:"Unable to delete this category"});return}x?x(()=>{C(d)}):C(d),O(j.result)}).catch(Q=>{X.error("failed to delete category",Q),Q.response&&Q.response.data&&Q.response.data.errorMessage?N({error:Q.response.data}):Q.processed?N(Q):N({message:"Unable to delete this category"})})})}return{allTransactionCategories:t,allTransactionCategoriesMap:e,transactionCategoryListStateInvalid:a,allAvailablePrimaryCategoriesCount:n,allAvailableSecondaryCategoriesCount:o,hasVisibleExpenseCategories:s,hasVisibleIncomeCategories:r,hasVisibleTransferCategories:l,updateTransactionCategoryListInvalidState:Y,resetTransactionCategories:k,loadAllCategories:$,getCategory:F,saveCategory:H,addCategories:w,addPresetCategories:z,changeCategoryDisplayOrder:y,updateCategoryDisplayOrders:v,hideCategory:p,deleteCategory:I}}),us=Vt("transactionTags",()=>{const t=q([]),e=q({}),a=q(!0),n=m(()=>{const y=[];for(const v of t.value)v.hidden||y.push(v);return y}),o=m(()=>t.value.length),s=m(()=>n.value.length);function r(y){t.value=y,e.value={};for(const v of y)e.value[v.id]=v}function l(y){t.value.push(y),e.value[y.id]=y}function i(y){for(const[v,p]of at(t.value))if(v.id===y.id){t.value.splice(p,1,y);break}e.value[y.id]=y}function c({from:y,to:v}){t.value.splice(v,0,t.value.splice(y,1)[0])}function f({tag:y,hidden:v}){e.value[y.id]&&(e.value[y.id].hidden=v)}function A(y){for(const[v,p]of at(t.value))if(v.id===y.id){t.value.splice(p,1);break}e.value[y.id]&&delete e.value[y.id]}function T(y){a.value=y}function C(){t.value=[],e.value={},a.value=!0}function Y({force:y}){return!y&&!a.value?new Promise(v=>{v(t.value)}):new Promise((v,p)=>{re.getAllTransactionTags().then(I=>{const d=I.data;if(!d||!d.success||!d.result){p({message:"Unable to retrieve tag list"});return}a.value&&T(!1);const x=ln.ofMulti(d.result);if(y&&d.result&&ca(t.value,x)){p({message:"Tag list is up to date",isUpToDate:!0});return}r(x),v(x)}).catch(I=>{y?X.error("failed to force load tag list",I):X.error("failed to load tag list",I),I.response&&I.response.data&&I.response.data.errorMessage?p({error:I.response.data}):I.processed?p(I):p({message:"Unable to retrieve tag list"})})})}function k({tag:y}){return new Promise((v,p)=>{let I;y.id?I=re.modifyTransactionTag(y.toModifyRequest()):I=re.addTransactionTag(y.toCreateRequest()),I.then(d=>{const x=d.data;if(!x||!x.success||!x.result){y.id?p({message:"Unable to save tag"}):p({message:"Unable to add tag"});return}const O=ln.of(x.result);y.id?i(O):l(O),v(O)}).catch(d=>{X.error("failed to save tag",d),d.response&&d.response.data&&d.response.data.errorMessage?p({error:d.response.data}):d.processed?p(d):y.id?p({message:"Unable to save tag"}):p({message:"Unable to add tag"})})})}function $(y){return new Promise((v,p)=>{re.addTransactionTagBatch(y).then(I=>{const d=I.data;if(!d||!d.success||!d.result){p({message:"Unable to add tag"});return}a.value||T(!0);const x=ln.ofMulti(d.result);v(x)}).catch(I=>{X.error("failed to add tags",I),I.response&&I.response.data&&I.response.data.errorMessage?p({error:I.response.data}):I.processed?p(I):p({message:"Unable to add tag"})})})}function F({tagId:y,from:v,to:p}){return new Promise((I,d)=>{let x=null;for(const O of t.value)if(O.id===y){x=O;break}if(!x||!t.value[p]){d({message:"Unable to move tag"});return}a.value||T(!0),c({from:v,to:p}),I()})}function H(){const y=[];for(const[v,p]of at(t.value))y.push({id:v.id,displayOrder:p+1});return new Promise((v,p)=>{re.moveTransactionTag({newDisplayOrders:y}).then(I=>{const d=I.data;if(!d||!d.success||!d.result){p({message:"Unable to move tag"});return}a.value&&T(!1),v(d.result)}).catch(I=>{X.error("failed to save tags display order",I),I.response&&I.response.data&&I.response.data.errorMessage?p({error:I.response.data}):I.processed?p(I):p({message:"Unable to move tag"})})})}function w({tag:y,hidden:v}){return new Promise((p,I)=>{re.hideTransactionTag({id:y.id,hidden:v}).then(d=>{const x=d.data;if(!x||!x.success||!x.result){I(v?{message:"Unable to hide this tag"}:{message:"Unable to unhide this tag"});return}f({tag:y,hidden:v}),p(x.result)}).catch(d=>{X.error("failed to change tag visibility",d),d.response&&d.response.data&&d.response.data.errorMessage?I({error:d.response.data}):d.processed?I(d):I(v?{message:"Unable to hide this tag"}:{message:"Unable to unhide this tag"})})})}function z({tag:y,beforeResolve:v}){return new Promise((p,I)=>{re.deleteTransactionTag({id:y.id}).then(d=>{const x=d.data;if(!x||!x.success||!x.result){I({message:"Unable to delete this tag"});return}v?v(()=>{A(y)}):A(y),p(x.result)}).catch(d=>{X.error("failed to delete tag",d),d.response&&d.response.data&&d.response.data.errorMessage?I({error:d.response.data}):d.processed?I(d):I({message:"Unable to delete this tag"})})})}return{allTransactionTags:t,allTransactionTagsMap:e,transactionTagListStateInvalid:a,allVisibleTags:n,allAvailableTagsCount:o,allVisibleTagsCount:s,updateTransactionTagListInvalidState:T,resetTransactionTags:C,loadAllTags:Y,saveTag:k,addTags:$,changeTagDisplayOrder:F,updateTagDisplayOrders:H,hideTag:w,deleteTag:z}});class Xa extends Fa{templateType;name;scheduledFrequencyType;scheduledFrequency;scheduledStartDate;scheduledEndDate;scheduledAt;displayOrder;hidden;constructor(e,a,n,o,s,r,l,i,c,f,A,T,C,Y,k,$,F,H,w,z,y,v){super(e,"",o,s,0,r,l,i,c,f,A,T,H,w,z),this.templateType=a,this.name=n,this.scheduledFrequencyType=C,this.scheduledFrequency=Y,this.scheduledStartDate=k,this.scheduledEndDate=$,this.scheduledAt=F,this.displayOrder=y,this.hidden=v}fillFrom(e){this.templateType=e.templateType,this.name=e.name,this.templateType===Yt.Schedule.type&&(this.scheduledFrequencyType=e.scheduledFrequencyType,this.scheduledFrequency=e.scheduledFrequency,this.scheduledStartDate=e.scheduledStartDate,this.scheduledEndDate=e.scheduledEndDate,this.utcOffset=e.utcOffset,this.timeZone=void 0)}toTemplateCreateRequest(e){return{templateType:this.templateType,name:this.name,type:this.type,categoryId:this.getCategoryId(),sourceAccountId:this.sourceAccountId,destinationAccountId:this.type===ie.Transfer?this.destinationAccountId:"0",sourceAmount:this.sourceAmount,destinationAmount:this.type===ie.Transfer?this.destinationAmount:0,hideAmount:this.hideAmount,tagIds:this.tagIds,comment:this.comment,scheduledFrequencyType:this.templateType===Yt.Schedule.type?this.scheduledFrequencyType:void 0,scheduledFrequency:this.templateType===Yt.Schedule.type?this.scheduledFrequency:void 0,scheduledStartDate:this.templateType===Yt.Schedule.type&&this.scheduledStartDate?this.scheduledStartDate:void 0,scheduledEndDate:this.templateType===Yt.Schedule.type&&this.scheduledEndDate?this.scheduledEndDate:void 0,utcOffset:this.templateType===Yt.Schedule.type?this.utcOffset:void 0,clientSessionId:e}}toTemplateModifyRequest(){return{id:this.id,name:this.name,type:this.type,categoryId:this.getCategoryId(),sourceAccountId:this.sourceAccountId,destinationAccountId:this.type===ie.Transfer?this.destinationAccountId:"0",sourceAmount:this.sourceAmount,destinationAmount:this.type===ie.Transfer?this.destinationAmount:0,hideAmount:this.hideAmount,tagIds:this.tagIds,comment:this.comment,scheduledFrequencyType:this.templateType===Yt.Schedule.type?this.scheduledFrequencyType:void 0,scheduledFrequency:this.templateType===Yt.Schedule.type?this.scheduledFrequency:void 0,scheduledStartDate:this.templateType===Yt.Schedule.type&&this.scheduledStartDate?this.scheduledStartDate:void 0,scheduledEndDate:this.templateType===Yt.Schedule.type&&this.scheduledEndDate?this.scheduledEndDate:void 0,utcOffset:this.templateType===Yt.Schedule.type?this.utcOffset:void 0}}static createNewTransactionTemplate(e){return new Xa(e.id,0,"",e.type,e.categoryId,e.timeZone,e.utcOffset,e.sourceAccountId,e.destinationAccountId,e.sourceAmount,e.destinationAmount,e.hideAmount,void 0,void 0,void 0,void 0,void 0,e.tagIds,e.comment,!0,0,!1)}static ofTemplate(e){return new Xa(e.id,e.templateType,e.name,e.type,e.categoryId,void 0,e.utcOffset??0,e.sourceAccountId,e.destinationAccountId,e.sourceAmount,e.destinationAmount,e.hideAmount,e.scheduledFrequencyType,e.scheduledFrequency,e.scheduledStartDate??void 0,e.scheduledEndDate??void 0,e.scheduledAt,e.tagIds,e.comment,!0,e.displayOrder,e.hidden)}static ofMultiTemplates(e){const a=[];for(const n of e)a.push(Xa.ofTemplate(n));return a}}const nm=Vt("transactionTemplates",()=>{const t=q({}),e=q({}),a=q({}),n=m(()=>{const y={};for(const[v,p]of Xt(t.value)){const I=[];for(const d of p)d.hidden||I.push(d);y[parseInt(v)]=I}return y}),o=m(()=>{const y={};for(const[v,p]of Xt(t.value))y[parseInt(v)]=p.length;return y}),s=m(()=>{const y={};for(const[v,p]of Xt(n.value))y[parseInt(v)]=p.length;return y});function r(y,v){t.value[y]=v,e.value[y]={};for(const p of v)e.value[y][p.id]=p}function l(y,v){const p=t.value[y],I=e.value[y];xt(p)&&p.push(v),He(I)&&(I[v.id]=v)}function i(y,v){const p=t.value[y],I=e.value[y];if(xt(p)){for(const[d,x]of at(p))if(d.id===d.id){p.splice(x,1,d);break}}He(I)&&(I[v.id]=v)}function c(y,{from:v,to:p}){const I=t.value[y];xt(I)&&I.splice(p,0,I.splice(v,1)[0])}function f(y,{template:v,hidden:p}){const I=e.value[y];He(I)&&I[v.id]&&(I[v.id].hidden=p)}function A(y,v){const p=t.value[y],I=e.value[y];if(xt(p)){for(const[d,x]of at(p))if(d.id===v.id){p.splice(x,1);break}}He(I)&&I[v.id]&&delete I[v.id]}function T(y,v){a.value[y]=v}function C(){t.value={},e.value={},a.value={}}function Y({templateType:y,force:v}){return!v&&Qe(a.value[y])&&!a.value[y]?new Promise(p=>{p(t.value[y]||[])}):new Promise((p,I)=>{re.getAllTransactionTemplates({templateType:y}).then(d=>{const x=d.data;if(!x||!x.success||!x.result){I({message:"Unable to retrieve template list"});return}(!Qe(a.value[y])||a.value[y])&&T(y,!1);const O=Xa.ofMultiTemplates(x.result);if(v&&x.result&&ca(t.value[y],O)){I({message:"Template list is up to date",isUpToDate:!0});return}r(y,O),p(O)}).catch(d=>{v?X.error("failed to force load template list",d):X.error("failed to load template list",d),d.response&&d.response.data&&d.response.data.errorMessage?I({error:d.response.data}):d.processed?I(d):I({message:"Unable to retrieve template list"})})})}function k({templateId:y}){return new Promise((v,p)=>{re.getTransactionTemplate({id:y}).then(I=>{const d=I.data;if(!d||!d.success||!d.result){p({message:"Unable to retrieve template"});return}const x=Xa.ofTemplate(d.result);v(x)}).catch(I=>{X.error("failed to load template info",I),I.response&&I.response.data&&I.response.data.errorMessage?p({error:I.response.data}):I.processed?p(I):p({message:"Unable to retrieve template"})})})}function $({template:y,isEdit:v,clientSessionId:p}){return new Promise((I,d)=>{let x;if(y.type!==ie.Expense&&y.type!==ie.Income&&y.type!==ie.Transfer){d({message:"An error occurred"});return}v?x=re.modifyTransactionTemplate(y.toTemplateModifyRequest()):x=re.addTransactionTemplate(y.toTemplateCreateRequest(p)),x.then(O=>{const N=O.data;if(!N||!N.success||!N.result){d(v?{message:"Unable to save template"}:{message:"Unable to add template"});return}const Q=Xa.ofTemplate(N.result);v?i(Q.templateType,Q):l(Q.templateType,Q),I(Q)}).catch(O=>{X.error("failed to save template",O),O.response&&O.response.data&&O.response.data.errorMessage?d({error:O.response.data}):O.processed?d(O):d(v?{message:"Unable to save template"}:{message:"Unable to add template"})})})}function F({templateType:y,templateId:v,from:p,to:I}){return new Promise((d,x)=>{let O=null;if(!xt(t.value[y])){x({message:"Unable to move template"});return}for(const N of t.value[y])if(N.id===v){O=N;break}if(!O||!t.value[y][I]){x({message:"Unable to move template"});return}Qe(a.value[y])&&!a.value[y]&&T(y,!0),c(y,{from:p,to:I}),d()})}function H({templateType:y}){const v=[];if(xt(t.value[y]))for(const[p,I]of at(t.value[y]))v.push({id:p.id,displayOrder:I+1});return new Promise((p,I)=>{re.moveTransactionTemplate({newDisplayOrders:v}).then(d=>{const x=d.data;if(!x||!x.success||!x.result){I({message:"Unable to move template"});return}(!Qe(a.value[y])||a.value[y])&&T(y,!1),p(x.result)}).catch(d=>{X.error("failed to save templates display order",d),d.response&&d.response.data&&d.response.data.errorMessage?I({error:d.response.data}):d.processed?I(d):I({message:"Unable to move template"})})})}function w({template:y,hidden:v}){return new Promise((p,I)=>{re.hideTransactionTemplate({id:y.id,hidden:v}).then(d=>{const x=d.data;if(!x||!x.success||!x.result){I(v?{message:"Unable to hide this template"}:{message:"Unable to unhide this template"});return}f(y.templateType,{template:y,hidden:v}),p(x.result)}).catch(d=>{X.error("failed to change template visibility",d),d.response&&d.response.data&&d.response.data.errorMessage?I({error:d.response.data}):d.processed?I(d):I(v?{message:"Unable to hide this template"}:{message:"Unable to unhide this template"})})})}function z({template:y,beforeResolve:v}){return new Promise((p,I)=>{re.deleteTransactionTemplate({id:y.id}).then(d=>{const x=d.data;if(!x||!x.success||!x.result){I({message:"Unable to delete this template"});return}v?v(()=>{A(y.templateType,y)}):A(y.templateType,y),p(x.result)}).catch(d=>{X.error("failed to delete template",d),d.response&&d.response.data&&d.response.data.errorMessage?I({error:d.response.data}):d.processed?I(d):I({message:"Unable to delete this template"})})})}return{allTransactionTemplates:t,allTransactionTemplatesMap:e,transactionTemplateListStatesInvalid:a,allVisibleTemplates:n,allAvailableTemplatesCount:o,allVisibleTemplatesCount:s,updateTransactionTemplateListInvalidState:T,resetTransactionTemplates:C,loadAllTemplates:Y,getTemplate:k,saveTemplateContent:$,changeTemplateDisplayOrder:F,updateTemplateDisplayOrders:H,hideTemplate:w,deleteTemplate:z}}),Mn=Vt("overview",()=>{const t=ht(),e=kt(),a=da(),n=Na(),o=va(),s=q(f()),r=q({loadLast11Months:!1}),l=q({}),i=q(!0),c=m(()=>{const F=l.value;if(!F||!F.thisMonth)return{thisMonth:{valid:!1,incomeAmount:0,expenseAmount:0,incompleteIncomeAmount:!1,incompleteExpenseAmount:!1}};const H={},w=e.currentUserDefaultCurrency;return tl.forEach(z=>{const y=F[z];if(!y)return;let v=0,p=0,I=!1,d=!1;if(y.amounts)for(const x of y.amounts)if(x.currency!==w){const O=o.getExchangedAmount(x.incomeAmount,x.currency,w),N=o.getExchangedAmount(x.expenseAmount,x.currency,w);Ae(O)?v+=Math.trunc(O):I=!0,Ae(N)?p+=Math.trunc(N):d=!0}else v+=x.incomeAmount,p+=x.expenseAmount;H[z]={valid:!0,incomeAmount:v,expenseAmount:p,incompleteIncomeAmount:I,incompleteExpenseAmount:d,amounts:y.amounts||[]}}),H});function f(){const F={today:{startTime:0,endTime:0},thisWeek:{startTime:0,endTime:0},thisMonth:{startTime:0,endTime:0},thisYear:{startTime:0,endTime:0},lastMonth:{startTime:0,endTime:0},monthBeforeLastMonth:{startTime:0,endTime:0},monthBeforeLast2Months:{startTime:0,endTime:0},monthBeforeLast3Months:{startTime:0,endTime:0},monthBeforeLast4Months:{startTime:0,endTime:0},monthBeforeLast5Months:{startTime:0,endTime:0},monthBeforeLast6Months:{startTime:0,endTime:0},monthBeforeLast7Months:{startTime:0,endTime:0},monthBeforeLast8Months:{startTime:0,endTime:0},monthBeforeLast9Months:{startTime:0,endTime:0},monthBeforeLast10Months:{startTime:0,endTime:0}};return A(F),F}function A(F){F.today.startTime=sa(),F.today.endTime=Zn(),F.thisWeek.startTime=Rs(e.currentUserFirstDayOfWeek),F.thisWeek.endTime=Do(e.currentUserFirstDayOfWeek),F.thisMonth.startTime=xa(),F.thisMonth.endTime=Jn(),F.thisYear.startTime=Za(),F.thisYear.endTime=hn(),F.lastMonth.startTime=qe(xa(),1,"months"),F.lastMonth.endTime=qe(xa(),1,"seconds"),F.monthBeforeLastMonth.startTime=qe(F.lastMonth.startTime,1,"months"),F.monthBeforeLastMonth.endTime=qe(F.lastMonth.startTime,1,"seconds"),F.monthBeforeLast2Months.startTime=qe(F.monthBeforeLastMonth.startTime,1,"months"),F.monthBeforeLast2Months.endTime=qe(F.monthBeforeLastMonth.startTime,1,"seconds");for(let H=3;H<=10;H++)F[`monthBeforeLast${H}Months`].startTime=qe(F[`monthBeforeLast${H-1}Months`].startTime,1,"months"),F[`monthBeforeLast${H}Months`].endTime=qe(F[`monthBeforeLast${H-1}Months`].startTime,1,"seconds")}function T(){A(s.value)}function C(F){i.value=F}function Y(){T(),r.value.loadLast11Months=!1,l.value={},i.value=!0}function k({force:F,loadLast11Months:H}){let w=!1,z=!1;if(s.value.today.startTime!==sa()&&(w=!0,T()),H&&!r.value.loadLast11Months&&(z=!0),!w&&!z&&!F&&!i.value)return new Promise(I=>{I(l.value)});const y={useTransactionTimezone:t.appSettings.timezoneUsedForStatisticsInHomePage===ia.TransactionTimezone.type,today:s.value.today,thisWeek:s.value.thisWeek,thisMonth:s.value.thisMonth,thisYear:s.value.thisYear};H&&(y.lastMonth=s.value.lastMonth,y.monthBeforeLastMonth=s.value.monthBeforeLastMonth,y.monthBeforeLast2Months=s.value.monthBeforeLast2Months,y.monthBeforeLast3Months=s.value.monthBeforeLast3Months,y.monthBeforeLast4Months=s.value.monthBeforeLast4Months,y.monthBeforeLast5Months=s.value.monthBeforeLast5Months,y.monthBeforeLast6Months=s.value.monthBeforeLast6Months,y.monthBeforeLast7Months=s.value.monthBeforeLast7Months,y.monthBeforeLast8Months=s.value.monthBeforeLast8Months,y.monthBeforeLast9Months=s.value.monthBeforeLast9Months,y.monthBeforeLast10Months=s.value.monthBeforeLast10Months);const v=ts(t.appSettings.overviewAccountFilterInHomePage,!0),p=ts(t.appSettings.overviewTransactionCategoryFilterInHomePage,!0);return new Promise((I,d)=>{re.getTransactionAmounts(y,v,p).then(x=>{const O=x.data;if(!O||!O.success||!O.result){d({message:"Unable to retrieve transaction overview"});return}if(i.value&&C(!1),F&&O.result&&ca(l.value,O.result)){d({message:"Data is up to date",isUpToDate:!0});return}l.value=O.result,r.value.loadLast11Months=!!H,I(O.result)}).catch(x=>{F?X.error("failed to force load transaction overview",x):X.error("failed to load transaction overview",x),x.response&&x.response.data&&x.response.data.errorMessage?d({error:x.response.data}):x.processed?d(x):d({message:"Unable to retrieve transaction overview"})})})}function $({type:F,dateType:H,minTime:w,maxTime:z}){const y=[];return Qe(F)&&y.push("type="+F),Qe(H)&&(y.push("dateType="+H),H===te.Custom.type&&(Ae(w)&&w>0&&y.push("minTime="+w),Ae(z)&&z>0&&y.push("maxTime="+z))),Tn(t.appSettings.overviewTransactionCategoryFilterInHomePage)||y.push("categoryIds="+Ms(n.allTransactionCategoriesMap,t.appSettings.overviewTransactionCategoryFilterInHomePage)),Tn(t.appSettings.overviewAccountFilterInHomePage)||y.push("accountIds="+Ss(a.allAccountsMap,t.appSettings.overviewAccountFilterInHomePage)),y.join("&")}return{transactionDataRange:s,transactionOverviewOptions:r,transactionOverviewData:l,transactionOverviewStateInvalid:i,transactionOverview:c,updateTransactionOverviewInvalidState:C,resetTransactionOverview:Y,loadTransactionOverview:k,getTransactionListPageParams:$}});function ar(t,e){e===Wt.DisplayOrder.type?t.sort(function(a,n){for(let o=0;o<Math.min(a.displayOrders.length,n.displayOrders.length);o++)if(a.displayOrders[o]!==n.displayOrders[o])return a.displayOrders[o]-n.displayOrders[o];return a.name.localeCompare(n.name,void 0,{numeric:!0,sensitivity:"base"})}):e===Wt.Name.type?t.sort(function(a,n){return a.name.localeCompare(n.name,void 0,{numeric:!0,sensitivity:"base"})}):t.sort(function(a,n){return a.totalAmount!==n.totalAmount?n.totalAmount-a.totalAmount:a.name.localeCompare(n.name,void 0,{numeric:!0,sensitivity:"base"})})}function sm(t,e,a,n,o){if((!e||!a)&&t&&t.length){let s=Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,l=0,i=0;for(const c of t)for(const f of c.items)(f.year<s||f.year===s&&f.month1base<r)&&(s=f.year,r=f.month1base),(f.year>l||f.year===l&&f.month1base>i)&&(l=f.year,i=f.month1base);e=`${s}-${r}`,a=`${l}-${i}`}return ni(e,a,n,o)}function ni(t,e,a,n){return!t||!e?[]:n===tt.Year.type?Au(t,e):n===tt.FiscalYear.type?Iu(t,e,a):n===tt.Quarter.type?bu(t,e):Cu(t,e)}const Nn=Vt("statistics",()=>{const t=ht(),e=kt(),a=da(),n=Na(),o=va(),s=q({chartDataType:K.Default.type,categoricalChartType:_t.Default.type,categoricalChartDateType:Ts.type,categoricalChartStartTime:0,categoricalChartEndTime:0,trendChartType:Et.Default.type,trendChartDateType:vs.type,trendChartStartYearMonth:"",trendChartEndYearMonth:"",assetTrendsChartType:Et.Default.type,assetTrendsChartDateType:As.type,assetTrendsChartStartTime:0,assetTrendsChartEndTime:0,filterAccountIds:{},filterCategoryIds:{},tagFilter:"",keyword:"",sortingType:Wt.Default.type}),r=q(null),l=q([]),i=q([]),c=q(!0),f=m(()=>s.value.chartDataType===K.OutflowsByAccount.type||s.value.chartDataType===K.ExpenseByAccount.type||s.value.chartDataType===K.InflowsByAccount.type||s.value.chartDataType===K.IncomeByAccount.type||s.value.chartDataType===K.AccountTotalAssets.type||s.value.chartDataType===K.AccountTotalLiabilities.type?"account":s.value.chartDataType===K.ExpenseByPrimaryCategory.type||s.value.chartDataType===K.ExpenseBySecondaryCategory.type||s.value.chartDataType===K.IncomeByPrimaryCategory.type||s.value.chartDataType===K.IncomeBySecondaryCategory.type?"category":""),A=m(()=>{const M=r.value;if(!M)return null;const h={startTime:M.startTime,endTime:M.endTime,items:[]};return M&&M.items&&M.items.length&&h.items.push(...v(M.items)),h}),T=m(()=>!A.value||!A.value.items?null:p(A.value.items,s.value)),C=m(()=>{if(!A.value||!A.value.items)return null;const M={},h=[],L=[],g=[],B=[],b=[],S=[],R=[],V=[];let Z=0,ee=0;for(const G of A.value.items){if(!G.primaryAccount||!G.account||!G.primaryCategory||!G.category||G.relatedAccount&&G.relatedAccountType===Wn.TransferFrom||!Ae(G.amountInDefaultCurrency)||s.value.filterAccountIds&&s.value.filterAccountIds[G.account.id]||s.value.filterCategoryIds&&s.value.filterCategoryIds[G.category.id])continue;G.category.type===ve.Income?Z+=G.amountInDefaultCurrency:G.category.type===ve.Expense&&(ee+=G.amountInDefaultCurrency);const U=`${Pt.IncomeByAccount}:${G.account.id}`,ye=`${Pt.ExpenseByAccount}:${G.account.id}`;let Se=M[U],he=M[ye];if(Se||(Se=z(G.account.id,G.account.name,Pt.IncomeByAccount,[G.primaryAccount.category,G.primaryAccount.displayOrder,G.account.displayOrder],G.primaryAccount.hidden||G.account.hidden),M[U]=Se,g.push(Se)),he||(he=z(G.account.id,G.account.name,Pt.ExpenseByAccount,[G.primaryAccount.category,G.primaryAccount.displayOrder,G.account.displayOrder],G.primaryAccount.hidden||G.account.hidden),M[ye]=he,B.push(he)),G.category.type===ve.Income){const Me=`${Pt.IncomeByPrimaryCategory}:${G.primaryCategory.id}`,ze=`${Pt.IncomeBySecondaryCategory}:${G.category.id}`;let Ee=M[Me],xe=M[ze];Ee||(Ee=z(G.primaryCategory.id,G.primaryCategory.name,Pt.IncomeByPrimaryCategory,[G.primaryCategory.displayOrder],G.primaryCategory.hidden),M[Me]=Ee,h.push(Ee)),xe||(xe=z(G.category.id,G.category.name,Pt.IncomeBySecondaryCategory,[G.primaryCategory.displayOrder,G.category.displayOrder],G.primaryCategory.hidden||G.category.hidden),M[ze]=xe,L.push(xe)),Ee.totalAmount+=G.amountInDefaultCurrency,Ee.totalNonNegativeAmount+=G.amountInDefaultCurrency>0?G.amountInDefaultCurrency:0,Ee.includeInPercent=!0,Ee.outflows.push({amount:G.amountInDefaultCurrency,relatedItem:xe}),xe.totalAmount+=G.amountInDefaultCurrency,xe.totalNonNegativeAmount+=G.amountInDefaultCurrency>0?G.amountInDefaultCurrency:0,xe.includeInPercent=!0,xe.inflows.push({amount:G.amountInDefaultCurrency,relatedItem:Ee}),xe.outflows.push({amount:G.amountInDefaultCurrency,relatedItem:Se}),Se.totalAmount+=G.amountInDefaultCurrency,Se.totalNonNegativeAmount+=G.amountInDefaultCurrency>0?G.amountInDefaultCurrency:0,Se.includeInPercent=!0,Se.inflows.push({amount:G.amountInDefaultCurrency,relatedItem:xe})}else if(G.category.type===ve.Expense){const Me=`${Pt.ExpenseByPrimaryCategory}:${G.primaryCategory.id}`,ze=`${Pt.ExpenseBySecondaryCategory}:${G.category.id}`;let Ee=M[Me],xe=M[ze];Ee||(Ee=z(G.primaryCategory.id,G.primaryCategory.name,Pt.ExpenseByPrimaryCategory,[G.primaryCategory.displayOrder],G.primaryCategory.hidden),M[Me]=Ee,S.push(Ee)),xe||(xe=z(G.category.id,G.category.name,Pt.ExpenseBySecondaryCategory,[G.primaryCategory.displayOrder,G.category.displayOrder],G.primaryCategory.hidden||G.category.hidden),M[ze]=xe,b.push(xe)),he.totalAmount+=G.amountInDefaultCurrency,he.totalNonNegativeAmount+=G.amountInDefaultCurrency>0?G.amountInDefaultCurrency:0,he.includeInPercent=!0,he.outflows.push({amount:G.amountInDefaultCurrency,relatedItem:xe}),xe.totalAmount+=G.amountInDefaultCurrency,xe.totalNonNegativeAmount+=G.amountInDefaultCurrency>0?G.amountInDefaultCurrency:0,xe.includeInPercent=!0,xe.inflows.push({amount:G.amountInDefaultCurrency,relatedItem:he}),xe.outflows.push({amount:G.amountInDefaultCurrency,relatedItem:Ee}),Ee.totalAmount+=G.amountInDefaultCurrency,Ee.totalNonNegativeAmount+=G.amountInDefaultCurrency>0?G.amountInDefaultCurrency:0,Ee.includeInPercent=!0,Ee.inflows.push({amount:G.amountInDefaultCurrency,relatedItem:xe})}else if(G.category.type===ve.Transfer&&G.relatedPrimaryAccount&&G.relatedAccount){const Me=`${Pt.ExpenseByAccount}:${G.relatedAccount.id}`;let ze=M[Me];ze||(ze=z(G.relatedAccount.id,G.relatedAccount.name,Pt.ExpenseByAccount,[G.relatedPrimaryAccount.category,G.relatedPrimaryAccount.displayOrder,G.relatedAccount.displayOrder],G.relatedPrimaryAccount.hidden||G.relatedAccount.hidden),M[Me]=ze,B.push(ze)),Se.outflows.push({amount:G.amountInDefaultCurrency,relatedItem:ze}),ze.inflows.push({amount:G.amountInDefaultCurrency,relatedItem:Se})}}y(h,s.value),y(L,s.value),y(g,s.value),y(B,s.value),y(b,s.value),y(S,s.value);for(const G of B){const U=`${Pt.IncomeByAccount}:${G.id}`,ye=M[U];let Se=0,he=0,Me=0,ze=0;if(ye){for(const Ge of ye.inflows)Se+=Ge.amount,he+=Ge.amount;for(const Ge of ye.outflows)Me+=Ge.amount}for(const Ge of G.inflows)Ge.relatedItem.type===G.type&&Ge.relatedItem.id===G.id||(Se+=Ge.amount);for(const Ge of G.outflows)ze+=Ge.amount;const Ee=he-Me-ze,xe=Se-Me-ze;if(ye&&a.allAccountsMap[G.id]?.isAsset&&(Ee>0?(ye.outflows.push({amount:Ee+ze,relatedItem:G}),G.inflows.push({amount:Ee+ze,relatedItem:ye})):xe<0&&(ye.totalAmount+=-xe,ye.totalNonNegativeAmount+=-xe>0?-xe:0,ye.outflows.push({amount:-xe,relatedItem:G}),G.inflows.push({amount:-xe,relatedItem:ye}))),xe>0){let Ge=M[Pt.NetCashFlow];Ge||(Ge=z(Pt.NetCashFlow,"Net Cash Flow",Pt.NetCashFlow,[Number.MAX_SAFE_INTEGER],!1),M[Pt.NetCashFlow]=Ge,V.push(Ge)),G.outflows.push({amount:xe,relatedItem:Ge}),Ge.totalAmount+=xe,Ge.totalNonNegativeAmount+=xe>0?xe:0,Ge.inflows.push({amount:xe,relatedItem:G})}}const W=[...h,...L,...g,...R,...B,...b,...V,...S];return{totalIncome:Z,totalExpense:ee,items:W}}),Y=m(()=>{if(!a.allPlainAccounts)return null;const M={};let h=0,L=0;for(const g of a.allPlainAccounts){if(s.value.chartDataType===K.AccountTotalAssets.type){if(!g.isAsset)continue}else if(s.value.chartDataType===K.AccountTotalLiabilities.type&&!g.isLiability)continue;if(s.value.filterAccountIds&&s.value.filterAccountIds[g.id])continue;let B=a.allAccountsMap[g.parentId];B||(B=g);let b=g.balance;if(g.currency!==e.currentUserDefaultCurrency){const R=o.getExchangedAmount(b,g.currency,e.currentUserDefaultCurrency);if(!Ae(R))continue;b=Math.trunc(R)}g.isLiability&&(b=-b);const S={name:g.name,type:"account",id:g.id,icon:g.icon||Ds.icon,color:g.color||Un,hidden:B.hidden||g.hidden,displayOrders:[B.category,B.displayOrder,g.displayOrder],totalAmount:b};h+=b,b>0&&(L+=b),M[g.id]=S}return{totalAmount:h,totalNonNegativeAmount:L,items:M}}),k=m(()=>{let M=null;s.value.chartDataType===K.OutflowsByAccount.type||s.value.chartDataType===K.ExpenseByAccount.type||s.value.chartDataType===K.ExpenseByPrimaryCategory.type||s.value.chartDataType===K.ExpenseBySecondaryCategory.type||s.value.chartDataType===K.InflowsByAccount.type||s.value.chartDataType===K.IncomeByAccount.type||s.value.chartDataType===K.IncomeByPrimaryCategory.type||s.value.chartDataType===K.IncomeBySecondaryCategory.type?M=T.value:(s.value.chartDataType===K.AccountTotalAssets.type||s.value.chartDataType===K.AccountTotalLiabilities.type)&&(M=Y.value);const h=[];if(M&&M.items){let g=0;for(const B of nt(M.items))B.totalAmount>g&&(g=B.totalAmount);for(const B of nt(M.items)){let b=0;s.value.chartDataType===K.OutflowsByAccount.type||s.value.chartDataType===K.InflowsByAccount.type?(g>0?b=B.totalAmount*100/g:b=0,b<0&&(b=0)):(B.totalAmount>0?b=B.totalAmount*100/M.totalNonNegativeAmount:b=0,b<0&&(b=0));const S={name:B.name,type:B.type,id:B.id,icon:B.icon,color:B.color,hidden:B.hidden,displayOrders:B.displayOrders,totalAmount:B.totalAmount,percent:b};h.push(S)}}return I(h,s.value),{totalAmount:M?.totalAmount||0,items:h}}),$=m(()=>{const M=l.value,h=[];if(M&&M.length)for(const L of M){const g={year:L.year,month:L.month,items:[]};L&&L.items&&L.items.length&&g.items.push(...v(L.items)),h.push(g)}return h}),F=m(()=>{if(!$.value||!$.value.length)return null;const M={};for(const g of $.value){const B=p(g.items,s.value);for(const[b,S]of Xt(B.items)){let R=M[b];R||(R={name:S.name,type:S.type,id:S.id,icon:S.icon,color:S.color,hidden:S.hidden,displayOrders:S.displayOrders,totalAmount:0,items:[]}),R.items.push({year:g.year,month1base:g.month,totalAmount:S.totalAmount}),R.totalAmount+=S.totalAmount,M[b]=R}}const h=[];for(const g of nt(M))h.push(g);return I(h,s.value),{items:h}}),H=m(()=>{const M=i.value,h=[];if(!M||!M.length)return h;const L=M[0];if(!L)return h;const g={};let B=L;for(const b of L.items)g[b.accountId]=b;for(const b of M){const S=[],R={},V=zr(B,b)-1,Z=ua(B.year,B.month,B.day);for(let W=1;W<=V;W++){const G=[],U=Z.getDateTimeAfterDays(W);for(const Se of nt(g)){const he={categoryId:"",accountId:Se.accountId,amount:Se.accountClosingBalance};G.push(he)}const ye={year:U.getGregorianCalendarYear(),month:U.getGregorianCalendarMonth(),day:U.getGregorianCalendarDay(),items:v(G)};B=b,h.push(ye)}for(const W of b.items){const G={categoryId:"",accountId:W.accountId,amount:W.accountClosingBalance};g[W.accountId]=W,R[W.accountId]=!0,S.push(G)}for(const W of nt(g)){if(R[W.accountId])continue;const G={categoryId:"",accountId:W.accountId,amount:W.accountClosingBalance};R[W.accountId]=!0,S.push(G)}const ee={year:b.year,month:b.month,day:b.day,items:v(S)};B=b,h.push(ee)}return h}),w=m(()=>{if(!H.value||!H.value.length)return null;const M={};for(const g of H.value){let B=0;for(const b of g.items){if(!b.primaryAccount||!b.account||s.value.filterAccountIds&&s.value.filterAccountIds[b.account.id]||!Ae(b.amountInDefaultCurrency))continue;if(s.value.chartDataType===K.AccountTotalAssets.type){if(!b.account.isAsset)continue}else if(s.value.chartDataType===K.AccountTotalLiabilities.type){if(!b.account.isLiability)continue}else if(s.value.chartDataType!==K.NetWorth.type)continue;let S=b.amountInDefaultCurrency;if(b.account.isLiability&&(S=-S),s.value.chartDataType===K.AccountTotalAssets.type||s.value.chartDataType===K.AccountTotalLiabilities.type){let R=M[b.account.id];R?R.totalAmount+=S:R={name:b.account.name,type:"account",id:b.account.id,icon:b.account.icon||Ds.icon,color:b.account.color||Un,hidden:b.primaryAccount.hidden||b.account.hidden,displayOrders:[b.primaryAccount.category,b.primaryAccount.displayOrder,b.account.displayOrder],totalAmount:S,items:[]};const V={year:g.year,month:g.month,day:g.day,totalAmount:S};R.items.push(V),M[b.account.id]=R}b.account.isAsset?B+=S:b.account.isLiability&&(B-=S)}if(s.value.chartDataType===K.NetWorth.type){let b=M.total;b?b.totalAmount+=B:b={name:K.NetWorth.name,type:"total",id:"total",icon:"",color:"",hidden:!1,displayOrders:[1],totalAmount:B,items:[]};const S={year:g.year,month:g.month,day:g.day,totalAmount:B};b.items.push(S),M.total=b}}const h=[];for(const g of nt(M))h.push(g);return I(h,s.value),{items:h}});function z(M,h,L,g,B){return{id:M,name:h,type:L,displayOrders:g,hidden:B,inflows:[],outflows:[],totalAmount:0,totalNonNegativeAmount:0}}function y(M,h){let L=0;for(const g of M)L+=g.totalNonNegativeAmount;if(L>0)for(const g of M)g.includeInPercent&&(g.percent=g.totalAmount*100/L);ar(M,h.sortingType)}function v(M){const h=[],L=e.currentUserDefaultCurrency;for(const g of M){const B={categoryId:g.categoryId,accountId:g.accountId,relatedAccountId:g.relatedAccountId,relatedAccountType:g.relatedAccountType,amount:g.amount,amountInDefaultCurrency:null};if(B.accountId&&(B.account=a.allAccountsMap[B.accountId]),B.account&&B.account.parentId!=="0"?B.primaryAccount=a.allAccountsMap[B.account.parentId]:B.primaryAccount=B.account,B.relatedAccountId&&(B.relatedAccount=a.allAccountsMap[B.relatedAccountId]),B.relatedAccount&&B.relatedAccount.parentId!=="0"?B.relatedPrimaryAccount=a.allAccountsMap[B.relatedAccount.parentId]:B.relatedPrimaryAccount=B.relatedAccount,B.categoryId&&(B.category=n.allTransactionCategoriesMap[B.categoryId]),B.category&&B.category.parentId!=="0"?B.primaryCategory=n.allTransactionCategoriesMap[B.category.parentId]:B.primaryCategory=B.category,B.account&&B.account.currency!==L){const b=o.getExchangedAmount(B.amount,B.account.currency,L);Ae(b)&&(B.amountInDefaultCurrency=Math.trunc(b))}else B.account&&B.account.currency===L?B.amountInDefaultCurrency=B.amount:B.amountInDefaultCurrency=null;h.push(B)}return h}function p(M,h){const L={};let g=0,B=0;for(const b of M)if(!(!b.primaryAccount||!b.account||!b.primaryCategory||!b.category)){if(h.chartDataType===K.OutflowsByAccount.type||h.chartDataType===K.TotalOutflows.type){if(b.category.type===ve.Transfer){if(b.relatedAccountType!==Wn.TransferTo)continue}else if(b.category.type!==ve.Expense)continue}else if(h.chartDataType===K.ExpenseByAccount.type||h.chartDataType===K.ExpenseByPrimaryCategory.type||h.chartDataType===K.ExpenseBySecondaryCategory.type||h.chartDataType===K.TotalExpense.type){if(b.category.type!==ve.Expense)continue}else if(h.chartDataType===K.InflowsByAccount.type||h.chartDataType===K.TotalInflows.type){if(b.category.type===ve.Transfer){if(b.relatedAccountType!==Wn.TransferFrom)continue}else if(b.category.type!==ve.Income)continue}else if(h.chartDataType===K.IncomeByAccount.type||h.chartDataType===K.IncomeByPrimaryCategory.type||h.chartDataType===K.IncomeBySecondaryCategory.type||h.chartDataType===K.TotalIncome.type){if(b.category.type!==ve.Income)continue}else if(h.chartDataType!==K.NetCashFlow.type)if(h.chartDataType===K.NetIncome.type){if(b.category.type===ve.Transfer)continue}else continue;if(!(h.filterAccountIds&&h.filterAccountIds[b.account.id])&&!(h.filterCategoryIds&&h.filterCategoryIds[b.category.id])){if(h.chartDataType===K.OutflowsByAccount.type||h.chartDataType===K.ExpenseByAccount.type||h.chartDataType===K.InflowsByAccount.type||h.chartDataType===K.IncomeByAccount.type){if(Ae(b.amountInDefaultCurrency)){let S=L[b.account.id];S?S.totalAmount+=b.amountInDefaultCurrency:S={name:b.account.name,type:"account",id:b.account.id,icon:b.account.icon||Ds.icon,color:b.account.color||Un,hidden:b.primaryAccount.hidden||b.account.hidden,displayOrders:[b.primaryAccount.category,b.primaryAccount.displayOrder,b.account.displayOrder],totalAmount:b.amountInDefaultCurrency};let R=!0;(h.chartDataType===K.OutflowsByAccount.type||h.chartDataType===K.InflowsByAccount.type)&&b.relatedAccount&&(!h.filterAccountIds||!h.filterAccountIds[b.relatedAccount.id])&&(R=!1),R&&(g+=b.amountInDefaultCurrency,b.amountInDefaultCurrency>0&&(B+=b.amountInDefaultCurrency)),L[b.account.id]=S}}else if(h.chartDataType===K.ExpenseByPrimaryCategory.type||h.chartDataType===K.IncomeByPrimaryCategory.type){if(Ae(b.amountInDefaultCurrency)){let S=L[b.primaryCategory.id];S?S.totalAmount+=b.amountInDefaultCurrency:S={name:b.primaryCategory.name,type:"category",id:b.primaryCategory.id,icon:b.primaryCategory.icon||Io.icon,color:b.primaryCategory.color||ns,hidden:b.primaryCategory.hidden,displayOrders:[b.primaryCategory.type,b.primaryCategory.displayOrder],totalAmount:b.amountInDefaultCurrency},g+=b.amountInDefaultCurrency,b.amountInDefaultCurrency>0&&(B+=b.amountInDefaultCurrency),L[b.primaryCategory.id]=S}}else if(h.chartDataType===K.ExpenseBySecondaryCategory.type||h.chartDataType===K.IncomeBySecondaryCategory.type){if(Ae(b.amountInDefaultCurrency)){let S=L[b.category.id];S?S.totalAmount+=b.amountInDefaultCurrency:S={name:b.category.name,type:"category",id:b.category.id,icon:b.category.icon||Io.icon,color:b.category.color||ns,hidden:b.primaryCategory.hidden||b.category.hidden,displayOrders:[b.primaryCategory.type,b.primaryCategory.displayOrder,b.category.displayOrder],totalAmount:b.amountInDefaultCurrency},g+=b.amountInDefaultCurrency,b.amountInDefaultCurrency>0&&(B+=b.amountInDefaultCurrency),L[b.category.id]=S}}else if((h.chartDataType===K.TotalOutflows.type||h.chartDataType===K.TotalExpense.type||h.chartDataType===K.TotalInflows.type||h.chartDataType===K.TotalIncome.type||h.chartDataType===K.NetCashFlow.type||h.chartDataType===K.NetIncome.type)&&Ae(b.amountInDefaultCurrency)){let S=L.total,R=b.amountInDefaultCurrency,V=!0;if((h.chartDataType===K.NetCashFlow.type&&(b.category.type===ve.Expense||b.category.type===ve.Transfer&&b.relatedAccountType===Wn.TransferTo)||h.chartDataType===K.NetIncome.type&&b.category.type===ve.Expense)&&(R=-R),(h.chartDataType===K.TotalOutflows.type||h.chartDataType===K.TotalInflows.type||h.chartDataType===K.NetCashFlow.type)&&b.relatedAccount&&(!h.filterAccountIds||!h.filterAccountIds[b.relatedAccount.id])&&(V=!1),!S){let Z="";h.chartDataType===K.TotalOutflows.type?Z=K.TotalOutflows.name:h.chartDataType===K.TotalExpense.type?Z=K.TotalExpense.name:h.chartDataType===K.TotalInflows.type?Z=K.TotalInflows.name:h.chartDataType===K.TotalIncome.type?Z=K.TotalIncome.name:h.chartDataType===K.NetCashFlow.type?Z=K.NetCashFlow.name:h.chartDataType===K.NetIncome.type&&(Z=K.NetIncome.name),S={name:Z,type:"total",id:"total",icon:"",color:"",hidden:!1,displayOrders:[1],totalAmount:0}}V&&(S.totalAmount+=R,g+=R,b.amountInDefaultCurrency>0&&(B+=R)),L.total=S}}}return{totalAmount:g,totalNonNegativeAmount:B,items:L}}function I(M,h){ar(M,h.sortingType)}function d(M){c.value=M}function x(){s.value.chartDataType=K.Default.type,s.value.categoricalChartType=_t.Default.type,s.value.categoricalChartDateType=Ts.type,s.value.categoricalChartStartTime=0,s.value.categoricalChartEndTime=0,s.value.trendChartType=Et.Default.type,s.value.trendChartDateType=vs.type,s.value.trendChartStartYearMonth="",s.value.trendChartEndYearMonth="",s.value.assetTrendsChartType=Et.Default.type,s.value.assetTrendsChartDateType=As.type,s.value.assetTrendsChartStartTime=0,s.value.assetTrendsChartEndTime=0,s.value.filterAccountIds={},s.value.filterCategoryIds={},s.value.tagFilter="",s.value.keyword="",r.value=null,l.value=[],c.value=!0}function O(M,h){h&&st(h.chartDataType)?s.value.chartDataType=h.chartDataType:s.value.chartDataType=t.appSettings.statistics.defaultChartDataType,M===Ue.CategoricalAnalysis||M===Ue.TrendAnalysis?K.isAvailableForAnalysisType(s.value.chartDataType,M)||(s.value.chartDataType=K.Default.type):M===Ue.AssetTrends&&(K.isAvailableForAnalysisType(s.value.chartDataType,M)||(s.value.chartDataType=K.DefaultForAssetTrends.type)),h&&st(h.categoricalChartType)?s.value.categoricalChartType=h.categoricalChartType:s.value.categoricalChartType=t.appSettings.statistics.defaultCategoricalChartType,_t.isValidType(s.value.categoricalChartType)||(s.value.categoricalChartType=_t.Default.type),h&&st(h.categoricalChartDateType)?s.value.categoricalChartDateType=h.categoricalChartDateType:s.value.categoricalChartDateType=t.appSettings.statistics.defaultCategoricalChartDataRangeType;let L=!0;if(te.isAvailableForScene(s.value.categoricalChartDateType,ha.Normal)||(s.value.categoricalChartDateType=Ts.type,L=!1),L&&s.value.categoricalChartDateType===te.Custom.type)h&&st(h.categoricalChartStartTime)?s.value.categoricalChartStartTime=h.categoricalChartStartTime:s.value.categoricalChartStartTime=0,h&&st(h.categoricalChartEndTime)?s.value.categoricalChartEndTime=h.categoricalChartEndTime:s.value.categoricalChartEndTime=0;else{const b=$a(s.value.categoricalChartDateType,e.currentUserFirstDayOfWeek,e.currentUserFiscalYearStart);b&&(s.value.categoricalChartDateType=b.dateType,s.value.categoricalChartStartTime=b.minTime,s.value.categoricalChartEndTime=b.maxTime)}h&&st(h.trendChartType)?s.value.trendChartType=h.trendChartType:s.value.trendChartType=t.appSettings.statistics.defaultTrendChartType,Et.isValidType(s.value.trendChartType)||(s.value.trendChartType=Et.Default.type),h&&st(h.trendChartDateType)?s.value.trendChartDateType=h.trendChartDateType:s.value.trendChartDateType=t.appSettings.statistics.defaultTrendChartDataRangeType;let g=!0;if(te.isAvailableForScene(s.value.trendChartDateType,ha.TrendAnalysis)||(s.value.trendChartDateType=vs.type,g=!1),g&&s.value.trendChartDateType===te.Custom.type)h&&gs(h.trendChartStartYearMonth)?s.value.trendChartStartYearMonth=h.trendChartStartYearMonth:s.value.trendChartStartYearMonth="",h&&gs(h.trendChartEndYearMonth)?s.value.trendChartEndYearMonth=h.trendChartEndYearMonth:s.value.trendChartEndYearMonth="";else{const b=$a(s.value.trendChartDateType,e.currentUserFirstDayOfWeek,e.currentUserFiscalYearStart);b&&(s.value.trendChartDateType=b.dateType,s.value.trendChartStartYearMonth=zn(b.minTime),s.value.trendChartEndYearMonth=zn(b.maxTime))}h&&st(h.assetTrendsChartType)?s.value.assetTrendsChartType=h.assetTrendsChartType:s.value.assetTrendsChartType=t.appSettings.statistics.defaultAssetTrendsChartType,Et.isValidType(s.value.assetTrendsChartType)||(s.value.assetTrendsChartType=Et.Default.type),h&&st(h.assetTrendsChartDateType)?s.value.assetTrendsChartDateType=h.assetTrendsChartDateType:s.value.assetTrendsChartDateType=t.appSettings.statistics.defaultAssetTrendsChartDataRangeType;let B=!0;if(te.isAvailableForScene(s.value.assetTrendsChartDateType,ha.AssetTrends)||(s.value.assetTrendsChartDateType=As.type,B=!1),B&&s.value.assetTrendsChartDateType===te.Custom.type)h&&st(h.assetTrendsChartStartTime)?s.value.assetTrendsChartStartTime=h.assetTrendsChartStartTime:s.value.assetTrendsChartStartTime=0,h&&st(h.assetTrendsChartEndTime)?s.value.assetTrendsChartEndTime=h.assetTrendsChartEndTime:s.value.assetTrendsChartEndTime=0;else{const b=$a(s.value.assetTrendsChartDateType,e.currentUserFirstDayOfWeek,e.currentUserFiscalYearStart);b&&(s.value.assetTrendsChartDateType=b.dateType,s.value.assetTrendsChartStartTime=b.minTime,s.value.assetTrendsChartEndTime=b.maxTime)}h&&He(h.filterAccountIds)?s.value.filterAccountIds=h.filterAccountIds:s.value.filterAccountIds=t.appSettings.statistics.defaultAccountFilter||{},h&&He(h.filterCategoryIds)?s.value.filterCategoryIds=h.filterCategoryIds:s.value.filterCategoryIds=t.appSettings.statistics.defaultTransactionCategoryFilter||{},h&&Ke(h.tagFilter)?s.value.tagFilter=h.tagFilter:s.value.tagFilter="",h&&Ke(h.keyword)?s.value.keyword=h.keyword:s.value.keyword="",h&&st(h.sortingType)?s.value.sortingType=h.sortingType:s.value.sortingType=t.appSettings.statistics.defaultSortingType,(s.value.sortingType<Wt.Amount.type||s.value.sortingType>Wt.Name.type)&&(s.value.sortingType=Wt.Default.type)}function N(M){let h=!1;return M&&st(M.chartDataType)&&s.value.chartDataType!==M.chartDataType&&(s.value.chartDataType=M.chartDataType,h=!0),M&&st(M.categoricalChartType)&&s.value.categoricalChartType!==M.categoricalChartType&&(s.value.categoricalChartType=M.categoricalChartType,h=!0),M&&st(M.categoricalChartDateType)&&s.value.categoricalChartDateType!==M.categoricalChartDateType&&(s.value.categoricalChartDateType=M.categoricalChartDateType,h=!0),M&&st(M.categoricalChartStartTime)&&s.value.categoricalChartStartTime!==M.categoricalChartStartTime&&(s.value.categoricalChartStartTime=M.categoricalChartStartTime,h=!0),M&&st(M.categoricalChartEndTime)&&s.value.categoricalChartEndTime!==M.categoricalChartEndTime&&(s.value.categoricalChartEndTime=M.categoricalChartEndTime,h=!0),M&&st(M.trendChartType)&&s.value.trendChartType!==M.trendChartType&&(s.value.trendChartType=M.trendChartType,h=!0),M&&st(M.trendChartDateType)&&s.value.trendChartDateType!==M.trendChartDateType&&(s.value.trendChartDateType=M.trendChartDateType,h=!0),M&&(gs(M.trendChartStartYearMonth)||M.trendChartStartYearMonth==="")&&!Di(s.value.trendChartStartYearMonth,M.trendChartStartYearMonth)&&(s.value.trendChartStartYearMonth=M.trendChartStartYearMonth,h=!0),M&&(gs(M.trendChartEndYearMonth)||M.trendChartEndYearMonth==="")&&!Di(s.value.trendChartEndYearMonth,M.trendChartEndYearMonth)&&(s.value.trendChartEndYearMonth=M.trendChartEndYearMonth,h=!0),M&&st(M.assetTrendsChartType)&&s.value.assetTrendsChartType!==M.assetTrendsChartType&&(s.value.assetTrendsChartType=M.assetTrendsChartType,h=!0),M&&st(M.assetTrendsChartDateType)&&s.value.assetTrendsChartDateType!==M.assetTrendsChartDateType&&(s.value.assetTrendsChartDateType=M.assetTrendsChartDateType,h=!0),M&&st(M.assetTrendsChartStartTime)&&s.value.assetTrendsChartStartTime!==M.assetTrendsChartStartTime&&(s.value.assetTrendsChartStartTime=M.assetTrendsChartStartTime,h=!0),M&&st(M.assetTrendsChartEndTime)&&s.value.assetTrendsChartEndTime!==M.assetTrendsChartEndTime&&(s.value.assetTrendsChartEndTime=M.assetTrendsChartEndTime,h=!0),M&&He(M.filterAccountIds)&&!ca(s.value.filterAccountIds,M.filterAccountIds)&&(s.value.filterAccountIds=M.filterAccountIds,h=!0),M&&He(M.filterCategoryIds)&&!ca(s.value.filterCategoryIds,M.filterCategoryIds)&&(s.value.filterCategoryIds=M.filterCategoryIds,h=!0),M&&Ke(M.tagFilter)&&s.value.tagFilter!==M.tagFilter&&(s.value.tagFilter=M.tagFilter,h=!0),M&&Ke(M.keyword)&&s.value.keyword!==M.keyword&&(s.value.keyword=M.keyword,h=!0),M&&st(M.sortingType)&&s.value.sortingType!==M.sortingType&&(s.value.sortingType=M.sortingType,h=!0),h}function Q(M,h,L){const g=[];if(g.push("analysisType="+M),g.push("chartDataType="+s.value.chartDataType),M===Ue.CategoricalAnalysis?(g.push("chartType="+s.value.categoricalChartType),g.push("chartDateType="+s.value.categoricalChartDateType),s.value.categoricalChartDateType===te.Custom.type&&(g.push("startTime="+s.value.categoricalChartStartTime),g.push("endTime="+s.value.categoricalChartEndTime))):M===Ue.TrendAnalysis?(g.push("chartType="+s.value.trendChartType),g.push("chartDateType="+s.value.trendChartDateType),s.value.trendChartDateType===te.Custom.type&&(g.push("startTime="+s.value.trendChartStartYearMonth),g.push("endTime="+s.value.trendChartEndYearMonth)),h!==tt.Default.type&&g.push("trendDateAggregationType="+h)):M===Ue.AssetTrends&&(g.push("chartType="+s.value.assetTrendsChartType),g.push("chartDateType="+s.value.assetTrendsChartDateType),s.value.assetTrendsChartDateType===te.Custom.type&&(g.push("startTime="+s.value.assetTrendsChartStartTime),g.push("endTime="+s.value.assetTrendsChartEndTime)),L!==tt.Default.type&&g.push("assetTrendsDateAggregationType="+L)),s.value.filterAccountIds){const B=Ni(s.value.filterAccountIds);B&&B.length&&g.push("filterAccountIds="+B.join(","))}if(s.value.filterCategoryIds){const B=Ni(s.value.filterCategoryIds);B&&B.length&&g.push("filterCategoryIds="+B.join(","))}return s.value.tagFilter&&g.push("tagFilter="+s.value.tagFilter),s.value.keyword&&g.push("keyword="+encodeURIComponent(s.value.keyword)),g.push("sortingType="+s.value.sortingType),g.join("&")}function j(M,h,L){const g=[];if(s.value.chartDataType===K.IncomeByAccount.type||s.value.chartDataType===K.IncomeByPrimaryCategory.type||s.value.chartDataType===K.IncomeBySecondaryCategory.type||s.value.chartDataType===K.TotalIncome.type?g.push("type=2"):(s.value.chartDataType===K.ExpenseByAccount.type||s.value.chartDataType===K.ExpenseByPrimaryCategory.type||s.value.chartDataType===K.ExpenseBySecondaryCategory.type||s.value.chartDataType===K.TotalExpense.type)&&g.push("type=3"),h&&s.value.chartDataType===K.Overview.type){const B=h.split("-"),b=(B[0]||"").split(":"),S=[],R=[];if(b.length===2&&(b[0]==="account"?S.push(b[1]):b[0]==="category"&&R.push(b[1])),B.length===2){const V=(B[1]||"").split(":");V.length===2&&(V[0]==="account"?S.push(V[1]):V[0]==="category"&&R.push(V[1]))}S.length?(S.length===2&&g.push("type=4"),g.push("accountIds="+S.join(","))):g.push("accountIds="+Ss(a.allAccountsMap,s.value.filterAccountIds)),R.length?g.push("categoryIds="+R.join(",")):g.push("categoryIds="+Ms(n.allTransactionCategoriesMap,s.value.filterCategoryIds))}else h&&(s.value.chartDataType===K.InflowsByAccount.type||s.value.chartDataType===K.IncomeByAccount.type||s.value.chartDataType===K.OutflowsByAccount.type||s.value.chartDataType===K.ExpenseByAccount.type||s.value.chartDataType===K.AccountTotalAssets.type||s.value.chartDataType===K.AccountTotalLiabilities.type)?(g.push("accountIds="+h),(M===Ue.CategoricalAnalysis||M===Ue.TrendAnalysis)&&!Tn(s.value.filterCategoryIds)&&g.push("categoryIds="+Ms(n.allTransactionCategoriesMap,s.value.filterCategoryIds))):h&&(s.value.chartDataType===K.IncomeByPrimaryCategory.type||s.value.chartDataType===K.IncomeBySecondaryCategory.type||s.value.chartDataType===K.ExpenseByPrimaryCategory.type||s.value.chartDataType===K.ExpenseBySecondaryCategory.type)?(g.push("categoryIds="+h),Tn(s.value.filterAccountIds)||g.push("accountIds="+Ss(a.allAccountsMap,s.value.filterAccountIds))):h||(Tn(s.value.filterCategoryIds)||g.push("categoryIds="+Ms(n.allTransactionCategoriesMap,s.value.filterCategoryIds)),Tn(s.value.filterAccountIds)||g.push("accountIds="+Ss(a.allAccountsMap,s.value.filterAccountIds)));return(M===Ue.CategoricalAnalysis||M===Ue.TrendAnalysis)&&(s.value.tagFilter&&g.push("tagFilter="+s.value.tagFilter),s.value.keyword&&g.push("keyword="+encodeURIComponent(s.value.keyword))),M===Ue.CategoricalAnalysis&&s.value.chartDataType!==K.AccountTotalAssets.type&&s.value.chartDataType!==K.AccountTotalLiabilities.type?(g.push("dateType="+s.value.categoricalChartDateType),s.value.categoricalChartDateType===te.Custom.type&&(g.push("minTime="+s.value.categoricalChartStartTime),g.push("maxTime="+s.value.categoricalChartEndTime))):(M===Ue.TrendAnalysis||M===Ue.AssetTrends)&&L&&(g.push("dateType="+L.dateType),g.push("minTime="+L.minTime),g.push("maxTime="+L.maxTime)),g.join("&")}function ae({force:M}){return new Promise((h,L)=>{re.getTransactionStatistics({startTime:s.value.categoricalChartStartTime,endTime:s.value.categoricalChartEndTime,tagFilter:s.value.tagFilter,keyword:s.value.keyword,useTransactionTimezone:t.appSettings.statistics.defaultTimezoneType===ia.TransactionTimezone.type}).then(g=>{const B=g.data;if(!B||!B.success||!B.result){L({message:"Unable to retrieve transaction statistics"});return}if(c.value&&d(!1),M&&B.result&&ca(r.value,B.result)){L({message:"Data is up to date",isUpToDate:!0});return}r.value=B.result,h(B.result)}).catch(g=>{X.error("failed to retrieve transaction statistics",g),g.response&&g.response.data&&g.response.data.errorMessage?L({error:g.response.data}):g.processed?L(g):L({message:"Unable to retrieve transaction statistics"})})})}function de({force:M}){return new Promise((h,L)=>{re.getTransactionStatisticsTrends({startYearMonth:s.value.trendChartStartYearMonth,endYearMonth:s.value.trendChartEndYearMonth,tagFilter:s.value.tagFilter,keyword:s.value.keyword,useTransactionTimezone:t.appSettings.statistics.defaultTimezoneType===ia.TransactionTimezone.type}).then(g=>{const B=g.data;if(!B||!B.success||!B.result){L({message:"Unable to retrieve transaction statistics"});return}if(c.value&&d(!1),M&&B.result&&ca(l.value,B.result)){L({message:"Data is up to date",isUpToDate:!0});return}l.value=B.result,h(B.result)}).catch(g=>{X.error("failed to retrieve transaction statistics",g),g.response&&g.response.data&&g.response.data.errorMessage?L({error:g.response.data}):g.processed?L(g):L({message:"Unable to retrieve transaction statistics"})})})}function ge({force:M}){return new Promise((h,L)=>{re.getTransactionStatisticsAssetTrends({startTime:s.value.assetTrendsChartStartTime,endTime:s.value.assetTrendsChartEndTime}).then(g=>{const B=g.data;if(!B||!B.success||!B.result){L({message:"Unable to retrieve transaction statistics"});return}if(c.value&&d(!1),M&&B.result&&ca(i.value,B.result)){L({message:"Data is up to date",isUpToDate:!0});return}i.value=B.result,h(B.result)}).catch(g=>{X.error("failed to retrieve transaction statistics",g),g.response&&g.response.data&&g.response.data.errorMessage?L({error:g.response.data}):g.processed?L(g):L({message:"Unable to retrieve transaction statistics"})})})}return{transactionStatisticsFilter:s,transactionCategoryStatisticsData:r,transactionCategoryTrendsData:l,transactionStatisticsStateInvalid:c,categoricalAnalysisChartDataCategory:f,categoricalOverviewAnalysisData:C,categoricalAnalysisData:k,trendsAnalysisData:F,assetTrendsData:w,updateTransactionStatisticsInvalidState:d,resetTransactionStatistics:x,initTransactionStatisticsFilter:O,updateTransactionStatisticsFilter:N,getTransactionStatisticsPageParams:Q,getTransactionListPageParams:j,loadCategoricalAnalysis:ae,loadTrendAnalysis:de,loadAssetTrends:ge}}),sl=-99999999999,ol=99999999999,om=10;class il{type;categoryId;originalCategoryName;time;utcOffset;sourceAccountId;originalSourceAccountName;originalSourceAccountCurrency;destinationAccountId;originalDestinationAccountName;originalDestinationAccountCurrency;sourceAmount;destinationAmount;tagIds;originalTagNames;comment;geoLocation;actualCategoryName;actualSourceAccountName;actualDestinationAccountName;index;selected;valid;constructor(e,a){this.type=e.type,this.categoryId=e.categoryId,this.originalCategoryName=e.originalCategoryName,this.time=e.time,this.utcOffset=e.utcOffset,this.sourceAccountId=e.sourceAccountId,this.originalSourceAccountName=e.originalSourceAccountName,this.originalSourceAccountCurrency=e.originalSourceAccountCurrency,this.destinationAccountId=e.destinationAccountId||"",this.originalDestinationAccountName=e.originalDestinationAccountName,this.originalDestinationAccountCurrency=e.originalDestinationAccountCurrency,this.sourceAmount=e.sourceAmount,this.destinationAmount=e.destinationAmount||0,this.tagIds=e.tagIds||[],this.originalTagNames=e.originalTagNames||[],this.comment=e.comment,this.geoLocation=e.geoLocation,this.actualCategoryName=e.originalCategoryName,this.actualSourceAccountName=e.originalSourceAccountName,this.actualDestinationAccountName=e.originalDestinationAccountName,this.index=a,this.selected=!1,this.valid=this.isTransactionValid()}toCreateRequest(){return{type:this.type,categoryId:this.categoryId,time:this.time,utcOffset:this.utcOffset,sourceAccountId:this.sourceAccountId,destinationAccountId:this.type===ie.Transfer?this.destinationAccountId:"0",sourceAmount:this.sourceAmount,destinationAmount:this.type===ie.Transfer?this.destinationAmount:0,hideAmount:!1,tagIds:this.tagIds,pictureIds:[],comment:this.comment,geoLocation:this.geoLocation,clientSessionId:""}}isTransactionValid(){if(this.type!==ie.ModifyBalance&&(!this.categoryId||this.categoryId==="0")||!this.sourceAccountId||this.sourceAccountId==="0"||this.type===ie.Transfer&&(!this.destinationAccountId||this.destinationAccountId==="0"))return!1;if(this.tagIds&&this.tagIds.length){for(const e of this.tagIds)if(!e||e==="0")return!1}return!0}static of(e,a){return new il(e,a)}}const mn=Vt("transactions",()=>{const t=ht(),e=kt(),a=da(),n=Na(),o=Mn(),s=Nn(),r=va(),l=q(ki()),i=q({dateType:te.All.type,maxTime:0,minTime:0,type:0,categoryIds:"",accountIds:"",tagFilter:"",amountFilter:"",keyword:""}),c=q([]),f=q(0),A=q(!0),T=q(!0),C=m(()=>Li(i.value.categoryIds,",")),Y=m(()=>Li(i.value.accountIds,",")),k=m(()=>{const E=ya.parse(i.value.tagFilter),fe={};for(const ue of E){let ce=!0;if(ue.type===It.HasAny||ue.type===It.HasAll)ce=!0;else if(ue.type===It.NotHasAny||ue.type===It.NotHasAll)ce=!1;else continue;for(const ne of ue.tagIds)fe[ne]=ce}return fe}),$=m(()=>wi(i.value.categoryIds,",")),F=m(()=>wi(i.value.accountIds,",")),H=m(()=>pr(k.value)),w=m(()=>{for(const E of c.value)for(const fe of E.items)if(fe)return!1;return!0}),z=m(()=>f.value>0);function y({transactionPageWrapper:E,reload:fe,autoExpand:ue,defaultCurrency:ce,nextTimeSequenceId:ne}){if(fe&&(c.value=[]),E.items&&E.items.length){let oe=-1,Te=null;for(const[Oe,We]of at(E.items)){d(Oe);const Be=ra(Oe.time,Oe.utcOffset),Tt=Be.getGregorianCalendarYear(),_=Be.getGregorianCalendarMonth(),ke=Be.getGregorianCalendarYearDashMonth();if(We===0&&c.value.length>0){const Fe=c.value[c.value.length-1];(Fe.totalAmount.incompleteExpense||Fe.totalAmount.incompleteIncome)&&I(Fe,ce,i.value.accountIds,!1)}if(Te&&Te.year===Tt&&Te.month===_){Te.items.push(Object.freeze(Oe)),We===E.items.length-1&&I(Te,ce,i.value.accountIds,!0);continue}for(let Fe=oe+1;Fe<c.value.length;Fe++)if(c.value[Fe].year===Tt&&c.value[Fe].month===_){oe=Fe,Te=c.value[Fe];break}if(!Te||Te.year!==Tt||Te.month!==_){I(Te,ce,i.value.accountIds,!1);const Fe={year:Tt,month:_,yearDashMonth:ke,opened:ue,items:[],totalAmount:{expense:0,incompleteExpense:!0,income:0,incompleteIncome:!0},dailyTotalAmounts:{}};c.value.push(Fe),oe=c.value.length-1,Te=c.value[c.value.length-1]}Te.items.push(Object.freeze(Oe)),I(Te,ce,i.value.accountIds,!0)}}ne?f.value=ne:(I(c.value[c.value.length-1],ce,i.value.accountIds,!1),f.value=-1)}function v({currentTransaction:E,defaultCurrency:fe}){const ue=ra(E.time,E.utcOffset),ce=ue.getGregorianCalendarYear(),ne=ue.getGregorianCalendarMonth();for(const[oe,Te]of at(c.value))if(oe.items){for(const[Oe,We]of at(oe.items))if(Oe.id===E.id){if(d(E),ce!==oe.year||ne!==oe.month||E.gregorianCalendarDayOfMonth!==Oe.gregorianCalendarDayOfMonth){A.value=!0;return}i.value.categoryIds&&!C.value[E.categoryId]||i.value.accountIds&&!Y.value[E.sourceAccountId]&&!Y.value[E.destinationAccountId]&&(!E.sourceAccount||!Y.value[E.sourceAccount.parentId])&&(!E.destinationAccount||!Y.value[E.destinationAccount.parentId])?oe.items.splice(We,1):oe.items.splice(We,1,E),oe.items.length<1?c.value.splice(Te,1):I(oe,fe,i.value.accountIds,Te>=c.value.length-1&&f.value>0);return}}}function p({currentTransaction:E,defaultCurrency:fe}){for(const[ue,ce]of at(c.value))if(!(!ue.items||ue.items[0].time<E.time||ue.items[ue.items.length-1].time>E.time)){for(const[ne,oe]of at(ue.items))ne.id===E.id&&ue.items.splice(oe,1);ue.items.length<1?c.value.splice(ce,1):I(ue,fe,i.value.accountIds,ce>=c.value.length-1&&f.value>0)}}function I(E,fe,ue,ce){if(!E)return;let ne=0,oe=0,Te=!1,Oe=!1;const We={},Be={};let Tt=0;if(ue&&ue!=="0"){const _=ue.split(",");for(const ke of _)ke&&(Be[ke]=!0,Tt++)}for(const _ of E.items){const ke=Ae(_.gregorianCalendarDayOfMonth)?_.gregorianCalendarDayOfMonth.toString():"0";let Fe=We[ke];Fe||(Fe={expense:0,incompleteExpense:!1,income:0,incompleteIncome:!1},We[ke]=Fe);let dt=_.sourceAmount,Ot=_.sourceAccount;if(Tt>0&&_.destinationAccount&&!Be[_.sourceAccount?.id||""]&&!Be[_.sourceAccount?.parentId||""]&&(Be[_.destinationAccount.id]||Be[_.destinationAccount.parentId])&&(dt=_.destinationAmount,Ot=_.destinationAccount),!!Ot){if(Ot.currency!==fe){const Gt=r.getExchangedAmount(dt,Ot.currency,fe);if(!Ae(Gt)){_.type===ie.Expense?(Te=!0,Fe.incompleteExpense=!0):_.type===ie.Income&&(Oe=!0,Fe.incompleteIncome=!0);continue}dt=Gt}_.type===ie.Expense?(ne+=dt,Fe.expense+=dt):_.type===ie.Income?(oe+=dt,Fe.income+=dt):_.type===ie.Transfer&&Tt>0&&(Be[_.sourceAccountId]&&Be[_.destinationAccountId]||_.sourceAccount&&_.destinationAccount&&Be[_.sourceAccount.parentId]&&Be[_.destinationAccount.parentId]||_.sourceAccount&&Be[_.sourceAccount.parentId]&&Be[_.destinationAccountId]||_.destinationAccount&&Be[_.sourceAccountId]&&Be[_.destinationAccount.parentId]||(Be[_.sourceAccountId]||_.sourceAccount&&Be[_.sourceAccount.parentId]?(ne+=dt,Fe.expense+=dt):(Be[_.destinationAccountId]||_.destinationAccount&&Be[_.destinationAccount.parentId])&&(oe+=dt,Fe.income+=dt)))}}E.totalAmount.expense=Math.trunc(ne),E.totalAmount.incompleteExpense=ce||Te,E.totalAmount.income=Math.trunc(oe),E.totalAmount.incompleteIncome=ce||Oe;for(const _ of jt(E.dailyTotalAmounts))delete E.dailyTotalAmounts[_];for(const[_,ke]of Xt(We))E.dailyTotalAmounts[_]={expense:Math.trunc(ke.expense),incompleteExpense:ce||ke.incompleteExpense,income:Math.trunc(ke.income),incompleteIncome:ce||ke.incompleteIncome}}function d(E){if(!E)return;const fe=ra(E.time,E.utcOffset);E.setDisplayDate(fe.getGregorianCalendarYearDashMonthDashDay(),fe.getGregorianCalendarDay(),fe.getWeekDay()),E.sourceAccountId&&E.setSourceAccount(a.allAccountsMap[E.sourceAccountId]),E.destinationAccountId&&E.setDestinationAccount(a.allAccountsMap[E.destinationAccountId]),E.categoryId&&E.setCategory(n.allTransactionCategoriesMap[E.categoryId])}function x(){t.appSettings.autoSaveTransactionDraft==="enabled"||t.appSettings.autoSaveTransactionDraft==="confirmation"?l.value=ki():l.value=null}function O(E,fe,ue,ce,ne,oe){if(!E)return!1;if(E.sourceAmount!==0&&E.sourceAmount!==fe||E.type===ie.Transfer&&E.destinationAmount!==0||E.sourceAccountId&&E.sourceAccountId!=="0"&&E.sourceAccountId!==e.currentUserDefaultAccountId&&(e.currentUserDefaultAccountId!==""&&e.currentUserDefaultAccountId!=="0"||E.sourceAccountId!==oe)&&E.sourceAccountId!==ce||E.type===ie.Transfer&&E.destinationAccountId&&E.destinationAccountId!=="0"&&E.destinationAccountId!==e.currentUserDefaultAccountId&&E.destinationAccountId!==ce)return!0;const Te=n.allTransactionCategories;if(Te){if(E.type===ie.Expense){const Oe=Qa(Te[ve.Expense]);if(E.expenseCategoryId&&E.expenseCategoryId!=="0"&&E.expenseCategoryId!==Oe&&E.expenseCategoryId!==ue)return!0}else if(E.type===ie.Income){const Oe=Qa(Te[ve.Income]);if(E.incomeCategoryId&&E.incomeCategoryId!=="0"&&E.incomeCategoryId!==Oe&&E.incomeCategoryId!==ue)return!0}else if(E.type===ie.Transfer){const Oe=Qa(Te[ve.Transfer]);if(E.transferCategoryId&&E.transferCategoryId!=="0"&&E.transferCategoryId!==Oe&&E.transferCategoryId!==ue)return!0}}return E.hideAmount?!0:E.tagIds&&E.tagIds.length>0?!ne||!sc(E.tagIds,ne.split(",")):!!(E.pictures&&E.pictures.length>0||E.comment&&E.comment.trim())}function N(E,fe,ue,ce,ne,oe){if(t.appSettings.autoSaveTransactionDraft!=="enabled"&&t.appSettings.autoSaveTransactionDraft!=="confirmation"){Q();return}if(E){if(!O(E,fe,ue,ce,ne,oe)){Q();return}l.value=E.toTransactionDraft()}wc(l.value)}function Q(){l.value=null,Ir()}function j(E,fe,ue){if(E.type===ie.Expense||E.type===ie.Income)E.destinationAmount=ue;else if(E.type===ie.Transfer){const ce=a.allAccountsMap[E.sourceAccountId],ne=a.allAccountsMap[E.destinationAccountId];if(ce&&ne&&ce.currency!==ne.currency){const oe=Xr(ne.currency),Te=r.getExchangedAmount(fe,ce.currency,ne.currency),Oe=r.getExchangedAmount(ue,ce.currency,ne.currency);if(Ae(oe)&&Ae(Te)&&(fe=Math.trunc(Te),fe=Zi(fe,oe)),Ae(oe)&&Ae(Oe))ue=Math.trunc(Oe),ue=Zi(ue,oe);else return}(!ce||!ne||E.destinationAmount===fe||E.destinationAmount===0)&&sl<=ue&&ue<=ol&&(E.destinationAmount=ue)}}function ae(E){A.value=E}function de(E){T.value=E}function ge(){i.value.dateType=te.All.type,i.value.maxTime=0,i.value.minTime=0,i.value.type=0,i.value.categoryIds="",i.value.accountIds="",i.value.tagFilter="",i.value.amountFilter="",i.value.keyword="",c.value=[],f.value=0,A.value=!0,T.value=!0}function M(){c.value=[],f.value=0,A.value=!0}function h(E){E&&Ae(E.dateType)?i.value.dateType=E.dateType:i.value.dateType=te.All.type,E&&Ae(E.maxTime)?i.value.maxTime=E.maxTime:i.value.maxTime=0,E&&Ae(E.minTime)?i.value.minTime=E.minTime:i.value.minTime=0,E&&Ae(E.type)?i.value.type=E.type:i.value.type=0,E&&Ke(E.categoryIds)?i.value.categoryIds=E.categoryIds:i.value.categoryIds="",E&&Ke(E.accountIds)?i.value.accountIds=E.accountIds:i.value.accountIds="",E&&Ke(E.tagFilter)?i.value.tagFilter=E.tagFilter:i.value.tagFilter="",E&&Ke(E.amountFilter)?i.value.amountFilter=E.amountFilter:i.value.amountFilter="",E&&Ke(E.keyword)?i.value.keyword=E.keyword:i.value.keyword=""}function L(E){let fe=!1;return E&&Ae(E.dateType)&&i.value.dateType!==E.dateType&&(i.value.dateType=E.dateType,fe=!0),E&&Ae(E.maxTime)&&i.value.maxTime!==E.maxTime&&(i.value.maxTime=E.maxTime,fe=!0),E&&Ae(E.minTime)&&i.value.minTime!==E.minTime&&(i.value.minTime=E.minTime,fe=!0),E&&Ae(E.type)&&i.value.type!==E.type&&(i.value.type=E.type,fe=!0),E&&Ke(E.categoryIds)&&i.value.categoryIds!==E.categoryIds&&(i.value.categoryIds=E.categoryIds,fe=!0),E&&Ke(E.accountIds)&&i.value.accountIds!==E.accountIds&&(te.isBillingCycle(i.value.dateType)&&(!a.getAccountStatementDate(E.accountIds)||a.getAccountStatementDate(E.accountIds)!==a.getAccountStatementDate(i.value.accountIds))&&(i.value.dateType=te.Custom.type),i.value.accountIds=E.accountIds,fe=!0),E&&Ke(E.tagFilter)&&i.value.tagFilter!==E.tagFilter&&(i.value.tagFilter=E.tagFilter,fe=!0),E&&Ke(E.amountFilter)&&i.value.amountFilter!==E.amountFilter&&(i.value.amountFilter=E.amountFilter,fe=!0),E&&Ke(E.keyword)&&i.value.keyword!==E.keyword&&(i.value.keyword=E.keyword,fe=!0),fe}function g(E){const fe=[];return fe.push("pageType="+E),i.value.type&&fe.push("type="+i.value.type),i.value.accountIds&&fe.push("accountIds="+i.value.accountIds),i.value.categoryIds&&fe.push("categoryIds="+i.value.categoryIds),i.value.tagFilter&&fe.push("tagFilter="+i.value.tagFilter),fe.push("dateType="+i.value.dateType),(te.isBillingCycle(i.value.dateType)||i.value.dateType===te.Custom.type)&&(fe.push("maxTime="+i.value.maxTime),fe.push("minTime="+i.value.minTime)),i.value.amountFilter&&fe.push("amountFilter="+encodeURIComponent(i.value.amountFilter)),i.value.keyword&&fe.push("keyword="+encodeURIComponent(i.value.keyword)),fe.join("&")}function B(){return{maxTime:i.value.maxTime,minTime:i.value.minTime,type:i.value.type,categoryIds:i.value.categoryIds,accountIds:i.value.accountIds,tagFilter:i.value.tagFilter,amountFilter:i.value.amountFilter,keyword:i.value.keyword}}function b({reload:E,count:fe,page:ue,withCount:ce,autoExpand:ne,defaultCurrency:oe}){let Te=f.value;return E&&i.value.maxTime>0?Te=i.value.maxTime*1e3+999:E&&i.value.maxTime<=0&&(Te=0),new Promise((Oe,We)=>{re.getTransactions({maxTime:Te,minTime:i.value.minTime*1e3,count:fe||50,page:ue||1,withCount:!!ce,type:i.value.type,categoryIds:i.value.categoryIds,accountIds:i.value.accountIds,tagFilter:i.value.tagFilter,amountFilter:i.value.amountFilter,keyword:i.value.keyword}).then(Be=>{const Tt=Be.data;if(!Tt||!Tt.success||!Tt.result){E&&(y({transactionPageWrapper:ys,reload:E,autoExpand:ne,defaultCurrency:oe}),A.value||ae(!0)),We({message:"Unable to retrieve transaction list"});return}const _={items:Fa.ofMulti(Tt.result.items),totalCount:Tt.result.totalCount};y({transactionPageWrapper:_,reload:!!E,autoExpand:ne,defaultCurrency:oe,nextTimeSequenceId:Tt.result.nextTimeSequenceId}),E&&A.value&&ae(!1),Oe(_)}).catch(Be=>{X.error("failed to load transaction list",Be),E&&(y({transactionPageWrapper:ys,reload:E,autoExpand:ne,defaultCurrency:oe}),A.value||ae(!0)),Be.response&&Be.response.data&&Be.response.data.errorMessage?We({error:Be.response.data}):Be.processed?We(Be):We({message:"Unable to retrieve transaction list"})})})}function S({year:E,month:fe,autoExpand:ue,defaultCurrency:ce}){return new Promise((ne,oe)=>{re.getAllTransactionsByMonth({year:E,month:fe,type:i.value.type,categoryIds:i.value.categoryIds,accountIds:i.value.accountIds,tagFilter:i.value.tagFilter,amountFilter:i.value.amountFilter,keyword:i.value.keyword}).then(Te=>{const Oe=Te.data;if(!Oe||!Oe.success||!Oe.result){y({transactionPageWrapper:ys,reload:!0,autoExpand:ue,defaultCurrency:ce}),A.value||ae(!0),oe({message:"Unable to retrieve transaction list"});return}const We={items:Fa.ofMulti(Oe.result.items),totalCount:Oe.result.totalCount};y({transactionPageWrapper:We,reload:!0,autoExpand:ue,defaultCurrency:ce}),A.value&&ae(!1),ne(We)}).catch(Te=>{X.error("failed to load monthly all transaction list",Te),y({transactionPageWrapper:ys,reload:!0,autoExpand:ue,defaultCurrency:ce}),A.value||ae(!0),Te.response&&Te.response.data&&Te.response.data.errorMessage?oe({error:Te.response.data}):Te.processed?oe(Te):oe({message:"Unable to retrieve transaction list"})})})}function R({accountId:E,startTime:fe,endTime:ue}){return new Promise((ce,ne)=>{re.getReconciliationStatements({accountId:E,startTime:fe,endTime:ue}).then(oe=>{const Te=oe.data;if(!Te||!Te.success||!Te.result){T.value||de(!0),ne({message:"Unable to retrieve reconciliation statements"});return}T.value&&de(!1),ce(Te.result)}).catch(oe=>{X.error("failed to load reconciliation statements",oe),T.value||de(!0),oe.response&&oe.response.data&&oe.response.data.errorMessage?ne({error:oe.response.data}):oe.processed?ne(oe):ne({message:"Unable to retrieve reconciliation statements"})})})}function V({transactionId:E,withPictures:fe}){return new Promise((ue,ce)=>{Qe(fe)||(fe=!0),re.getTransaction({id:E,withPictures:fe}).then(ne=>{const oe=ne.data;if(!oe||!oe.success||!oe.result){ce({message:"Unable to retrieve transaction"});return}const Te=Fa.of(oe.result);ue(Te)}).catch(ne=>{X.error("failed to load transaction info",ne),ne.response&&ne.response.data&&ne.response.data.errorMessage?ce({error:ne.response.data}):ne.processed?ce(ne):ce({message:"Unable to retrieve transaction"})})})}function Z({transaction:E,defaultCurrency:fe,isEdit:ue,clientSessionId:ce}){return new Promise((ne,oe)=>{let Te;if(E.type!==ie.Expense&&E.type!==ie.Income&&E.type!==ie.Transfer&&E.type!==ie.ModifyBalance){oe({message:"An error occurred"});return}else if(!ue&&E.type===ie.ModifyBalance){oe({message:"An error occurred"});return}ue?Te=re.modifyTransaction(E.toModifyRequest()):Te=re.addTransaction(E.toCreateRequest(ce)),Te.then(Oe=>{const We=Oe.data;(!We||!We.success||!We.result)&&oe(ue?{message:"Unable to save transaction"}:{message:"Unable to add transaction"});const Be=Fa.of(We.result);ue?v({currentTransaction:Be,defaultCurrency:fe}):A.value||ae(!0),T.value||de(!0),a.accountListStateInvalid||a.updateAccountListInvalidState(!0),o.transactionOverviewStateInvalid||o.updateTransactionOverviewInvalidState(!0),s.transactionStatisticsStateInvalid||s.updateTransactionStatisticsInvalidState(!0),ne(Be)}).catch(Oe=>{X.error("failed to save transaction",Oe),Oe.response&&Oe.response.data&&Oe.response.data.errorMessage?oe({error:Oe.response.data}):Oe.processed?oe(Oe):oe(ue?{message:"Unable to save transaction"}:{message:"Unable to add transaction"})})})}function ee({fromAccountId:E,toAccountId:fe}){return new Promise((ue,ce)=>{re.moveAllTransactionsBetweenAccounts({fromAccountId:E,toAccountId:fe}).then(ne=>{const oe=ne.data;if(!oe||!oe.success||!oe.result){ce({message:"Unable to move transactions"});return}A.value||ae(!0),T.value||de(!0),a.accountListStateInvalid||a.updateAccountListInvalidState(!0),o.transactionOverviewStateInvalid||o.updateTransactionOverviewInvalidState(!0),s.transactionStatisticsStateInvalid||s.updateTransactionStatisticsInvalidState(!0),ue(oe.result)}).catch(ne=>{X.error("failed to move transactions",ne),ne.response&&ne.response.data&&ne.response.data.errorMessage?ce({error:ne.response.data}):ne.processed?ce(ne):ce({message:"Unable to move transactions"})})})}function W({transaction:E,defaultCurrency:fe,beforeResolve:ue}){return new Promise((ce,ne)=>{re.deleteTransaction({id:E.id}).then(oe=>{const Te=oe.data;if(!Te||!Te.success||!Te.result){ne({message:"Unable to delete this transaction"});return}ue?ue(()=>{p({currentTransaction:E,defaultCurrency:fe})}):p({currentTransaction:E,defaultCurrency:fe}),T.value||de(!0),a.accountListStateInvalid||a.updateAccountListInvalidState(!0),o.transactionOverviewStateInvalid||o.updateTransactionOverviewInvalidState(!0),s.transactionStatisticsStateInvalid||s.updateTransactionStatisticsInvalidState(!0),ce(Te.result)}).catch(oe=>{X.error("failed to delete transaction",oe),oe.response&&oe.response.data&&oe.response.data.errorMessage?ne({error:oe.response.data}):oe.processed?ne(oe):ne({message:"Unable to delete this transaction"})})})}function G({imageFile:E,cancelableUuid:fe}){return new Promise((ue,ce)=>{re.recognizeReceiptImage({imageFile:E,cancelableUuid:fe}).then(ne=>{const oe=ne.data;if(!oe||!oe.success||!oe.result){ce({message:"Unable to recognize image"});return}ue(oe.result)}).catch(ne=>{ne.canceled&&ce(ne),X.error("failed to recognize image",ne),ne.response&&ne.response.data&&ne.response.data.errorMessage?ce({error:ne.response.data}):ne.processed?ce(ne):ce({message:"Unable to recognize image"})})})}function U(E){re.cancelRequest(E)}function ye({fileType:E,fileEncoding:fe,importFile:ue}){return new Promise((ce,ne)=>{re.parseImportDsvFile({fileType:E,fileEncoding:fe,importFile:ue}).then(oe=>{const Te=oe.data;if(!Te||!Te.success||!Te.result){ne({message:"Unable to parse import file"});return}ce(Te.result)}).catch(oe=>{X.error("Unable to parse import file",oe),oe.response&&oe.response.data&&oe.response.data.errorMessage?ne({error:oe.response.data}):oe.processed?ne(oe):ne({message:"Unable to parse import file"})})})}function Se({fileType:E,additionalOptions:fe,fileEncoding:ue,importFile:ce,columnMapping:ne,transactionTypeMapping:oe,hasHeaderLine:Te,timeFormat:Oe,timezoneFormat:We,amountDecimalSeparator:Be,amountDigitGroupingSymbol:Tt,geoSeparator:_,geoOrder:ke,tagSeparator:Fe}){return new Promise((dt,Ot)=>{re.parseImportTransaction({fileType:E,additionalOptions:fe,fileEncoding:ue,importFile:ce,columnMapping:ne,transactionTypeMapping:oe,hasHeaderLine:Te,timeFormat:Oe,timezoneFormat:We,amountDecimalSeparator:Be,amountDigitGroupingSymbol:Tt,geoSeparator:_,geoOrder:ke,tagSeparator:Fe}).then(Gt=>{const we=Gt.data;if(!we||!we.success||!we.result){Ot({message:"Unable to parse import file"});return}dt(we.result)}).catch(Gt=>{X.error("Unable to parse import file",Gt),Gt.response&&Gt.response.data&&Gt.response.data.errorMessage?Ot({error:Gt.response.data}):Gt.processed?Ot(Gt):Ot({message:"Unable to parse import file"})})})}function he({transactions:E,clientSessionId:fe}){const ue=[];if(E)for(const ce of E){const ne=ce.toCreateRequest();ue.push(ne)}return new Promise((ce,ne)=>{re.importTransactions({transactions:ue,clientSessionId:fe}).then(oe=>{const Te=oe.data;if(!Te||!Te.success||!Te.result){ne({message:"Unable to import transactions"});return}ce(Te.result)}).catch(oe=>{X.error("Unable to import transactions",oe),oe.response&&oe.response.data&&oe.response.data.errorMessage?ne({error:oe.response.data}):oe.processed?ne(oe):ne({message:"Unable to import transactions"})})})}function Me({clientSessionId:E}){return new Promise((fe,ue)=>{re.getImportTransactionsProcess(E).then(ce=>{const ne=ce.data;if(!ne||!ne.success||!ne.result){ue({message:"Unable to get transactions import process"});return}fe(ne.result)}).catch(ce=>{X.error("Unable to get transactions import process",ce),ce.response&&ce.response.data&&ce.response.data.errorMessage?ue({error:ce.response.data}):ce.processed?ue(ce):ue({message:"Unable to get transactions import process"})})})}function ze({pictureFile:E,clientSessionId:fe}){return new Promise((ue,ce)=>{re.uploadTransactionPicture({pictureFile:E,clientSessionId:fe}).then(ne=>{const oe=ne.data;if(!oe||!oe.success||!oe.result){ce({message:"Unable to upload transaction picture"});return}ue(oe.result)}).catch(ne=>{X.error("Unable to upload transaction picture",ne),ne.response&&ne.response.data&&ne.response.data.errorMessage?ce({error:ne.response.data}):ne.processed?ce(ne):ce({message:"Unable to upload transaction picture"})})})}function Ee({pictureInfo:E}){return new Promise((fe,ue)=>{re.removeUnusedTransactionPicture({id:E.pictureId}).then(ce=>{const ne=ce.data;if(!ne||!ne.success||!ne.result){ue({message:"Unable to remove transaction picture"});return}fe(ne.result)}).catch(ce=>{X.error("failed to remove transaction picture",ce),ce.response&&ce.response.data&&ce.response.data.errorMessage?ue({error:ce.response.data}):ce.processed?ue(ce):ue({message:"Unable to remove transaction picture"})})})}function xe(E,fe){if(!(!E||!E.originalUrl))return re.getTransactionPictureUrlWithToken(E.originalUrl,fe)}function Ge({monthList:E,collapse:fe}){E&&(E.opened=!fe)}return{transactionDraft:l,transactionsFilter:i,transactions:c,transactionsNextTimeId:f,transactionListStateInvalid:A,transactionReconciliationStatementStateInvalid:T,allFilterCategoryIds:C,allFilterAccountIds:Y,allFilterTagIds:k,allFilterCategoryIdsCount:$,allFilterAccountIdsCount:F,allFilterTagIdsCount:H,noTransaction:w,hasMoreTransaction:z,initTransactionDraft:x,isTransactionDraftModified:O,saveTransactionDraft:N,clearTransactionDraft:Q,setTransactionSuitableDestinationAmount:j,updateTransactionListInvalidState:ae,updateTransactionReconciliationStatementInvalidState:de,resetTransactions:ge,clearTransactions:M,initTransactionListFilter:h,updateTransactionListFilter:L,getTransactionListPageParams:g,getExportTransactionDataRequestByTransactionFilter:B,loadTransactions:b,loadMonthlyAllTransactions:S,getReconciliationStatements:R,getTransaction:V,saveTransaction:Z,moveAllTransactionsBetweenAccounts:ee,deleteTransaction:W,recognizeReceiptImage:G,cancelRecognizeReceiptImage:U,parseImportDsvFile:ye,parseImportTransaction:Se,importTransactions:he,getImportTransactionsProcess:Me,uploadTransactionPicture:ze,removeUnusedTransactionPicture:Ee,getTransactionPictureUrl:xe,collapseMonthInTransactionList:Ge}});class Ns{name;conditions;constructor(e,a){this.name=e,this.conditions=a}addNewCondition(e,a){let n;switch(e){case $e.TransactionType:n=new Gs([ie.Expense,ie.Income,ie.Transfer]);break;case $e.TransactionCategory:n=new Eo([]);break;case $e.SourceAccount:n=new xo([]);break;case $e.DestinationAccount:n=new ko([]);break;case $e.SourceAmount:n=new Ls(le.Between,[0,0]);break;case $e.DestinationAmount:n=new ws(le.Between,[0,0]);break;case $e.TransactionTag:n=new Es(le.HasAny,[]);break;case $e.Description:n=new xs(le.Contains,"");break;default:n=new Gs([ie.Expense,ie.Income,ie.Transfer]);break}return new jn(n,a?Rt.First:Rt.And)}match(e){if(!this.conditions||this.conditions.length<1)return!0;const a=this.getPostfixExprTokens(),n=[];for(const o of a)if(o===Rt.And||o===Rt.Or){const s=n.pop(),r=n.pop();if(r===void 0||s===void 0)throw new Error("invalid postfix expression");if(o===Rt.And)n.push(r&&s);else if(o===Rt.Or)n.push(r||s);else throw new Error("invalid postfix expression")}else n.push(o.match(e));if(n.length!==1)throw new Error("invalid postfix evaluation result");return n[0]}toExpression(e,a,n){if(!this.conditions||this.conditions.length<1)return"";const o=this.getPostfixExprTokens(),s=[];for(const l of o)if(l===Rt.And||l===Rt.Or){const i=s.pop(),c=s.pop();if(c===void 0||i===void 0)throw new Error("invalid postfix expression");let f=c.textualExpression,A=i.textualExpression;c.operator&&c.operator!==l&&(f=`(${f})`),i.operator&&i.operator!==l&&(A=`(${A})`),s.push({textualExpression:`${f} ${l.toUpperCase()} ${A}`,operator:l})}else s.push({textualExpression:l.toExpression(e,a,n)});if(s.length!==1)throw new Error("invalid postfix evaluation result");const r=s[0];if(!r)throw new Error("invalid postfix evaluation result");return r.textualExpression}getPostfixExprTokens(){const e=[];if(this.conditions.length<1)return e;const a=[],n=this.conditions[0];if(n.relation!==Rt.First)throw new Error('the first condition must have relation "first"');e.push(n.condition);for(const[o,s]of at(this.conditions)){if(s<1)continue;if(o.relation===Rt.First)throw new Error('only the first condition can have relation "first"');const r=o.relation;for(;a.length>0;){const l=a[a.length-1];if((l===Rt.And||l===Rt.Or)&&xi[l]>=xi[r])e.push(l),a.pop();else break}a.push(r),e.push(o.condition)}for(;a.length>0;){const o=a.pop();if(o!==Rt.And&&o!==Rt.Or)throw new Error("invalid operator in stack");e.push(o)}return e}clone(){const e=[];for(const a of this.conditions){const n=jn.parse(a.toJsonObject());n&&e.push(n)}return new Ns(this.name,e)}toJson(){return JSON.stringify({name:this.name,conditions:this.conditions.map(e=>e.toJsonObject())})}static create(){return new Ns("",[])}static parse(e){const a=JSON.parse(e),n=a.name,o=a.conditions;if(typeof n!="string"||!Array.isArray(o))return null;const s=n,r=[];for(const[l,i]of at(o)){const c=jn.parse(l);if(c===null||i===0&&c.relation!==Rt.First)return null;if(i>0&&c.relation===Rt.First)return null;r.push(c)}return new Ns(s,r)}}class jn{condition;relation;constructor(e,a){this.condition=e,this.relation=a}getSupportedOperators(){let e={};switch(this.condition.field){case $e.TransactionType.value:e=Gs.supportedOperators;break;case $e.TransactionCategory.value:e=Eo.supportedOperators;break;case $e.SourceAccount.value:e=xo.supportedOperators;break;case $e.DestinationAccount.value:e=ko.supportedOperators;break;case $e.SourceAmount.value:e=Ls.supportedOperators;break;case $e.DestinationAmount.value:e=ws.supportedOperators;break;case $e.TransactionTag.value:e=Es.supportedOperators;break;case $e.Description.value:e=xs.supportedOperators;break;default:return[]}const a=[];for(const n of ja(e,!0)){const o=pt.valueOf(n);o&&a.push(o)}return a}toJsonObject(){return{condition:{field:this.condition.field,operator:this.condition.operator,value:this.condition.getValueForStore()},relation:this.relation}}static parse(e){if(typeof e!="object"||!e||!("condition"in e)||!("relation"in e))return null;const a=e.condition,n=e.relation;if(typeof a!="object"||!a||!("field"in a)||!("operator"in a)||!("value"in a)||typeof n!="string")return null;const o=a.field,s=a.operator,r=a.value;let l=null;switch(o){case $e.TransactionType.value:s===le.In&&Array.isArray(r)&&(l=new Gs(r));break;case $e.TransactionCategory.value:s===le.In&&Array.isArray(r)&&(l=new Eo(r));break;case $e.SourceAccount.value:s===le.In&&Array.isArray(r)&&(l=new xo(r));break;case $e.DestinationAccount.value:s===le.In&&Array.isArray(r)&&(l=new ko(r));break;case $e.SourceAmount.value:Ls.supportedOperators[s]&&Array.isArray(r)&&r.length===2&&(l=new Ls(s,r));break;case $e.DestinationAmount.value:ws.supportedOperators[s]&&Array.isArray(r)&&r.length===2&&(l=new ws(s,r));break;case $e.TransactionTag.value:Es.supportedOperators[s]&&Array.isArray(r)&&(l=new Es(s,r));break;case $e.Description.value:xs.supportedOperators[s]&&typeof r=="string"&&(l=new xs(s,r));break;default:break}return l===null||n!==Rt.First&&n!==Rt.And&&n!==Rt.Or?null:new jn(l,n)}}class Gs{static supportedOperators={[le.In]:!0};field=tn.TransactionType;operator=le.In;value;constructor(e){this.value=e}getValueForStore(){return this.value}match(e){return this.value.includes(e.type)}toExpression(){return`type IN (${this.value.map(a=>a===ie.Income?"Income":a===ie.Expense?"Expense":a===ie.Transfer?"Transfer":a.toString()).join(", ")})`}}class Eo{static supportedOperators={[le.In]:!0};field=tn.TransactionCategory;operator=le.In;value;constructor(e){this.value=e}getValueForStore(){return this.value}match(e){return this.value.includes(e.primaryCategory?.id??"")||this.value.includes(e.secondaryCategory?.id??e.categoryId)}toExpression(e){return`category IN (${this.value.map(n=>{const o=e[n];return o?!o.parentId||o.parentId==="0"?"":`'${o.name}'`:`'${n}'`}).filter(n=>!!n).join(", ")})`}}class xo{static supportedOperators={[le.In]:!0};field=tn.SourceAccount;operator=le.In;value;constructor(e){this.value=e}getValueForStore(){return this.value}match(e){return this.value.includes(e.sourceAccountId)}toExpression(e,a){return`source_account IN (${this.value.map(o=>{const s=a[o];return s?s.type===Ne.MultiSubAccounts.type?"":`'${s.name}'`:`'${o}'`}).filter(o=>!!o).join(", ")})`}}class ko{static supportedOperators={[le.In]:!0};field=tn.DestinationAccount;operator=le.In;value;constructor(e){this.value=e}getValueForStore(){return this.value}match(e){return this.value.includes(e.destinationAccountId)}toExpression(e,a){return`destination_account IN (${this.value.map(o=>{const s=a[o];return s?s.type===Ne.MultiSubAccounts.type?"":`'${s.name}'`:`'${o}'`}).filter(o=>!!o).join(", ")})`}}class rl{static supportedOperators={[le.Equals]:!0,[le.NotEquals]:!0,[le.GreaterThan]:!0,[le.LessThan]:!0,[le.Between]:!0,[le.NotBetween]:!0};operator=le.Between;value;constructor(e,a){this.operator=e,this.value=a}getValueForStore(){return this.operator===le.Between||this.operator===le.NotBetween?[this.value[0],this.value[1]]:[this.value[0],this.value[0]]}matchAmount(e){switch(this.operator){case le.GreaterThan:return e>this.value[0];case le.LessThan:return e<this.value[0];case le.Equals:return e===this.value[0];case le.NotEquals:return e!==this.value[0];case le.Between:return e>=this.value[0]&&e<=this.value[1];case le.NotBetween:return e<this.value[0]||e>this.value[1];default:return!1}}getExpression(e){let a=this.value[0].toString(10),n=this.value[1].toString(10);switch(a.length>2&&(a=`${a.substring(0,a.length-2)}.${a.substring(a.length-2)}`),n.length>2&&(n=`${n.substring(0,n.length-2)}.${n.substring(n.length-2)}`),this.operator){case le.GreaterThan:return`${e} > ${a}`;case le.LessThan:return`${e} < ${a}`;case le.Equals:return`${e} = ${a}`;case le.NotEquals:return`${e} <> ${a}`;case le.Between:return`(${e} >= ${a} AND ${e} <= ${n})`;case le.NotBetween:return`(${e} < ${a} OR ${e} > ${n})`;default:return""}}}class Ls extends rl{field=tn.SourceAmount;constructor(e,a){super(e,a)}match(e){return super.matchAmount(e.sourceAmount)}toExpression(){return this.getExpression("source_amount")}}class ws extends rl{field=tn.DestinationAmount;constructor(e,a){super(e,a)}match(e){return super.matchAmount(e.destinationAmount)}toExpression(){return this.getExpression("destination_amount")}}class Es{static supportedOperators={[le.IsEmpty]:!0,[le.IsNotEmpty]:!0,[le.Equals]:!0,[le.NotEquals]:!0,[le.HasAny]:!0,[le.HasAll]:!0,[le.NotHasAny]:!0,[le.NotHasAll]:!0};field=tn.TransactionTag;operator=le.HasAny;value;constructor(e,a){this.operator=e,this.value=a}getValueForStore(){return this.operator===le.IsEmpty||this.operator===le.IsNotEmpty?[]:this.value}match(e){const a={};for(const n of e.tagIds)a[n]=!0;if(this.operator===le.IsEmpty||this.value.length<1)return e.tagIds.length<1;if(this.operator===le.IsNotEmpty)return e.tagIds.length>0;if(this.operator===le.Equals||this.operator===le.NotEquals){let n=!0;for(const s of this.value)if(!a[s]){n=!1;break}const o=e.tagIds.length===this.value.length;if(this.operator===le.Equals&&n&&o)return!0;if(this.operator===le.NotEquals&&(!n||!o))return!0}else if(this.operator===le.HasAny||this.operator===le.NotHasAny){let n=!1;for(const o of this.value)if(a[o]){n=!0;break}if(this.operator===le.HasAny&&n)return!0;if(this.operator===le.NotHasAny&&!n)return!0}else if(this.operator===le.HasAll||this.operator===le.NotHasAll){let n=!0;for(const o of this.value)if(!a[o]){n=!1;break}if(this.operator===le.HasAll&&n)return!0;if(this.operator===le.NotHasAll&&!n)return!0}return!1}toExpression(e,a,n){if(this.operator===le.IsEmpty)return"tags IS EMPTY";if(this.operator===le.IsNotEmpty)return"tags IS NOT EMPTY";const o=this.value.map(s=>{const r=n[s];return r?`'${r.name}'`:`'${s}'`}).join(", ");return this.operator===le.Equals?`tags FULL MATCHES (${o})`:this.operator===le.NotEquals?`tags NOT FULL MATCHES (${o})`:this.operator===le.HasAny?`tags HAS ANY (${o})`:this.operator===le.HasAll?`tags HAS ALL (${o})`:this.operator===le.NotHasAny?`tags NOT HAS ANY (${o})`:this.operator===le.NotHasAll?`tags NOT HAS ALL (${o})`:""}}class xs{static supportedOperators={[le.IsEmpty]:!0,[le.IsNotEmpty]:!0,[le.Equals]:!0,[le.NotEquals]:!0,[le.Contains]:!0,[le.NotContains]:!0,[le.StartsWith]:!0,[le.NotStartsWith]:!0,[le.EndsWith]:!0,[le.NotEndsWith]:!0};field=tn.Description;operator=le.Contains;value;constructor(e,a){this.operator=e,this.value=a}getValueForStore(){return this.operator===le.IsEmpty||this.operator===le.IsNotEmpty?"":this.value}match(e){const a=e.comment||"";return this.operator===le.IsEmpty?a.length===0:this.operator===le.IsNotEmpty?a.length>0:this.operator===le.Equals?a===this.value:this.operator===le.NotEquals?a!==this.value:this.operator===le.Contains?a.includes(this.value):this.operator===le.NotContains?!a.includes(this.value):this.operator===le.StartsWith?a.startsWith(this.value):this.operator===le.NotStartsWith?!a.startsWith(this.value):this.operator===le.EndsWith?a.endsWith(this.value):this.operator===le.NotEndsWith?!a.endsWith(this.value):!1}toExpression(){return this.operator===le.IsEmpty?"description IS EMPTY":this.operator===le.IsNotEmpty?"description IS NOT EMPTY":this.operator===le.Equals?`description = '${this.value.replace(/'/g,"''")}'`:this.operator===le.NotEquals?`description <> '${this.value.replace(/'/g,"''")}'`:this.operator===le.Contains?`description CONTAINS '${this.value.replace(/'/g,"''")}'`:this.operator===le.NotContains?`description NOT CONTAINS '${this.value.replace(/'/g,"''")}'`:this.operator===le.StartsWith?`description STARTS WITH '${this.value.replace(/'/g,"''")}'`:this.operator===le.NotStartsWith?`description NOT STARTS WITH '${this.value.replace(/'/g,"''")}'`:this.operator===le.EndsWith?`description ENDS WITH '${this.value.replace(/'/g,"''")}'`:this.operator===le.NotEndsWith?`description NOT ENDS WITH '${this.value.replace(/'/g,"''")}'`:""}}const im=Vt("explores",()=>{const t=ht(),e=kt(),a=da(),n=Na(),o=us(),s=va();function r(v,p,I,d){let x;if(t.appSettings.timezoneUsedForInsightsExplorePage===ia.TransactionTimezone.type&&(x=d.utcOffset),v===Ie.None)return{categoryName:Mt.valueOf(i.value.valueMetric)?.name??"Unknown",categoryNameNeedI18n:!0,categoryId:"none",categoryIdType:"other"};if(v===Ie.Query)return p?{categoryName:p,categoryId:(I+1).toString(10),categoryIdType:"other"}:{categoryName:"format.misc.queryIndex",categoryNameNeedI18n:!0,categoryNameI18nParameters:{index:(I+1).toString(10)},categoryId:(I+1).toString(10),categoryIdType:"other"};if(v===Ie.DateTime){const O=d.time.toString(10);return{categoryName:O,categoryId:O,categoryIdType:"other"}}else if(v===Ie.DateTimeByYearMonthDay){const O=Qo(d.time,x).toString(10);return{categoryName:O,categoryId:O,categoryIdType:"other"}}else if(v===Ie.DateTimeByYearMonth){const O=Js(d.time,x).toString(10);return{categoryName:O,categoryId:O,categoryIdType:"other"}}else if(v===Ie.DateTimeByYearQuarter){const O=Gr(d.time,x).toString(10);return{categoryName:O,categoryId:O,categoryIdType:"other"}}else if(v===Ie.DateTimeByYear){const O=$r(d.time,x).toString(10);return{categoryName:O,categoryId:O,categoryIdType:"other"}}else if(v===Ie.DateTimeByFiscalYear){const O=Sn(d.time,e.currentUserFiscalYearStart,x).toString(10);return{categoryName:O,categoryId:O,categoryIdType:"other"}}else if(v===Ie.DateTimeByDayOfWeek){const O=Qe(x)?ra(d.time,x):Pe(d.time);return{categoryName:O.getWeekDay().name,categoryId:O.getWeekDay().type.toString(10),categoryIdType:"other"}}else if(v===Ie.DateTimeByDayOfMonth){const O=Qe(x)?ra(d.time,x):Pe(d.time);return{categoryName:O.getGregorianCalendarDay().toString(10),categoryId:O.getGregorianCalendarDay().toString(10),categoryIdType:"other"}}else if(v===Ie.DateTimeByMonthOfYear){const O=Qe(x)?ra(d.time,x):Pe(d.time);return{categoryName:O.getGregorianCalendarMonth().toString(10),categoryId:O.getGregorianCalendarMonth().toString(10),categoryIdType:"other"}}else if(v===Ie.DateTimeByQuarterOfYear){const O=Qe(x)?ra(d.time,x):Pe(d.time);return{categoryName:O.getGregorianCalendarQuarter().toString(10),categoryId:O.getGregorianCalendarQuarter().toString(10),categoryIdType:"other"}}else if(v===Ie.TransactionType){let O="Unknown";return d.type===ie.ModifyBalance?O="Modify Balance":d.type===ie.Income?O="Income":d.type===ie.Expense?O="Expense":d.type===ie.Transfer&&(O="Transfer"),{categoryName:O,categoryNameNeedI18n:!0,categoryId:d.type.toString(10),categoryIdType:"transactionType"}}else{if(v===Ie.SourceAccount)return{categoryName:d.sourceAccountName||"Unknown",categoryNameNeedI18n:!d.sourceAccountName,categoryId:d.sourceAccountId||"unknown",categoryIdType:"account"};if(v===Ie.SourceAccountCategory){const O=Ve.valueOf(d.sourceAccount.category);return{categoryName:O?.name||"Unknown",categoryNameNeedI18n:!0,categoryId:O?.type.toString(10)||"unknown",categoryIdType:"other"}}else{if(v===Ie.SourceAccountCurrency)return{categoryName:d.sourceAccount.currency||"Unknown",categoryNameNeedI18n:!d.sourceAccount.currency,categoryId:d.sourceAccount.currency||"unknown",categoryIdType:"other"};if(v===Ie.DestinationAccount)return{categoryName:d.type===ie.Transfer?d.destinationAccountName||"Unknown":"None",categoryNameNeedI18n:d.type!==ie.Transfer||!d.destinationAccountName,categoryId:d.type===ie.Transfer?d.destinationAccountId||"unknown":"none",categoryIdType:"account"};if(v===Ie.DestinationAccountCategory){const O=d.type===ie.Transfer&&d.destinationAccount?Ve.valueOf(d.destinationAccount.category):void 0;return{categoryName:d.type===ie.Transfer?O?.name||"Unknown":"None",categoryNameNeedI18n:!0,categoryId:d.type===ie.Transfer?O?.name||"unknown":"none",categoryIdType:"other"}}else return v===Ie.DestinationAccountCurrency?{categoryName:d.type===ie.Transfer?d.destinationAccount?.currency||"Unknown":"None",categoryNameNeedI18n:d.type!==ie.Transfer||!d.destinationAccount?.currency,categoryId:d.type===ie.Transfer?d.destinationAccount?.currency||"unknown":"none",categoryIdType:"other"}:v===Ie.PrimaryCategory?{categoryName:d.primaryCategory.name,categoryId:d.primaryCategory.id,categoryIdType:"category"}:v===Ie.SecondaryCategory?{categoryName:d.secondaryCategory.name,categoryId:d.categoryId,categoryIdType:"category"}:v===Ie.SourceAmount?{categoryName:d.sourceAmount.toString(10),categoryId:d.sourceAmount.toString(10),categoryIdType:"amount"}:v===Ie.DestinationAmount?{categoryName:d.type===ie.Transfer?d.destinationAmount.toString(10):"None",categoryNameNeedI18n:d.type!==ie.Transfer,categoryId:d.type===ie.Transfer?d.destinationAmount.toString(10):"none",categoryIdType:"other"}:{categoryName:"",categoryId:"",categoryIdType:"other"}}}}function l(v,p,I,d,x,O){const N=r(p,d,x,O);let Q=v[N.categoryId];Q||(Q={categoryName:N.categoryName,categoryNameNeedI18n:N.categoryNameNeedI18n,categoryNameI18nParameters:N.categoryNameI18nParameters,categoryId:N.categoryId,categoryIdType:N.categoryIdType,trasactions:{}},v[N.categoryId]=Q);const j=r(I,d,x,O);let ae=Q.trasactions[j.categoryId];ae||(ae={seriesName:j.categoryName,seriesNameNeedI18n:j.categoryNameNeedI18n,seriesNameI18nParameters:j.categoryNameI18nParameters,seriesId:j.categoryId,seriesIdType:j.categoryIdType,trasactions:[]},Q.trasactions[j.categoryId]=ae),ae.trasactions.push(O)}const i=q({dateRangeType:Is.type,startTime:0,endTime:0,query:[],categoryDimension:Ie.CategoryDimensionDefault.value,seriesDimension:Ie.SeriesDimensionDefault.value,valueMetric:Mt.Default.value,chartType:aa.Default.value}),c=q([]),f=q(!0),A=m(()=>{if(!c.value||c.value.length<1)return[];const v=[];for(const p of c.value){const I=a.allAccountsMap[p.sourceAccountId];if(!I)continue;let d;if(p.destinationAccountId&&p.destinationAccountId!=="0"&&(d=a.allAccountsMap[p.destinationAccountId],!d))continue;const x=n.allTransactionCategoriesMap[p.categoryId];if(!x)continue;const O=n.allTransactionCategoriesMap[x.parentId];if(!O)continue;const N=[];for(const j of p.tagIds){const ae=o.allTransactionTagsMap[j];ae&&N.push(ae)}const Q={...p,id:p.id,time:p.time,utcOffset:p.utcOffset,type:p.type,primaryCategory:O,primaryCategoryName:O.name,secondaryCategory:x,secondaryCategoryName:x.name,sourceAccount:I,sourceAccountName:I.name,destinationAccount:d,destinationAccountName:d?.name,sourceAmount:p.sourceAmount,destinationAmount:p.destinationAmount,hideAmount:p.hideAmount,tags:N,comment:p.comment,geoLocation:p.geoLocation};v.push(Q)}return v}),T=m(()=>{if(!A.value||A.value.length<1)return[];if(!i.value.query||i.value.query.length<1)return A.value;const v=[];for(const p of A.value)for(const I of i.value.query)if(I.match(p)){v.push(p);break}return v}),C=m(()=>{if(!A.value||A.value.length<1)return{};const v=aa.valueOf(i.value.chartType),p=Ie.valueOf(i.value.categoryDimension),I=v?.seriesDimensionRequired?Ie.valueOf(i.value.seriesDimension):Ie.SeriesDimensionDefault;if(!v||!p||!I)return{};const d={};for(const x of A.value){if(!i.value.query||i.value.query.length<1){l(d,p,I,"",0,x);continue}for(const[O,N]of at(i.value.query))if(O.match(x)&&(l(d,p,I,O.name,N,x),p!==Ie.Query))break}return d}),Y=m(()=>{if(!A.value||A.value.length<1)return[];const v=aa.valueOf(i.value.chartType),p=Ie.valueOf(i.value.categoryDimension),I=v?.seriesDimensionRequired?Ie.valueOf(i.value.seriesDimension):Ie.SeriesDimensionDefault,d=Mt.valueOf(i.value.valueMetric);if(!v||!p||!I||!d)return[];const x=e.currentUserDefaultCurrency,O=[],N=C.value;for(const Q of nt(N)){const j=[];let ae=Q.trasactions;if(v===aa.Pie||v===aa.Radar){const de=[];for(const ge of nt(Q.trasactions))de.push(...ge.trasactions);ae={},ae.none={seriesName:d?.name??"Unknown",seriesNameNeedI18n:!0,seriesId:"none",seriesIdType:"other",trasactions:de}}for(const de of nt(ae)){const ge=[];let M=0,h=Number.MAX_SAFE_INTEGER,L=Number.MIN_SAFE_INTEGER;for(const B of de.trasactions){let b=B.sourceAmount;if(B.sourceAccount.currency!==x){const S=s.getExchangedAmount(B.sourceAmount,B.sourceAccount.currency,x);if(Ae(S))b=Math.trunc(S);else continue}ge.push(b),M+=b,b>=0&&b<h&&(h=b),b>L&&(L=b)}let g=0;d===Mt.TransactionCount?g=ge.length:d===Mt.SourceAmountSum?g=M:d===Mt.SourceAmountAverage?g=ge.length>0?Math.trunc(M/ge.length):0:d===Mt.SourceAmountMedian?ge.length>0?(ge.sort((B,b)=>B-b),g=ge[Math.floor(ge.length/2)]):g=0:d===Mt.SourceAmountMinimum?g=h===Number.MAX_SAFE_INTEGER?0:h:d===Mt.SourceAmountMaximum&&(g=L===Number.MIN_SAFE_INTEGER?0:L),j.push({seriesName:de.seriesName,seriesNameNeedI18n:de.seriesNameNeedI18n,seriesNameI18nParameters:de.seriesNameI18nParameters,seriesId:de.seriesId,seriesIdType:de.seriesIdType,value:g})}O.push({categoryName:Q.categoryName,categoryNameNeedI18n:Q.categoryNameNeedI18n,categoryNameI18nParameters:Q.categoryNameI18nParameters,categoryId:Q.categoryId,categoryIdType:Q.categoryIdType,data:j})}return O});function k(v){f.value=v}function $(){i.value.dateRangeType=Is.type,i.value.startTime=0,i.value.endTime=0,i.value.query=[],i.value.chartType=aa.Default.value,i.value.categoryDimension=Ie.CategoryDimensionDefault.value,i.value.seriesDimension=Ie.SeriesDimensionDefault.value,i.value.valueMetric=Mt.Default.value,c.value=[],f.value=!0}function F(v,p){v&&st(v.dateRangeType)?i.value.dateRangeType=v.dateRangeType:i.value.dateRangeType=t.appSettings.insightsExploreDefaultDateRangeType;let I=!0;if(te.isAvailableForScene(i.value.dateRangeType,ha.InsightsExplore)||(i.value.dateRangeType=Is.type,I=!1),I&&i.value.dateRangeType===te.Custom.type)v&&st(v.startTime)?i.value.startTime=v.startTime:i.value.startTime=0,v&&st(v.endTime)?i.value.endTime=v.endTime:i.value.endTime=0;else{const d=$a(i.value.dateRangeType,e.currentUserFirstDayOfWeek,e.currentUserFiscalYearStart);d&&(i.value.dateRangeType=d.dateType,i.value.startTime=d.minTime,i.value.endTime=d.maxTime)}p&&(i.value.query=[],i.value.chartType=aa.Default.value,i.value.categoryDimension=Ie.CategoryDimensionDefault.value,i.value.seriesDimension=Ie.SeriesDimensionDefault.value,i.value.valueMetric=Mt.Default.value)}function H(v){let p=!1;return v&&st(v.dateRangeType)&&i.value.dateRangeType!==v.dateRangeType&&(i.value.dateRangeType=v.dateRangeType,p=!0),v&&st(v.startTime)&&i.value.startTime!==v.startTime&&(i.value.startTime=v.startTime,p=!0),v&&st(v.endTime)&&i.value.endTime!==v.endTime&&(i.value.endTime=v.endTime,p=!0),v&&Qe(v.chartType)&&i.value.chartType!==v.chartType&&(i.value.chartType=v.chartType,p=!0),v&&Qe(v.categoryDimension)&&i.value.categoryDimension!==v.categoryDimension&&(i.value.categoryDimension=v.categoryDimension,p=!0),v&&Qe(v.seriesDimension)&&i.value.seriesDimension!==v.seriesDimension&&(i.value.seriesDimension=v.seriesDimension,p=!0),v&&Qe(v.valueMetric)&&i.value.valueMetric!==v.valueMetric&&(i.value.valueMetric=v.valueMetric,p=!0),i.value.seriesDimension===i.value.categoryDimension&&i.value.seriesDimension!==Ie.SeriesDimensionDefault.value&&(i.value.seriesDimension=Ie.SeriesDimensionDefault.value,p=!0),p}function w(v,p){const I=[];return v&&I.push("id="+v),p&&I.push("activeTab="+p),I.push("dateRangeType="+i.value.dateRangeType),I.push("startTime="+i.value.startTime),I.push("endTime="+i.value.endTime),I.join("&")}function z(v,p){const I=[];if(v==="transactionType")I.push(`type=${p}`);else if(v==="account")I.push(`accountIds=${p}`);else if(v==="category")I.push(`categoryIds=${p}`);else if(v==="amount")I.push(`amountFilter=${encodeURIComponent(ga.EqualTo.toTextualFilter(parseInt(p)))}`);else return"";return I.push("dateType="+i.value.dateRangeType),I.push("minTime="+i.value.startTime),I.push("maxTime="+i.value.endTime),I.join("&")}function y({force:v}){return new Promise((p,I)=>{re.getAllTransactions({startTime:i.value.startTime,endTime:i.value.endTime}).then(d=>{const x=d.data;if(!x||!x.success||!x.result){I({message:"Unable to retrieve all transactions"});return}if(f.value&&k(!1),v&&x.result&&ca(c.value,x.result)){I({message:"Data is up to date",isUpToDate:!0});return}c.value=x.result,p(x.result)}).catch(d=>{X.error("failed to load all transactions",d),d.response&&d.response.data&&d.response.data.errorMessage?I({error:d.response.data}):d.processed?I(d):I({message:"Unable to retrieve all transactions"})})})}return{transactionExploreFilter:i,transactionExploreStateInvalid:f,filteredTransactions:T,categoriedTransactionExploreData:Y,updateTransactionExploreInvalidState:k,resetTransactionExplores:$,initTransactionExploreFilter:F,updateTransactionExploreFilter:H,getTransactionExplorePageParams:w,getTransactionListPageParams:z,loadAllTransactions:y}}),si=Vt("root",()=>{const t=ht(),e=kt(),a=da(),n=Na(),o=us(),s=nm(),r=mn(),l=Mn(),i=Nn(),c=im(),f=va(),A=q(null);function T(de){de&&f.resetLatestExchangeRates(),C(null),c.resetTransactionExplores(),i.resetTransactionStatistics(),l.resetTransactionOverview(),r.resetTransactions(),o.resetTransactionTags(),n.resetTransactionCategories(),s.resetTransactionTemplates(),a.resetAccounts(),de&&e.resetUserBasicInfo()}function C(de){A.value=de}function Y(de,ge){return re.generateOAuth2LoginUrl(de,ge)}function k(de,ge){return re.generateOAuth2LinkUrl(de,ge)}function $(de){return new Promise((ge,M)=>{re.authorize(de).then(h=>{const L=h.data;if(!L||!L.success||!L.result||!L.result.token){M({message:"Unable to log in"});return}if(L.result.need2FA){ge(L.result);return}if(t.appSettings.applicationLock||bs()){const g=_a();(!g||g.username!==L.result.user?.username)&&(En(!0),t.setEnableApplicationLock(!1),t.setEnableApplicationLockWebAuthn(!1),Ln())}t.setApplicationSettingsFromCloudSettings(L.result.applicationCloudSettings),nn(L.result.token),L.result.user&&He(L.result.user)&&e.storeUserBasicInfo(L.result.user),ge(L.result)}).catch(h=>{X.error("failed to login",h),h&&h.processed?M(h):h.response&&h.response.data&&h.response.data.errorMessage?M({error:h.response.data}):M({message:"Unable to log in"})})})}function F({token:de,passcode:ge,recoveryCode:M}){return new Promise((h,L)=>{let g;if(ge)g=re.authorize2FA({passcode:ge,token:de});else if(M)g=re.authorize2FAByBackupCode({recoveryCode:M,token:de});else{L({message:"An error occurred"});return}g.then(B=>{const b=B.data;if(!b||!b.success||!b.result||!b.result.token){L({message:"Unable to verify"});return}if(t.appSettings.applicationLock||bs()){const S=_a();(!S||S.username!==b.result.user?.username)&&(En(!0),t.setEnableApplicationLock(!1),t.setEnableApplicationLockWebAuthn(!1),Ln())}t.setApplicationSettingsFromCloudSettings(b.result.applicationCloudSettings),nn(b.result.token),b.result.user&&He(b.result.user)&&e.storeUserBasicInfo(b.result.user),h(b.result)}).catch(B=>{X.error("failed to verify 2fa",B),B&&B.processed?L(B):B.response&&B.response.data&&B.response.data.errorMessage?L({error:B.response.data}):L({message:"Unable to verify"})})})}function H({password:de,passcode:ge,callbackToken:M}){return new Promise((h,L)=>{re.authorizeOAuth2({password:de,passcode:ge,callbackToken:M}).then(g=>{const B=g.data;if(!B||!B.success||!B.result||!B.result.token){L({message:"Unable to log in"});return}if(t.appSettings.applicationLock||bs()){const b=_a();(!b||b.username!==B.result.user?.username)&&(En(!0),t.setEnableApplicationLock(!1),t.setEnableApplicationLockWebAuthn(!1),Ln())}t.setApplicationSettingsFromCloudSettings(B.result.applicationCloudSettings),nn(B.result.token),B.result.user&&He(B.result.user)&&e.storeUserBasicInfo(B.result.user),h(B.result)}).catch(g=>{X.error("failed to login",g),g&&g.processed?L(g):g.response&&g.response.data&&g.response.data.errorMessage?L({error:g.response.data}):L({message:"Unable to log in"})})})}function w({user:de,presetCategories:ge}){return new Promise((M,h)=>{re.register(de.toRegisterRequest(ge)).then(L=>{const g=L.data;if(!g||!g.success||!g.result){h({message:"Unable to sign up"});return}t.appSettings.applicationLock&&(t.setEnableApplicationLock(!1),t.setEnableApplicationLockWebAuthn(!1),Ln()),g.result.token&&Ke(g.result.token)&&nn(g.result.token),g.result.user&&He(g.result.user)&&e.storeUserBasicInfo(g.result.user),M(g.result)}).catch(L=>{X.error("failed to sign up",L),L.response&&L.response.data&&L.response.data.errorMessage?h({error:L.response.data}):L.processed?h(L):h({message:"Unable to sign up"})})})}function z(){Ec(),T(!1)}function y(){return new Promise((de,ge)=>{re.logout().then(M=>{const h=M.data;if(!h||!h.success||!h.result){ge({message:"Unable to logout"});return}En(!0),Ln(),T(!0),de(h.result)}).catch(M=>{X.error("failed to log out",M),M&&M.processed?ge(M):M.response&&M.response.data&&M.response.data.errorMessage?ge({error:M.response.data}):ge({message:"Unable to logout"})})})}function v(){En(!0),Ln(),T(!0)}function p({token:de,requestNewToken:ge}){return new Promise((M,h)=>{re.verifyEmail({token:de,requestNewToken:ge}).then(L=>{const g=L.data;if(!g||!g.success||!g.result){h({message:"Unable to verify email"});return}g.result.newToken&&Ke(g.result.newToken)&&nn(g.result.newToken),g.result.user&&He(g.result.user)&&e.storeUserBasicInfo(g.result.user),M(g.result)}).catch(L=>{X.error("failed to verify email",L),L&&L.processed?h(L):L.response&&L.response.data&&L.response.data.errorMessage?h({error:L.response.data}):h({message:"Unable to verify email"})})})}function I(de){return new Promise((ge,M)=>{re.resendVerifyEmailByUnloginUser(de).then(h=>{const L=h.data;if(!L||!L.success||!L.result){M({message:"Unable to resend validation email"});return}ge(L.result)}).catch(h=>{X.error("failed to resend verify email",h),h&&h.processed?M(h):h.response&&h.response.data&&h.response.data.errorMessage?M({error:h.response.data}):M({message:"Unable to resend validation email"})})})}function d(de){return new Promise((ge,M)=>{re.requestResetPassword(de).then(h=>{const L=h.data;if(!L||!L.success||!L.result){M({message:"Unable to send password reset email"});return}ge(L.result)}).catch(h=>{X.error("failed to send password reset email",h),h&&h.processed?M(h):h.response&&h.response.data&&h.response.data.errorMessage?M({error:h.response.data}):M({message:"Unable to send password reset email"})})})}function x({email:de,token:ge,password:M}){return new Promise((h,L)=>{re.resetPassword({email:de,token:ge,password:M}).then(g=>{const B=g.data;if(!B||!B.success||!B.result){L({message:"Unable to reset password"});return}h(B.result)}).catch(g=>{X.error("failed to reset password",g),g&&g.processed?L(g):g.response&&g.response.data&&g.response.data.errorMessage?L({error:g.response.data}):L({message:"Unable to reset password"})})})}function O(de){const ge=e.currentUserDefaultCurrency;return new Promise((M,h)=>{re.updateProfile(de).then(L=>{const g=L.data;if(!g||!g.success||!g.result){h({message:"Unable to update user profile"});return}g.result.newToken&&Ke(g.result.newToken)&&nn(g.result.newToken),g.result.user&&He(g.result.user)&&e.storeUserBasicInfo(g.result.user),a.accountListStateInvalid||a.updateAccountListInvalidState(!0),l.transactionOverviewStateInvalid||l.updateTransactionOverviewInvalidState(!0),i.transactionStatisticsStateInvalid||i.updateTransactionStatisticsInvalidState(!0),g.result.user&&g.result.user.defaultCurrency!==ge&&f.resetLatestExchangeRates(),M(g.result)}).catch(L=>{X.error("failed to save user profile",L),L.response&&L.response.data&&L.response.data.errorMessage?h({error:L.response.data}):L.processed?h(L):h({message:"Unable to update user profile"})})})}function N(){return new Promise((de,ge)=>{re.resendVerifyEmailByLoginedUser().then(M=>{const h=M.data;if(!h||!h.success||!h.result){ge({message:"Unable to resend validation email"});return}de(h.result)}).catch(M=>{X.error("failed to resend verify email",M),M&&M.processed?ge(M):M.response&&M.response.data&&M.response.data.errorMessage?ge({error:M.response.data}):ge({message:"Unable to resend validation email"})})})}function Q({accountId:de,password:ge}){return new Promise((M,h)=>{re.clearAllTransactionsOfAccount({accountId:de,password:ge}).then(L=>{const g=L.data;if(!g||!g.success||!g.result){h({message:"Unable to clear user data"});return}a.accountListStateInvalid||a.updateAccountListInvalidState(!0),l.transactionOverviewStateInvalid||l.updateTransactionOverviewInvalidState(!0),i.transactionStatisticsStateInvalid||i.updateTransactionStatisticsInvalidState(!0),M(g.result)}).catch(L=>{X.error("failed to clear user data",L),L&&L.processed?h(L):L.response&&L.response.data&&L.response.data.errorMessage?h({error:L.response.data}):h({message:"Unable to clear user data"})})})}function j({password:de}){return new Promise((ge,M)=>{re.clearAllTransactions({password:de}).then(h=>{const L=h.data;if(!L||!L.success||!L.result){M({message:"Unable to clear user data"});return}a.accountListStateInvalid||a.updateAccountListInvalidState(!0),l.transactionOverviewStateInvalid||l.updateTransactionOverviewInvalidState(!0),i.transactionStatisticsStateInvalid||i.updateTransactionStatisticsInvalidState(!0),ge(L.result)}).catch(h=>{X.error("failed to clear user data",h),h&&h.processed?M(h):h.response&&h.response.data&&h.response.data.errorMessage?M({error:h.response.data}):M({message:"Unable to clear user data"})})})}function ae({password:de}){return new Promise((ge,M)=>{re.clearAllData({password:de}).then(h=>{const L=h.data;if(!L||!L.success||!L.result){M({message:"Unable to clear user data"});return}a.accountListStateInvalid||a.updateAccountListInvalidState(!0),n.transactionCategoryListStateInvalid||n.updateTransactionCategoryListInvalidState(!0),o.transactionTagListStateInvalid||o.updateTransactionTagListInvalidState(!0),l.transactionOverviewStateInvalid||l.updateTransactionOverviewInvalidState(!0),i.transactionStatisticsStateInvalid||i.updateTransactionStatisticsInvalidState(!0),ge(L.result)}).catch(h=>{X.error("failed to clear user data",h),h&&h.processed?M(h):h.response&&h.response.data&&h.response.data.errorMessage?M({error:h.response.data}):M({message:"Unable to clear user data"})})})}return{currentNotification:A,setNotificationContent:C,generateOAuth2LoginUrl:Y,generateOAuth2LinkUrl:k,authorize:$,authorize2FA:F,authorizeOAuth2:H,register:w,lock:z,logout:y,forceLogout:v,verifyEmail:p,resendVerifyEmailByUnloginUser:I,requestResetPassword:d,resetPassword:x,updateUserProfile:O,resendVerifyEmailByLoginedUser:N,clearAllUserTransactionsOfAccount:Q,clearAllUserTransactions:j,clearAllUserData:ae}}),If=Vt("desktopPages",()=>{const t=q(!1);function e(){t.value=!0}function a(){t.value=!1}return{showAddTransactionDialogInTransactionList:t,setShowAddTransactionDialogInTransactionList:e,resetShowAddTransactionDialogInTransactionList:a}}),rm="img",bf=rm+"/ezbookkeeping-192.png";var Oo=(t=>(t.Light="light",t.Dark="dark",t))(Oo||{});function Cf(t,e,a,n){if(!t)return;const o=e?t.querySelector(e):t;if(!o)return;const s=a?t.querySelector(a):t;if(!s)return;const r=s.querySelectorAll(n);if(!r.length)return;const l=o.clientHeight,i=r[0],c=r[r.length-1],f=i.offsetHeight,A=i.offsetTop,T=c.offsetTop,C=c.offsetTop+c.offsetHeight;let k=(A+C)/2-l/2;if(e!==a){const $=window.getComputedStyle(s),F=parseFloat($.paddingTop)||0;k+=F/3*2,r.length>1&&T-A>l-f-F&&(k=A)}else r.length>1&&T-A>l-f&&(k=A);s.scrollTop=Math.max(0,k)}function Df(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Oo.Dark:Oo.Light}function Sf(t,e,a){let n=t?yt.valueOf(t):null,o=e?yt.valueOf(e):null;return n||(n=yt.DefaultExpenseColor),o||(o=yt.DefaultIncomeColor),a?{expenseAmountColor:n.darkThemeColor,incomeAmountColor:o.darkThemeColor}:{expenseAmountColor:n.lightThemeColor,incomeAmountColor:o.lightThemeColor}}function rs(t,e){let a=t?yt.valueOf(t):null,n=e?yt.valueOf(e):null;a||(a=yt.DefaultExpenseColor),n||(n=yt.DefaultIncomeColor);const o=document.querySelector("html");if(!o)return;const s=yt.values();for(const r of s)r.type===a.type?o.classList.contains(r.expenseClassName)||o.classList.add(r.expenseClassName):o.classList.remove(r.expenseClassName),r.type===n.type?o.classList.contains(r.incomeClassName)||o.classList.add(r.incomeClassName):o.classList.remove(r.incomeClassName)}function Mf(t,e){Jl.copy(t,{container:e||document.body})}function Nf({allowedExtensions:t}){return new Promise((e,a)=>{const n=document.createElement("input");n.style.display="none",n.type="file",n.accept=t,n.onchange=o=>{const s=o.target;if(s.files&&s.files.length>0&&s.files[0]){const r=s.files[0],l=new FileReader;l.onload=i=>{const c=i.target?.result;typeof c=="string"?e(c):a(new Error("failed to load file, because file reader result is not string"))},l.onerror=i=>{X.error("failed to load file",i)},l.readAsText(r)}},n.click()})}function Lf(t,e){const a=URL.createObjectURL(e),n=document.createElement("a");n.style.display="none",n.href=a,n.setAttribute("download",t),document.body.appendChild(n),n.click()}function wf(t,e,a,n){return new Promise((o,s)=>{const r=new FileReader;r.onload=l=>{const i=new Image;i.onload=()=>{let c=i.width,f=i.height;if(c>e||f>a){const C=Math.min(e/c,a/f);c=Math.floor(c*C),f=Math.floor(f*C)}const A=document.createElement("canvas"),T=A.getContext("2d");if(!T){s(new Error("failed to get canvas context"));return}A.width=c,A.height=f,T.drawImage(i,0,0,c,f),A.toBlob(C=>{C?o(C):s(new Error("failed to compress image"))},Qt.JPG.contentType,n)},i.onerror=c=>{s(c)},l.target&&l.target.result?i.src=l.target.result:s(new Error("failed to read file"))},r.onerror=l=>{s(l)},r.readAsDataURL(t)})}function lm(){return window.caches?new Promise((t,e)=>{window.caches.keys().then(a=>{const n=[];for(const o of a)n.push(window.caches.delete(o).then(s=>s?(X.info(`cache "${o}" cleared successfully`),Promise.resolve(o)):(X.warn(`failed to clear cache "${o}"`),Promise.reject(o))));Promise.all(n).then(()=>{X.info("all caches cleared successfully"),t()}).catch(()=>{t()})}).catch(a=>{X.warn("failed to clear cache",a),e(a)})}):(X.error("caches API is not supported in this browser"),Promise.reject())}const oi={version:"1.3.0",commitHash:"9294d37",buildTime:""};function ll(t){const e=!t.buildTime,a=t.commitHash;let n=t.version;return n&&(!e||!ii())&&(n+="-dev"),n?n="v"+n:n="unknown",a&&(n+=` (${a.substring(0,Math.min(7,a.length))})`),n}function ii(){return!0}function cm(){return oi}function ri(){return ll(oi)}function um(){return oi.buildTime||""}function Ef(){return ii()?ka()+"/mobile#/":ka()+"/mobile.html#/"}function xf(){return ii()?ka()+"/desktop#/":ka()+"/desktop.html#/"}function kf(t){const{getServerMultiLanguageConfigContent:e,getLocalizedOAuth2LoginText:a,setLanguage:n}=Ze(),o=si(),s=ht(),r=va(),l=`${ri()}`,i=q(""),c=q(""),f=q(""),A=q(""),T=q(""),C=q("passcode"),Y=q(""),k=q(!1),$=q(!1),F=q(!1),H=m(()=>!i.value||!c.value),w=m(()=>C.value==="backupcode"?!A.value:!f.value),z=m(()=>o.generateOAuth2LoginUrl(t,Y.value)),y=m(()=>a(Pu(),Ru())),v=m(()=>e(Yu()));function p(I){if(I.user){const d=n(I.user.language);s.updateLocalizedDefaultSettings(d),rs(I.user.expenseAmountColor,I.user.incomeAmountColor)}s.appSettings.autoUpdateExchangeRatesData&&r.getLatestExchangeRates({silent:!0,force:!1}),I.notificationContent&&o.setNotificationContent(I.notificationContent)}return{version:l,username:i,password:c,passcode:f,backupCode:A,tempToken:T,twoFAVerifyType:C,oauth2ClientSessionId:Y,loggingInByPassword:k,loggingInByOAuth2:$,verifying:F,inputIsEmpty:H,twoFAInputIsEmpty:w,oauth2LoginUrl:z,oauth2LoginDisplayName:y,tips:v,doAfterLogin:p}}function Of(){const{tt:t,getCurrentLanguageTag:e,getLanguageInfo:a,setLanguage:n}=Ze(),o=si(),s=ht(),r=kt(),l=va(),i=q(r.generateNewUserModel(e())),c=q(!1),f=m(()=>{const w=t("Language");return w!=="Language"?`${w} / Language`:w}),A=m({get:()=>e(),set:w=>{const z=i.value.defaultCurrency===s.localeDefaultSettings.currency,y=i.value.firstDayOfWeek===s.localeDefaultSettings.firstDayOfWeek;i.value.language=w;const v=n(w);s.updateLocalizedDefaultSettings(v),z&&(i.value.defaultCurrency=s.localeDefaultSettings.currency),y&&(i.value.firstDayOfWeek=s.localeDefaultSettings.firstDayOfWeek)}}),T=m(()=>{const w=a(A.value);return w?w.displayName:""}),C=m(()=>i.value.username?i.value.password?i.value.confirmPassword?i.value.email?i.value.nickname?i.value.defaultCurrency?"":"Default currency cannot be blank":"Nickname cannot be blank":"Email address cannot be blank":"Password confirmation cannot be blank":"Password cannot be blank":"Username cannot be blank"),Y=m(()=>i.value.password&&i.value.confirmPassword&&i.value.password!==i.value.confirmPassword?"Password and password confirmation do not match":""),k=m(()=>!!C.value),$=m(()=>!!Y.value);function F(w){switch(w){case ve.Income:return t("Income Categories");case ve.Expense:return t("Expense Categories");case ve.Transfer:return t("Transfer Categories");default:return t("Transaction Categories")}}function H(w){if(w.user){const z=n(w.user.language);s.updateLocalizedDefaultSettings(z),rs(w.user.expenseAmountColor,w.user.incomeAmountColor)}s.appSettings.autoUpdateExchangeRatesData&&l.getLatestExchangeRates({silent:!0,force:!1}),w.notificationContent&&o.setNotificationContent(w.notificationContent)}return{user:i,submitting:c,languageTitle:f,currentLocale:A,currentLanguageName:T,inputEmptyProblemMessage:C,inputInvalidProblemMessage:Y,inputIsEmpty:k,inputIsInvalid:$,getCategoryTypeName:F,doAfterSignupSuccess:H}}function Uf(t,e){return{success:!1,errorCode:t,errorMessage:e,path:""}}const mm=Vt("tokens",()=>{const t=ht(),e=kt();function a(){return new Promise((l,i)=>{re.getTokens().then(c=>{const f=c.data;if(!f||!f.success||!f.result){i({message:"Unable to retrieve session list"});return}l(f.result)}).catch(c=>{X.error("failed to load token list",c),c.response&&c.response.data&&c.response.data.errorMessage?i({error:c.response.data}):c.processed?i(c):i({message:"Unable to retrieve session list"})})})}function n(){return new Promise(l=>{re.refreshToken().then(i=>{const c=i.data;c&&c.success&&c.result&&t.setApplicationSettingsFromCloudSettings(c.result.applicationCloudSettings),c&&c.success&&c.result&&c.result.user&&He(c.result.user)&&e.storeUserBasicInfo(c.result.user),c&&c.success&&c.result&&c.result.newToken&&(nn(c.result.newToken),c.result.oldTokenId&&s({tokenId:c.result.oldTokenId,ignoreError:!0})),l(c.result)})})}function o({type:l,expiresInSeconds:i,password:c}){return new Promise((f,A)=>{let T=null;if(l==="api")T=re.generateAPIToken({expiresInSeconds:i,password:c});else if(l==="mcp")T=re.generateMCPToken({expiresInSeconds:i,password:c});else{A({message:"An error occurred"});return}T.then(C=>{const Y=C.data;if(!Y||!Y.success||!Y.result){A({message:"Unable to generate token"});return}f(Y.result)}).catch(C=>{X.error("failed to generate token",C),C.response&&C.response.data&&C.response.data.errorMessage?A({error:C.response.data}):C.processed?A(C):A({message:"Unable to generate token"})})})}function s({tokenId:l,ignoreError:i}){return new Promise((c,f)=>{re.revokeToken({tokenId:l,ignoreError:i}).then(A=>{const T=A.data;if(!T||!T.success||!T.result){f({message:"Unable to logout from this session"});return}c(T.result)}).catch(A=>{X.error("failed to revoke token",A),A.response&&A.response.data&&A.response.data.errorMessage?f({error:A.response.data}):A.processed?f(A):f({message:"Unable to logout from this session"})})})}function r(){return new Promise((l,i)=>{re.revokeAllTokens().then(c=>{const f=c.data;if(!f||!f.success||!f.result){i({message:"Unable to logout all other sessions"});return}l(f.result)}).catch(c=>{X.error("failed to revoke all tokens",c),c.response&&c.response.data&&c.response.data.errorMessage?i({error:c.response.data}):c.processed?i(c):i({message:"Unable to logout all other sessions"})})})}return{getAllTokens:a,refreshTokenAndRevokeOldToken:n,generateToken:o,revokeToken:s,revokeAllTokens:r}}),dm={attestation:"none",authenticatorSelection:{authenticatorAttachment:"platform",requireResidentKey:!1,userVerification:"discouraged"},pubKeyCredParams:[{type:"public-key",alg:-7},{type:"public-key",alg:-257}],timeout:12e4},fm={allowCredentials:[{type:"public-key"}],userVerification:"discouraged",timeout:12e4};function cl(t){const a=new TextDecoder("utf-8").decode(t.response.clientDataJSON);return JSON.parse(a)}function gm(t){const a=ql.decode(t.response.attestationObject).authData,n=new DataView(new ArrayBuffer(2));a.slice(53,55).forEach((l,i)=>n.setUint8(i,l));const s=n.getUint16(0);return a.slice(55+s)}function _s(){return!!window.PublicKeyCredential&&!!navigator.credentials&&na(window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable)}function pm(){return _s()?window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable():Promise.resolve(!1)}function Ff(t,e){if(!window.location||!window.location.hostname)return Promise.reject({notSupported:!0});if(!_s()||!navigator.credentials.create)return Promise.reject({notSupported:!0});const a=ti(),n=`${t.username}|${t.secret}`,o=Object.assign({},dm,{challenge:Os(a),rp:{name:window.location.hostname,id:window.location.hostname},user:{id:Os(n),name:t.username,displayName:e.nickname}});return X.debug("webauthn create options",o),navigator.credentials.create({publicKey:o}).then(s=>{const r=s?cl(s):null,l=s?gm(s):null,i=r&&r.challenge?go(r.challenge):null;if(X.debug("webauthn create raw response",s),s&&s.rawId&&r&&r.type==="webauthn.create"&&i===a){const c={id:Po(s.rawId),clientData:r,publicKey:l,rawCredential:s};return X.debug("webauthn create response",c),c}else return Promise.reject({invalid:!0})})}function Bf(t,e){if(!window.location||!window.location.hostname)return Promise.reject({notSupported:!0});if(!_s()||!navigator.credentials.get)return Promise.reject({notSupported:!0});const a=ti(),n=Object.assign({},fm,{challenge:Os(a),rpId:window.location.hostname});return n.allowCredentials&&n.allowCredentials.length>0&&(n.allowCredentials[0].id=Os(go(e))),X.debug("webauthn get options",n),navigator.credentials.get({publicKey:n}).then(o=>{const s=o?cl(o):null,r=s&&s.challenge?go(s.challenge):null,l=o&&o.response&&o.response.userHandle?rc(o.response.userHandle).split("|"):null;if(X.debug("webauthn get raw response",o),o&&o.rawId&&s&&s.type==="webauthn.get"&&r===a&&l&&l.length===2&&l[0]===t.username){const i={id:Po(o.rawId),userName:l[0],userSecret:l[1],clientData:s,rawCredential:o};return X.debug("webauthn get response",i),i}else return Promise.reject({invalid:!0})})}function Pf(){const{setLanguage:t,initLocale:e}=Ze(),a=si(),n=ht(),o=kt(),s=mm(),r=mn(),l=va(),i=`${ri()}`,c=q(""),f=m(()=>n.appSettings.applicationLockWebAuthn&&Sc()&&_s());function A(Y){return!!Y&&Y.length===6}function T(){r.initTransactionDraft(),s.refreshTokenAndRevokeOldToken().then(Y=>{if(Y.user){const k=t(Y.user.language);n.updateLocalizedDefaultSettings(k),rs(Y.user.expenseAmountColor,Y.user.incomeAmountColor)}Y.notificationContent&&a.setNotificationContent(Y.notificationContent)}),n.appSettings.autoUpdateExchangeRatesData&&l.getLatestExchangeRates({silent:!0,force:!1})}function C(){a.forceLogout(),n.clearAppSettings();const Y=e(o.currentUserLanguage,n.appSettings.timeZone);n.updateLocalizedDefaultSettings(Y),rs(o.currentUserExpenseAmountColor,o.currentUserIncomeAmountColor)}return{version:i,pinCode:c,isWebAuthnAvailable:f,isPinCodeValid:A,doAfterUnlocked:T,doRelogin:C}}function Rf(){const{formatDateTimeToLongDate:t,formatDateTimeToLongMonthDay:e,formatDateTimeToGregorianLikeLongYear:a,formatDateTimeToGregorianLikeLongMonth:n,formatAmountToLocalizedNumeralsWithCurrency:o}=Ze(),s=ht(),r=kt(),l=da(),i=Mn(),c=m({get:()=>s.appSettings.showAmountInHomePage,set:z=>s.setShowAmountInHomePage(z)}),f=m(()=>r.currentUserDefaultCurrency),A=m(()=>l.allAccounts),T=m(()=>{const z=l.getNetAssets(c.value);return o(z,f.value)}),C=m(()=>{const z=l.getTotalAssets(c.value);return o(z,f.value)}),Y=m(()=>{const z=l.getTotalLiabilities(c.value);return o(z,f.value)}),k=m(()=>({today:{displayTime:t(Pe(i.transactionDataRange.today.startTime))},thisWeek:{startTime:e(Pe(i.transactionDataRange.thisWeek.startTime)),endTime:e(Pe(i.transactionDataRange.thisWeek.endTime))},thisMonth:{displayTime:n(Pe(i.transactionDataRange.thisMonth.startTime)),startTime:e(Pe(i.transactionDataRange.thisMonth.startTime)),endTime:e(Pe(i.transactionDataRange.thisMonth.endTime))},thisYear:{displayTime:a(Pe(i.transactionDataRange.thisYear.startTime))}})),$=m(()=>i.transactionOverview);function F(z,y){return c.value?o(z,f.value)+(y?Va:""):o(ta,f.value)}function H(z){return F(z.incomeAmount,z.incompleteIncomeAmount)}function w(z){return F(z.expenseAmount,z.incompleteExpenseAmount)}return{showAmountInHomePage:c,defaultCurrency:f,allAccounts:A,netAssets:T,totalAssets:C,totalLiabilities:Y,displayDateRange:k,transactionOverview:$,getDisplayAmount:F,getDisplayIncomeAmount:H,getDisplayExpenseAmount:w}}const ks={openstreetmap:{tileUrlFormat:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileUrlSubDomains:"abc",minZoom:1,maxZoom:19,defaultZoomLevel:14,website:"https://www.openstreetmap.org",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright" class="external" target="_blank">OpenStreetMap</a> contributors'},"openstreetmap-humanitarian":{tileUrlFormat:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",tileUrlSubDomains:"abc",minZoom:1,maxZoom:19,defaultZoomLevel:14,website:"https://www.hotosm.org",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright" class="external" target="_blank">OpenStreetMap</a> contributors, Tiles style by <a href="https://www.hotosm.org/" class="external" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" class="external" target="_blank">OpenStreetMap France</a>'},opentopomap:{tileUrlFormat:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",tileUrlSubDomains:"abc",minZoom:1,maxZoom:17,defaultZoomLevel:14,website:"https://opentopomap.org",attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright" class="external" target="_blank">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org" class="external" target="_blank">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org" class="external" target="_blank">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/" class="external" target="_blank">CC-BY-SA</a>)'},opnvkarte:{tileUrlFormat:"https://tileserver.memomaps.de/tilegen/{z}/{x}/{y}.png",tileUrlSubDomains:"",minZoom:1,maxZoom:17,defaultZoomLevel:14,website:"https://memomaps.de",attribution:'Map <a href="https://memomaps.de/" class="external" target="_blank">memomaps.de</a> <a href="http://creativecommons.org/licenses/by-sa/2.0/" class="external" target="_blank">CC-BY-SA</a>, map data &copy; <a href="https://www.openstreetmap.org/copyright" class="external" target="_blank">OpenStreetMap</a> contributors'},cyclosm:{tileUrlFormat:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",tileUrlSubDomains:"abc",minZoom:1,maxZoom:19,defaultZoomLevel:14,website:"https://github.com/cyclosm/cyclosm-cartocss-style",attribution:'<a href="https://github.com/cyclosm/cyclosm-cartocss-style/releases" title="CyclOSM - Open Bicycle render" class="external" target="_blank">CyclOSM</a> | Map data: &copy; <a href="https://www.openstreetmap.org/copyright" class="external" target="_blank">OpenStreetMap</a> contributors'},cartodb:{tileUrlFormat:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png",tileUrlSubDomains:"abcd",minZoom:1,maxZoom:20,defaultZoomLevel:14,website:"https://carto.com",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright" class="external" target="_blank">OpenStreetMap</a>, &copy; <a href="https://carto.com/attributions" class="external" target="_blank">CARTO</a>'},tomtom:{tileUrlFormat:"https://{s}.api.tomtom.com/map/1/tile/basic/main/{z}/{x}/{y}.png",tileUrlSubDomains:"abcd",tileUrlExtraParams:[{paramName:"key",paramValueType:"tomtom_key"},{paramName:"language",paramValueType:"language"}],minZoom:1,maxZoom:19,defaultZoomLevel:14,website:"https://tomtom.com",attribution:'<a href="https://tomtom.com" class="external" target="_blank">&copy;  1992 - 2023 TomTom.</a>'},tianditu:{tileUrlFormat:"https://t{s}.tianditu.gov.cn/vec_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",tileUrlSubDomains:"01234567",tileUrlExtraParams:[{paramName:"tk",paramValueType:"tianditu_key"}],annotationUrlFormat:"https://t{s}.tianditu.gov.cn/cva_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",annotationUrlSubDomains:"01234567",annotationUrlExtraParams:[{paramName:"tk",paramValueType:"tianditu_key"}],minZoom:1,maxZoom:18,defaultZoomLevel:14,website:"https://www.tianditu.gov.cn",attribution:'<a href="https://www.tianditu.gov.cn" class="external" target="_blank">天地图</a>'}},ym="modulepreload",hm=function(t,e){return new URL(t,e).href},nr={},sr=function(e,a,n){let o=Promise.resolve();if(a&&a.length>0){let c=function(f){return Promise.all(f.map(A=>Promise.resolve(A).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};const r=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),i=l?.nonce||l?.getAttribute("nonce");o=c(a.map(f=>{if(f=hm(f,n),f in nr)return;nr[f]=!0;const A=f.endsWith(".css"),T=A?'[rel="stylesheet"]':"";if(n)for(let Y=r.length-1;Y>=0;Y--){const k=r[Y];if(k.href===f&&(!A||k.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${T}`))return;const C=document.createElement("link");if(C.rel=A?"stylesheet":ym,A||(C.as="script"),C.crossOrigin="",C.href=f,i&&C.setAttribute("nonce",i),document.head.appendChild(C),A)return new Promise((Y,k)=>{C.addEventListener("load",Y),C.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return o.then(r=>{for(const l of r||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};class sn{static Leaflet=null;mapProvider;constructor(e){this.mapProvider=e}getWebsite(){return this.mapProvider==="custom"?"":ks[this.mapProvider]&&ks[this.mapProvider].website||""}isSupportGetGeoLocationByClick(){return!0}asyncLoadAssets(e){return Promise.all([sr(()=>import("./leaflet-DqUJvPyF.js").then(a=>a.l),__vite__mapDeps([0,1]),import.meta.url),sr(()=>import("./leaflet-DqUJvPyF.js").then(a=>a.a),__vite__mapDeps([0,1]),import.meta.url).then(a=>sn.Leaflet=a)])}createMapInstance(e){const a=ks[this.mapProvider];return this.mapProvider!=="custom"&&!a?null:new Tm(this.mapProvider,a,e)}}class Tm{dependencyLoaded=!1;inited=!1;defaultZoomLevel;minZoomLevel;maxZoomLevel;mapProvider;presetMapTileSource;mapCreateOptions;leafletInstance;leafletTileLayer;leafletAnnotationLayer;leafletZoomControl;leafletAttribution;leafletCenterMarker;constructor(e,a,n){this.dependencyLoaded=!!sn.Leaflet,this.mapProvider=e,this.presetMapTileSource=a,this.mapCreateOptions=n,this.defaultZoomLevel=this.presetMapTileSource?.defaultZoomLevel||Ku(),this.minZoomLevel=this.presetMapTileSource?.minZoom||Qi(),this.maxZoomLevel=this.presetMapTileSource?.maxZoom||Xi()}initMapInstance(e,a){if(!sn.Leaflet)return;const n=sn.Leaflet,o=n.map(e,{center:[a.initCenter.latitude,a.initCenter.longitude],zoom:a.zoomLevel,attributionControl:!1,zoomControl:!1});let s,r,l,i,c,f;this.mapProvider!=="custom"?(s=this.presetMapTileSource?.tileUrlFormat,r=this.presetMapTileSource?.tileUrlSubDomains,l=this.presetMapTileSource?.annotationUrlFormat,i=this.presetMapTileSource?.annotationUrlSubDomains,c=this.presetMapTileSource?.minZoom,f=this.presetMapTileSource?.maxZoom):(s=zu(),l=$u(),c=Qi(),f=Xi()),_i()?(s=re.generateMapProxyTileImageUrl(this.mapProvider,a.language),r=""):this.presetMapTileSource&&this.presetMapTileSource.tileUrlExtraParams&&(s=this.getFinalUrlFormat(this.presetMapTileSource.tileUrlFormat,this.presetMapTileSource.tileUrlExtraParams,a));const A=n.tileLayer(s,{subdomains:r,maxZoom:f,minZoom:c});if(A.addTo(o),l||this.mapProvider==="custom"&&Gu()){_i()?(l=re.generateMapProxyAnnotationImageUrl(this.mapProvider,a.language),i=""):this.presetMapTileSource&&this.presetMapTileSource.annotationUrlExtraParams&&(l=this.getFinalUrlFormat(this.presetMapTileSource.annotationUrlFormat,this.presetMapTileSource.annotationUrlExtraParams,a));const T=n.tileLayer(l,{subdomains:i,maxZoom:f,minZoom:c});T.addTo(o),this.leafletAnnotationLayer=T}if(this.mapCreateOptions.enableZoomControl&&(this.leafletZoomControl=n.control.zoom({zoomInTitle:a.text.zoomIn,zoomOutTitle:a.text.zoomOut}),this.leafletZoomControl.addTo(o)),this.presetMapTileSource&&this.presetMapTileSource.attribution){const T=n.control.attribution({prefix:!1});T.addAttribution(this.presetMapTileSource.attribution),T.addTo(o),this.leafletAttribution=T}o.addEventListener("click",function(T){a.onClick&&a.onClick({latitude:T.latlng.lat,longitude:T.latlng.lng})}),o.addEventListener("zoomanim",function(T){a.onZoomChange&&"zoom"in T&&Ae(T.zoom)&&a.onZoomChange(T.zoom)}),this.leafletInstance=o,this.leafletTileLayer=A,this.inited=!0}getDefaultZoomLevel(){return this.defaultZoomLevel}getMinZoomLevel(){return this.minZoomLevel}getMaxZoomLevel(){return this.maxZoomLevel}getZoomLevel(){return!this.leafletInstance||!na(this.leafletInstance.getZoom)?this.defaultZoomLevel:this.leafletInstance.getZoom()??this.defaultZoomLevel}setMapCenterTo(e,a){this.leafletInstance&&this.leafletInstance.setView([e.latitude,e.longitude],a)}setMapCenterMarker(e){if(!sn.Leaflet||!this.leafletInstance)return;const a=sn.Leaflet;if(this.leafletCenterMarker)this.leafletCenterMarker.setLatLng([e.latitude,e.longitude]);else{const n=a.icon({iconUrl:"img/map-marker-icon.png",iconRetinaUrl:"img/map-marker-icon-2x.png",iconSize:[25,32],iconAnchor:[12,32],shadowUrl:"img/map-marker-shadow.png",shadowSize:[41,32]});this.leafletCenterMarker=a.marker([e.latitude,e.longitude],{icon:n}),this.leafletCenterMarker.addTo(this.leafletInstance)}}removeMapCenterMarker(){!this.leafletInstance||!this.leafletCenterMarker||(this.leafletCenterMarker.remove(),this.leafletCenterMarker=null)}zoomIn(){this.leafletInstance&&this.leafletInstance.zoomIn()}zoomOut(){this.leafletInstance&&this.leafletInstance.zoomOut()}getFinalUrlFormat(e,a,n){const o=[];for(const s of a)s.paramValueType==="tomtom_key"?o.push(s.paramName+"="+Hu()):s.paramValueType==="tianditu_key"?o.push(s.paramName+"="+Wu()):s.paramValueType==="language"&&n.language&&o.push(s.paramName+"="+n.language);return o.length&&(e.indexOf("?")>=0?e=e+"&"+o.join("&"):e=e+"?"+o.join("&")),e}}class Sa{static GoogleMap=null;static ControlPosition={LEFT_TOP:window.google&&window.google.maps&&window.google.maps.ControlPosition?window.google.maps.ControlPosition.LEFT_TOP:5};getWebsite(){return"https://maps.google.com"}isSupportGetGeoLocationByClick(){return!0}asyncLoadAssets(e){return Sa.GoogleMap?Promise.resolve():(window.onGoogleMapCallback||(window.onGoogleMapCallback=()=>{window.google&&(Sa.GoogleMap=window.google.maps,Sa.ControlPosition.LEFT_TOP=window.google&&window.google.maps&&window.google.maps.ControlPosition?window.google.maps.ControlPosition.LEFT_TOP:5)}),ei("js",re.generateGoogleMapJavascriptUrl(e,"onGoogleMapCallback")))}createMapInstance(e){return new vm(e)}}class vm{dependencyLoaded=!1;inited=!1;defaultZoomLevel=14;minZoomLevel=0;maxZoomLevel=19;mapCreateOptions;googleMapInstance=null;googleMapCenterMarker;constructor(e){this.dependencyLoaded=!!Sa.GoogleMap,this.mapCreateOptions=e}initMapInstance(e,a){if(!Sa.GoogleMap)return;const n=Sa.GoogleMap,o=new n.Map(e,{zoom:a.zoomLevel,center:{lat:a.initCenter.latitude,lng:a.initCenter.longitude},maxZoom:19,zoomControl:!!this.mapCreateOptions.enableZoomControl,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,gestureHandling:"greedy",zoomControlOptions:this.mapCreateOptions.enableZoomControl?{position:Sa.ControlPosition.LEFT_TOP}:void 0});o.addListener("click",function(s){a.onClick&&a.onClick({latitude:s.latLng.lat(),longitude:s.latLng.lng()})}),o.addListener("zoom_changed",function(){a.onZoomChange&&na(o.getZoom)&&a.onZoomChange(o.getZoom())}),this.googleMapInstance=o,this.inited=!0}getDefaultZoomLevel(){return this.defaultZoomLevel}getMinZoomLevel(){return this.minZoomLevel}getMaxZoomLevel(){return this.maxZoomLevel}getZoomLevel(){return!this.googleMapInstance||!na(this.googleMapInstance.getZoom)?this.defaultZoomLevel:this.googleMapInstance.getZoom()??this.defaultZoomLevel}setMapCenterTo(e,a){!Sa.GoogleMap||!this.googleMapInstance||(this.googleMapInstance.setCenter({lat:e.latitude,lng:e.longitude}),this.googleMapInstance.setZoom(a))}setMapCenterMarker(e){if(!Sa.GoogleMap||!this.googleMapInstance)return;const a=Sa.GoogleMap;this.googleMapCenterMarker?this.googleMapCenterMarker.setPosition({lat:e.latitude,lng:e.longitude}):this.googleMapCenterMarker=new a.Marker({position:{lat:e.latitude,lng:e.longitude},map:this.googleMapInstance})}zoomIn(){this.googleMapInstance&&this.googleMapInstance.setZoom(this.googleMapInstance.getZoom()+1)}zoomOut(){this.googleMapInstance&&this.googleMapInstance.setZoom(this.googleMapInstance.getZoom()-1)}removeMapCenterMarker(){!this.googleMapInstance||!this.googleMapCenterMarker||(this.googleMapCenterMarker.setMap(null),this.googleMapCenterMarker=null)}}class Lt{static BMap=null;static BMAP_NAVIGATION_CONTROL_ZOOM=window.BMAP_NAVIGATION_CONTROL_ZOOM||3;static BMAP_ANCHOR_TOP_LEFT=window.BMAP_ANCHOR_TOP_LEFT||0;static COORDINATES_WGS84=window.COORDINATES_WGS84||1;static COORDINATES_BD09=window.COORDINATES_BD09||5;getWebsite(){return"https://map.baidu.com"}isSupportGetGeoLocationByClick(){return!1}asyncLoadAssets(e){return Lt.BMap?Promise.resolve():(window.onBMapCallback||(window.onBMapCallback=()=>{Lt.BMap=window.BMap,Lt.BMAP_NAVIGATION_CONTROL_ZOOM=window.BMAP_NAVIGATION_CONTROL_ZOOM||3,Lt.BMAP_ANCHOR_TOP_LEFT=window.BMAP_ANCHOR_TOP_LEFT||0,Lt.COORDINATES_WGS84=window.COORDINATES_WGS84||1,Lt.COORDINATES_BD09=window.COORDINATES_BD09||5}),ei("js",re.generateBaiduMapJavascriptUrl("onBMapCallback")))}createMapInstance(e){return new Am(e)}}class Am{dependencyLoaded=!1;inited=!1;defaultZoomLevel=15;minZoomLevel=4;maxZoomLevel=19;mapCreateOptions;baiduMapInstance=null;baiduMapConverter=null;baiduMapNavigationControl=null;baiduMapCenterPosition=null;baiduMapCenterMarker;constructor(e){this.dependencyLoaded=!!Lt.BMap,this.mapCreateOptions=e}initMapInstance(e,a){if(!Lt.BMap)return;const n=Lt.BMap,o=new n.Map(e,{maxZoom:19});o.enableScrollWheelZoom(),this.mapCreateOptions.enableZoomControl&&(this.baiduMapNavigationControl=new n.NavigationControl({type:Lt.BMAP_NAVIGATION_CONTROL_ZOOM,anchor:Lt.BMAP_ANCHOR_TOP_LEFT}),o.addControl(this.baiduMapNavigationControl)),o.centerAndZoom(new n.Point(a.initCenter.longitude,a.initCenter.latitude),a.zoomLevel),o.addEventListener("click",function(s){a.onClick&&a.onClick({latitude:s.point.lat,longitude:s.point.lng})}),o.addEventListener("zoomend",function(){a.onZoomChange&&na(o.getZoom)&&a.onZoomChange(o.getZoom())}),this.baiduMapInstance=o,this.baiduMapConverter=new n.Convertor,this.inited=!0}getDefaultZoomLevel(){return this.defaultZoomLevel}getMinZoomLevel(){if(!this.baiduMapInstance||!na(this.baiduMapInstance.getMapType))return this.minZoomLevel;const e=this.baiduMapInstance.getMapType();return!e||!na(e.getMinZoom)?this.minZoomLevel:e.getMinZoom()??this.minZoomLevel}getMaxZoomLevel(){if(!this.baiduMapInstance||!na(this.baiduMapInstance.getMapType))return this.maxZoomLevel;const e=this.baiduMapInstance.getMapType();return!e||!na(e.getMaxZoom)?this.maxZoomLevel:e.getMaxZoom()??this.maxZoomLevel}getZoomLevel(){return!this.baiduMapInstance||!na(this.baiduMapInstance.getZoom)?this.defaultZoomLevel:this.baiduMapInstance.getZoom()??this.defaultZoomLevel}setMapCenterTo(e,a){if(!Lt.BMap||!this.baiduMapInstance)return;const n=Lt.BMap;if(this.baiduMapCenterPosition&&this.baiduMapCenterPosition.originalLongitude===e.longitude&&this.baiduMapCenterPosition.originalLatitude===e.latitude&&this.baiduMapCenterPosition.convertedLongitude&&this.baiduMapCenterPosition.convertedLatitude){this.baiduMapInstance.centerAndZoom(new n.Point(this.baiduMapCenterPosition.convertedLongitude,this.baiduMapCenterPosition.convertedLatitude),a);return}this.baiduMapCenterPosition={originalLongitude:e.longitude,originalLatitude:e.latitude,convertedLongitude:null,convertedLatitude:null};const o=new n.Point(e.longitude,e.latitude);this.baiduMapConverter?this.baiduMapConverter.translate([o],Lt.COORDINATES_WGS84,Lt.COORDINATES_BD09,s=>{let r=o;s.status!==0||!s.points?X.warn("baidu map geo position convert failed"):(r=s.points[0],this.baiduMapCenterPosition.convertedLongitude=r.lng,this.baiduMapCenterPosition.convertedLatitude=r.lat),this.baiduMapInstance.centerAndZoom(r,a)}):this.baiduMapInstance.centerAndZoom(o,a)}setMapCenterMarker(e){if(!Lt.BMap||!this.baiduMapInstance)return;const a=Lt.BMap;if(this.baiduMapCenterPosition&&this.baiduMapCenterPosition.originalLongitude===e.longitude&&this.baiduMapCenterPosition.originalLatitude===e.latitude&&this.baiduMapCenterPosition.convertedLongitude&&this.baiduMapCenterPosition.convertedLatitude){this.setMaker(new a.Point(this.baiduMapCenterPosition.convertedLongitude,this.baiduMapCenterPosition.convertedLatitude));return}const n=new a.Point(e.longitude,e.latitude);this.baiduMapConverter?this.baiduMapConverter.translate([n],Lt.COORDINATES_WGS84,Lt.COORDINATES_BD09,o=>{let s=n;o.status!==0||!o.points?X.warn("baidu map geo position convert failed"):s=o.points[0],this.setMaker(s)}):this.setMaker(n)}removeMapCenterMarker(){!this.baiduMapInstance||!this.baiduMapCenterMarker||(this.baiduMapInstance.removeOverlay(this.baiduMapCenterMarker),this.baiduMapCenterMarker=null)}zoomIn(){this.baiduMapInstance&&this.baiduMapInstance.zoomIn()}zoomOut(){this.baiduMapInstance&&this.baiduMapInstance.zoomOut()}setMaker(e){if(!Lt.BMap||!this.baiduMapInstance)return;const a=Lt.BMap;this.baiduMapCenterMarker?this.baiduMapCenterMarker.setPosition(e):(this.baiduMapCenterMarker=new a.Marker(e),this.baiduMapInstance.addOverlay(this.baiduMapCenterMarker))}}class pa{static AMap=null;getWebsite(){return"https://www.amap.com"}isSupportGetGeoLocationByClick(){return!1}asyncLoadAssets(e){if(pa.AMap)return Promise.resolve();if(!window._AMapSecurityConfig){const a={};co()==="internalproxy"?a.serviceHost=re.generateAmapApiInternalProxyUrl():co()==="externalproxy"?a.serviceHost=qu():co()==="plaintext"&&(a.securityJsCode=_u()),window._AMapSecurityConfig=a}return window.onAMapCallback||(window.onAMapCallback=()=>{pa.AMap=window.AMap}),ei("js",re.generateAmapJavascriptUrl("onAMapCallback"))}createMapInstance(e){return new Im(e)}}class Im{dependencyLoaded=!1;inited=!1;defaultZoomLevel=14;minZoomLevel=2;maxZoomLevel=19;mapCreateOptions;amapInstance=null;amapToolbar=null;amapCenterPosition=null;amapCenterMarker;constructor(e){this.dependencyLoaded=!!pa.AMap,this.mapCreateOptions=e}initMapInstance(e,a){if(!pa.AMap)return;const n=pa.AMap,o=new n.Map(e,{zoom:a.zoomLevel,center:[a.initCenter.longitude,a.initCenter.latitude],zooms:[1,19],jogEnable:!1});this.mapCreateOptions.enableZoomControl&&(this.amapToolbar=new n.ToolBar({position:"LT"}),o.addControl(this.amapToolbar)),o.on("click",function(s){a.onClick&&a.onClick({latitude:s.lnglat.lat,longitude:s.lnglat.lng})}),o.on("zoomend",function(){a.onZoomChange&&na(o.getZoom)&&a.onZoomChange(o.getZoom())}),this.amapInstance=o,this.inited=!0}getDefaultZoomLevel(){return this.defaultZoomLevel}getMinZoomLevel(){if(!this.amapInstance||!na(this.amapInstance.getZooms))return this.minZoomLevel;const e=this.amapInstance.getZooms();return!e||!xt(e)||e.length!==2?this.minZoomLevel:e[0]}getMaxZoomLevel(){if(!this.amapInstance||!na(this.amapInstance.getZooms))return this.maxZoomLevel;const e=this.amapInstance.getZooms();return!e||!xt(e)||e.length!==2?this.maxZoomLevel:e[1]}getZoomLevel(){return!this.amapInstance||!na(this.amapInstance.getZoom)?this.defaultZoomLevel:this.amapInstance?.getZoom()??this.defaultZoomLevel}setMapCenterTo(e,a){if(!pa.AMap||!this.amapInstance)return;const n=pa.AMap;if(this.amapCenterPosition&&this.amapCenterPosition.originalLongitude===e.longitude&&this.amapCenterPosition.originalLatitude===e.latitude&&this.amapCenterPosition.convertedLongitude&&this.amapCenterPosition.convertedLatitude){this.amapInstance.setZoomAndCenter(a,new n.LngLat(this.amapCenterPosition.convertedLongitude,this.amapCenterPosition.convertedLatitude));return}this.amapCenterPosition={originalLongitude:e.longitude,originalLatitude:e.latitude,convertedLongitude:null,convertedLatitude:null};const o=new n.LngLat(e.longitude,e.latitude);n.convertFrom(o,"gps",(s,r)=>{let l=o;r.info!=="ok"||!r.locations?X.warn("amap geo position convert failed"):(l=r.locations[0],this.amapCenterPosition.convertedLongitude=l.getLng(),this.amapCenterPosition.convertedLatitude=l.getLat()),this.amapInstance.setZoomAndCenter(a,l)})}setMapCenterMarker(e){if(!pa.AMap||!this.amapInstance)return;const a=pa.AMap;if(this.amapCenterPosition&&this.amapCenterPosition.originalLongitude===e.longitude&&this.amapCenterPosition.originalLatitude===e.latitude&&this.amapCenterPosition.convertedLongitude&&this.amapCenterPosition.convertedLatitude){this.setMaker(new a.LngLat(this.amapCenterPosition.convertedLongitude,this.amapCenterPosition.convertedLatitude));return}const n=new a.LngLat(e.longitude,e.latitude);a.convertFrom(n,"gps",(o,s)=>{let r=n;s.info!=="ok"||!s.locations?X.warn("amap geo position convert failed"):r=s.locations[0],this.setMaker(r)})}removeMapCenterMarker(){!this.amapInstance||!this.amapCenterMarker||(this.amapInstance.remove(this.amapCenterMarker),this.amapCenterMarker=null)}zoomIn(){this.amapInstance&&this.amapInstance.zoomIn()}zoomOut(){this.amapInstance&&this.amapInstance.zoomOut()}setMaker(e){if(!pa.AMap||!this.amapInstance)return;const a=pa.AMap;this.amapCenterMarker?this.amapCenterMarker.setPosition(e):(this.amapCenterMarker=new a.Marker({position:e}),this.amapInstance.add(this.amapCenterMarker))}}let Wa=null;function Yf(t){const e=al();ks[e]||e==="custom"?Wa=new sn(e):e==="googlemap"?Wa=new Sa:e==="baidumap"?Wa=new Lt:e==="amap"&&(Wa=new pa),Wa&&Wa.asyncLoadAssets(t)}function bm(){return Wa?.getWebsite()||""}function zf(){return Wa?.isSupportGetGeoLocationByClick()||!1}function Cm(t){return Wa?.createMapInstance(t)||null}const $f=ls({__name:"MapView",props:{height:{},mapClass:{},mapStyle:{},enableZoomControl:{type:Boolean},geoLocation:{}},emits:["click"],setup(t,{expose:e,emit:a}){const n=t,o=a,{tt:s,getCurrentLanguageInfo:r}=Ze(),l=Uo("mapContainer"),i=q(Cm({enableZoomControl:n.enableZoomControl})),c=q({latitude:0,longitude:0}),f=q(1),A=m(()=>!!i.value),T=m(()=>i.value?.dependencyLoaded||!1),C=m(()=>{const z=Object.assign({},n.mapStyle);return n.height&&(z.height=n.height),(!A.value||!T.value)&&(z.height="0"),z});function Y(){let z=!1,y=!1;if(!(!A.value||!T.value||!i.value)){if(n.geoLocation&&(n.geoLocation.longitude||n.geoLocation.latitude)?(c.value.latitude!==n.geoLocation.latitude||c.value.longitude!==n.geoLocation.longitude)&&(c.value.latitude=n.geoLocation.latitude,c.value.longitude=n.geoLocation.longitude,f.value=i.value.getDefaultZoomLevel(),y=!0):(!n.geoLocation||!n.geoLocation.longitude&&!n.geoLocation.latitude)&&(c.value.latitude||c.value.longitude)&&(c.value.latitude=0,c.value.longitude=0,f.value=i.value.getMinZoomLevel(),y=!0),!i.value.inited){const v=r();i.value.initMapInstance(l.value,{language:v?.alternativeLanguageTag,initCenter:c.value,zoomLevel:f.value,text:{zoomIn:s("Zoom in"),zoomOut:s("Zoom out")},onClick:p=>{o("click",p)},onZoomChange(p){Ae(p)?f.value=p:i.value&&(f.value=Math.round(i.value.getZoomLevel()))}}),i.value.inited&&(z=!0)}(z||y)&&i.value.setMapCenterTo(c.value,f.value),y&&f.value>i.value.getMinZoomLevel()?i.value.setMapCenterMarker(c.value):y&&f.value<=i.value.getMinZoomLevel()&&i.value.removeMapCenterMarker()}}function k(z){i.value&&z&&i.value.setMapCenterMarker(z)}function $(){return!A.value||!T.value||!i.value?!1:f.value<i.value.getMaxZoomLevel()}function F(){return!A.value||!T.value||!i.value?!1:f.value>i.value.getMinZoomLevel()}function H(){i.value&&i.value.zoomIn()}function w(){i.value&&i.value.zoomOut()}return e({initMapView:Y,setMarkerPosition:k,allowZoomIn:$,allowZoomOut:F,zoomIn:H,zoomOut:w}),(z,y)=>(Oa(),rn(dr,null,[An("div",{ref_key:"mapContainer",ref:l,class:Pn("map-view-container"+(t.mapClass?` ${t.mapClass}`:"")),style:fr(C.value)},null,6),!A.value||!T.value?Ci(z.$slots,"error-title",{key:0,mapSupported:A.value,mapDependencyLoaded:T.value}):kn("",!0),!A.value||!T.value?Ci(z.$slots,"error-content",{key:1,mapSupported:A.value,mapDependencyLoaded:T.value}):kn("",!0)],64))}});var Dm=(t=>(t.Transaction="transaction",t.Template="template",t))(Dm||{}),Sm=(t=>(t.Add="add",t.Edit="edit",t.View="view",t))(Sm||{}),Mm=(t=>(t.Getting="getting",t.Success="success",t.Error="error",t))(Mm||{});function Gf(t,e,a){const{tt:n,getAllTimezones:o,getCurrentNumeralSystemType:s,getTimezoneDifferenceDisplayText:r,formatAmountToLocalizedNumeralsWithCurrency:l,getAdaptiveAmountRate:i,getCategorizedAccountsWithDisplayBalance:c}=Ze(),f=ht(),A=kt(),T=da(),C=Na(),Y=us(),k=mn(),$=va(),F=!!navigator.geolocation,H=q(e??"add"),w=q(null),z=q(null),y=q(null),v=q(""),p=q(!0),I=q(!1),d=q(!1),x=q(null),O=q(!1),N=q(_(a)),Q=m(()=>s()),j=m(()=>Ta(N.value.time)),ae=m(()=>f.appSettings.showAccountBalance),de=m(()=>A.currentUserDefaultCurrency),ge=m(()=>A.currentUserDefaultAccountId),M=m(()=>A.currentUserFirstDayOfWeek),h=m(()=>A.currentUserCoordinateDisplayType),L=m(()=>o(N.value.time,!0)),g=m(()=>T.allPlainAccounts),B=m(()=>T.allVisiblePlainAccounts),b=m(()=>T.allAccountsMap),S=m(()=>c(B.value,ae.value)),R=m(()=>C.allTransactionCategories),V=m(()=>C.allTransactionCategoriesMap),Z=m(()=>Y.allTransactionTags),ee=m(()=>Y.allTransactionTagsMap),W=m(()=>B.value&&B.value[0]?B.value[0].id:void 0),G=m(()=>C.hasVisibleExpenseCategories),U=m(()=>C.hasVisibleIncomeCategories),ye=m(()=>C.hasVisibleTransferCategories),Se=m(()=>t!=="transaction"||H.value!=="add"&&H.value!=="edit"?!1:!xt(N.value.pictures)||N.value.pictures.length<om),he=m(()=>{if(t==="transaction")return H.value==="add"?"Add Transaction":H.value==="edit"?"Edit Transaction":"Transaction Detail";if(t==="template"&&N.value.templateType===Yt.Normal.type){if(H.value==="add")return"Add Transaction Template";if(H.value==="edit")return"Edit Transaction Template"}else if(t==="template"&&N.value.templateType===Yt.Schedule.type){if(H.value==="add")return"Add Scheduled Transaction";if(H.value==="edit")return"Edit Scheduled Transaction"}return""}),Me=m(()=>H.value==="add"?"Add":"Save"),ze=m(()=>H.value==="view"?"Close":"Cancel"),Ee=m(()=>N.value.type===ie.Expense?"Expense Amount":N.value.type===ie.Income?"Income Amount":N.value.type===ie.Transfer?"Transfer Out Amount":"Amount"),xe=m(()=>{const we=b.value[N.value.sourceAccountId],Nt=n(Ee.value);if(!we||we.currency===de.value||!N.value.sourceAmount||N.value.hideAmount)return Nt;const Ft=$.latestExchangeRateMap[we.currency],La=$.latestExchangeRateMap[de.value];if(!Ft||!Ft.rate||!La||!La.rate)return Nt;let fa=Xo(N.value.sourceAmount,Ft.rate,La.rate);if(!fa)return Nt;fa=Math.trunc(fa);const an=Ot(fa,N.value.hideAmount,de.value);return Nt+` (${an})`}),Ge=m(()=>N.value.type===ie.Expense||N.value.type===ie.Income?"Account":N.value.type===ie.Transfer?"Source Account":"Account"),E=m(()=>{const we=b.value[N.value.sourceAccountId],Nt=b.value[N.value.destinationAccountId];if(!we||!Nt||we.currency===Nt.currency)return n("Transfer In Amount");const Ft=$.latestExchangeRateMap[we.currency],La=$.latestExchangeRateMap[Nt.currency],fa=i(N.value.sourceAmount,N.value.destinationAmount,Ft,La);return fa?n("Transfer In Amount")+` (${fa})`:n("Transfer In Amount")}),fe=m(()=>N.value.sourceAccountId?bt.findAccountNameById(g.value,N.value.sourceAccountId)||"":n("None")),ue=m(()=>N.value.destinationAccountId?bt.findAccountNameById(g.value,N.value.destinationAccountId)||"":n("None")),ce=m(()=>{const we=b.value[N.value.sourceAccountId];return we?we.currency:de.value}),ne=m(()=>{const we=b.value[N.value.destinationAccountId];return we?we.currency:de.value}),oe=m(()=>`UTC${Q.value.replaceWesternArabicDigitsToLocalizedDigits(Cn(N.value.utcOffset))}`),Te=m(()=>r(N.value.time,N.value.utcOffset)),Oe=m(()=>x.value==="success"?"":x.value==="getting"?n("Getting Location..."):n("No Location")),We=m(()=>{if(N.value.type===ie.Expense){if(!N.value.expenseCategoryId||N.value.expenseCategoryId==="")return"Transaction category cannot be blank";if(!N.value.sourceAccountId||N.value.sourceAccountId==="")return"Transaction account cannot be blank"}else if(N.value.type===ie.Income){if(!N.value.incomeCategoryId||N.value.incomeCategoryId==="")return"Transaction category cannot be blank";if(!N.value.sourceAccountId||N.value.sourceAccountId==="")return"Transaction account cannot be blank"}else if(N.value.type===ie.Transfer){if(!N.value.transferCategoryId||N.value.transferCategoryId==="")return"Transaction category cannot be blank";if(!N.value.sourceAccountId||N.value.sourceAccountId==="")return"Source account cannot be blank";if(!N.value.destinationAccountId||N.value.destinationAccountId==="")return"Destination account cannot be blank"}return t==="template"&&N.value instanceof Xa&&!N.value.name?"Template name cannot be blank":null}),Be=m(()=>!!We.value);function Tt(){return _o(Zs(za())).getUnixTime()}function _(we){const Nt=Tt(),Ft=f.appSettings.timeZone;let La=ie.Expense;we===ie.Income?La=ie.Income:we===ie.Transfer&&(La=ie.Transfer);let fa=Fa.createNewTransaction(La,Nt,Ft,Ta(Nt,Ft));return t==="template"&&(fa=Xa.createNewTransactionTemplate(fa)),fa}function ke(we){N.value.time=we,Fe(N.value.timeZone??"")}function Fe(we){const Nt=N.value.utcOffset;for(const Ft of L.value)if(Ft.name===we){N.value.timeZone=Ft.name,N.value.utcOffset=Ft.utcOffsetMinutes;break}N.value.time=N.value.time-(N.value.utcOffset-Nt)*60}function dt(we,Nt){if(we){const Ft=N.value.sourceAccountId;N.value.sourceAccountId=N.value.destinationAccountId,N.value.destinationAccountId=Ft}if(Nt){const Ft=N.value.sourceAmount;N.value.sourceAmount=N.value.destinationAmount,N.value.destinationAmount=Ft}}function Ot(we,Nt,Ft){return l(Nt?ta:we,Ft)}function Gt(we){return k.getTransactionPictureUrl(we)}return qa(()=>N.value.sourceAmount,(we,Nt)=>{H.value==="view"||p.value||k.setTransactionSuitableDestinationAmount(N.value,Nt,we)}),qa(()=>N.value.destinationAmount,we=>{H.value==="view"||p.value||(N.value.type===ie.Expense||N.value.type===ie.Income)&&(N.value.sourceAmount=we)}),{isSupportGeoLocation:F,mode:H,editId:w,addByTemplateId:z,duplicateFromId:y,clientSessionId:v,loading:p,submitting:I,uploadingPicture:d,geoLocationStatus:x,setGeoLocationByClickMap:O,transaction:N,numeralSystem:Q,currentTimezoneOffsetMinutes:j,showAccountBalance:ae,defaultCurrency:de,defaultAccountId:ge,firstDayOfWeek:M,coordinateDisplayType:h,allTimezones:L,allAccounts:g,allVisibleAccounts:B,allAccountsMap:b,allVisibleCategorizedAccounts:S,allCategories:R,allCategoriesMap:V,allTags:Z,allTagsMap:ee,firstVisibleAccountId:W,hasVisibleExpenseCategories:G,hasVisibleIncomeCategories:U,hasVisibleTransferCategories:ye,canAddTransactionPicture:Se,title:he,saveButtonTitle:Me,cancelButtonTitle:ze,sourceAmountName:Ee,sourceAmountTitle:xe,sourceAccountTitle:Ge,transferInAmountTitle:E,sourceAccountName:fe,destinationAccountName:ue,sourceAccountCurrency:ce,destinationAccountCurrency:ne,transactionDisplayTimezone:oe,transactionTimezoneTimeDifference:Te,geoLocationStatusInfo:Oe,inputEmptyProblemMessage:We,inputIsEmpty:Be,createNewTransactionModel:_,updateTransactionTime:ke,updateTransactionTimezone:Fe,swapTransactionData:dt,getDisplayAmount:Ot,getTransactionPictureUrl:Gt}}function Kf(t,e){if(!t)return"";t=br(t);const a=Ht.valueOf(e)||Ht.Default,n=or(t.latitude,"N","S",a.displayFormat,a.directionFormat),o=or(t.longitude,"E","W",a.displayFormat,a.directionFormat);return a.displayOrder===To.LatitudeLongitude?`${n}, ${o}`:a.displayOrder===To.LongitudeLatitude?`${o}, ${n}`:""}function or(t,e,a,n,o){let s="",r="";if(o===vo.Signed?s=t>=0?"":"-":o===vo.Directional&&(r=t>=0?e:a),t=Math.abs(t),n===Cs.DecimalDegrees)return`${s}${t.toFixed(6)}${r}`;if(n===Cs.DecimalMinutes){const l=Math.trunc(t),i=(t-l)*60;return`${s}${l}°${i.toFixed(5)}'${r}`}else if(n===Cs.DegreesMinutesSeconds){const l=Math.trunc(t),i=Math.trunc((t-l)*60),c=(t-l-i/60)*3600;return`${s}${l}°${i}'${c.toFixed(4)}"${r}`}else return""}function Hf(t,e,a,n,o,s,r,l,i,c){if(Qe(i.time)&&(t.time=i.time,t.utcOffset=Ta(t.time,t.timeZone)),!i.type&&i.categoryId&&i.categoryId!=="0"&&n[i.categoryId]){const f=n[i.categoryId],A=wo(f.type);Ae(A)&&(t.type=A)}if(Qe(i.amount)&&(t.sourceAmount=i.amount),Qe(i.destinationAmount)&&(t.destinationAmount=i.destinationAmount),a[ve.Expense]&&a[ve.Expense].length&&(i.categoryId&&i.categoryId!=="0"&&(mo(a[ve.Expense],i.categoryId)?t.expenseCategoryId=i.categoryId:t.expenseCategoryId=fo(a[ve.Expense],i.categoryId)),t.expenseCategoryId||(t.expenseCategoryId=Qa(a[ve.Expense]))),a[ve.Income]&&a[ve.Income].length&&(i.categoryId&&i.categoryId!=="0"&&(mo(a[ve.Income],i.categoryId)?t.incomeCategoryId=i.categoryId:t.incomeCategoryId=fo(a[ve.Income],i.categoryId)),t.incomeCategoryId||(t.incomeCategoryId=Qa(a[ve.Income]))),a[ve.Transfer]&&a[ve.Transfer].length&&(i.categoryId&&i.categoryId!=="0"&&(mo(a[ve.Transfer],i.categoryId)?t.transferCategoryId=i.categoryId:t.transferCategoryId=fo(a[ve.Transfer],i.categoryId)),t.transferCategoryId||(t.transferCategoryId=Qa(a[ve.Transfer]))),o.length){if(i.accountId&&i.accountId!=="0"){for(const f of o)if(f.id===i.accountId){t.sourceAccountId=i.accountId,t.destinationAccountId=i.accountId;break}}if(i.destinationAccountId&&i.destinationAccountId!=="0"){for(const f of o)if(f.id===i.destinationAccountId){t.destinationAccountId=i.destinationAccountId;break}}t.sourceAccountId||(l&&s[l]&&!s[l].hidden?t.sourceAccountId=l:t.sourceAccountId=o[0].id),t.destinationAccountId||(l&&s[l]&&!s[l].hidden?t.destinationAccountId=l:t.destinationAccountId=o[0].id)}if(r&&i.tagIds){const f=i.tagIds.split(","),A=[];for(const T of f){const C=r[T];C&&!C.hidden&&A.push(C.id)}t.tagIds=A}i.comment&&(t.comment=i.comment),e&&(c&&(t.id=e.id),t.type=e.type,t.type===ie.Expense?t.expenseCategoryId=e.categoryId||"":t.type===ie.Income?t.incomeCategoryId=e.categoryId||"":t.type===ie.Transfer&&(t.transferCategoryId=e.categoryId||""),c&&(t.time=e.time,t.timeZone=e.timeZone,t.utcOffset=e.utcOffset),t.sourceAccountId=e.sourceAccountId,e.destinationAccountId?t.destinationAccountId=e.destinationAccountId:t.destinationAccountId="",t.sourceAmount=e.sourceAmount,e.destinationAmount?t.destinationAmount=e.destinationAmount:t.destinationAmount=0,t.hideAmount=e.hideAmount,t.tagIds=e.tagIds||[],t.setPictures(In.ofMulti(e.pictures||[])),t.comment=e.comment,c&&t.setGeoLocation(e.geoLocation))}function ir(t){if(!t||!Ke(t))return"";const e=t.split(".");return e[e.length-1]}function Wf(t,e){if(!(!t||t.length<1)){for(const a of t)if(a.type===e)return a.extensions}}function Vf(t,e){if(!e)return!1;const a=e.split(","),n=ir(t).toLowerCase();for(const o of a)if(ir(o).toLowerCase()===n)return!0;return!1}function Zf(t){return new Promise((e,a)=>{const n=new FileReader;n.onload=()=>{const o=n.result,s=new Uint8Array(o),r=_l.analyse(s);if(!r||r.length<1){a(new Error("unable to detect file encoding"));return}const l=r[0];if(!l.name||l.confidence<50){let c=!0;for(const f of s)if(f>127){c=!1;break}if(c){e(Zo);return}a(new Error("unable to detect file encoding"));return}const i=qc[l.name];if(!i){a(new Error(`unsupported file encoding: ${l.name}`));return}e(i)},n.onerror=()=>{a(new Error("failed to read file for encoding detection"))},n.readAsArrayBuffer(t)})}function Jf(t,e){const a=ht(),n=da(),o=mn(),s=Nn(),r=Mn(),l=q(!0),i=q(!1),c=q(""),f=q({}),A=m(()=>t==="statisticsDefault"?"Default Account Filter":"Filter Accounts"),T=m(()=>t==="statisticsDefault"?"Save":"Apply"),C=m(()=>t==="statisticsDefault"||t==="statisticsCurrent"||t==="homePageOverview"||t==="transactionListCurrent"||t==="custom"),Y=m(()=>Fu(n.allCategorizedAccountsMap,c.value,i.value)),k=m(()=>{const y={};for(const v of nt(Y.value))for(const p of v.accounts)if(y[p.id]=p,p.subAccounts)for(const I of p.subAccounts)y[I.id]=I;return y}),$=m(()=>n.allAvailableAccountsCount>0),F=m(()=>{for(const y of nt(Y.value))if(y.accounts.length>0)return!0;return!1});function H(y,v){return!v[y.id]}function w(){const y={};for(const v of nt(n.allAccountsMap))!C.value&&v.hidden||(t==="transactionListCurrent"&&o.allFilterAccountIdsCount>0||t==="custom"?y[v.id]=!0:y[v.id]=!1);if(t==="statisticsDefault")return f.value=Object.assign(y,a.appSettings.statistics.defaultAccountFilter),!0;if(t==="statisticsCurrent")return f.value=Object.assign(y,s.transactionStatisticsFilter.filterAccountIds),!0;if(t==="homePageOverview")return f.value=Object.assign(y,a.appSettings.overviewAccountFilterInHomePage),!0;if(t==="transactionListCurrent"){for(const v of ja(o.allFilterAccountIds,!0)){const p=n.allAccountsMap[v];p&&qi(y,p,!1)}return f.value=y,!0}else{if(t==="accountListTotalAmount")return f.value=Object.assign(y,a.appSettings.totalAmountExcludeAccountIds),!0;if(t==="custom"){if(e)for(const v of e){const p=n.allAccountsMap[v];p&&qi(y,p,!1)}return f.value=y,!0}else return!1}}function z(){const y=[],v={};let p=!0,I="",d=!0;for(const x of jt(f.value)){const O=n.allAccountsMap[x];O&&(!C.value&&O.hidden||(el(O,f.value)?(I.length>0&&(I+=","),I+=x,y.push(x)):(v[x]=!0,p=!1)))}return t==="statisticsDefault"?a.setStatisticsDefaultAccountFilter(v):t==="statisticsCurrent"?d=s.updateTransactionStatisticsFilter({filterAccountIds:v}):t==="homePageOverview"?(a.setOverviewAccountFilterInHomePage(v),r.updateTransactionOverviewInvalidState(!0)):t==="transactionListCurrent"?(d=o.updateTransactionListFilter({accountIds:p?"":I}),d&&o.updateTransactionListInvalidState(!0)):t==="accountListTotalAmount"&&a.setTotalAmountExcludeAccountIds(v),[d,y]}return{loading:l,showHidden:i,filterContent:c,filterAccountIds:f,title:A,applyText:T,allowHiddenAccount:C,allCategorizedAccounts:Y,allVisibleAccountMap:k,hasAnyAvailableAccount:$,hasAnyVisibleAccount:F,isAccountChecked:H,loadFilterAccountIds:w,saveFilterAccountIds:z}}function qf(t,e,a){const{tt:n}=Ze(),o=ht(),s=Na(),r=mn(),l=Nn(),i=Mn(),c=e?po(e.split(","),!0):void 0,f=q(!0),A=q(!1),T=q(""),C=q({}),Y=m(()=>t==="statisticsDefault"?"Default Transaction Category Filter":"Filter Transaction Categories"),k=m(()=>t==="statisticsDefault"?"Save":"Apply"),$=m(()=>tm(s.allTransactionCategories,c,T.value,A.value)),F=m(()=>{const I={};for(const d of nt($.value))for(const x of d)if(I[x.id]=x,x.subCategories)for(const O of x.subCategories)I[O.id]=O;return I}),H=m(()=>s.allAvailablePrimaryCategoriesCount>0||s.allAvailableSecondaryCategoriesCount>0),w=m(()=>{for(const I of nt($.value))if(I.length>0)return!0;return!1});function z(I,d){return!d[I.id]}function y(I){switch(I){case ve.Income:return n("Income Categories");case ve.Expense:return n("Expense Categories");case ve.Transfer:return n("Transfer Categories");default:return n("Transaction Categories")}}function v(){const I={};for(const d of nt(s.allTransactionCategoriesMap))c&&!c[d.type]||(t==="transactionListCurrent"&&r.allFilterCategoryIdsCount>0||t==="custom"?I[d.id]=!0:I[d.id]=!1);if(t==="statisticsDefault")return C.value=Object.assign(I,o.appSettings.statistics.defaultTransactionCategoryFilter),!0;if(t==="statisticsCurrent")return C.value=Object.assign(I,l.transactionStatisticsFilter.filterCategoryIds),!0;if(t==="homePageOverview")return C.value=Object.assign(I,o.appSettings.overviewTransactionCategoryFilterInHomePage),!0;if(t==="transactionListCurrent"){for(const d of ja(r.allFilterCategoryIds,!0)){const x=s.allTransactionCategoriesMap[d];x&&(!x.subCategories||!x.subCategories.length)?I[x.id]=!1:x&&tr(I,!1,x)}return C.value=I,!0}else if(t==="custom"){if(a)for(const d of a){const x=s.allTransactionCategoriesMap[d];x&&(!x.subCategories||!x.subCategories.length)?I[x.id]=!1:x&&tr(I,!1,x)}return C.value=I,!0}else return!1}function p(){const I=[],d={};let x=!0,O="",N=!0;for(const Q of jt(C.value)){const j=s.allTransactionCategoriesMap[Q];j&&(nl(j,C.value)?(O.length>0&&(O+=","),O+=Q,I.push(Q)):(d[Q]=!0,x=!1))}return t==="statisticsDefault"?o.setStatisticsDefaultTransactionCategoryFilter(d):t==="statisticsCurrent"?N=l.updateTransactionStatisticsFilter({filterCategoryIds:d}):t==="homePageOverview"?(o.setOverviewTransactionCategoryFilterInHomePage(d),i.updateTransactionOverviewInvalidState(!0)):t==="transactionListCurrent"&&(N=r.updateTransactionListFilter({categoryIds:x?"":O}),N&&r.updateTransactionListInvalidState(!0)),[N,I]}return{loading:f,showHidden:A,filterContent:T,filterCategoryIds:C,title:Y,applyText:k,allVisibleTransactionCategories:$,allVisibleTransactionCategoryMap:F,hasAnyAvailableCategory:H,hasAnyVisibleCategory:w,isCategoryChecked:z,getCategoryTypeName:y,loadFilterCategoryIds:v,saveFilterCategoryIds:p}}var Nm=(t=>(t[t.Default=0]="Default",t[t.Include=1]="Include",t[t.Exclude=2]="Exclude",t))(Nm||{});function _f(t){const e=us(),a=mn(),n=Nn(),o=q(!0),s=q(!1),r=q(""),l=q({}),i=q(It.HasAny.type),c=q(It.NotHasAny.type),f=m(()=>ts(l.value,1).length),A=m(()=>ts(l.value,2).length),T=m(()=>"Filter Transaction Tags"),C=m(()=>"Apply"),Y=m(()=>{const w=[],z=s.value?e.allTransactionTags:e.allVisibleTags,y=r.value?r.value.toLowerCase():"";for(const v of z)y&&!v.name.toLowerCase().includes(y)||w.push(v);return w}),k=m(()=>e.allAvailableTagsCount>0),$=m(()=>Y.value.length>0);function F(){let w=[];if(t==="statisticsCurrent")w=ya.parse(n.transactionStatisticsFilter.tagFilter);else if(t==="transactionListCurrent")w=ya.parse(a.transactionsFilter.tagFilter);else return!1;const z={};for(const y of nt(e.allTransactionTagsMap))z[y.id]=0;for(const y of w){let v=0;if(y.type===It.HasAny||y.type===It.HasAll)v=1,i.value=y.type.type;else if(y.type===It.NotHasAny||y.type===It.NotHasAll)v=2,c.value=y.type.type;else continue;for(const p of y.tagIds)z[p]=v}return l.value=z,!0}function H(){const w=ya.create(It.parse(i.value)??It.HasAny),z=ya.create(It.parse(c.value)??It.NotHasAny);let y=!0;for(const[p,I]of Xt(l.value)){const d=e.allTransactionTagsMap[p];d&&(I===1?w.tagIds.push(d.id):I===2&&z.tagIds.push(d.id))}const v=[];return w.tagIds.length>0&&v.push(w),z.tagIds.length>0&&v.push(z),t==="statisticsCurrent"?(y=n.updateTransactionStatisticsFilter({tagFilter:ya.toTextualTagFilters(v)}),y&&n.updateTransactionStatisticsInvalidState(!0)):t==="transactionListCurrent"&&(y=a.updateTransactionListFilter({tagFilter:ya.toTextualTagFilters(v)}),y&&a.updateTransactionListInvalidState(!0)),y}return{loading:o,showHidden:s,filterContent:r,filterTagIds:l,includeTagFilterType:i,excludeTagFilterType:c,includeTagsCount:f,excludeTagsCount:A,title:T,applyText:C,allVisibleTags:Y,hasAnyAvailableTag:k,hasAnyVisibleTag:$,loadFilterTagIds:F,saveFilterTagIds:H}}class wa{static allInstances=[];static allInstancesByType={};static List=new wa(0,"Transaction List");static Calendar=new wa(1,"Transaction Calendar");static Default=wa.List;type;name;constructor(e,a){this.type=e,this.name=a,wa.allInstances.push(this),wa.allInstancesByType[e]=this}static values(){return wa.allInstances}static valueOf(e){return wa.allInstancesByType[e]}}function Qf(){const{tt:t,getAllDateRanges:e,getCurrentNumeralSystemType:a,formatDateTimeToLongDateTime:n,formatDateTimeToLongDate:o,formatDateTimeToShortTime:s,formatDateTimeToGregorianLikeLongYearMonth:r,formatDateRange:l,formatAmountToLocalizedNumeralsWithCurrency:i}=Ze(),c=ht(),f=kt(),A=da(),T=Na(),C=us(),Y=mn(),k=q(wa.List.type),$=q(!0),F=q(0),H=q(0),w=q(""),z=m(()=>a()),y=m(()=>f.currentUserFirstDayOfWeek),v=m(()=>f.currentUserFiscalYearStart),p=m(()=>Bu(N.value,Z.value,f.currentUserDefaultCurrency)),I=m(()=>c.appSettings.showTotalAmountInTransactionListPage),d=m(()=>c.appSettings.showTagInTransactionListPage),x=m(()=>e(ha.Normal,!0,!!A.getAccountStatementDate(L.value.accountIds))),O=m(()=>A.allMixedPlainAccounts),N=m(()=>A.allAccountsMap),Q=m(()=>A.allAvailableAccountsCount),j=m(()=>{const _={};for(const[ke,Fe]of Xt(T.allTransactionCategories))L.value.type&&wo(parseInt(ke))!==L.value.type||(_[ke]=Fe);return _}),ae=m(()=>T.allTransactionCategoriesMap),de=m(()=>{let _=0;for(const[ke,Fe]of Xt(T.allTransactionCategories))L.value.type&&wo(parseInt(ke))!==L.value.type||Fe&&(_+=Fe.length);return _}),ge=m(()=>C.allTransactionTagsMap),M=m(()=>C.allAvailableTagsCount),h=m(()=>{const _=wa.valueOf(k.value);return t(_?_.name:wa.List.name)}),L=m(()=>Y.transactionsFilter),g=m(()=>L.value.dateType===te.All.type?t("Date"):l(L.value.dateType,L.value.minTime,L.value.maxTime)),B=m(()=>n(Pe(L.value.minTime))),b=m(()=>n(Pe(L.value.maxTime))),S=m(()=>qr(L.value.minTime,L.value.maxTime)),R=m(()=>!L.value.minTime||!L.value.maxTime?Rr().toGregorianCalendarYear0BasedMonth():Pe(L.value.minTime).toGregorianCalendarYear0BasedMonth()),V=m(()=>Y.allFilterCategoryIds),Z=m(()=>Y.allFilterAccountIds),ee=m(()=>Y.allFilterTagIds),W=m(()=>Y.allFilterCategoryIdsCount),G=m(()=>Y.allFilterAccountIdsCount),U=m(()=>Y.allFilterTagIdsCount),ye=m(()=>G.value>1?t("Multiple Accounts"):N.value[L.value.accountIds]?.name||t("Account")),Se=m(()=>W.value>1?t("Multiple Categories"):ae.value[L.value.categoryIds]?.name||t("Category")),he=m(()=>{if(L.value.tagFilter===ya.TransactionNoTagFilterValue)return t("Without Tags");if(U.value>1)return t("Multiple Tags");for(const _ of jt(ee.value)){const ke=ge.value[_]?.name;if(ke)return ke}return t("Tags")}),Me=m(()=>{if(!L.value.amountFilter)return"";const _=L.value.amountFilter.split(":");if(_.length<2)return"";const ke=[];for(let Fe=1;Fe<_.length;Fe++)ke.push(i(parseInt(_[Fe]),!1));return ke.join(" ~ ")}),ze=m(()=>Dn(os(Pe(L.value.minTime)).getUnixTime())),Ee=m(()=>Dn(os(Pe(L.value.maxTime)).getUnixTime())),xe=m(()=>{const _=Y.transactions;if(!_||!_.length)return null;const ke=Pe(L.value.minTime),Fe=ke.getGregorianCalendarYear(),dt=ke.getGregorianCalendarMonth();for(const Ot of _)if(Ot.year===Fe&&Ot.month===dt)return Ot;return null}),Ge=m(()=>{if(L.value.accountIds&&G.value===1){const _=N.value[L.value.accountIds];if(_&&_.type===Ne.MultiSubAccounts.type)return!1}return!0});function E(_){if(!_.subCategories||!_.subCategories.length)return!1;for(const ke of _.subCategories)if(V.value[ke.id])return!0;return!1}function fe(_){return _.utcOffset===Ta(_.time)}function ue(_,ke,Fe){return i(ke?ta:_,Fe)}function ce(_){const ke=ra(_.time,_.utcOffset);return s(ke)}function ne(_){const ke=ra(_.time,_.utcOffset);return o(ke)}function oe(_){const ke=Pe(cn(_.yearDashMonth));return r(ke)}function Te(_){return`UTC${z.value.replaceWesternArabicDigitsToLocalizedDigits(Cn(_.utcOffset))}`}function Oe(_){const ke=Ta(_.time),Fe=ra(_.time,ke),dt=z.value.replaceWesternArabicDigitsToLocalizedDigits(Cn(ke));return`${n(Fe)} (UTC${dt})`}function We(_){if(G.value<1){if(_.sourceAccount)return ue(_.sourceAmount,_.hideAmount,_.sourceAccount.currency)}else if(G.value===1){if(_.sourceAccount&&(Z.value[_.sourceAccount.id]||Z.value[_.sourceAccount.parentId]))return ue(_.sourceAmount,_.hideAmount,_.sourceAccount.currency);if(_.destinationAccount&&(Z.value[_.destinationAccount.id]||Z.value[_.destinationAccount.parentId]))return ue(_.destinationAmount,_.hideAmount,_.destinationAccount.currency)}else if(_.sourceAccount&&_.destinationAccount){if((Z.value[_.sourceAccount.id]||Z.value[_.sourceAccount.parentId])&&!Z.value[_.destinationAccount.id]&&!Z.value[_.destinationAccount.parentId])return ue(_.sourceAmount,_.hideAmount,_.sourceAccount.currency);if((Z.value[_.destinationAccount.id]||Z.value[_.destinationAccount.parentId])&&!Z.value[_.sourceAccount.id]&&!Z.value[_.sourceAccount.parentId])return ue(_.destinationAmount,_.hideAmount,_.destinationAccount.currency)}return _.sourceAccount?ue(_.sourceAmount,_.hideAmount,_.sourceAccount.currency):""}function Be(_,ke,Fe,dt){const Ot=i(_,ke);return Fe+Ot+(dt?Va:"")}function Tt(_,ke){switch(_){case ie.ModifyBalance:return t("Modify Balance");case ie.Income:return t("Income");case ie.Expense:return t("Expense");case ie.Transfer:return t("Transfer");default:return t(ke)}}return{pageType:k,loading:$,customMinDatetime:F,customMaxDatetime:H,currentCalendarDate:w,firstDayOfWeek:y,fiscalYearStart:v,defaultCurrency:p,showTotalAmountInTransactionListPage:I,showTagInTransactionListPage:d,allDateRanges:x,allAccounts:O,allAccountsMap:N,allAvailableAccountsCount:Q,allCategories:ae,allPrimaryCategories:j,allAvailableCategoriesCount:de,allTransactionTags:ge,allAvailableTagsCount:M,displayPageTypeName:h,query:L,queryDateRangeName:g,queryMinTime:B,queryMaxTime:b,queryMonthlyData:S,queryMonth:R,queryAllFilterCategoryIds:V,queryAllFilterAccountIds:Z,queryAllFilterTagIds:ee,queryAllFilterCategoryIdsCount:W,queryAllFilterAccountIdsCount:G,queryAllFilterTagIdsCount:U,queryAccountName:ye,queryCategoryName:Se,queryTagName:he,queryAmount:Me,transactionCalendarMinDate:ze,transactionCalendarMaxDate:Ee,currentMonthTransactionData:xe,canAddTransaction:Ge,hasSubCategoryInQuery:E,isSameAsDefaultTimezoneOffsetMinutes:fe,getDisplayTime:ce,getDisplayLongDate:ne,getDisplayLongYearMonth:oe,getDisplayTimezone:Te,getDisplayTimeInDefaultTimezone:Oe,getDisplayAmount:We,getDisplayMonthTotalAmount:Be,getTransactionTypeName:Tt}}function Lm(t){let e=t.startTime,a=t.endTime;if((!e||!a)&&t.items&&t.items.length){let n=Number.MAX_SAFE_INTEGER,o=0;for(const s of t.items)for(const r of s.items){const i=ua(r.year,r.month,r.day).getUnixTime();i<n&&(n=i),i>o&&(o=i)}n<Number.MAX_SAFE_INTEGER&&o>0&&(e=n,a=o)}if(t.dateAggregationType===tt.Day.type)return Vr(e,a);{const n=zn(e),o=zn(a);return ni(n,o,t.fiscalYearStart,t.dateAggregationType)}}function wm(t){return sm(t.items,t.startYearMonth,t.endYearMonth,t.fiscalYearStart,t.dateAggregationType)}function Xf(t){const{tt:e}=Ze(),a=m(()=>t.chartMode==="daily"?Lm(t):t.chartMode==="monthly"?wm(t):[]);function n(o){return t.translateName?e(o):o}return{allDateRanges:a,getItemName:n}}function jf(t,e){const a=[];let n=-1;for(let o=0;o<t.length;o++)o%e===0&&(a[++n]=[]),a[n].push({color:t[o]});return a}function ul(t){return t&&t!==Er?`#${t}`:Ws}function Em(t){return t&&t!==ns?`#${t}`:Ws}function xm(t){return t&&t!==Un?`#${t}`:Ws}function eg(){const{tt:t,getAllDateRanges:e,getAllStatisticsSortingTypes:a,getAllStatisticsDateAggregationTypes:n,formatDateTimeToLongDateTime:o,formatDateTimeToGregorianLikeLongYearMonth:s,formatDateRange:r,formatAmountToLocalizedNumeralsWithCurrency:l}=Ze(),i=ht(),c=kt(),f=Nn(),A=q(!0),T=q(Ue.CategoricalAnalysis),C=q(tt.Default.type),Y=q(tt.Default.type),k=m(()=>i.appSettings.showAccountBalance),$=m(()=>c.currentUserDefaultCurrency),F=m(()=>c.currentUserFirstDayOfWeek),H=m(()=>c.currentUserFiscalYearStart),w=m(()=>T.value===Ue.CategoricalAnalysis?e(ha.Normal,!0):T.value===Ue.TrendAnalysis?e(ha.TrendAnalysis,!0):T.value===Ue.AssetTrends?e(ha.AssetTrends,!0):[]),z=m(()=>a()),y=m(()=>n(Ue.TrendAnalysis)),v=m(()=>n(Ue.AssetTrends)),p=m(()=>f.transactionStatisticsFilter),I=m(()=>f.categoricalAnalysisChartDataCategory),d=m(()=>T.value===Ue.CategoricalAnalysis?p.value.categoricalChartDateType:T.value===Ue.TrendAnalysis?p.value.trendChartDateType:T.value===Ue.AssetTrends?p.value.assetTrendsChartDateType:null),x=m(()=>T.value===Ue.CategoricalAnalysis?o(Pe(p.value.categoricalChartStartTime)):T.value===Ue.TrendAnalysis?s(Pe(cn(p.value.trendChartStartYearMonth))):T.value===Ue.AssetTrends?o(Pe(p.value.assetTrendsChartStartTime)):""),O=m(()=>T.value===Ue.CategoricalAnalysis?o(Pe(p.value.categoricalChartEndTime)):T.value===Ue.TrendAnalysis?s(Pe(is(p.value.trendChartEndYearMonth))):T.value===Ue.AssetTrends?o(Pe(p.value.assetTrendsChartEndTime)):""),N=m(()=>T.value===Ue.CategoricalAnalysis?p.value.chartDataType===K.AccountTotalAssets.type||p.value.chartDataType===K.AccountTotalLiabilities.type?t(te.All.name):r(p.value.categoricalChartDateType,p.value.categoricalChartStartTime,p.value.categoricalChartEndTime):T.value===Ue.TrendAnalysis?r(p.value.trendChartDateType,cn(p.value.trendChartStartYearMonth),is(p.value.trendChartEndYearMonth)):T.value===Ue.AssetTrends?r(p.value.assetTrendsChartDateType,p.value.assetTrendsChartStartTime,p.value.assetTrendsChartEndTime):""),Q=m(()=>{const Ee=Si(K.values(),p.value.chartDataType)||"Statistics";return t(Ee)}),j=m(()=>{const Ee=Si(Wt.values(),p.value.sortingType)||"System Default";return t(Ee)}),ae=m(()=>Mi(y.value,C.value)||""),de=m(()=>Mi(v.value,Y.value)||""),ge=m(()=>T.value===Ue.CategoricalAnalysis?p.value.chartDataType===K.AccountTotalAssets.type||p.value.chartDataType===K.AccountTotalLiabilities.type||p.value.categoricalChartDateType===i.appSettings.statistics.defaultCategoricalChartDataRangeType?!1:!!p.value.categoricalChartStartTime||!!p.value.categoricalChartEndTime:T.value===Ue.TrendAnalysis?p.value.trendChartDateType===i.appSettings.statistics.defaultTrendChartDataRangeType?!1:!!p.value.trendChartStartYearMonth||!!p.value.trendChartEndYearMonth:T.value===Ue.AssetTrends?p.value.assetTrendsChartDateType===i.appSettings.statistics.defaultAssetTrendsChartDataRangeType?!1:!!p.value.assetTrendsChartStartTime||!!p.value.assetTrendsChartEndTime:!1),M=m(()=>T.value===Ue.CategoricalAnalysis?!(p.value.chartDataType===K.AccountTotalAssets.type||p.value.chartDataType===K.AccountTotalLiabilities.type):!0),h=m(()=>M.value?T.value===Ue.CategoricalAnalysis?p.value.categoricalChartDateType!==te.All.type:T.value===Ue.TrendAnalysis?p.value.trendChartDateType!==te.All.type:T.value===Ue.AssetTrends?p.value.assetTrendsChartDateType!==te.All.type:!1:!1),L=m(()=>{if(T.value===Ue.CategoricalAnalysis){if(p.value.chartDataType===K.AccountTotalAssets.type||p.value.chartDataType===K.AccountTotalLiabilities.type)return!1}else if(T.value===Ue.AssetTrends)return!1;return!0}),g=m(()=>{if(T.value===Ue.CategoricalAnalysis){if(p.value.chartDataType===K.AccountTotalAssets.type||p.value.chartDataType===K.AccountTotalLiabilities.type)return!1}else if(T.value===Ue.AssetTrends)return!1;return!0}),B=m(()=>g.value),b=m(()=>g.value),S=m(()=>!(!k.value&&T.value===Ue.CategoricalAnalysis&&(p.value.chartDataType===K.AccountTotalAssets.type||p.value.chartDataType===K.AccountTotalLiabilities.type))),R=m(()=>p.value.chartDataType===K.InflowsByAccount.type?t("Total Inflows"):p.value.chartDataType===K.OutflowsByAccount.type?t("Total Outflows"):p.value.chartDataType===K.IncomeByAccount.type||p.value.chartDataType===K.IncomeByPrimaryCategory.type||p.value.chartDataType===K.IncomeBySecondaryCategory.type?t("Total Income"):p.value.chartDataType===K.ExpenseByAccount.type||p.value.chartDataType===K.ExpenseByPrimaryCategory.type||p.value.chartDataType===K.ExpenseBySecondaryCategory.type?t("Total Expense"):p.value.chartDataType===K.AccountTotalAssets.type?t("Total Assets"):p.value.chartDataType===K.AccountTotalLiabilities.type?t("Total Liabilities"):t("Total Amount")),V=m(()=>p.value.chartDataType!==K.OutflowsByAccount.type&&p.value.chartDataType!==K.InflowsByAccount.type),Z=m(()=>p.value.chartDataType!==K.OutflowsByAccount.type&&p.value.chartDataType!==K.InflowsByAccount.type&&p.value.chartDataType!==K.TotalOutflows.type&&p.value.chartDataType!==K.TotalExpense.type&&p.value.chartDataType!==K.TotalInflows.type&&p.value.chartDataType!==K.TotalIncome.type&&p.value.chartDataType!==K.NetCashFlow.type&&p.value.chartDataType!==K.NetIncome.type&&p.value.chartDataType!==K.NetWorth.type),ee=m(()=>(p.value.trendChartType===Et.Area.type||p.value.trendChartType===Et.Column.type)&&p.value.chartDataType!==K.OutflowsByAccount.type&&p.value.chartDataType!==K.InflowsByAccount.type),W=m(()=>p.value.chartDataType===K.TotalOutflows.type||p.value.chartDataType===K.TotalExpense.type||p.value.chartDataType===K.TotalInflows.type||p.value.chartDataType===K.TotalIncome.type||p.value.chartDataType===K.NetCashFlow.type||p.value.chartDataType===K.NetIncome.type||p.value.chartDataType===K.NetWorth.type),G=m(()=>f.categoricalOverviewAnalysisData),U=m(()=>f.categoricalAnalysisData),ye=m(()=>f.trendsAnalysisData),Se=m(()=>f.assetTrendsData);function he(Ee){return T.value===Ue.CategoricalAnalysis?p.value.categoricalChartDateType===Ee&&!!p.value.categoricalChartStartTime&&!!p.value.categoricalChartEndTime:T.value===Ue.TrendAnalysis?p.value.trendChartDateType===Ee&&!!p.value.trendChartStartYearMonth&&!!p.value.trendChartEndYearMonth:T.value===Ue.AssetTrends?p.value.assetTrendsChartDateType===Ee&&!!p.value.assetTrendsChartStartTime&&!!p.value.assetTrendsChartEndTime:!1}function Me(Ee){return Ee.type==="category"?Em(Ee.color):Ee.type==="account"?xm(Ee.color):ul(Ee.color)}function ze(Ee,xe,Ge){const E=l(Ee,xe);return!k.value&&T.value===Ue.CategoricalAnalysis&&(p.value.chartDataType===K.AccountTotalAssets.type||p.value.chartDataType===K.AccountTotalLiabilities.type)?ta:Ge?ic(E,Ge):E}return{loading:A,analysisType:T,trendDateAggregationType:C,assetTrendsDateAggregationType:Y,showAccountBalance:k,defaultCurrency:$,firstDayOfWeek:F,fiscalYearStart:H,allDateRanges:w,allSortingTypes:z,allTrendAnalysisDateAggregationTypes:y,allAssetTrendsDateAggregationTypes:v,query:p,queryChartDataCategory:I,queryDateType:d,queryStartTime:x,queryEndTime:O,queryDateRangeName:N,queryChartDataTypeName:Q,querySortingTypeName:j,queryTrendDateAggregationTypeName:ae,queryAssetTrendsDateAggregationTypeName:de,isQueryDateRangeChanged:ge,canChangeDateRange:M,canShiftDateRange:h,canUseCategoryFilter:L,canUseTagFilter:B,canUseKeywordFilter:b,showAmountInChart:S,totalAmountName:R,showPercentInCategoricalChart:V,showTotalAmountInTrendsChart:Z,showStackedInTrendsChart:ee,translateNameInTrendsChart:W,categoricalOverviewAnalysisData:G,categoricalAnalysisData:U,trendsAnalysisData:ye,assetTrendsData:Se,canShowCustomDateRange:he,getTransactionCategoricalAnalysisDataItemDisplayColor:Me,getDisplayAmount:ze}}function tg(){const{tt:t,getAllAccountCategories:e,getAllAccountTypes:a,getMonthdayShortName:n}=Ze(),o=kt(),s=q(null),r=q(""),l=q(!1),i=q(!1),c=q(bt.createNewAccount(o.currentUserDefaultCurrency,w())),f=q([]),A=m(()=>s.value?"Edit Account":"Add Account"),T=m(()=>s.value?"Save":"Add"),C=m(()=>{let O=p(c.value,!1);if(O)return O;if(c.value.type===Ne.MultiSubAccounts.type){for(const N of f.value)if(O=p(N,!0),O)return O}return null}),Y=m(()=>!!C.value),k=m(()=>e()),$=m(()=>a()),F=m(()=>{const O=[];O.push({day:0,displayName:t("Not set")});for(let N=1;N<=28;N++)O.push({day:N,displayName:n(N)});return O}),H=m(()=>c.value&&c.value.category===Ve.CreditCard.type);function w(){return _o(Zs(za())).getUnixTime()}function z(O){return O.balanceTime?Ta(O.balanceTime):0}function y(O){for(const N of F.value)if(N.day===O)return N.displayName;return null}function v(O,N){if(!Qe(O.balanceTime)){O.balanceTime=N;return}const Q=Ta(O.balanceTime),j=Ta(N);if(Q===j){O.balanceTime=N;return}O.balanceTime=N-(j-Q)*60}function p(O,N){return!N&&!O.category?"Account category cannot be blank":!N&&!O.type?"Account type cannot be blank":O.name?O.type===Ne.SingleAccount.type&&!O.currency?"Account currency cannot be blank":null:"Account name cannot be blank"}function I(O){return O.id===""||O.id==="0"}function d(){if(c.value.type!==Ne.MultiSubAccounts.type)return!1;const O=c.value.createNewSubAccount(o.currentUserDefaultCurrency,w());return f.value.push(O),!0}function x(O){if(c.value.fillFrom(O),f.value=[],O.subAccounts&&O.subAccounts.length>0)for(const N of O.subAccounts){const Q=c.value.createNewSubAccount(o.currentUserDefaultCurrency,w());Q.fillFrom(N),f.value.push(Q)}}return qa(()=>c.value.category,(O,N)=>{c.value.setSuitableIcon(N,O)}),{editAccountId:s,clientSessionId:r,loading:l,submitting:i,account:c,subAccounts:f,title:A,saveButtonTitle:T,inputEmptyProblemMessage:C,inputIsEmpty:Y,allAccountCategories:k,allAccountTypes:$,allAvailableMonthDays:F,isAccountSupportCreditCardStatementDate:H,getCurrentUnixTimeForNewAccount:w,getDefaultTimezoneOffsetMinutes:z,getAccountCreditCardStatementDate:y,updateAccountBalanceTime:v,isNewAccount:I,addSubAccount:d,setAccount:x}}function ag(){const{tt:t,getAllAccountBalanceTrendChartTypes:e,getAllStatisticsDateAggregationTypesWithShortName:a,formatDateTimeToLongDateTime:n,formatDateTimeToLongDate:o,formatDateTimeToShortTime:s,formatDateTimeToGregorianDefaultDateTime:r,formatAmountToWesternArabicNumeralsWithoutDigitGrouping:l,formatAmountToLocalizedNumeralsWithCurrency:i}=Ze(),c=kt(),f=da(),A=Na(),T=q(""),C=q(0),Y=q(0),k=q(void 0),$=m(()=>c.currentUserFirstDayOfWeek),F=m(()=>c.currentUserFiscalYearStart),H=m(()=>c.currentUserDefaultCurrency),w=m(()=>e()),z=m(()=>a(Ue.AssetTrends)),y=m(()=>d.value[T.value]),v=m(()=>y.value?.currency??H.value),p=m(()=>y.value?.isLiability??!1),I=m(()=>{const W=c.currentUserNickname;return W?t("dataExport.exportReconciliationStatementsFileName",{nickname:W}):t("dataExport.defaultExportReconciliationStatementsFileName")}),d=m(()=>f.allAccountsMap),x=m(()=>A.allTransactionCategoriesMap),O=m(()=>{const W=Pe(C.value);return n(W)}),N=m(()=>{const W=Pe(Y.value);return n(W)}),Q=m(()=>i(k.value?.totalInflows??0,v.value)),j=m(()=>i(k.value?.totalOutflows??0,v.value)),ae=m(()=>i((k?.value?.totalInflows??0)-(k.value?.totalOutflows??0),v.value)),de=m(()=>p.value?i(-(k?.value?.openingBalance??0),v.value):i(k?.value?.openingBalance??0,v.value)),ge=m(()=>p.value?i(-(k?.value?.closingBalance??0),v.value):i(k?.value?.closingBalance??0,v.value));function M(W){if(!W){k.value=void 0;return}const G={transactions:W.transactions.map(U=>({...U,sourceAccount:d.value[U.sourceAccountId],sourceAccountName:d.value[U.sourceAccountId]?.name||"",destinationAccount:U.destinationAccountId&&U.destinationAccountId!=="0"?d.value[U.destinationAccountId]:void 0,category:x.value[U.categoryId],categoryName:x.value[U.categoryId]?.name||""})),totalInflows:W.totalInflows,totalOutflows:W.totalOutflows,openingBalance:W.openingBalance,closingBalance:W.closingBalance};k.value=G}function h(W){return W.type===ie.ModifyBalance?t("Modify Balance"):W.type===ie.Income?t("Income"):W.type===ie.Expense?t("Expense"):W.type===ie.Transfer&&W.destinationAccountId===T.value?t("Transfer In"):W.type===ie.Transfer&&W.sourceAccountId===T.value?t("Transfer Out"):W.type===ie.Transfer?t("Transfer"):t("Unknown")}function L(W){const G=ra(W.time,W.utcOffset);return n(G)}function g(W){const G=ra(W.time,W.utcOffset);return o(G)}function B(W){const G=ra(W.time,W.utcOffset);return s(G)}function b(W){return W.utcOffset===Ta(W.time)}function S(W){return`UTC${Cn(W.utcOffset)}`}function R(W){const G=W.sourceAccount?.currency??H.value;return i(W.sourceAmount,G)}function V(W){const G=W.destinationAccount?.currency??H.value;return i(W.destinationAmount,G)}function Z(W){let G=H.value,U=!1;return W.type===ie.Transfer&&W.destinationAccountId===T.value?W.destinationAccount&&(G=W.destinationAccount.currency,U=W.destinationAccount.isLiability):W.sourceAccount&&(G=W.sourceAccount.currency,U=W.sourceAccount.isLiability),i(U?-W.accountClosingBalance:W.accountClosingBalance,G)}function ee(W){let G=",";W===Qt.TSV&&(G="	");const U=p.value?"Account Outstanding Balance":"Account Balance",ye=[t("Transaction Time"),t("Type"),t("Category"),t("Amount"),t("Account"),t(U),t("Description")].join(G)+`
`,he=(k.value?.transactions??[]).map(Me=>{const ze=ra(Me.time,Me.utcOffset),Ee=h(Me);let xe=Me.categoryName,Ge=l(Me.sourceAmount),E=Me.sourceAccountName;Me.type===ie.ModifyBalance?xe=t("Modify Balance"):Me.type===ie.Transfer&&Me.destinationAccountId===T.value&&(Ge=l(Me.destinationAmount)),Me.type===ie.Transfer&&Me.destinationAccount&&(E=E+" → "+(Me.destinationAccount?.name||""));let fe="";p.value?fe=l(-Me.accountClosingBalance):fe=l(Me.accountClosingBalance);let ue=Me.comment||"";return W===Qt.CSV?ue=Ja(ue,","," "):W===Qt.TSV&&(ue=Ja(ue,"	"," ")),[r(ze),Ee,xe,Ge,E,fe,ue].join(G)});return ye+he.join(`
`)}return{accountId:T,startTime:C,endTime:Y,reconciliationStatements:k,firstDayOfWeek:$,fiscalYearStart:F,defaultCurrency:H,allChartTypes:w,allDateAggregationTypes:z,currentAccount:y,currentAccountCurrency:v,isCurrentLiabilityAccount:p,exportFileName:I,displayStartDateTime:O,displayEndDateTime:N,displayTotalInflows:Q,displayTotalOutflows:j,displayTotalBalance:ae,displayOpeningBalance:de,displayClosingBalance:ge,setReconciliationStatements:M,getDisplayTransactionType:h,getDisplayDateTime:L,getDisplayDate:g,getDisplayTime:B,isSameAsDefaultTimezoneOffsetMinutes:b,getDisplayTimezone:S,getDisplaySourceAmount:R,getDisplayDestinationAmount:V,getDisplayAccountBalance:Z,getExportedData:ee}}function ng(){const{tt:t,getCategorizedAccountsWithDisplayBalance:e}=Ze(),a=ht(),n=da(),o=q(!1),s=q(void 0),r=q(""),l=q(""),i=m(()=>a.appSettings.showAccountBalance),c=m(()=>n.allPlainAccounts),f=m(()=>n.allVisiblePlainAccounts),A=m(()=>e(f.value,i.value)),T=m(()=>r.value&&bt.findAccountNameById(c.value,r.value,t("Target Account"))||t("Target Account")),C=m(()=>{if(!r.value||!l.value)return!1;const Y=bt.findAccountNameById(c.value,r.value);return Y?Y===l.value:!1});return{moving:o,fromAccount:s,toAccountId:r,toAccountName:l,allAccounts:c,allVisibleAccounts:f,allVisibleCategorizedAccounts:A,displayToAccountName:T,isToAccountNameValid:C}}function sg(){const{formatAmountToLocalizedNumeralsWithCurrency:t}=Ze(),e=ht(),a=kt(),n=da(),o=q(!0),s=q(!1),r=q(!1),l=m({get:()=>e.appSettings.showAccountBalance,set:w=>e.setShowAccountBalance(w)}),i=m(()=>a.currentUserFirstDayOfWeek),c=m(()=>a.currentUserFiscalYearStart),f=m(()=>a.currentUserDefaultCurrency),A=m(()=>n.allAccounts),T=m(()=>n.allCategorizedAccountsMap),C=m(()=>n.allAvailableAccountsCount),Y=m(()=>{const w=n.getNetAssets(l.value);return t(w,f.value)}),k=m(()=>{const w=n.getTotalAssets(l.value);return t(w,f.value)}),$=m(()=>{const w=n.getTotalLiabilities(l.value);return t(w,f.value)});function F(w){if(!w)return"";const z=n.getAccountCategoryTotalBalance(l.value,w);return t(z,f.value)}function H(w,z){if(w.type===Ne.SingleAccount.type){const y=n.getAccountBalance(l.value,w);return!Ae(y)&&!Ke(y)?"":t(y,w.currency)}else if(w.type===Ne.MultiSubAccounts.type){const y=n.getAccountSubAccountBalance(l.value,s.value,w,z);return He(y)?t(y.balance,y.currency):""}else return null}return{loading:o,showHidden:s,displayOrderModified:r,showAccountBalance:l,firstDayOfWeek:i,fiscalYearStart:c,defaultCurrency:f,allAccounts:A,allCategorizedAccountsMap:T,allAccountCount:C,netAssets:Y,totalAssets:k,totalLiabilities:$,accountCategoryTotalBalance:F,accountBalance:H}}function og(t,e){const a=Na(),n=q(null),o=q(""),s=q(!1),r=q(!1),l=q(la.createNewCategory(t,e)),i=m(()=>am(a.allTransactionCategories,l.value.type)),c=m(()=>n.value?"Edit Category":l.value.parentId==="0"?"Add Primary Category":"Add Secondary Category"),f=m(()=>n.value?"Save":"Add"),A=m(()=>l.value.name?null:"Category name cannot be blank"),T=m(()=>!!A.value);return{editCategoryId:n,clientSessionId:o,loading:s,submitting:r,category:l,allAvailableCategories:i,title:c,saveButtonTitle:f,inputEmptyProblemMessage:A,inputIsEmpty:T}}function ig(){const t=Na(),e=q(!0),a=q("0"),n=m(()=>{if(!(!t.allTransactionCategoriesMap||!t.allTransactionCategoriesMap[a.value]))return t.allTransactionCategoriesMap[a.value]});return{loading:e,primaryCategoryId:a,currentPrimaryCategory:n}}function rg(t,e){for(const a of t)if(e||!a.hidden)return!1;return!0}function lg(t,e){let a=0;for(const n of t)(e||!n.hidden)&&a++;return a}function cg(t,e){for(const a of t)if(e||!a.hidden)return a.id;return null}function ug(t,e){for(const a of es(t))if(e||!a.hidden)return a.id;return null}function mg(t,e){for(const a of t)if(e||!a.hidden)return!1;return!0}function dg(t,e){let a=0;for(const n of t)(e||!n.hidden)&&a++;return a}function fg(t,e){for(const a of t)if(e||!a.hidden)return a.id;return null}function gg(t,e){for(const a of es(t))if(e||!a.hidden)return a.id;return null}function pg(){const{tt:t,getDefaultCurrency:e,getDefaultFirstDayOfWeek:a,getAllWeekDays:n,getAllCalendarDisplayTypes:o,getAllDateDisplayTypes:s,getAllLongDateFormats:r,getAllShortDateFormats:l,getAllLongTimeFormats:i,getAllShortTimeFormats:c,getAllFiscalYearFormats:f,getAllCurrencyDisplayTypes:A,getAllNumeralSystemTypes:T,getAllDecimalSeparators:C,getAllDigitGroupingSymbols:Y,getAllDigitGroupingTypes:k,getAllCoordinateDisplayTypes:$,getAllExpenseAmountColors:F,getAllIncomeAmountColors:H,getAllTransactionEditScopeTypes:w,getLocaleDefaultDateDisplayType:z,getLocaleDefaultNumeralSystemType:y,getLocaleDefaultDecimalSeparator:v,getLocaleDefaultDigitGroupingSymbol:p,setLanguage:I}=Ze(),d=ht(),x=da(),O=Mn(),N=a(),Q=mt.parse(N)?mt.parse(N).type:mt.DefaultFirstDay.type,j=q(Gn.createNewUser("",e(),Q)),ae=q(Gn.createNewUser("",e(),Q)),de=q(!1),ge=q(!1),M=q(!1),h=q(!1),L=m(()=>$t.valueOf(j.value.dateDisplayType)??z()),g=m(()=>be.valueOf(j.value.numeralSystem)??y()),B=m(()=>_e.valueOf(j.value.decimalSeparator)?.symbol??v().symbol),b=m(()=>it.valueOf(j.value.digitGroupingSymbol)?.symbol??p().symbol),S=m(()=>x.allPlainAccounts),R=m(()=>x.allVisiblePlainAccounts),V=m(()=>Uu(R.value)),Z=m(()=>n()),ee=m(()=>o()),W=m(()=>s()),G=m(()=>r(g.value,L.value.calendarType)),U=m(()=>l(g.value,L.value.calendarType)),ye=m(()=>i(g.value)),Se=m(()=>c(g.value)),he=m(()=>f(g.value,L.value.calendarType)),Me=m(()=>A(g.value,B.value)),ze=m(()=>T()),Ee=m(()=>C()),xe=m(()=>Y()),Ge=m(()=>k(g.value,b.value)),E=m(()=>$()),fe=m(()=>F()),ue=m(()=>H()),ce=m(()=>w()),ne=m(()=>{const we=t("Language");return we!=="Language"?`${we} / Language`:we}),oe=m(()=>{for(const we of Ge.value)if(we.type===j.value.digitGrouping)return we.enabled;return!1}),Te=m(()=>!j.value.password&&!j.value.confirmPassword&&!j.value.email&&!j.value.nickname||!j.value.password&&!j.value.confirmPassword&&j.value.email===ae.value.email&&j.value.nickname===ae.value.nickname&&j.value.defaultAccountId===ae.value.defaultAccountId&&j.value.transactionEditScope===ae.value.transactionEditScope&&j.value.language===ae.value.language&&j.value.defaultCurrency===ae.value.defaultCurrency&&j.value.fiscalYearStart===ae.value.fiscalYearStart&&j.value.firstDayOfWeek===ae.value.firstDayOfWeek&&j.value.calendarDisplayType===ae.value.calendarDisplayType&&j.value.dateDisplayType===ae.value.dateDisplayType&&j.value.longDateFormat===ae.value.longDateFormat&&j.value.shortDateFormat===ae.value.shortDateFormat&&j.value.longTimeFormat===ae.value.longTimeFormat&&j.value.shortTimeFormat===ae.value.shortTimeFormat&&j.value.fiscalYearFormat===ae.value.fiscalYearFormat&&j.value.currencyDisplayType===ae.value.currencyDisplayType&&j.value.numeralSystem===ae.value.numeralSystem&&j.value.decimalSeparator===ae.value.decimalSeparator&&j.value.digitGroupingSymbol===ae.value.digitGroupingSymbol&&j.value.digitGrouping===ae.value.digitGrouping&&j.value.coordinateDisplayType===ae.value.coordinateDisplayType&&j.value.expenseAmountColor===ae.value.expenseAmountColor&&j.value.incomeAmountColor===ae.value.incomeAmountColor?"Nothing has been modified":!j.value.password&&j.value.confirmPassword?"Password cannot be blank":j.value.password&&!j.value.confirmPassword?"Password confirmation cannot be blank":null),Oe=m(()=>j.value.password&&j.value.confirmPassword&&j.value.password!==j.value.confirmPassword?"Password and password confirmation do not match":j.value.email?j.value.nickname?j.value.defaultCurrency?null:"Default currency cannot be blank":"Nickname cannot be blank":"Email address cannot be blank"),We=m(()=>j.value.defaultCurrency?null:"Default currency cannot be blank"),Be=m(()=>null),Tt=m(()=>!!Te.value),_=m(()=>!!Oe.value),ke=m(()=>!!We.value),Fe=m(()=>!!Be.value);function dt(we){de.value=we.emailVerified,ae.value.fillFrom(we),j.value.fillFrom(ae.value)}function Ot(){j.value.fillFrom(ae.value)}function Gt(we){if(we){we.firstDayOfWeek!==ae.value.firstDayOfWeek&&O.resetTransactionOverview(),dt(we);const Nt=I(we.language);d.updateLocalizedDefaultSettings(Nt),rs(we.expenseAmountColor,we.incomeAmountColor)}}return{newProfile:j,oldProfile:ae,emailVerified:de,loading:ge,resending:M,saving:h,allAccounts:S,allVisibleAccounts:R,allVisibleCategorizedAccounts:V,allWeekDays:Z,allCalendarDisplayTypes:ee,allDateDisplayTypes:W,allLongDateFormats:G,allShortDateFormats:U,allLongTimeFormats:ye,allShortTimeFormats:Se,allFiscalYearFormats:he,allCurrencyDisplayTypes:Me,allNumeralSystemTypes:ze,allDecimalSeparators:Ee,allDigitGroupingSymbols:xe,allDigitGroupingTypes:Ge,allCoordinateDisplayTypes:E,allExpenseAmountColorTypes:fe,allIncomeAmountColorTypes:ue,allTransactionEditScopeTypes:ce,languageTitle:ne,supportDigitGroupingSymbol:oe,inputIsNotChangedProblemMessage:Te,inputInvalidProblemMessage:Oe,langAndRegionInputInvalidProblemMessage:We,extendInputInvalidProblemMessage:Be,inputIsNotChanged:Tt,inputIsInvalid:_,langAndRegionInputIsInvalid:ke,extendInputIsInvalid:Fe,setCurrentUserProfile:dt,reset:Ot,doAfterProfileUpdate:Gt}}const yg=Vt("userExternalAUth",()=>{function t(){return new Promise((a,n)=>{re.getExternalAuths().then(o=>{const s=o.data;if(!s||!s.success||!s.result){n({message:"Unable to retrieve third-party logins list"});return}a(s.result)}).catch(o=>{X.error("failed to load third-party logins list",o),o.response&&o.response.data&&o.response.data.errorMessage?n({error:o.response.data}):o.processed?n(o):n({message:"Unable to retrieve third-party logins list"})})})}function e(a){return new Promise((n,o)=>{re.unlinkExternalAuth(a).then(s=>{const r=s.data;if(!r||!r.success||!r.result){o({message:"Unable to unlink third-party login"});return}n(r.result)}).catch(s=>{X.error("failed to revoke token",s),s.response&&s.response.data&&s.response.data.errorMessage?o({error:s.response.data}):s.processed?o(s):o({message:"Unable to unlink third-party login"})})})}return{getExternalAuths:t,unlinkExternalAuth:e}}),km=8,Om=5;var Ya=(t=>(t.Api="api",t.MCP="mcp",t.Phone="phone",t.Tablet="tablet",t.TV="tv",t.Wearable="wearable",t.Default="default",t))(Ya||{});class li{tokenId;isCurrent;deviceType;deviceInfo;deviceName;lastSeen;constructor(e,a,n,o,s,r){this.tokenId=e,this.isCurrent=a,this.deviceType=n,this.deviceInfo=o,this.deviceName=s,this.lastSeen=r}static of(e,a,n,o,s,r){return new li(e,a,n,o,s,r)}}function Um(t){const e=Ql(t);return{device:{vendor:e.device.vendor,model:e.device.model,type:e.device.type},os:{name:e.os.name,version:e.os.version},browser:{name:e.browser.name,version:e.browser.version}}}function Fm(t){if(!t)return"";let e="";if(t.device&&t.device.model?e=t.device.model:t.os&&t.os.name&&(e=t.os.name,t.os.version&&(e+=" "+t.os.version)),t.browser&&t.browser.name){let a=t.browser.name;t.browser.version&&(a+=" "+t.browser.version),e?e+=" ("+a+")":e=a}return e||"Unknown Device"}function hg(t){const e=t.tokenType===km,a=t.tokenType===Om,n=Um(t.userAgent);let o=Ya.Default,s="Other Device";return e?(o=Ya.Api,s="API Token"):a?(o=Ya.MCP,s="MCP Token"):(n&&n.device?n.device.type==="mobile"?o=Ya.Phone:n.device.type==="wearable"?o=Ya.Wearable:n.device.type==="tablet"?o=Ya.Tablet:n.device.type==="smarttv"?o=Ya.TV:o=Ya.Default:o=Ya.Default,t.isCurrent?s="Current":s="Other Device"),li.of(t.tokenId,t.isCurrent,o,e||a?t.userAgent:Fm(n),s,t.lastSeen)}const Tg=Vt("twoFactorAuth",()=>{function t(){return new Promise((s,r)=>{re.get2FAStatus().then(l=>{const i=l.data;if(!i||!i.success||!i.result||!Rn(i.result.enable)){r({message:"Unable to retrieve current two-factor authentication status"});return}s(i.result)}).catch(l=>{X.error("failed to retrieve 2fa status",l),l.response&&l.response.data&&l.response.data.errorMessage?r({error:l.response.data}):l.processed?r(l):r({message:"Unable to retrieve current two-factor authentication status"})})})}function e(){return new Promise((s,r)=>{re.enable2FA().then(l=>{const i=l.data;if(!i||!i.success||!i.result||!i.result.qrcode||!i.result.secret){r({message:"Unable to enable two-factor authentication"});return}s(i.result)}).catch(l=>{X.error("failed to request to enable 2fa",l),l.response&&l.response.data&&l.response.data.errorMessage?r({error:l.response.data}):l.processed?r(l):r({message:"Unable to enable two-factor authentication"})})})}function a(s){return new Promise((r,l)=>{re.confirmEnable2FA(s).then(i=>{const c=i.data;if(!c||!c.success||!c.result||!c.result.token){l({message:"Unable to enable two-factor authentication"});return}c.result.token&&nn(c.result.token),r(c.result)}).catch(i=>{X.error("failed to confirm to enable 2fa",i),i.response&&i.response.data&&i.response.data.errorMessage?l({error:i.response.data}):i.processed?l(i):l({message:"Unable to enable two-factor authentication"})})})}function n(s){return new Promise((r,l)=>{re.disable2FA(s).then(i=>{const c=i.data;if(!c||!c.success||!c.result){l({message:"Unable to disable two-factor authentication"});return}r(c.result)}).catch(i=>{X.error("failed to disable 2fa",i),i.response&&i.response.data&&i.response.data.errorMessage?l({error:i.response.data}):i.processed?l(i):l({message:"Unable to disable two-factor authentication"})})})}function o(s){return new Promise((r,l)=>{re.regenerate2FARecoveryCode(s).then(i=>{const c=i.data;if(!c||!c.success||!c.result||!c.result.recoveryCodes||!c.result.recoveryCodes.length){l({message:"Unable to regenerate two-factor authentication backup codes"});return}r(c.result)}).catch(i=>{X.error("failed to regenerate 2fa recovery code",i),i.response&&i.response.data&&i.response.data.errorMessage?l({error:i.response.data}):i.processed?l(i):l({message:"Unable to regenerate two-factor authentication backup codes"})})})}return{get2FAStatus:t,enable2FA:e,confirmEnable2FA:a,disable2FA:n,regenerate2FARecoveryCode:o}});function vg(){const{tt:t,formatNumberToLocalizedNumerals:e}=Ze(),a=kt(),n=q(null),o=m(()=>n.value?{totalTransactionCount:e(parseInt(n.value.totalTransactionCount)),totalAccountCount:e(parseInt(n.value.totalAccountCount)),totalTransactionCategoryCount:e(parseInt(n.value.totalTransactionCategoryCount)),totalTransactionTagCount:e(parseInt(n.value.totalTransactionTagCount)),totalTransactionPictureCount:e(parseInt(n.value.totalTransactionPictureCount)),totalTransactionTemplateCount:e(parseInt(n.value.totalTransactionTemplateCount)),totalScheduledTransactionCount:e(parseInt(n.value.totalScheduledTransactionCount))}:null);function s(r){const l=a.currentUserNickname;return l?t("dataExport.exportFilename",{nickname:l})+"."+r:t("dataExport.defaultExportFilename")+"."+r}return{dataStatistics:n,displayDataStatistics:o,getExportFileName:s}}function Ag(){const{tt:t,getAllTimezones:e,getAllTimezoneTypesUsedForStatistics:a,getAllCurrencySortingTypes:n,setTimeZone:o}=Ze(),s=ht(),r=da(),l=mn(),i=Na(),c=Mn(),f=Nn(),A=q(!1),T=q(!1),C=m(()=>[{name:t("System Default"),value:"auto"},{name:t("Light"),value:"light"},{name:t("Dark"),value:"dark"}]),Y=m(()=>e(za(),!0)),k=m(()=>a()),$=m(()=>n()),F=m(()=>[{name:t("Disabled"),value:"disabled"},{name:t("Enabled"),value:"enabled"},{name:t("Show Confirmation Every Time"),value:"confirmation"}]),H=m(()=>r.allPlainAccounts.length>0),w=m(()=>r.allVisibleAccountsCount>0),z=m(()=>!Tn(i.allTransactionCategoriesMap)),y=m({get:()=>s.appSettings.timeZone,set:g=>{s.setTimeZone(g),o(g),l.updateTransactionListInvalidState(!0),c.updateTransactionOverviewInvalidState(!0),f.updateTransactionStatisticsInvalidState(!0)}}),v=m({get:()=>s.appSettings.autoUpdateExchangeRatesData,set:g=>s.setAutoUpdateExchangeRatesData(g)}),p=m({get:()=>s.appSettings.showAccountBalance,set:g=>s.setShowAccountBalance(g)}),I=m({get:()=>s.appSettings.showAmountInHomePage,set:g=>s.setShowAmountInHomePage(g)}),d=m({get:()=>s.appSettings.timezoneUsedForStatisticsInHomePage,set:g=>{s.setTimezoneUsedForStatisticsInHomePage(g),c.updateTransactionOverviewInvalidState(!0)}}),x=m({get:()=>s.appSettings.showTotalAmountInTransactionListPage,set:g=>s.setShowTotalAmountInTransactionListPage(g)}),O=m({get:()=>s.appSettings.showTagInTransactionListPage,set:g=>s.setShowTagInTransactionListPage(g)}),N=m({get:()=>s.appSettings.itemsCountInTransactionListPage,set:g=>s.setItemsCountInTransactionListPage(g)}),Q=m({get:()=>s.appSettings.autoSaveTransactionDraft,set:g=>{s.setAutoSaveTransactionDraft(g),g==="disabled"&&l.clearTransactionDraft()}}),j=m({get:()=>s.appSettings.autoGetCurrentGeoLocation,set:g=>s.setAutoGetCurrentGeoLocation(g)}),ae=m({get:()=>s.appSettings.currencySortByInExchangeRatesPage,set:g=>s.setCurrencySortByInExchangeRatesPage(g)}),de=m(()=>{const g=s.appSettings.overviewAccountFilterInHomePage;return h(g,r.allPlainAccounts)}),ge=m(()=>{const g=s.appSettings.totalAmountExcludeAccountIds;return h(g,r.allVisiblePlainAccounts)}),M=m(()=>{const g=s.appSettings.overviewTransactionCategoryFilterInHomePage;return L(g)});function h(g,B){if(A.value||!B||!B.length)return"";let b=!1;for(const R of ja(g,!0))if(r.allAccountsMap[R]){b=!0;break}if(!b)return t("All");let S=!0;for(const R of B)if(!g[R.id]){S=!1;break}return t(S?"None":"Partial")}function L(g){if(T.value||!i.allTransactionCategoriesMap)return"";let B=!1;for(const S of ja(g,!0))if(i.allTransactionCategoriesMap[S]){B=!0;break}if(!B)return t("All");let b=!0;for(const S of nt(i.allTransactionCategoriesMap))if(!(S.type!==ve.Income&&S.type!==ve.Expense)&&!g[S.id]){b=!1;break}return t(b?"None":"Partial")}return{loadingAccounts:A,loadingTransactionCategories:T,allThemes:C,allTimezones:Y,allTimezoneTypesUsedForStatistics:k,allCurrencySortingTypes:$,allAutoSaveTransactionDraftTypes:F,timeZone:y,hasAnyAccount:H,hasAnyVisibleAccount:w,hasAnyTransactionCategory:z,isAutoUpdateExchangeRatesData:v,showAccountBalance:p,showAmountInHomePage:I,itemsCountInTransactionListPage:N,timezoneUsedForStatisticsInHomePage:d,showTotalAmountInTransactionListPage:x,showTagInTransactionListPage:O,autoSaveTransactionDraft:Q,isAutoGetCurrentGeoLocation:j,currencySortByInExchangeRatesPage:ae,accountsIncludedInHomePageOverviewDisplayContent:de,accountsIncludedInTotalDisplayContent:ge,transactionCategoriesIncludedInHomePageOverviewDisplayContent:M}}function Ig(){const t=ht(),e=q(!1),a=m({get:()=>t.appSettings.applicationLock,set:o=>t.setEnableApplicationLock(o)}),n=m({get:()=>t.appSettings.applicationLockWebAuthn,set:o=>t.setEnableApplicationLockWebAuthn(o)});return pm().then(o=>{e.value=o}),{isSupportedWebAuthn:e,isEnableApplicationLock:a,isEnableApplicationLockWebAuthn:n}}function bg(){const{getAllDateRanges:t,getAllTimezoneTypesUsedForStatistics:e,getAllCategoricalChartTypes:a,getAllTrendChartTypes:n,getAllStatisticsChartDataTypes:o,getAllStatisticsSortingTypes:s}=Ze(),r=ht(),l=m(()=>o(Ue.CategoricalAnalysis)),i=m(()=>e()),c=m(()=>s()),f=m(()=>a()),A=m(()=>t(ha.Normal,!1)),T=m(()=>n()),C=m(()=>t(ha.TrendAnalysis,!1)),Y=m(()=>t(ha.AssetTrends,!1)),k=m({get:()=>r.appSettings.statistics.defaultChartDataType,set:I=>r.setStatisticsDefaultChartDataType(I)}),$=m({get:()=>r.appSettings.statistics.defaultTimezoneType,set:I=>r.setStatisticsDefaultTimezoneType(I)}),F=m({get:()=>r.appSettings.statistics.defaultSortingType,set:I=>r.setStatisticsSortingType(I)}),H=m({get:()=>r.appSettings.statistics.defaultCategoricalChartType,set:I=>r.setStatisticsDefaultCategoricalChartType(I)}),w=m({get:()=>r.appSettings.statistics.defaultCategoricalChartDataRangeType,set:I=>r.setStatisticsDefaultCategoricalChartDateRange(I)}),z=m({get:()=>r.appSettings.statistics.defaultTrendChartType,set:I=>r.setStatisticsDefaultTrendChartType(I)}),y=m({get:()=>r.appSettings.statistics.defaultTrendChartDataRangeType,set:I=>r.setStatisticsDefaultTrendChartDateRange(I)}),v=m({get:()=>r.appSettings.statistics.defaultAssetTrendsChartType,set:I=>r.setStatisticsDefaultAssetTrendsChartType(I)}),p=m({get:()=>r.appSettings.statistics.defaultAssetTrendsChartDataRangeType,set:I=>r.setStatisticsDefaultAssetTrendsChartDateRange(I)});return{allChartDataTypes:l,allTimezoneTypesUsedForStatistics:i,allSortingTypes:c,allCategoricalChartTypes:f,allCategoricalChartDateRanges:A,allTrendChartTypes:T,allTrendChartDateRanges:C,allAssetTrendsChartDateRanges:Y,defaultChartDataType:k,defaultTimezoneType:$,defaultSortingType:F,defaultCategoricalChartType:H,defaultCategoricalChartDateRange:w,defaultTrendChartType:z,defaultTrendChartDateRange:y,defaultAssetTrendsChartType:v,defaultAssetTrendsChartDateRange:p}}const hs=[{categoryName:"Basic Settings",items:[{settingKey:"showAccountBalance",settingName:"Show Account Balance",mobile:!0,desktop:!0}]},{categoryName:"Overview Page",items:[{settingKey:"showAmountInHomePage",settingName:"Show Amount",mobile:!0,desktop:!0},{settingKey:"timezoneUsedForStatisticsInHomePage",settingName:"Timezone Used for Statistics",mobile:!0,desktop:!0},{settingKey:"overviewAccountFilterInHomePage",settingName:"Accounts Included in Overview Statistics",mobile:!0,desktop:!0},{settingKey:"overviewTransactionCategoryFilterInHomePage",settingName:"Transaction Categories Included in Overview Statistics",mobile:!0,desktop:!0}]},{categoryName:"Transaction List Page",items:[{settingKey:"itemsCountInTransactionListPage",settingName:"Transactions Per Page",mobile:!1,desktop:!0},{settingKey:"showTotalAmountInTransactionListPage",settingName:"Show Monthly Total Amount",mobile:!0,desktop:!0},{settingKey:"showTagInTransactionListPage",settingName:"Show Transaction Tag",mobile:!0,desktop:!0}]},{categoryName:"Transaction Edit Page",items:[{settingKey:"autoSaveTransactionDraft",settingName:"Automatically Save Draft",mobile:!0,desktop:!0},{settingKey:"autoGetCurrentGeoLocation",settingName:"Automatically Add Geolocation",mobile:!0,desktop:!0},{settingKey:"alwaysShowTransactionPicturesInMobileTransactionEditPage",settingName:"Always Show Transaction Pictures",mobile:!0,desktop:!1}]},{categoryName:"Insights & Explore Page",items:[{settingKey:"insightsExploreDefaultDateRangeType",settingName:"Default Date Range",mobile:!1,desktop:!0},{settingKey:"timezoneUsedForInsightsExplorePage",settingName:"Timezone Used for Date Range",mobile:!1,desktop:!0}]},{categoryName:"Account List Page",items:[{settingKey:"totalAmountExcludeAccountIds",settingName:"Accounts Included in Total",mobile:!0,desktop:!0}]},{categoryName:"Exchange Rates Data Page",items:[{settingKey:"currencySortByInExchangeRatesPage",settingName:"Sort by",mobile:!0,desktop:!0}]},{categoryName:"Statistics Settings",categorySubName:"Common Settings",items:[{settingKey:"statistics.defaultChartDataType",settingName:"Default Chart Data Type",mobile:!0,desktop:!0},{settingKey:"statistics.defaultTimezoneType",settingName:"Timezone Used for Date Range",mobile:!0,desktop:!0},{settingKey:"statistics.defaultAccountFilter",settingName:"Default Account Filter",mobile:!0,desktop:!0},{settingKey:"statistics.defaultTransactionCategoryFilter",settingName:"Default Transaction Category Filter",mobile:!0,desktop:!0},{settingKey:"statistics.defaultSortingType",settingName:"Default Sort Order",mobile:!0,desktop:!0}]},{categoryName:"Statistics Settings",categorySubName:"Categorical Analysis Settings",items:[{settingKey:"statistics.defaultCategoricalChartType",settingName:"Default Chart Type",mobile:!0,desktop:!0},{settingKey:"statistics.defaultCategoricalChartDataRangeType",settingName:"Default Date Range",mobile:!0,desktop:!0}]},{categoryName:"Statistics Settings",categorySubName:"Trend Analysis Settings",items:[{settingKey:"statistics.defaultTrendChartType",settingName:"Default Chart Type",mobile:!1,desktop:!0},{settingKey:"statistics.defaultTrendChartDataRangeType",settingName:"Default Date Range",mobile:!0,desktop:!0}]},{categoryName:"Statistics Settings",categorySubName:"Asset Trends Settings",items:[{settingKey:"statistics.defaultAssetTrendsChartType",settingName:"Default Chart Type",mobile:!1,desktop:!0},{settingKey:"statistics.defaultAssetTrendsChartDataRangeType",settingName:"Default Date Range",mobile:!0,desktop:!0}]}];function Cg(){const t=ht(),e=q(!1),a=q(!1),n=q(!1),o=q(Object.assign({},t.syncedAppSettings)),s=m(()=>t.enableApplicationCloudSync),r=m(()=>{for(const k of ja(o.value,!0))return!0;return!1}),l=m(()=>{const k=[];for(const $ of ja(o.value,!0))k.push($);return k});function i(k){for(const $ of k.items)if(!o.value[$.settingKey])return!1;return!0}function c(k){let $=0;for(const F of k.items)o.value[F.settingKey]||$++;return $>0&&$<k.items.length}function f(k,$){for(const F of k.items)o.value[F.settingKey]=$}function A(){for(const k of hs)for(const $ of k.items)o.value[$.settingKey]=!0}function T(){for(const k of hs)for(const $ of k.items)o.value[$.settingKey]=!1}function C(){for(const k of hs)for(const $ of k.items)o.value[$.settingKey]=!o.value[$.settingKey]}function Y(k){if(k&&k.length>0){t.setApplicationSettingsFromCloudSettings(k);for(const $ of k)$&&$.settingKey&&(o.value[$.settingKey]=!0)}else t.setApplicationSettingsFromCloudSettings(void 0),o.value={}}return{ALL_APPLICATION_CLOUD_SETTINGS:hs,loading:e,enabling:a,disabling:n,enabledApplicationCloudSettings:o,isEnableCloudSync:s,hasEnabledApplicationCloudSettings:r,enabledApplicationCloudSettingKeys:l,isAllSettingsSelected:i,hasSettingSelectedButNotAllChecked:c,updateSettingsSelected:f,selectAllSettings:A,selectNoneSettings:T,selectInvertSettings:C,setUserApplicationCloudSettings:Y}}const Dg=0,Sg=9999999999999e-4;function Mg(){const{getAllDisplayExchangeRates:t,formatDateTimeToLongDate:e,parseAmountFromWesternArabicNumerals:a}=Ze(),n=kt(),o=va(),s=q(n.currentUserDefaultCurrency),r=q(100),l=m(()=>n.currentUserDefaultCurrency),i=m(()=>o.latestExchangeRates.data),c=m(()=>o.isUserCustomExchangeRates),f=m(()=>{if(!o.exchangeRatesLastUpdateTime)return"";const Y=Pe(o.exchangeRatesLastUpdateTime);return e(Y)}),A=m(()=>t(i.value));function T(Y,k,$){return!k||!$?"":Y===""?0:Xo(Y,k.rate,$.rate)}function C(Y,k){s.value=Y,r.value=a(k)}return{baseCurrency:s,baseAmount:r,defaultCurrency:l,exchangeRatesData:i,isUserCustomExchangeRates:c,exchangeRatesDataUpdateTime:f,availableExchangeRates:A,getConvertedAmount:T,setAsBaseline:C}}const Bm=Vt("systems",()=>{function t(){return new Promise((e,a)=>{re.getServerVersion().then(n=>{const o=n.data;if(!o||!o.success||!o.result){a({message:"Unable to retrieve server version"});return}const s=cm();o.result.version&&s.version!==o.result.version&&(X.warn(`client version "${s.version}" does not match server version "${o.result.version}"`),e({match:!1,version:o.result})),o.result.commitHash&&s.commitHash!==o.result.commitHash&&(X.warn(`client commit hash "${s.commitHash}" does not match server commit hash "${o.result.commitHash}"`),e({match:!1,version:o.result})),e({match:!0,version:o.result})}).catch(n=>{X.error("failed to retrieve server version",n),n.response&&n.response.data&&n.response.data.errorMessage?a({error:n.response.data}):n.processed?a(n):a({message:"Unable to retrieve server version"})})})}return{checkIfClientVersionMatchServerVersion:t}});var Pm={code:["jiangshengwu","vigdail","f97","Miguelonlonlon","seb26","nktlitvinenko","lvdou-bing"],translators:{de:["chrgm"],en:[],es:["Miguelonlonlon","abrugues"],fr:["brieucdlf"],it:["waron97"],ja:["tkymmm"],kn:["Darshanbm05"],ko:["overworks"],nl:["automagics"],"pt-BR":["thecodergus"],ru:["artegoser"],sl:["thehijacker"],th:["natthavat28"],tr:["aydnykn"],uk:["nktlitvinenko"],vi:["f97"],"zh-Hans":[],"zh-Hant":[]}};function Rm(){return Pm||{}}var Ym=[{name:"Gin",copyright:"Copyright (c) 2014 Manuel Martínez-Almeida",url:"https://github.com/gin-gonic/gin",licenseUrl:"https://github.com/gin-gonic/gin/blob/v1.11.0/LICENSE"},{name:"Cache gin's middleware",copyright:"Copyright (c) 2016 Gin-Gonic",url:"https://github.com/gin-contrib/cache",licenseUrl:"https://github.com/gin-contrib/cache/blob/v1.4.1/LICENSE"},{name:"GZIP gin's middleware",copyright:"Copyright (c) 2017 Gin-Gonic",url:"https://github.com/gin-contrib/gzip",licenseUrl:"https://github.com/gin-contrib/gzip/blob/v1.2.5/LICENSE"},{name:"xorm",copyright:"Copyright (c) 2013 - 2015 The Xorm Authors",url:"https://xorm.io/xorm",licenseUrl:"https://gitea.com/xorm/xorm/src/tag/v1.3.11/LICENSE"},{name:"SQL builder",copyright:"Copyright (c) 2016 The Xorm Authors",url:"https://gitea.com/xorm/builder",licenseUrl:"https://gitea.com/xorm/builder/src/tag/v0.3.13/LICENSE"},{name:"Logrus",copyright:"Copyright (c) 2014 Simon Eskildsen",url:"https://github.com/sirupsen/logrus",licenseUrl:"https://github.com/sirupsen/logrus/blob/v1.9.3/LICENSE"},{name:"cli",copyright:"Copyright (c) 2023 urfave/cli maintainers",url:"https://github.com/urfave/cli",licenseUrl:"https://github.com/urfave/cli/blob/v3.6.1/LICENSE"},{name:"INI",copyright:"Copyright 2014 Unknwon",url:"https://gopkg.in/ini.v1",licenseUrl:"https://github.com/go-ini/ini/blob/v1.67.0/LICENSE"},{name:"Package validator",copyright:"Copyright (c) 2015 Dean Karn",url:"https://github.com/go-playground/validator",licenseUrl:"https://github.com/go-playground/validator/blob/v10.28.0/LICENSE"},{name:"jwt-go",copyright:"Copyright (c) 2012 Dave Grijalva, Copyright (c) 2021 golang-jwt maintainers",url:"https://github.com/golang-jwt/jwt",licenseUrl:"https://github.com/golang-jwt/jwt/blob/v5.3.0/LICENSE"},{name:"otp",url:"https://github.com/pquerna/otp",licenseUrl:"https://github.com/pquerna/otp/blob/v1.5.0/LICENSE"},{name:"Go-MySQL-Driver",url:"https://github.com/go-sql-driver/mysql",licenseUrl:"https://github.com/go-sql-driver/mysql/blob/v1.9.3/LICENSE"},{name:"pq",copyright:"Copyright (c) 2011-2013, 'pq' Contributors Portions Copyright (C) 2011 Blake Mizerany",url:"https://github.com/lib/pq",licenseUrl:"https://github.com/lib/pq/blob/v1.10.9/LICENSE.md"},{name:"go-sqlite3",copyright:"Copyright (c) 2014 Yasuhiro Matsumoto",url:"https://github.com/mattn/go-sqlite3",licenseUrl:"https://github.com/mattn/go-sqlite3/blob/v1.14.32/LICENSE"},{name:"Go Cryptography",copyright:"Copyright (c) 2009 The Go Authors. All rights reserved.",url:"https://golang.org/x/crypto",licenseUrl:"https://cs.opensource.google/go/x/crypto/+/refs/tags/v0.46.0:LICENSE"},{name:"Go Networking",copyright:"Copyright (c) 2009 The Go Authors. All rights reserved.",url:"https://golang.org/x/net",licenseUrl:"https://cs.opensource.google/go/x/net/+/refs/tags/v0.48.0:LICENSE"},{name:"Go Text",copyright:"Copyright (c) 2009 The Go Authors. All rights reserved.",url:"https://golang.org/x/text",licenseUrl:"https://cs.opensource.google/go/x/text/+/refs/tags/v0.32.0:LICENSE"},{name:"Go OAuth2",copyright:"Copyright (c) 2009 The Go Authors. All rights reserved.",url:"https://golang.org/x/oauth2",licenseUrl:"https://cs.opensource.google/go/x/oauth2/+/refs/tags/v0.34.0:LICENSE"},{name:"go-oidc",copyright:"Copyright 2014 CoreOS, Inc",url:"https://github.com/coreos/go-oidc",licenseUrl:"https://github.com/coreos/go-oidc/blob/v3.18.2/LICENSE"},{name:"Gomail",copyright:"Copyright (c) 2014 Alexandre Cesaro",url:"https://github.com/go-mail/mail",licenseUrl:"https://github.com/go-mail/mail/blob/v2.3.1/LICENSE"},{name:"MinIO Go Client SDK",copyright:"MinIO Cloud Storage, (C) 2014-2020 MinIO, Inc.",url:"https://github.com/minio/minio-go",licenseUrl:"https://github.com/minio/minio-go/blob/v7.0.97/LICENSE"},{name:"gocron",copyright:"Copyright (c) 2014, 辣椒面",url:"https://github.com/go-co-op/gocron",licenseUrl:"https://github.com/go-co-op/gocron/blob/v2.18.2/LICENSE"},{name:"barcode",copyright:"Copyright (c) 2014 Florian Sundermann",url:"https://github.com/boombuler/barcode",licenseUrl:"https://github.com/boombuler/barcode/blob/v1.1.0/LICENSE"},{name:"Excelize",copyright:"Copyright (c) 2016-2025 The excelize Authors. Copyright (c) 2011-2017 Geoffrey J. Teale",url:"https://github.com/qax-os/excelize",licenseUrl:"https://github.com/qax-os/excelize/blob/v2.10.0/LICENSE"},{name:"xls",url:"https://github.com/extrame/xls",licenseUrl:"https://github.com/extrame/xls/blob/4a6cf263071b975a90abf74ca3e804b48243be28/LICENSE"},{name:"jsonschema",copyright:"Copyright (C) 2014 Alec Thomas",url:"https://github.com/invopop/jsonschema",licenseUrl:"https://github.com/invopop/jsonschema/blob/v0.13.0/COPYING"},{name:"go-ordered-map",url:"https://github.com/wk8/go-ordered-map",licenseUrl:"https://github.com/wk8/go-ordered-map/blob/v2.1.8/LICENSE"},{name:"go-cache",copyright:"Copyright (c) 2012-2017 Patrick Mylund Nielsen and the go-cache contributors",url:"https://github.com/patrickmn/go-cache",licenseUrl:"https://github.com/patrickmn/go-cache/blob/v2.1.0/LICENSE"},{name:"Testify",copyright:"Copyright (c) 2012-2020 Mat Ryer, Tyler Bunnell and contributors.",url:"https://github.com/stretchr/testify",licenseUrl:"https://github.com/stretchr/testify/blob/v1.11.1/LICENSE"},{name:"vuejs/core",copyright:"Copyright (c) 2018-present, Yuxi (Evan) You and Vue contributors",url:"https://github.com/vuejs/core",licenseUrl:"https://github.com/vuejs/core/blob/v3.5.25/LICENSE"},{name:"Pinia",copyright:"Copyright (c) 2019-present Eduardo San Martin Morote",url:"https://github.com/vuejs/pinia",licenseUrl:"https://github.com/vuejs/pinia/blob/v3.0.4/LICENSE"},{name:"vue-router",copyright:"Copyright (c) 2019-present Eduardo San Martin Morote",url:"https://github.com/vuejs/router",licenseUrl:"https://github.com/vuejs/router/blob/v4.6.4/LICENSE"},{name:"vue-i18n",copyright:"Copyright (c) 2016 kazuya kawaguchi",url:"https://github.com/intlify/vue-i18n-next",licenseUrl:"https://github.com/intlify/vue-i18n-next/blob/v11.2.2/LICENSE"},{name:"vuetify",copyright:"Copyright (c) 2016-now Vuetify, LLC",url:"https://vuetifyjs.com",licenseUrl:"https://github.com/vuetifyjs/vuetify/blob/v3.11.3/packages/vuetify/LICENSE.md"},{name:"register-service-worker",copyright:"Copyright (c) 2013-present, Yuxi (Evan) You",url:"https://github.com/yyx990803/register-service-worker",licenseUrl:"https://github.com/yyx990803/register-service-worker/blob/v1.7.2/LICENSE"},{name:"Framework7",copyright:"Copyright (c) 2014 Vladimir Kharlampidi",url:"https://framework7.io/",licenseUrl:"https://github.com/framework7io/framework7/blob/v9.0.2/LICENSE"},{name:"Framework7-vue",copyright:"Copyright (c) 2014 Vladimir Kharlampidi",url:"https://framework7.io/vue/",licenseUrl:"https://github.com/framework7io/framework7/blob/v9.0.1/LICENSE"},{name:"Framework7-icons",copyright:"Copyright (c) 2016 Vladimir Kharlampidi",url:"https://framework7.io/icons/",licenseUrl:"https://github.com/framework7io/framework7-icons/blob/v5.0.5/LICENSE"},{name:"Dom7",copyright:"Copyright (c) 2017 Vladimir Kharlampidi",url:"https://framework7.io/docs/dom7.html",licenseUrl:"https://github.com/nolimits4web/dom7/blob/v4.0.6/LICENSE"},{name:"Swiper",copyright:"Copyright (c) 2019 Vladimir Kharlampidi",url:"https://swiperjs.com",licenseUrl:"https://github.com/nolimits4web/swiper/blob/v12.0.3/LICENSE"},{name:"Skeleton Elements",copyright:"Copyright (c) 2020 Vladimir Kharlampidi",url:"https://github.com/nolimits4web/skeleton-elements",licenseUrl:"https://github.com/nolimits4web/skeleton-elements/blob/v4.0.1/LICENSE"},{name:"Apache ECharts",copyright:"Copyright © 2017-2025, The Apache Software Foundation Apache ECharts, ECharts, Apache, the Apache feather, and the Apache ECharts project logo are either registered trademarks or trademarks of the Apache Software Foundation.",url:"https://echarts.apache.org/",licenseUrl:"https://github.com/apache/echarts/blob/6.0.0/LICENSE"},{name:"vue-echarts",copyright:"Copyright (c) 2016-present GU Yiling & ECOMFE",url:"https://github.com/ecomfe/vue-echarts",licenseUrl:"https://github.com/ecomfe/vue-echarts/blob/v8.0.1/LICENSE"},{name:"vue3-perfect-scrollbar",copyright:"Copyright (c) 2024 mercs600",url:"https://github.com/mercs600/vue3-perfect-scrollbar",licenseUrl:"https://github.com/mercs600/vue3-perfect-scrollbar/blob/master/LICENSE"},{name:"@vuepic/vue-datepicker",copyright:"Copyright (c) 2021-present Vuepic",url:"https://vue3datepicker.com/",licenseUrl:"https://github.com/Vuepic/vue-datepicker/blob/v12.1.0/LICENSE"},{name:"axios",copyright:"Copyright (c) 2014-present Matt Zabriskie & Collaborators",url:"https://axios-http.com",licenseUrl:"https://github.com/axios/axios/blob/v1.13.2/LICENSE"},{name:"Moment.js",copyright:"Copyright (c) JS Foundation and other contributors",url:"https://momentjs.com",licenseUrl:"https://github.com/moment/moment/blob/2.30.1/LICENSE"},{name:"Moment Timezone",copyright:"Copyright (c) JS Foundation and other contributors",url:"https://momentjs.com",licenseUrl:"https://github.com/moment/moment-timezone/blob/0.6.0/LICENSE"},{name:"Leaflet",copyright:"Copyright (c) 2010-2023, Volodymyr Agafonkin, Copyright (c) 2010-2011, CloudMade, All rights reserved.",url:"https://leafletjs.com/",licenseUrl:"https://github.com/Leaflet/Leaflet/blob/v1.9.4/LICENSE"},{name:"Chardet",copyright:"Copyright (C) 2024 Dmitry Shirokov",url:"https://github.com/runk/node-chardet",licenseUrl:"https://github.com/runk/node-chardet/blob/v2.1.1/LICENSE"},{name:"crypto-js",copyright:"Copyright (c) 2009-2013 Jeff Mott, Copyright (c) 2013-2016 Evan Vosberg",url:"https://github.com/brix/crypto-js",licenseUrl:"https://github.com/brix/crypto-js/blob/4.2.0/LICENSE"},{name:"vuedraggable",copyright:"Copyright (c) 2016-2019 David Desmaisons",url:"https://github.com/SortableJS/vue.draggable.next",licenseUrl:"https://github.com/SortableJS/vue.draggable.next/blob/fae4944e7227f8f0ca06e19be01b14b584cfa973/LICENSE"},{name:"cbor-js",copyright:"Copyright (c) 2014 Patrick Gansterer <paroga@paroga.com>",url:"https://github.com/paroga/cbor-js",licenseUrl:"https://github.com/paroga/cbor-js/blob/v0.1.0/LICENSE"},{name:"clipboard.js",copyright:"Copyright (c) Zeno Rocha",url:"https://clipboardjs.com",licenseUrl:"https://github.com/zenorocha/clipboard.js/blob/v2.0.11/LICENSE"},{name:"UAParser.js",copyright:"Copyright (c) 2012-2024 Faisal Salman <f@faisalman.com>",url:"https://github.com/faisalman/ua-parser-js",licenseUrl:"https://github.com/faisalman/ua-parser-js/blob/1.0.39/license.md"},{name:"Jalaali JavaScript",copyright:"Copyright (c) 2020 Behrang Norouzinia",url:"https://github.com/jalaali/jalaali-js",licenseUrl:"https://github.com/jalaali/jalaali-js/blob/v1.2.8/LICENSE"},{name:"Materio - Vuetify VueJS 3 Free Admin Template",copyright:"Copyright (c) 2022 ThemeSelection",url:"https://github.com/themeselection/materio-vuetify-vuejs-admin-template-free",licenseUrl:"https://github.com/themeselection/materio-vuetify-vuejs-admin-template-free/blob/v2.3.0/LICENSE"},{name:"Icons8 Line Awesome",url:"https://icons8.com/line-awesome",licenseUrl:"https://github.com/icons8/line-awesome/blob/master/LICENSE.md"},{name:"Material Design Icons for JS/TypeScript",url:"https://materialdesignicons.com",licenseUrl:"https://github.com/Templarian/MaterialDesign-JS/blob/v7.4.47/LICENSE"},{name:"Solar Icons Set",url:"https://www.figma.com/community/file/1166831539721848736/Solar-Icons-Set",licenseUrl:"https://creativecommons.org/licenses/by/4.0"},{name:"Hand drawn minimal background",url:"https://www.freepik.com/free-vector/hand-drawn-minimal-background_15441932.htm",licenseUrl:"https://www.freepikcompany.com/legal"},{name:"Illustration of people working at the office",url:"https://www.freepik.com/free-vector/illustration-people-working-office_5161711.htm",licenseUrl:"https://www.freepikcompany.com/legal"},{name:"Meeting scenes at the office collection",url:"https://www.freepik.com/free-vector/meeting-scenes-office-collection_4085819.htm",licenseUrl:"https://www.freepikcompany.com/legal"}];function zm(){return`MIT License\r
\r
Copyright (c) 2020-2025 MaysWind (i@mayswind.net)\r
\r
Permission is hereby granted, free of charge, to any person obtaining a copy\r
of this software and associated documentation files (the "Software"), to deal\r
in the Software without restriction, including without limitation the rights\r
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r
copies of the Software, and to permit persons to whom the Software is\r
furnished to do so, subject to the following conditions:\r
\r
The above copyright notice and this permission notice shall be included in all\r
copies or substantial portions of the Software.\r
\r
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r
SOFTWARE.\r
`}function $m(){return Ym||[]}function Ng(){const{tt:t,formatDateTimeToLongDateTime:e}=Ze(),a=Bm(),n=va(),o=`${ri()}`,s=q(null),r=q(!0),l=m(()=>s.value?ll(s.value):""),i=m(()=>{const H=um();if(!H)return H;const w=Pe(parseInt(H));return e(w)}),c=m(()=>n.latestExchangeRates.data),f=m(()=>n.isUserCustomExchangeRates),A=m(()=>{const H=al();return H?t(`mapprovider.${H}`):""}),T=m(()=>bm()),C=m(()=>Rm()),Y=m(()=>zm().replace(/\r/g,"").split(`
`)),k=m(()=>$m());function $(){lm().then(()=>{location.reload()})}function F(){a.checkIfClientVersionMatchServerVersion().then(({match:H,version:w})=>{s.value=w,r.value=H})}return{clientVersion:o,clientVersionMatchServerVersion:r,serverDisplayVersion:l,clientBuildTime:i,exchangeRatesData:c,isUserCustomExchangeRates:f,mapProviderName:A,mapProviderWebsite:T,contributors:C,licenseLines:Y,thirdPartyLicenses:k,refreshBrowserCache:$,init:F}}const Gm=["value","type","disabled","autofocus","onFocus","onBlur","onKeydown","onPaste","onChange"],Lg=ls({__name:"PinCodeInput",props:{modelValue:{},length:{},disabled:{type:Boolean},autofocus:{type:Boolean},autoConfirm:{type:Boolean},secure:{type:Boolean}},emits:["update:modelValue","pincode:confirm"],setup(t,{emit:e}){const a=t,n=e,{getCurrentNumeralSystemType:o}=Ze(),s=Uo("pin-code-input"),r=q([]),l=m(()=>o()),i=m(()=>{let H="";for(const w of r.value)if(w.value)H+=w.value;else break;return H});function c(H,w){r.value.length=0;for(let z=0;z<H;z++){const y={value:"",inputType:"tel",inputTimer:null,focused:!1};w&&w[z]&&(y.value=w.charAt(z),a.secure&&(y.inputType="password")),r.value.push(y)}}function f(H,w){let z=H;for(let y=H,v=0;y<r.value.length&&v<w.length;y++,v++){const p=w.charAt(v);if(p<"0"||p>"9"){r.value[y].value="";break}r.value[y].value=p,A(y),z=y}T(z),i.value.length===length&&n("pincode:confirm",i.value)}function A(H){if(!a.secure)return;const w=r.value[H];if(w){if(!w.value){w.inputType="tel";return}w.inputTimer||(w.inputTimer=setTimeout(()=>{w.value?w.inputType="password":w.inputType="tel",w.inputTimer=null},300))}}function T(H){s.value&&s.value[H]&&(s.value[H].focus(),s.value[H].select())}function C(H){H>0&&T(H-1)}function Y(H){H<a.length-1&&T(H+1)}function k(H,w){if(!(w.altKey||w.key.indexOf("F")===0&&(w.key.length===2||w.key.length===3))&&!(H<=0&&w.shiftKey&&w.key==="Tab")&&!(H>=a.length-1&&!w.shiftKey&&w.key==="Tab")){if(w.key==="Enter"&&i.value.length===a.length){n("pincode:confirm",i.value),w.preventDefault();return}if(w.key==="ArrowLeft"||w.shiftKey&&w.key==="Tab"){C(H),w.preventDefault();return}if(w.key==="ArrowRight"||!w.shiftKey&&w.key==="Tab"){Y(H),w.preventDefault();return}if(w.key==="Home"){T(0),w.preventDefault();return}if(w.key==="End"){T(a.length-1),w.preventDefault();return}if(!((w.ctrlKey||w.metaKey)&&w.key==="v"||w.key==="Paste")){if(w.key==="Backspace"||w.key==="Delete"||w.key==="Del"){for(let z=H;z<r.value.length;z++)r.value[z].value="",A(z);w.code==="Backspace"&&C(H),w.preventDefault();return}if(w.key.length===1){let z="";be.WesternArabicNumerals.isDigit(w.key)?z=w.key:l.value.isDigit(w.key)&&(z=l.value.replaceLocalizedDigitsToWesternArabicDigits(w.key)),z&&(r.value[H].value=z,A(H),Y(H),a.autoConfirm&&i.value.length===a.length&&n("pincode:confirm",i.value))}w.preventDefault()}}}function $(H,w){if(!w.clipboardData){w.preventDefault();return}const z=w.clipboardData.getData("Text");if(!z){w.preventDefault();return}f(H,z),w.preventDefault()}function F(H,w){if(!w.target||!w.target.value){w.preventDefault();return}f(H,w.target.value),w.preventDefault()}return qa(()=>a.length,H=>{c(H,a.modelValue)}),qa(()=>a.modelValue,H=>{H!==i.value&&c(a.length,H)}),qa(r,()=>{n("update:modelValue",i.value)},{deep:!0}),c(a.length,a.modelValue),(H,w)=>(Oa(),rn("div",{class:"pin-codes-input",style:fr(`grid-template-columns: repeat(${t.length}, minmax(0, 1fr))`)},[(Oa(!0),rn(dr,null,Xl(r.value,(z,y)=>(Oa(),rn("div",{class:Pn(["pin-code-input pin-code-input-outline",{"pin-code-input-focued":r.value[y].focused}]),key:y},[An("input",{ref_for:!0,ref:"pin-code-input",min:"0",maxlength:"1",pattern:"[0-9]*",value:r.value[y].value,type:r.value[y].inputType,disabled:t.disabled?!0:void 0,autofocus:t.autofocus&&y===0?!0:void 0,onFocus:v=>r.value[y].focused=!0,onBlur:v=>r.value[y].focused=!1,onKeydown:v=>k(y,v),onPaste:v=>$(y,v),onChange:v=>F(y,v)},null,40,Gm)],2))),128))],4))}}),Km={class:"datetime-picker-display-dates"},Hm={key:0,class:"datetime-picker-alternate-date"},Wm=["onClick"],wg=ls({__name:"DateTimePicker",props:{modelValue:{},datetimePickerClass:{},isDarkMode:{type:Boolean},numeralSystem:{},enableTimePicker:{type:Boolean},disableYearSelect:{type:Boolean},vertical:{type:Boolean},noSwipeAndScroll:{type:Boolean},clearable:{type:Boolean},minDate:{},maxDate:{},disabledDates:{type:Function},showAlternateDates:{type:Boolean},presetRanges:{}},emits:["update:modelValue"],setup(t,{expose:e,emit:a}){const n=t,o=a,{tt:s,getAllMinWeekdayNames:r,getCurrentCalendarDisplayType:l,getCurrentNumeralSystemType:i,isLongDateMonthAfterYear:c,isLongTime24HourFormat:f,getCalendarDisplayShortYearFromDateTime:A,getCalendarDisplayShortMonthFromDateTime:T,getCalendarDisplayDayOfMonthFromDateTime:C,getCalendarAlternateDate:Y}=Ze(),k=kt(),$=Uo("datetimepicker"),F=Ur(),H=m(()=>hr(r(),w.value)),w=m(()=>k.currentUserFirstDayOfWeek),z=m(()=>c()),y=m(()=>f()),v=m(()=>l().secondaryCalendarType),p=m(()=>Qe(n.numeralSystem)?be.valueOf(n.numeralSystem)??be.Default:i()),I=m({get:()=>n.modelValue,set:ae=>o("update:modelValue",ae)}),d=m(()=>xt(n.modelValue));function x(ae){if(n.showAlternateDates)return Y({year:ae.getFullYear(),month:ae.getMonth()+1,day:ae.getDate()})?.displayDate}function O(ae){$.value?.switchView(ae)}function N(ae){return A(ua(ae,1,1),p.value)}function Q(ae){return xt(I.value)?T(ua(I.value[0].getFullYear(),ae+1,1),p.value):I.value?T(ua(I.value.getFullYear(),ae+1,1),p.value):T(ua(new Date().getFullYear(),ae+1,1),p.value)}function j(ae){return C(ua(ae.getFullYear(),ae.getMonth()+1,ae.getDate()),p.value)}return e({switchView:O}),(ae,de)=>(Oa(),Fo(Qn(gr),{ref_key:"datetimepicker",ref:$,inline:"","auto-apply":"","six-weeks":"center",class:Pn(`datetime-picker ${t.showAlternateDates&&v.value?"datetime-picker-with-alternate-date":""} ${t.datetimePickerClass}`),config:{noSwipe:!!t.noSwipeAndScroll,monthChangeOnScroll:!t.noSwipeAndScroll},"time-config":{enableTimePicker:t.enableTimePicker,enableSeconds:!0,is24:y.value},"input-attrs":{clearable:!!t.clearable},dark:t.isDarkMode,vertical:t.vertical,"disable-year-select":t.disableYearSelect,"year-range":Qn(F),"day-names":H.value,"week-start":w.value,"year-first":z.value,"min-date":t.minDate,"max-date":t.maxDate,"disabled-dates":t.disabledDates,range:d.value?{partialRange:!1}:void 0,"preset-dates":t.presetRanges,modelValue:I.value,"onUpdate:modelValue":de[0]||(de[0]=ge=>I.value=ge)},{year:Ea(({value:ge})=>[on(oa(N(ge)),1)]),"year-overlay-value":Ea(({value:ge})=>[on(oa(N(ge)),1)]),month:Ea(({value:ge})=>[on(oa(Q(ge)),1)]),"month-overlay-value":Ea(({value:ge})=>[on(oa(Q(ge)),1)]),day:Ea(({date:ge})=>[An("div",Km,[An("span",null,oa(j(ge)),1),t.showAlternateDates&&v.value&&x(ge)?(Oa(),rn("span",Hm,oa(x(ge)),1)):kn("",!0)])]),"am-pm-button":Ea(({toggle:ge,value:M})=>[An("button",{class:"dp__pm_am_button",tabindex:"0",onClick:ge},oa(Qn(s)(`datetime.${M}.content`)),9,Wm)]),_:1},8,["class","config","time-config","input-attrs","dark","vertical","disable-year-select","year-range","day-names","week-start","year-first","min-date","max-date","disabled-dates","range","preset-dates","modelValue"]))}}),Eg=ls({__name:"MonthPicker",props:{modelValue:{},monthPickerClass:{},isDarkMode:{type:Boolean},clearable:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=e,{isLongDateMonthAfterYear:o,getCalendarDisplayShortYearFromDateTime:s,getCalendarDisplayShortMonthFromDateTime:r}=Ze(),l=Ur(),i=m(()=>o()),c=m({get:()=>xt(a.modelValue)?a.modelValue.map(k=>A(k)):A(a.modelValue),set:k=>{xt(k)?n("update:modelValue",k.map($=>T($))):n("update:modelValue",T(k))}}),f=m(()=>xt(a.modelValue));function A(k){return{year:k.year,month:k.month0base}}function T(k){return{year:k.year,month0base:k.month}}function C(k){return s(ua(k,1,1))}function Y(k){return xt(c.value)?r(ua(c.value[0].year,k+1,1)):r(ua(c.value.year,k+1,1))}return(k,$)=>(Oa(),Fo(Qn(gr),{inline:"","auto-apply":"","month-picker":"",class:Pn(t.monthPickerClass),"input-attrs":{clearable:!!t.clearable},dark:t.isDarkMode,"year-range":Qn(l),"year-first":i.value,range:f.value?{partialRange:!1}:void 0,modelValue:c.value,"onUpdate:modelValue":$[0]||($[0]=F=>c.value=F)},{year:Ea(({value:F})=>[on(oa(C(F)),1)]),"year-overlay-value":Ea(({value:F})=>[on(oa(C(F)),1)]),month:Ea(({value:F})=>[on(oa(Y(F)),1)]),"month-overlay-value":Ea(({value:F})=>[on(oa(Y(F)),1)]),_:1},8,["class","input-attrs","dark","year-range","year-first","range","modelValue"]))}}),Vm={class:"transaction-calendar-daily-amounts"},Zm={key:0,class:"transaction-calendar-alternate-date"},Jm={key:1,class:"transaction-calendar-daily-amount text-income"},qm={key:2,class:"transaction-calendar-daily-amount text-expense"},xg=ls({__name:"TransactionCalendar",props:{modelValue:{},isDarkMode:{type:Boolean},defaultCurrency:{type:[String,Boolean]},minDate:{},maxDate:{},weekDayNameType:{},dailyTotalAmounts:{},readonly:{type:Boolean},calendarClass:{},dayHasTransactionClass:{}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=e,{getAllLongWeekdayNames:o,getAllShortWeekdayNames:s,getCalendarDisplayDayOfMonthFromDateTime:r,getCalendarAlternateDates:l,formatAmountToLocalizedNumeralsWithCurrency:i}=Ze(),c=kt(),f=m(()=>hr(a.weekDayNameType==="short"?s():o(),A.value)),A=m(()=>c.currentUserFirstDayOfWeek),T=m({get:()=>a.modelValue,set:F=>n("update:modelValue",F)}),C=m(()=>{const F=a.modelValue?a.modelValue.split("-"):null;if(!F||F.length!==3)return;const H=l({year:parseInt(F[0]),month1base:parseInt(F[1])});if(!H)return;const w={};for(const z of H)w[`${z.year}-${z.month}-${z.day}`]=z.displayDate;return w});function Y(F){return!a.dailyTotalAmounts||!a.dailyTotalAmounts[F.getDate()]}function k(F,H,w,z){const y=i(F,H);return w+y+(z?Va:"")}function $(F){return r(ua(F.getFullYear(),F.getMonth()+1,F.getDate()))}return(F,H)=>{const w=jl("vue-date-picker");return Oa(),Fo(w,{inline:"","auto-apply":"","model-type":"yyyy-MM-dd",class:Pn(`transaction-calendar ${C.value?"transaction-calendar-with-alternate-date":""} ${t.calendarClass}`),config:{noSwipe:!0,monthChangeOnArrows:!1,monthChangeOnScroll:!1},"time-config":{enableTimePicker:!1},"input-attrs":{clearable:!1},readonly:t.readonly,dark:t.isDarkMode,"day-names":f.value,"week-start":A.value,"min-date":t.minDate,"max-date":t.maxDate,"disabled-dates":Y,"prevent-min-max-navigation":!0,"hide-offset-dates":!0,"hide-month-year-select":!0,modelValue:T.value,"onUpdate:modelValue":H[0]||(H[0]=z=>T.value=z)},{day:Ea(({day:z,date:y})=>[An("div",Vm,[An("span",{class:Pn(t.dayHasTransactionClass&&t.dailyTotalAmounts&&t.dailyTotalAmounts[z]?t.dayHasTransactionClass:void 0)},oa($(y)),3),C.value&&C.value[`${y.getFullYear()}-${y.getMonth()+1}-${y.getDate()}`]?(Oa(),rn("span",Zm,oa(C.value[`${y.getFullYear()}-${y.getMonth()+1}-${y.getDate()}`]),1)):kn("",!0),t.dailyTotalAmounts&&t.dailyTotalAmounts[z]&&t.dailyTotalAmounts[z].income?(Oa(),rn("span",Jm,oa(k(t.dailyTotalAmounts[z].income,t.defaultCurrency,"",t.dailyTotalAmounts[z].incompleteIncome)),1)):kn("",!0),t.dailyTotalAmounts&&t.dailyTotalAmounts[z]&&t.dailyTotalAmounts[z].expense?(Oa(),rn("span",qm,oa(k(t.dailyTotalAmounts[z].expense,t.defaultCurrency,"",t.dailyTotalAmounts[z].incompleteExpense)),1)):kn("",!0)])]),_:1},8,["class","readonly","dark","day-names","week-start","min-date","max-date","modelValue"])}}});function kg(t){const e=m(()=>{let l=Ws;return t.defaultColor&&(l=t.defaultColor),t.iconType==="account"?o(t.color,l,t.additionalColorAttr):t.iconType==="category"?s(t.color,l,t.additionalColorAttr):r(t.color,l,t.additionalColorAttr)});function a(l){Ae(l)&&(l=l.toString());const i=Nr[l];return i?i.icon:Ds.icon}function n(l){Ae(l)&&(l=l.toString());const i=wr[l];return i?i.icon:Io.icon}function o(l,i,c){let f=i;l&&l!==Un&&(f=`#${l}`);const A={color:f};return c&&(A[c]=l),t.size&&(A["font-size"]=t.size),A}function s(l,i,c){let f=i;l&&l!==ns&&(f=`#${l}`);const A={color:f};return c&&(A[c]=l),t.size&&(A["font-size"]=t.size),A}function r(l,i,c){let f=i;l&&l!==Er&&(f=`#${l}`);const A={color:f};return c&&(A[c]=l),t.size&&(A["font-size"]=t.size),A}return{style:e,getAccountIcon:a,getCategoryIcon:n}}function _m(t,e,a,n,o,s){const{getCurrentNumeralSystemType:r,getCurrentDecimalSeparator:l,getCurrentDigitGroupingSymbol:i}=Ze(),c=q(a),f=m(()=>r());function A(C){if(C.altKey||C.ctrlKey||C.metaKey||C.key.indexOf("F")===0&&(C.key.length===2||C.key.length===3)||C.key==="ArrowLeft"||C.key==="ArrowRight"||C.key==="Home"||C.key==="End"||C.key==="Tab"||C.key==="Backspace"||C.key==="Delete"||C.key==="Del")return;if(t.readonly||t.disabled){C.preventDefault();return}const Y=i(),k=l();if(!be.WesternArabicNumerals.isDigit(C.key)&&!f.value.isDigit(C.key)&&C.key!=="-"&&C.key!==k){C.preventDefault();return}if(e===0&&C.key===k){C.preventDefault();return}if(!C.target)return;const $=C.target;let F=$.value;if(F.indexOf(Y)>=0&&(F=Bo(F,Y)),C.key==="-"&&F.lastIndexOf("-")>0){const z=F.lastIndexOf("-");$.value=F.substring(0,z)+F.substring(z+1,F.length),c.value=$.value,C.preventDefault();return}if(C.key===k&&F.indexOf(k)!==F.lastIndexOf(k)){const z=F.lastIndexOf(k);$.value=F.substring(0,z)+F.substring(z+1,F.length),c.value=$.value,C.preventDefault();return}if(C.key===k&&(F.indexOf(k)===0||F.indexOf(k)===1&&F.charAt(0)==="-")){const z=F.charAt(0)==="-";z&&(F=F.substring(1)),F=(z?`-${f.value.digitZero}`:f.value.digitZero)+F,$.value=F,c.value=$.value,C.preventDefault();return}let H=0;const w=F.indexOf(k);if(w>=0)H=F.length-F.indexOf(k)-1;else if(F.startsWith(f.value.digitZero)&&F.length>=2||F.startsWith(`-${f.value.digitZero}`)&&F.length>=3){const z=F.charAt(0)==="-";for(z&&(F=F.substring(1));F.charAt(0)===f.value.digitZero&&(F.length>=2||C.key!==f.value.digitZero);)F=F.substring(1);$.value=(z?"-":"")+F,c.value=$.value,C.preventDefault();return}if(e>0&&H>e){$.value=F.substring(0,Math.min(w+e+1,F.length-1)),c.value=$.value,C.preventDefault();return}else if(e===0&&w>=0){$.value=F.substring(0,w),c.value=$.value,C.preventDefault();return}try{const z=n(F),y=s(z,F,w>=0);y!==F&&($.value=y,c.value=y,C.preventDefault())}catch(z){X.warn("cannot parse input number, original value is "+F,z),$.value=f.value.digitZero}}function T(C){if(!C.clipboardData||t.readonly||t.disabled){C.preventDefault();return}const Y=C.clipboardData.getData("Text");if(!Y){C.preventDefault();return}const k=n(Y);if(Number.isNaN(k)||!Number.isFinite(k)){C.preventDefault();return}const $=C.target,F=$.selectionStart??0,H=$.selectionEnd??0,w=c.value.slice(0,F)+Y+c.value.slice(H),z=n(w),y=o(z),v=l(),p=w.indexOf(v)>=0,I=s(z,y,p);let d=F+Y.length;I.length!==w.length&&(d>I.length?d=I.length:d=F),window.requestAnimationFrame&&window.requestAnimationFrame(()=>{$.selectionStart=$.selectionEnd=d}),c.value=I,C.preventDefault()}return{currentValue:c,onKeyUpDown:A,onPaste:T}}function Og(t,e){const{getCurrentNumeralSystemType:a,getCurrentDecimalSeparator:n,getCurrentDigitGroupingSymbol:o}=Ze(),{currentValue:s,onKeyUpDown:r,onPaste:l}=_m(t,t.maxDecimalCount??-1,A(t.modelValue),c,A,f),i=m(()=>a());function c(T){if(!T)return 0;const C=n();let Y="";for(let k=0;k<T.length;k++){const $=T.charAt(k);if(!be.WesternArabicNumerals.isDigit($)&&!i.value.isDigit($)&&$!=="-"&&$!==C)break;Y+=$}return Y=i.value.replaceLocalizedDigitsToWesternArabicDigits(Y),C!=="."&&(Y=Ja(Y,C,".")),parseFloat(Y)}function f(T,C){if(Ae(t.minValue)&&T<t.minValue)return A(t.minValue,i.value);if(Ae(t.maxValue)&&T>t.maxValue)return A(t.maxValue,i.value);const Y=n(),k=o();return Ja(Bo(C,k),".",Y)}function A(T,C){if(Qe(C)||(C=a()),!Number.isNaN(T)&&Number.isFinite(T)){const Y=n();return Ae(t.maxDecimalCount)&&t.maxDecimalCount>=0?Ja(C.replaceWesternArabicDigitsToLocalizedDigits(T.toFixed(t.maxDecimalCount)),".",Y):Ja(C.replaceWesternArabicDigitsToLocalizedDigits(T.toString(10)),".",Y)}return C.digitZero}return qa(()=>t.modelValue,T=>{const C=c(s.value);if(T!==C){const Y=A(T,i.value);Y===i.value.digitZero&&s.value===""||(s.value=Y)}}),qa(s,T=>{let C,Y="";if(T){const k=n();if(T[0]==="-"||T[0]===k?C=be.detect(T.charAt(1)):C=be.detect(T.charAt(0)),C&&(C.type===be.WesternArabicNumerals.type||C.type===i.value.type)){for(let $=0;$<T.length;$++){const F=T.charAt($);if(!be.WesternArabicNumerals.isDigit(F)&&!i.value.isDigit(F)&&F!=="-"&&F!==k)break;Y+=T[$]}Y=i.value.replaceWesternArabicDigitsToLocalizedDigits(Y)}else(T==="-"||T===k||T===`-${k}`)&&(Y=T)}if(Y!==T)s.value=Y;else{let k=c(Y);(Number.isNaN(k)||!Number.isFinite(k))&&(k=0),e("update:modelValue",k)}}),{currentValue:s,onKeyUpDown:r,onPaste:l}}const rr=6,lr=1e6,cr="000000",Qm=1e4,ur={"+":1,"-":1,"*":2,"/":2};function Xm(t){const e=t.indexOf(".");if(e<0)return parseInt(t+cr);const a=t.substring(0,e),n=t.substring(e+1);if(n.length>rr)throw new Error("Numeric Overflow");const o=(n+cr).substring(0,rr);return parseInt(a+o)}function ml(t){return Math.trunc(t/Qm)}function mr(t){const e=ml(t);if(e>ol||e<sl)throw new Error("Numeric Overflow")}function jm(t){const e=[],a=[];let n="",o=!0;t=Ja(t," ","");for(let s=0;s<t.length;s++){const r=t[s];if("0"<=r&&r<="9"||r==="."){n+=r;continue}else if(r==="-"&&s+1<t.length&&"0"<=t[s+1]&&t[s+1]<="9"&&n.length===0&&o){n+=r;continue}switch(n.length>0&&(e.push(n),n="",o=!1),r){case"+":case"-":case"*":case"/":if(r==="-"&&o){n+=r;continue}for(;a.length>0;){const i=a[a.length-1];if(i==="(")break;if((i==="+"||i==="-"||i==="*"||i==="/")&&ur[i]>=ur[r])e.push(i),a.pop();else break}a.push(r),o=!0;break;case"(":a.push(r),o=!0;break;case")":let l=!1;for(;a.length>0;){const i=a.pop();if(i==="("){l=!0;break}e.push(i)}if(!l)return X.warn(`cannot parse expression "${t}", because missing left parenthesis`),null;o=!1;break;default:return X.warn(`cannot parse expression "${t}", because containing unknown token "${r}"`),null}}for(n.length>0&&e.push(n);a.length>0;){const s=a.pop();if(s==="(")return X.warn(`cannot parse expression "${t}", because missing right parenthesis`),null;e.push(s)}return e}function ed(t){const e=[];for(let a=0;a<t.length;a++){const n=t[a];switch(n){case"+":case"-":case"*":case"/":if(e.length<2)return X.warn(`cannot evaluate expression "${t.join(" ")}", because not enough operands`),null;const o=e.pop(),s=e.pop();let r;switch(n){case"+":r=s+o;break;case"-":r=s-o;break;case"*":r=Math.trunc(s*o/lr);break;case"/":if(o===0)return X.warn(`cannot evaluate expression "${t.join(" ")}", because division by zero`),null;r=Math.trunc(s*lr/o);break;default:return null}mr(r),e.push(r);break;default:const l=Xm(n);mr(l),e.push(l);break}}return e.length!==1?(X.warn(`cannot evaluate expression "${t.join(" ")}", because missing operator`),null):e[0]}function Ug(t){if(!t)return;const e=jm(t);if(!e)return;const a=ed(e);if(a!==null)return ml(a)}function Fg(t,e){const{getCurrentLanguageTag:a,getCurrentLanguageDisplayName:n,getAllLanguageOptions:o,getLanguageInfo:s,setLanguage:r}=Ze(),l=ht(),i=m(()=>o(!!t.includeSystemDefault)),c=m({get:()=>a(),set:C=>{const Y=r(C);l.updateLocalizedDefaultSettings(Y)}}),f=m(()=>{if(t.useModelValue&&t.modelValue){const C=s(t.modelValue);return C?C.displayName:""}else return n()});function A(C){t.useModelValue?e("update:modelValue",C):c.value=C}function T(C){return t.useModelValue?t.modelValue===C:c.value===C}return{allLanguages:i,currentLocale:c,currentLanguageName:f,updateLanguage:A,isLanguageSelected:T}}function Bg(){const{getAllMeridiemIndicators:t,getCurrentNumeralSystemType:e,isLongTime24HourFormat:a,isLongTimeMeridiemIndicatorFirst:n,isLongTimeHourTwoDigits:o,isLongTimeMinuteTwoDigits:s,isLongTimeSecondTwoDigits:r}=Ze(),l=q(a()),i=q(o()),c=q(s()),f=q(r()),A=q(n()||!1),T=m(()=>e()),C=m(()=>t());function Y(w,z){return Dn(os(ra(w,z)).getUnixTime())}function k(w,z){return fu(Zs(Pr(w)),z).getUnixTime()}function $(w,z){let y=w.toString();return z&&(y=y.padStart(2,be.WesternArabicNumerals.digitZero)),T.value.replaceWesternArabicDigitsToLocalizedDigits(y)}function F(w,z){const y=[],v=l.value?0:1,p=l.value?23:11;for(let I=0;I<w;I++){l.value||y.push({value:$(12,z),itemsIndex:I});for(let d=v;d<=p;d++)y.push({value:$(d,z),itemsIndex:I})}return y}function H(w,z){const y=[];for(let v=0;v<w;v++)for(let p=0;p<60;p++)y.push({value:$(p,z),itemsIndex:v});return y}return{is24Hour:l,isHourTwoDigits:i,isMinuteTwoDigits:c,isSecondTwoDigits:f,isMeridiemIndicatorFirst:A,meridiemItems:C,getLocalDatetimeFromSameDateTimeOfUnixTime:Y,getUnixTimeFromSameDateTimeOfLocalDatetime:k,getDisplayTimeValue:$,generateAllHours:F,generateAllMinutesOrSeconds:H}}function td(t){if(!t.modelValue)return Xe.Default.value;const e=Xe.valueOf(t.modelValue);return e?e.value:Xe.Default.value}function Pg(t){const{getCurrentNumeralSystemType:e,formatGregorianTextualMonthDayToGregorianLikeLongMonthDay:a}=Ze(),n=f=>f.getMonth()===1&&f.getDate()===29,o=q(td(t)),s=m(()=>Qe(t.numeralSystem)?be.valueOf(t.numeralSystem)??be.Default:e()),r=m({get:()=>{const A=Xe.valueOf(o.value)?.toMonthDay()??Xe.Default.toMonthDay();return new Date(new Date().getFullYear(),A.month-1,A.day)},set:f=>{const A=Xe.of(f.getMonth()+1,f.getDate());A?o.value=A.value:o.value=Xe.Default.value}}),l=m(()=>{let f=Xe.valueOf(o.value);return f||(f=Xe.Default),a(f.toMonthDashDayString(),s.value)}),i=m(()=>Dn(Za())),c=m(()=>Dn(hn()));return{disabledDates:n,selectedFiscalYearStart:o,selectedFiscalYearStartValue:r,displayFiscalYearStartDate:l,allowedMinDate:i,allowedMaxDate:c}}function Rg(t,e){const a=[];let n=0;for(const[o,s]of Xt(t))a[n]?a[n]&&a[n].length>=e&&(n++,a[n]=[]):a[n]=[],a[n].push({id:o,icon:s.icon});return a}function ad(t){const{ti:e}=Ze(),a=q(""),n=m(()=>{let c=0;for(const f of t.items)t.primaryHiddenField&&f[t.primaryHiddenField]||c++;return c}),o=m(()=>{const c=[],f=t.items,A=a.value?.toLowerCase()??"";for(const T of f)if(!(t.primaryHiddenField&&T[t.primaryHiddenField])){if(!t.enableFilter||!A){c.push(T);continue}if(t.primaryTitleField&&e(T[t.primaryTitleField],!!t.primaryTitleI18n).toLowerCase().indexOf(A)>=0){c.push(T);continue}t.primarySubItemsField&&s(T).length>0&&c.push(T)}return c});function s(c){const f=[];if(!c||!t.primarySubItemsField)return f;const A=c[t.primarySubItemsField];let T=!1;t.primaryTitleField&&(T=e(c[t.primaryTitleField],!!t.primaryTitleI18n).toLowerCase().indexOf(a.value.toLowerCase())>=0);for(const C of A)if(!(t.secondaryHiddenField&&C[t.secondaryHiddenField])){if(!t.enableFilter||!a.value){f.push(C);continue}if(T){f.push(C);continue}t.secondaryTitleField&&a.value&&e(C[t.secondaryTitleField],!!t.secondaryTitleI18n).toLowerCase().indexOf(a.value.toLowerCase())>=0&&f.push(C)}return f}function r(c,f){return t.secondaryValueField?c===f[t.secondaryValueField]:c===f}function l(c,f){return c&&f&&f[t.primarySubItemsField]?yr(f[t.primarySubItemsField],c,t.secondaryValueField):null}function i(c,f){t.secondaryValueField?c.value=f[t.secondaryValueField]:c.value=f}return{filterContent:a,visibleItemsCount:n,filteredItems:o,getFilteredSubItems:s,isSecondaryValueSelected:r,getSelectedSecondaryItem:l,updateCurrentSecondaryValue:i}}function Yg(t){const{filterContent:e,visibleItemsCount:a,filteredItems:n,getFilteredSubItems:o,isSecondaryValueSelected:s,getSelectedSecondaryItem:r,updateCurrentSecondaryValue:l}=ad(t);function i(A){return lc(t.items,t.primarySubItemsField,t.primaryValueField,t.primaryHiddenField,t.secondaryValueField,t.secondaryHiddenField,A)}function c(A){return t.primaryValueField?yr(t.items,A,t.primaryValueField):A}function f(A,T){t.primaryValueField?A.value=T[t.primaryValueField]:A.value=T}return{filterContent:e,visibleItemsCount:a,filteredItems:n,getFilteredSubItems:o,getCurrentPrimaryValueBySecondaryValue:i,isSecondaryValueSelected:s,getSelectedPrimaryItem:c,getSelectedSecondaryItem:r,updateCurrentPrimaryValue:f,updateCurrentSecondaryValue:l}}function zg(){const{getAllWeekDays:t,getAllTransactionScheduledFrequencyTypes:e,getMonthdayShortName:a}=Ze(),n=kt(),o=m(()=>e()),s=m(()=>t(n.currentUserFirstDayOfWeek)),r=m(()=>{const i=[];for(let c=1;c<=28;c++)i.push({day:c,displayName:a(c)});return i});function l(i){const c=i.split(","),f=[];for(const A of c)A&&f.push(parseInt(A));return oc(f)}return{allTransactionScheduledFrequencyTypes:o,allWeekDays:s,allAvailableMonthDays:r,getFrequencyValues:l}}function $g(t){const{formatAmountToLocalizedNumeralsWithCurrency:e,formatPercentToLocalizedNumerals:a}=Ze(),n=q(0),o=m(()=>{let s=0;for(const l of t.items){const i=l[t.valueField];Ae(i)&&i>0&&(!t.hiddenField||!l[t.hiddenField])&&(s+=i)}const r=[];for(const l of t.items){const i=l[t.valueField],c=t.percentField?l[t.percentField]:-1;if(Ae(i)&&i>0&&(!t.hiddenField||!l[t.hiddenField])&&(!t.minValidPercent||i/s>t.minValidPercent)){const f={id:t.idField&&l[t.idField]?l[t.idField]:l[t.nameField],name:t.idField&&l[t.idField]?l[t.idField]:l[t.nameField],displayName:l[t.nameField],value:i,percent:Ae(c)&&c>=0?c:i/s*100,actualPercent:i/s,color:ul(t.colorField&&l[t.colorField]?l[t.colorField]:Pi[r.length%Pi.length]),sourceItem:l};f.displayPercent=a(f.percent,2,"&lt;0.01"),f.displayValue=t.amountValue?e(f.value,t.defaultCurrency):f.value.toString(),r.push(f)}}return r});return qa(()=>t.items,()=>{n.value=0}),{selectedIndex:n,validItems:o}}function nd(t){let e=sa(),a=za();return t.minTime&&(e=t.minTime),t.maxTime&&(a=t.maxTime),{minDate:e,maxDate:a}}function Gg(t){const{tt:e,formatDateTimeToLongDateTime:a}=Ze(),n=kt(),{minDate:o,maxDate:s}=nd(t),r=q([A(o),A(s)]),l=m(()=>n.currentUserFirstDayOfWeek),i=m(()=>a(T(r.value[0]))),c=m(()=>a(T(r.value[1]))),f=m(()=>{const Y=[];return[te.Today,te.LastSevenDays,te.LastThirtyDays,te.ThisWeek,te.ThisMonth,te.ThisYear,te.LastYear,te.ThisFiscalYear,te.LastFiscalYear].forEach(k=>{const $=$a(k.type,l.value,n.currentUserFiscalYearStart);Y.push({label:e(k.name),value:[A($.minTime),A($.maxTime)]})}),Y});function A(Y){return Dn(os(Pe(Y)).getUnixTime())}function T(Y){return _o(Zs(Pr(Y)))}function C(){if(!r.value[0]||!r.value[1])return null;const Y=r.value[0],k=r.value[1],$=T(Y).getUnixTime(),F=T(k).getUnixTime();if($<0||F<0)throw new Error("Date is too early");return{minUnixTime:$,maxUnixTime:F}}return{dateRange:r,beginDateTime:i,endDateTime:c,presetRanges:f,getLocalDatetimeFromSameDateTimeOfUnixTime:A,getDateTimeFromSameDateTimeOfLocalDatetime:T,getFinalDateRange:C}}function sd(t){let e=Yi(Za()),a=Yi(za());if(t.minTime){const n=ss(t.minTime);n&&(e=n)}if(t.maxTime){const n=ss(t.maxTime);n&&(a=n)}return{minDate:e,maxDate:a}}function Kg(t){const{formatDateTimeToGregorianLikeLongYearMonth:e}=Ze(),{minDate:a,maxDate:n}=sd(t),o=q([a,n]),s=m(()=>e(Pe(cn(o.value[0])))),r=m(()=>e(Pe(is(o.value[1]))));function l(){if(!o.value[0]||!o.value[1])return null;if(o.value[0].year<=0||o.value[0].month0base<0||o.value[1].year<=0||o.value[1].month0base<0)throw new Error("Date is too early");const i=zi(o.value[0]),c=zi(o.value[1]);return{minYearMonth:i,maxYearMonth:c}}return{dateRange:o,beginDateTime:s,endDateTime:r,getFinalMonthRange:l}}function Hg(t){const{formatDateTimeToShortDate:e,formatDateTimeToGregorianLikeShortYear:a,formatDateTimeToGregorianLikeShortYearMonth:n,formatDateTimeToGregorianLikeYearQuarter:o,formatDateTimeToGregorianLikeFiscalYear:s}=Ze(),r=m(()=>{if(!t.items||t.items.length<1)return null;let f=Number.MAX_SAFE_INTEGER,A=0,T=0,C=0,Y=0;for(const k of t.items)k.time<f&&(f=k.time,T=k.accountOpeningBalance,C=k.accountClosingBalance),k.time>A&&(A=k.time,Y=k.accountClosingBalance);return f>=Number.MAX_SAFE_INTEGER||A<=0?null:{minUnixTime:f,maxUnixTime:A,minUnixTimeOpeningBalance:T,minUnixTimeClosingBalance:C,maxUnixTimeClosingBalance:Y}}),l=m(()=>{if(!r.value)return[];if(t.dateAggregationType===tt.Day.type)return Vr(r.value.minUnixTime,r.value.maxUnixTime);{const f=zn(r.value.minUnixTime),A=zn(r.value.maxUnixTime);return ni(f,A,t.fiscalYearStart,t.dateAggregationType)}}),i=m(()=>{const f=[];if(!r.value||!l.value||l.value.length<1||!t.items||t.items.length<1)return f;const A={};for(const H of t.items){let w=0;if(t.dateAggregationType===tt.Year.type)w=$r(H.time);else if(t.dateAggregationType===tt.FiscalYear.type)w=Sn(H.time,t.fiscalYearStart);else if(t.dateAggregationType===tt.Quarter.type)w=Gr(H.time);else if(t.dateAggregationType===tt.Month.type)w=Js(H.time);else if(t.dateAggregationType===tt.Day.type)w=Qo(H.time);else return f;const z=A[w]||[];z.push(H),A[w]=z}let T=r.value.minUnixTimeOpeningBalance,C=r.value.minUnixTimeClosingBalance,Y=C,k=C,$=C,F=C;for(const H of l.value){const w=A[H.minUnixTime],z=Pe(H.minUnixTime);let y="";if(t.dateAggregationType===tt.Year.type)y=a(z);else if(t.dateAggregationType===tt.FiscalYear.type)y=s(z);else if(t.dateAggregationType===tt.Quarter.type)y=o(z);else if(t.dateAggregationType===tt.Month.type)y=n(z);else if(t.dateAggregationType===tt.Day.type)y=e(z);else return f;if(xt(w)){if(w.length<1)continue;w.sort(function(Q,j){return Q.time-j.time});const v=Array.from(w).sort(function(Q,j){return Q.accountClosingBalance-j.accountClosingBalance}),p=w[0].accountOpeningBalance,I=w[w.length-1].accountClosingBalance,d=Math.min(...w.map(Q=>Q.accountClosingBalance)),x=Math.max(...w.map(Q=>Q.accountClosingBalance)),O=v[Math.floor(v.length/2)].accountClosingBalance,N=Math.trunc(wu(w.map(Q=>Q.accountClosingBalance))/w.length);t.account.isAsset?(T=p,C=I,Y=d,k=x,$=O,F=N):t.account.isLiability?(T=-p,C=-I,Y=-d,k=-x,$=-O,F=-N):(T=p,C=I,Y=d,k=x,$=O,F=N)}f.push({displayDate:y,openingBalance:T,closingBalance:C,minimumBalance:Y,maximumBalance:k,medianBalance:$,averageBalance:F}),T=C}return f}),c=m(()=>!i.value||i.value.length<1?[]:i.value.map(f=>f.displayDate));return{allDateRanges:l,allDataItems:i,allDisplayDateRanges:c}}function Wg(){return re.generateQrCodeUrl("mobile_url")}class ba{static allInstances=[];static Small=new ba(0,"font-size-small");static Default=new ba(1,"font-size-default");static Large=new ba(2,"font-size-large");static XLarge=new ba(3,"font-size-x-large");static XXLarge=new ba(4,"font-size-xx-large");static XXXLarge=new ba(5,"font-size-xxx-large");static XXXXLarge=new ba(6,"font-size-xxxx-large");static MinimumFontSize=ba.Small;static MaximumFontSize=ba.XXXXLarge;type;className;constructor(e,a){this.type=e,this.className=a,ba.allInstances.push(this)}static values(){return ba.allInstances}}const Vg="preview-",Zg=Vt("environments",()=>({framework7DarkMode:q(void 0)}));export{mn as $,bf as A,Sc as B,_s as C,Bf as D,Td as E,X as F,vd as G,Sf as H,Pe as I,pn as J,Ao as K,ta as L,Va as M,ie as N,Rf as O,da as P,Na as Q,Mn as R,qe as S,Oo as T,Fn as U,te as V,Hd as W,hd as X,jt as Y,Gf as Z,us as _,Ke as a,Jf as a$,nm as a0,Sm as a1,Hf as a2,Dm as a3,Fa as a4,Xa as a5,Yt as a6,Ha as a7,Da as a8,za as a9,gt as aA,Vs as aB,Ld as aC,Qe as aD,Gi as aE,bt as aF,Fs as aG,Vn as aH,nt as aI,po as aJ,la as aK,Sd as aL,ns as aM,Yd as aN,ga as aO,Ni as aP,ra as aQ,Cn as aR,es as aS,rf as aT,cf as aU,Nn as aV,Wf as aW,Zf as aX,Zo as aY,il as aZ,Vf as a_,Ta as aa,Mm as ab,zf as ac,ln as ad,al as ae,Qd as af,ve as ag,mf as ah,uf as ai,Kf as aj,$f as ak,Dd as al,wf as am,Qt as an,ft as ao,at as ap,Ca as aq,qt as ar,Xt as as,Mi as at,Ae as au,ut as av,Tn as aw,Nf as ax,Lf as ay,pr as az,si as b,Ie as b$,Ve as b0,qi as b1,zd as b2,$d as b3,Gd as b4,Kd as b5,el as b6,Ne as b7,qf as b8,tr as b9,wo as bA,af as bB,ef as bC,jd as bD,Xf as bE,tt as bF,_r as bG,xt as bH,cc as bI,ul as bJ,Pi as bK,Et as bL,ar as bM,Ja as bN,Mf as bO,eg as bP,Ue as bQ,K as bR,Wt as bS,zn as bT,_t as bU,im as bV,Ns as bW,$e as bX,Rt as bY,pt as bZ,aa as b_,yf as ba,hf as bb,Tf as bc,Af as bd,vf as be,_f as bf,It as bg,Nm as bh,Qf as bi,wa as bj,Fd as bk,ya as bl,$a as bm,Rd as bn,Bd as bo,Qo as bp,Ys as bq,Ud as br,ha as bs,Zr as bt,cn as bu,is as bv,Od as bw,kd as bx,ts as by,Cf as bz,ht as c,Pd as c$,mt as c0,Jt as c1,Mt as c2,tg as c3,Nr as c4,Md as c5,ag as c6,yn as c7,ca as c8,ng as c9,Ig as cA,Ad as cB,Ln as cC,bd as cD,Id as cE,_a as cF,Ff as cG,Cd as cH,bg as cI,Cg as cJ,va as cK,Sg as cL,Dg as cM,Mg as cN,be as cO,Ng as cP,kg as cQ,Og as cR,_m as cS,Oc as cT,sl as cU,ol as cV,_e as cW,Ug as cX,Fg as cY,Bg as cZ,Ua as c_,sg as ca,re as cb,og as cc,wr as cd,Nd as ce,lf as cf,ig as cg,df as ch,ff as ci,rg as cj,lg as ck,mg as cl,dg as cm,pg as cn,yg as co,mm as cp,qd as cq,tf as cr,li as cs,Ya as ct,hg as cu,ld as cv,Pu as cw,Tg as cx,vg as cy,Ag as cz,kt as d,xd as d0,$i as d1,Dn as d2,os as d3,Ed as d4,wd as d5,Pg as d6,jf as d7,dd as d8,Rg as d9,Vg as dA,yd as dB,Zg as dC,Xe as dD,ad as dE,as as dF,xf as dG,ro as dH,Rr as dI,ud as dJ,gf as dK,pf as dL,cg as dM,ug as dN,fg as dO,gg as dP,pd as dQ,gd as dR,Yg as da,yr as db,cd as dc,md as dd,zg as de,oc as df,$g as dg,Gg as dh,Yi as di,xa as dj,Kg as dk,ss as dl,Hg as dm,Pt as dn,Wg as dp,Ef as dq,Yf as dr,ii as ds,sf as dt,of as du,Lg as dv,wg as dw,Eg as dx,xg as dy,ba as dz,If as e,Xd as f,Df as g,kf as h,He as i,_d as j,ji as k,Wd as l,Jd as m,Vd as n,Zd as o,Of as p,fd as q,Dc as r,rs as s,ri as t,Ze as u,Ru as v,Uf as w,nf as x,Pf as y,Mc as z};
