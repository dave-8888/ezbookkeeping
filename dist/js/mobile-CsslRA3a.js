import"./modulepreload-polyfill-B5Qt9EMX.js";import{f as Oe,c as fe,B as s,t as i,o as a,n as vt,v as e,y as l,k as jl,w as xl,h as C,F as ke,W as t,s as Ce,m as R,l as u,z as c,i as o,A as X,r as S,ab as dt,ae as Tt,av as hl,g as Wt,a6 as Wl,N as kt,aw as jn,a5 as ka,am as Ma,ax as Kn,at as La,au as Ra,az as Oa,aA as za,aB as Ya,x as Ha}from"./vendor-common-M0sdHW0p.js";import{f as el,a as Sl,F as qa,b as Wa,c as Ga,d as ja,e as Ka,g as Za,h as Xa,i as Qa,j as Ja,k as eo,l as to,m as lo,n as no,o as ao,p as oo,q as so,r as io,s as ro,t as uo,u as co,v as fo,w as po,x as mo,y as vo,z as go,A as ho,B as yo,C as _o,D as ko,E as bo,G as wo,H as Co,I as To,J as So,K as xo,L as Ao}from"./vendor-mobile-DRx_4waC.js";import{cQ as $o,dz as Tl,dA as la,u as He,dB as ol,J as gt,cY as Do,bz as Qt,dg as Io,bE as Fo,d as tl,ap as tn,bJ as Vo,bK as Yn,bF as Mt,bG as na,bu as Gl,au as zt,bI as Tn,I as $n,bM as Po,bv as Sn,bt as Bl,bs as Yt,cZ as Uo,dC as Al,a9 as El,c$ as vn,d0 as No,d1 as Bo,aD as fl,dw as Zn,d4 as Eo,d5 as Mo,d6 as Lo,dD as Ro,dh as Oo,di as zo,dj as Yo,dk as Ho,dl as aa,cR as qo,da as Wo,dE as Go,d9 as jo,d8 as ba,d7 as Ko,bO as Zo,dF as Nn,cO as dl,F as sl,ac as Bn,ak as wa,_ as ln,ad as Hn,de as Xo,a7 as gl,df as Qo,dm as Jo,$ as Ll,am as es,an as ts,k as nn,al as Ca,O as ls,P as il,Q as rl,a0 as Xn,R as ns,a6 as Rt,bB as oa,r as Ml,X as an,V as Ft,b as Rl,h as as,dG as Ta,j as qn,K as Jl,A as Qn,l as gn,m as os,n as sa,o as ss,p as is,at as mt,q as Sa,y as rs,c as Ol,z as us,B as cs,C as ds,D as fs,E as ps,G as ms,bi as vs,bj as Et,bm as en,bn as ml,bo as hn,bp as gs,bq as xa,br as Aa,bw as hs,bx as Cn,Y as ys,aT as ia,N as qe,by as _s,bA as ks,aO as vl,bl as yn,Z as bs,a3 as Xe,a1 as Ue,aQ as ql,aa as xn,dH as ws,a5 as Jt,a4 as En,a2 as Cs,a8 as Ts,cU as yl,cV as _l,ab as _n,ag as _t,ai as Mn,ah as Ln,aj as Ss,ae as xs,af as As,a as Wn,ca as $s,b0 as $a,b7 as Ot,c3 as Ds,c4 as Rn,c5 as On,c6 as Is,c8 as Da,c9 as Fs,aF as Ia,bP as Vs,aV as Ps,bQ as je,bR as pt,bS as ra,bT as kn,bU as ua,cI as Us,dI as Ns,cz as Fa,dJ as Va,cJ as Bs,a$ as Es,b1 as Ms,b2 as Ls,b3 as Rs,b4 as Os,b5 as zs,b6 as Ys,b8 as Hs,b9 as qs,ba as Ws,bb as Gs,bc as js,bd as Ks,be as Zs,bf as Xs,bg as bn,bh as Cl,cK as Dn,t as Qs,s as Gn,f as Js,cA as ei,cB as ti,cC as wn,cD as li,cE as ni,cF as ai,cG as oi,cH as si,cN as ii,cL as ca,cM as da,cP as ri,cn as ui,cy as ci,bD as di,cx as fi,cs as pi,cp as Pa,cu as mi,ct as Hl,cv as vi,cg as gi,dK as hi,dL as yi,ch as _i,cc as ki,aK as bi,cd as wi,ce as Ci,az as Ti,cf as Si,dM as xi,dN as Ai,cj as $i,dO as Di,dP as Ii,cl as Fi,dQ as fa,ds as Vi,dR as pa,T as ma,dr as Pi,dt as Ui,dv as Ni,dx as Bi,dy as Ei}from"./common-B96FbeRZ.js";import{_ as Mi}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./moment-CIPJ811N.js";import"./locales-CDQiBxHT.js";const Li=Oe({__name:"ItemIcon",props:{iconType:{},iconId:{},color:{},defaultColor:{},additionalColorAttr:{},size:{}},setup(p){const g=p,{style:n,getAccountIcon:h,getCategoryIcon:P}=$o(g),N=fe(()=>g.iconType==="fixed-f7"?g.iconId.toString():""),_=fe(()=>g.iconType==="account"?h(g.iconId):g.iconType==="category"?P(g.iconId):g.iconType==="fixed"?g.iconId.toString():"");return(A,U)=>{const y=s("f7-icon");return a(),i(y,{f7:N.value,icon:_.value,style:vt(e(n))},{default:l(()=>[jl(A.$slots,"default")]),_:3},8,["f7","icon","style"])}}});function An(){return/iphone|ipod|ipad/gi.test(navigator.platform)&&/Safari/i.test(navigator.appVersion)}function Ri(){return An()&&!!window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches}function Ke(p,g){if(!p){el(n=>n.preloader.show());return}el(n=>{setTimeout(()=>{p()&&n.preloader.show()},g||200)})}function Se(){el(p=>p.preloader.hide())}function zn(){el(p=>p.dialog.close())}function Jn(){return Sl.$(".modal-in").length}function $l(p,g){Sl.swipeout.delete(Sl.$("#"+p),g)}function va(p){Sl.$(p).find("textarea").each(g=>{g.scrollTop=0,g.style.height="",g.style.height=g.scrollHeight+"px"})}function Ua(p){const g=Sl.$("html"),n=Tl.values();for(const h of n)h.type===p?g.hasClass(h.className)||g.addClass(h.className):g.removeClass(h.className)}function Oi(p){const g=Tl.values();for(const n of g)if(n.type===p)return la+n.className;return la+Tl.Default.className}function zi(p){const g=Sl.$(p),n={};if(!g||!g.length)return n;for(const h of g){const P=h.getBoundingClientRect();n[h.id]=P.height}return n}function Yi(p){const g=Sl.$(p);return!g||!g.length?null:g[0].getBoundingClientRect()}function ea(p,g){if(!p)return;const n=p.offsetHeight;n<g&&setTimeout(()=>{const h=window.innerHeight;h<g&&n<h&&window.scrollTo({top:g-n-24,behavior:"smooth"})},300)}function Hi(p){Sl.$(".infinite-scroll-content").on("scroll",g=>{p(g)},{passive:!0})}function nt(){const{tt:p,te:g,getCurrentLanguageTextDirection:n}=He();function h(v,d){const w=xl(d,f=>{f&&setTimeout(()=>{w&&w(),v.back()},200)},{immediate:!0})}function P(v,d){el(w=>{w.dialog.create({title:p("global.app.title"),text:g(v),animate:ol(),buttons:[{text:p("OK"),onClick:d}]}).open()})}function N(v,d,w){const f=n(),I={text:p("Cancel"),onClick:w},m={text:p("OK"),strong:!0,onClick:d};el($=>{$.dialog.create({title:p("global.app.title"),text:p(v),animate:ol(),buttons:f==gt.RTL?[m,I]:[I,m]}).open()})}function _(v,d,w,f){const I=n(),m={text:p("Cancel"),onClick:(F,D)=>{if(f){const V=F.$el.find(".dialog-input").val();f(V,F,D)}}},$={text:p("OK"),strong:!0,onClick:(F,D)=>{if(w){const V=F.$el.find(".dialog-input").val();w(V,F,D)}}};el(F=>{F.dialog.create({title:p("global.app.title"),text:p(v),content:`<div class="dialog-input-field input"><input type="text" class="dialog-input" value="${d||""}"></div>`,animate:ol(),buttons:I==gt.RTL?[$,m]:[m,$]}).open()})}function A(v,d,w,f){const I={text:p(w),onClick:(m,$)=>{f&&f(m,$)}};el(m=>{m.dialog.create({title:p(v),content:`<div class="preloader"><span class="preloader-inner">${[0,1,2,3,4,5,6,7].map(()=>'<span class="preloader-inner-line"></span>').join("")}</span></div>`+(d?`<br/><div class="margin-top">${p(d)}</div>`:""),cssClass:"dialog-preloader",animate:ol(),buttons:[I]}).open()})}function U(v,d){el(w=>{w.toast.create({text:g(v),position:"center",closeTimeout:d||1500}).open()})}function y(v){const d=n(),w={text:p("Cancel")},f={text:p("OK"),strong:!0,onClick:()=>{window.open(v,"_blank")}};el(I=>{I.dialog.create({title:p("global.app.title"),text:p("Are you sure you want to open this link?"),content:`<div style="word-break: break-all">${v}</div>`,animate:ol(),buttons:d==gt.RTL?[f,w]:[w,f]}).open()})}return{showAlert:P,showConfirm:N,showPrompt:_,showCancelableLoading:A,showToast:U,openExternalUrl:y,routeBackOnError:h}}const qi={key:1},Wi=Oe({__name:"LanguageSelectButton",props:{disabled:{type:Boolean},includeSystemDefault:{type:Boolean},useModelValue:{type:Boolean},modelValue:{}},emits:["update:modelValue"],setup(p,{emit:g}){const n=p,h=g,{allLanguages:P,currentLanguageName:N,updateLanguage:_,isLanguageSelected:A}=Do(n,h);function U(y){Qt(y.$el[0],".popover-inner",".popover-inner","li.list-item-selected")}return(y,v)=>{const d=s("f7-button"),w=s("f7-icon"),f=s("f7-list-item"),I=s("f7-list"),m=s("f7-popover");return a(),C(ke,null,[t(d,{class:"language-select-button",small:"","popover-open":".lang-popover-menu",disabled:p.disabled,text:e(N)},null,8,["disabled","text"]),t(m,{class:"lang-popover-menu","onPopover:open":U},{default:l(()=>[t(I,{dividers:""},{default:l(()=>[(a(!0),C(ke,null,Ce(e(P),$=>(a(),i(f,{link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":e(A)($.languageTag)}),key:$.languageTag,title:$.nativeDisplayName,onClick:F=>e(_)($.languageTag)},{after:l(()=>[e(A)($.languageTag)?(a(),i(w,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0),e(A)($.languageTag)?u("",!0):(a(),C("span",qi,c($.displayName),1))]),_:2},1032,["class","title","onClick"]))),128))]),_:1})]),_:1})],64)}}}),Gi={class:"pie-chart-container"},ji=["viewBox"],Ki=["r","stroke","stroke-dasharray","stroke-dashoffset","onClick"],Zi=["r"],Xi=["r"],Qi={id:"pie-chart-text-clip"},Ji=["x","y","width","height"],er={key:2,class:"pie-chart-text-group","clip-path":"url(#pie-chart-text-clip)"},tr={key:0,class:"pie-chart-toolbox-container padding-horizontal"},lr={class:"pie-chart-toolbox"},nr={class:"pie-chart-toolbox-info"},ar={key:0},or={key:1},sr={key:0,class:"skeleton-text"},ir={key:1},rr={key:2,class:"skeleton-text"},qt=100,ur=Oe({__name:"PieChart",props:{showCenterText:{type:Boolean},showSelectedItemInfo:{type:Boolean},centerTextBackground:{},skeleton:{type:Boolean},items:{},idField:{},nameField:{},valueField:{},percentField:{},colorField:{},hiddenField:{},minValidPercent:{},amountValue:{type:Boolean},defaultCurrency:{},showValue:{type:Boolean},showPercent:{type:Boolean},enableClickItem:{type:Boolean}},emits:["click"],setup(p,{emit:g}){const n=p,h=g,{tt:P}=He(),{selectedIndex:N,validItems:_}=Io(n),A=qt*Math.PI,U=fe(()=>{let F=0;for(const D of _.value)F+=D.value;return F}),y=fe(()=>{if(U.value<=0)return 0;let F=0;for(let D=0;D<Math.min(N.value+1,_.value.length);D++){const V=_.value[D];V.actualPercent>0&&(D===N.value?F+=-A*(1-V.actualPercent)/2:F+=-A*(1-V.actualPercent))}return F});function v(F,D){const V={color:F};return D&&(V[D]=F),V}function d(F){const D=F.actualPercent*A;return`${D} ${A-D}`}function w(F,D,V){let k=0;for(const T of D){if(T===F)break;k+=T.actualPercent}if(V?V+=A/4:V=A/4,k<=0)return V;const K=k*A;return A-K+V}const f=fe(()=>{if(!_.value||!_.value.length)return null;let F=N.value;return(F<0||F>=_.value.length)&&(F=0),_.value[F]??null});function I(F){N.value=F}function m(F){let D=N.value+F;for(;D<0;)D+=_.value.length;N.value=D%_.value.length}function $(F){n.enableClickItem&&h("click",F.sourceItem)}return(F,D)=>{const V=s("f7-icon"),k=s("f7-link"),K=s("f7-chip");return a(),C("div",Gi,[(a(),C("svg",{class:"pie-chart",viewBox:`${-qt} ${-qt} ${qt*2} ${qt*2}`},[o("circle",{class:"pie-chart-background",cx:"0",cy:"0",r:qt}),(a(!0),C(ke,null,Ce(e(_),(T,b)=>(a(),C("circle",{class:"pie-chart-item",fill:"transparent",cx:"0",cy:"0",r:qt/2,stroke:T.color,"stroke-width":qt,"stroke-dasharray":d(T),"stroke-dashoffset":w(T,e(_),y.value),key:b,onClick:z=>I(b)},null,8,Ki))),128)),p.showCenterText?(a(),C("circle",{key:0,class:"pie-chart-text-background",cx:"0",cy:"0",stroke:"#ddd",style:vt({"--pie-chart-text-background":p.centerTextBackground?p.centerTextBackground:"#7f2020"}),r:qt/2.5},null,12,Zi)):u("",!0),p.showCenterText?(a(),C("circle",{key:1,cx:"0",cy:"0",stroke:"#ddd",fill:"transparent",r:qt/2.5},null,8,Xi)):u("",!0),o("clipPath",Qi,[o("rect",{x:-qt/2.5+2,y:-qt/2.5+2,width:qt/1.25-4,height:qt/1.25-4},null,8,Ji)]),p.showCenterText?(a(),C("g",er,[jl(F.$slots,"default",{},void 0,!0)])):u("",!0)],8,ji)),p.showSelectedItemInfo?(a(),C("div",tr,[o("div",lr,[t(k,{class:R(["pie-chart-toolbox-button",{disabled:!!p.skeleton||!e(_)||e(_).length<=1}]),onClick:D[0]||(D[0]=T=>m(1))},{default:l(()=>[t(V,{class:"icon-with-direction",f7:"arrow_left"})]),_:1},8,["class"]),o("div",nr,[p.showPercent&&f.value?(a(),C("p",ar,[p.skeleton?(a(),i(K,{key:0,class:"chip-placeholder",outline:""},{default:l(()=>[...D[3]||(D[3]=[o("span",{class:"skeleton-text"},"Percent",-1)])]),_:1})):p.skeleton?u("",!0):(a(),i(K,{key:1,outline:"",text:f.value.displayPercent,style:vt(v(f.value?.color,"--f7-chip-outline-border-color"))},null,8,["text","style"]))])):p.showPercent&&(!e(_)||!e(_).length)?(a(),C("p",or,[t(K,{outline:"",text:"---"})])):u("",!0),f.value?(a(),i(k,{key:2,class:"pie-chart-selected-item-info","no-link-class":!p.enableClickItem,onClick:D[1]||(D[1]=T=>$(f.value))},{default:l(()=>[p.skeleton?(a(),C("span",sr,"Name")):!p.skeleton&&f.value.displayName?(a(),C("span",ir,c(f.value.displayName),1)):u("",!0),p.skeleton?(a(),C("span",rr,"Value")):!p.skeleton&&p.showValue?(a(),C("span",{key:3,style:vt(v(f.value?.color))},c(f.value.displayValue),5)):u("",!0),p.enableClickItem?(a(),i(V,{key:4,class:"item-navigate-icon icon-with-direction",f7:"chevron_right"})):u("",!0)]),_:1},8,["no-link-class"])):!e(_)||!e(_).length?(a(),i(k,{key:3,"no-link-class":!0},{default:l(()=>[X(c(e(P)("No transaction data")),1)]),_:1})):u("",!0)]),t(k,{class:R(["pie-chart-toolbox-button",{disabled:!!p.skeleton||!e(_)||e(_).length<=1}]),onClick:D[2]||(D[2]=T=>m(-1))},{default:l(()=>[t(V,{class:"icon-with-direction",f7:"arrow_right"})]),_:1},8,["class"])])])):u("",!0)])}}}),cr=Mi(ur,[["__scopeId","data-v-75e67bf7"]]),dr={class:"display-flex no-padding-horizontal"},fr={class:"display-flex align-items-center statistics-icon"},pr={class:"statistics-item-end"},mr={class:"statistics-percent-line"},vr={class:"display-flex",style:{"flex-wrap":"wrap"}},gr=["onClick"],hr={class:"trends-bar-chart-legend-text"},yr={class:"display-flex no-padding-horizontal"},_r={class:"display-flex align-items-center statistics-icon"},kr={class:"statistics-list-item-text"},br={key:0,class:"full-line statistics-percent-line statistics-multi-percent-line display-flex flex-direction-column"},wr={class:"full-line display-flex flex-direction-row"},Cr={key:0},Tr={key:0,class:"statistics-item-end"},Sr={class:"statistics-percent-line statistics-multi-percent-line display-flex"},xr=Oe({__name:"TrendsBarChart",props:{loading:{type:Boolean},chartMode:{},items:{},stacked:{type:Boolean},startTime:{},endTime:{},startYearMonth:{},endYearMonth:{},fiscalYearStart:{},sortingType:{},dataAggregationType:{},dateAggregationType:{},idField:{},nameField:{},valueField:{},colorField:{},hiddenField:{},displayOrdersField:{},translateName:{type:Boolean},defaultCurrency:{},enableClickItem:{type:Boolean}},emits:["click"],setup(p,{emit:g}){const n=p,h=g,{tt:P,formatDateTimeToShortDate:N,formatDateTimeToGregorianLikeShortYear:_,formatDateTimeToGregorianLikeShortYearMonth:A,formatYearQuarterToGregorianLikeYearQuarter:U,formatDateTimeToGregorianLikeFiscalYear:y,formatAmountToLocalizedNumeralsWithCurrency:v}=He(),{allDateRanges:d,getItemName:w}=Fo(n),f=tl(),I=S(0),m=S({}),$=S({items:[],topPosition:0}),F=fe(()=>D.value.legends.length<=1||n.stacked),D=fe(()=>{const T={},b=[];for(const[r,Y]of tn(n.items)){if(n.hiddenField&&r[n.hiddenField])continue;const te=n.idField&&r[n.idField]?r[n.idField]:w(r[n.nameField]),x={id:te,name:n.nameField&&r[n.nameField]?w(r[n.nameField]):te,color:Vo(n.colorField&&r[n.colorField]?r[n.colorField]:Yn[Y%Yn.length]),displayOrders:n.displayOrdersField&&r[n.displayOrdersField]?r[n.displayOrdersField]:[0]};if(b.push(x),m.value[te])continue;const O={};for(const H of r.items){let W="";n.chartMode==="daily"&&"month"in H?n.dateAggregationType===Mt.Year.type?W=H.year.toString():n.dateAggregationType===Mt.FiscalYear.type?W=na(Gl({year:H.year,month1base:H.month}),n.fiscalYearStart).toString():n.dateAggregationType===Mt.Quarter.type?W=`${H.year}-${Math.floor((H.month-1)/3)+1}`:n.dateAggregationType===Mt.Month.type?W=`${H.year}-${H.month}`:W=`${H.year}-${H.month}-${H.day}`:n.chartMode==="monthly"&&"month1base"in H&&(n.dateAggregationType===Mt.Year.type?W=H.year.toString():n.dateAggregationType===Mt.FiscalYear.type?W=na(Gl({year:H.year,month1base:H.month1base}),n.fiscalYearStart).toString():n.dateAggregationType===Mt.Quarter.type?W=`${H.year}-${Math.floor((H.month1base-1)/3)+1}`:W=`${H.year}-${H.month1base}`);const Q=H[n.valueField];if(O[W])zt(Q)&&(n.dataAggregationType===Tn.Sum?O[W].totalAmount+=Q:n.dataAggregationType===Tn.Last&&(O[W].totalAmount=Q));else{const le=T[W]||[],oe=Object.assign({},x,{totalAmount:zt(Q)?Q:0});le.push(oe),O[W]=oe,T[W]=le}}}const z=[];let J=0;for(const r of d.value){let Y="";n.dateAggregationType===Mt.Year.type||n.dateAggregationType===Mt.FiscalYear.type?Y=r.year.toString():n.dateAggregationType===Mt.Quarter.type&&"quarter"in r?Y=`${r.year}-${r.quarter}`:n.dateAggregationType===Mt.Month.type&&"month0base"in r?Y=`${r.year}-${r.month0base+1}`:n.dateAggregationType===Mt.Day.type&&"day"in r&&n.chartMode==="daily"&&(Y=`${r.year}-${r.month}-${r.day}`);const te=$n(r.minUnixTime);let x="";n.dateAggregationType===Mt.Year.type?x=_(te):n.dateAggregationType===Mt.FiscalYear.type?x=y(te):n.dateAggregationType===Mt.Quarter.type&&"quarter"in r?x=U(r.year,r.quarter):n.dateAggregationType===Mt.Month.type?x=A(te):n.dateAggregationType===Mt.Day.type&&n.chartMode==="daily"&&(x=N(te));const O=T[Y]||[];let H=0,W=0,Q=0;Po(O,n.sortingType);for(const oe of O)oe.totalAmount>0&&(W+=oe.totalAmount),H+=oe.totalAmount,oe.totalAmount>Q&&(Q=oe.totalAmount);H>J&&(J=H);const le={index:z.length,dateRange:r,displayDateRange:x,items:O,totalAmount:H,totalPositiveAmount:W,maxAmount:Q,percent:0};z.push(le)}for(const r of z)J>0&&r.totalAmount>0?r.percent=100*r.totalAmount/J:r.percent=0;return{data:z,legends:b}});function V(T){let b="";for(const te of n.items){if(!n.hiddenField||te[n.hiddenField])continue;const x=n.idField&&te[n.idField]?te[n.idField]:w(te[n.nameField]);m.value[x]||(b.length&&(b+=","),b+=x)}const z=T.dateRange;let J=z.minUnixTime,r=z.maxUnixTime;if(n.chartMode==="daily")n.startTime&&n.startTime>J&&(J=n.startTime),n.endTime&&n.endTime<r&&(r=n.endTime);else if(n.chartMode==="monthly"){if(n.startYearMonth){const te=Gl(n.startYearMonth);te>J&&(J=te)}if(n.endYearMonth){const te=Sn(n.endYearMonth);te<r&&(r=te)}}const Y=Bl(J,r,f.currentUserFirstDayOfWeek,f.currentUserFiscalYearStart,Yt.Normal);h("click",{itemId:b,dateRange:{minTime:J,maxTime:r,dateType:Y}})}function k(T){m.value[T.id]?delete m.value[T.id]:m.value[T.id]=!0}function K(T,b){$.value=b}return xl(D,()=>{I.value++},{deep:!0}),(T,b)=>{const z=s("f7-icon"),J=s("f7-progressbar"),r=s("f7-list-item"),Y=s("f7-list");return a(),C(ke,null,[p.loading?(a(),i(Y,{key:0,class:"skeleton-text"},{default:l(()=>[(a(),C(ke,null,Ce([1,2,3,4,5,6,7,8,9,10,11,12],te=>t(r,{class:"statistics-list-item",link:"#",key:te},{media:l(()=>[o("div",dr,[o("div",fr,[t(z,{f7:"app_fill"})])])]),title:l(()=>[...b[0]||(b[0]=[o("div",{class:"statistics-list-item-text"},[o("span",null,"Date Range")],-1)])]),after:l(()=>[...b[1]||(b[1]=[o("span",null,"0.00 USD",-1)])]),"inner-end":l(()=>[o("div",pr,[o("div",mr,[t(J)])])]),_:1})),64))]),_:1})):!p.loading&&(!D.value||!D.value.data||!D.value.data.length)?(a(),i(Y,{key:1},{default:l(()=>[t(r,{title:e(P)("No transaction data")},null,8,["title"])]),_:1})):u("",!0),!p.loading&&D.value&&D.value.data&&D.value.data.length?(a(),i(Y,{key:2},{default:l(()=>[D.value.legends&&D.value.legends.length>1?(a(),i(r,{key:0},{default:l(()=>[o("div",vr,[(a(!0),C(ke,null,Ce(D.value.legends,(te,x)=>(a(),C("div",{class:R(["trends-bar-chart-legend display-flex align-items-center",{"trends-bar-chart-legend-unselected":!!m.value[te.id]}]),key:x,onClick:O=>k(te)},[t(z,{f7:"app_fill",class:"trends-bar-chart-legend-icon",style:vt({color:m.value[te.id]?"":te.color})},null,8,["style"]),o("span",hr,c(te.name),1)],10,gr))),128))])]),_:1})):u("",!0)]),_:1})):u("",!0),!p.loading&&D.value&&D.value.data&&D.value.data.length?(a(),i(Y,{key:`trends-bar-chart-${I.value}`,"virtual-list":F.value,"virtual-list-params":F.value?{items:D.value.data,renderExternal:K,height:"auto"}:void 0},{default:l(()=>[(a(!0),C(ke,null,Ce(F.value?$.value.items:D.value.data,te=>(a(),i(r,{link:"#",key:te.index,class:R({"statistics-list-item":!0,"statistics-list-item-stacked":p.stacked,"statistics-list-item-non-stacked":!p.stacked}),style:vt(F.value?`top: ${$.value.topPosition}px`:void 0),"virtual-list-index":te.index,onClick:x=>V(te)},{media:l(()=>[o("div",yr,[o("div",_r,[t(z,{f7:"calendar"})])])]),title:l(()=>[o("div",kr,[o("span",null,c(te.displayDateRange),1)]),!p.stacked&&te.items.length>1?(a(),C("div",br,[(a(!0),C(ke,null,Ce(te.items,(x,O)=>dt((a(),C("div",{class:"display-flex flex-direction-column",style:{"margin-top":"4px"},key:O},[o("div",wr,[o("div",{class:"display-inline-flex",style:vt({width:te.percent*x.totalAmount/te.maxAmount+"%"})},[t(J,{progress:100,style:vt({"--f7-progressbar-progress-color":x.color?x.color:""})},null,8,["style"])],4),te.percent*x.totalAmount/te.maxAmount<100?(a(),C("div",{key:0,class:"display-inline-flex",style:vt({width:100-te.percent*x.totalAmount/te.maxAmount+"%"})},[t(J,{progress:0})],4)):u("",!0)])])),[[Tt,x.totalAmount>0]])),128))])):u("",!0)]),after:l(()=>[p.stacked||te.items.length<=1?(a(),C("span",Cr,c(e(v)(te.totalAmount,p.defaultCurrency)),1)):u("",!0)]),"inner-end":l(()=>[p.stacked||te.items.length<=1?(a(),C("div",Tr,[o("div",Sr,[(a(!0),C(ke,null,Ce(te.items,(x,O)=>dt((a(),C("div",{class:"display-inline-flex",style:vt({width:te.percent*x.totalAmount/te.totalPositiveAmount+"%"}),key:O},[t(J,{progress:100,style:vt({"--f7-progressbar-progress-color":x.color?x.color:""})},null,8,["style"])],4)),[[Tt,x.totalAmount>0]])),128)),te.percent<100?(a(),C("div",{key:0,class:"display-inline-flex",style:vt({width:100-te.percent+"%"})},[t(J,{progress:0})],4)):u("",!0)])])):u("",!0)]),_:2},1032,["class","style","virtual-list-index","onClick"]))),128))]),_:1},8,["virtual-list","virtual-list-params"])):u("",!0)],64)}}}),Ar={class:"display-flex padding justify-content-space-between align-items-center"},$r={class:"ebk-sheet-title"},Dr={class:"padding-horizontal padding-bottom"},Ir={class:"no-margin"},Fr={class:"margin-top text-align-center"},Vr=Oe({__name:"PinCodeInputSheet",props:{modelValue:{},title:{},hint:{},confirmDisabled:{type:Boolean},cancelDisabled:{type:Boolean},show:{type:Boolean}},emits:["update:modelValue","update:show","pincode:confirm"],setup(p,{emit:g}){const n=p,h=g,{tt:P}=He(),N=S(""),_=fe(()=>N.value?.length===6||!1);function A(){!_.value||n.confirmDisabled||(h("update:modelValue",N.value),h("pincode:confirm",N.value))}function U(){h("update:show",!1)}function y(){N.value=""}function v(){U()}return xl(()=>n.modelValue,d=>{d===""&&(N.value="")}),(d,w)=>{const f=s("pin-code-input"),I=s("f7-list-item"),m=s("f7-list"),$=s("f7-button"),F=s("f7-link"),D=s("f7-page-content"),V=s("f7-sheet");return a(),i(V,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:p.show,"onSheet:open":y,"onSheet:closed":v},{default:l(()=>[w[1]||(w[1]=o("div",{class:"swipe-handler"},null,-1)),t(D,{class:"margin-top no-padding-top"},{default:l(()=>[o("div",Ar,[o("div",$r,[o("b",null,c(p.title),1)])]),o("div",Dr,[o("p",Ir,c(p.hint),1),t(m,{class:"no-margin"},{default:l(()=>[t(I,{class:"list-item-pincode-input padding-vertical-half"},{default:l(()=>[t(f,{secure:!0,length:6,modelValue:N.value,"onUpdate:modelValue":w[0]||(w[0]=k=>N.value=k),"onPincode:confirm":A},null,8,["modelValue"])]),_:1})]),_:1}),t($,{large:"",fill:"",class:R({disabled:!_.value||p.confirmDisabled}),text:e(P)("Continue"),onClick:A},null,8,["class","text"]),o("div",Fr,[t(F,{onClick:U,text:e(P)("Cancel")},null,8,["text"])])])]),_:1})]),_:1},8,["opened"])}}}),Pr={class:"display-flex padding justify-content-space-between align-items-center"},Ur={key:0,class:"ebk-sheet-title"},Nr={class:"padding-horizontal padding-bottom"},Br={key:0,class:"no-margin"},Er={class:"margin-top text-align-center"},Mr=Oe({__name:"PasswordInputSheet",props:{modelValue:{},title:{},hint:{},color:{},confirmDisabled:{type:Boolean},cancelDisabled:{type:Boolean},show:{type:Boolean}},emits:["update:modelValue","update:show","password:confirm"],setup(p,{emit:g}){const n=p,h=g,{tt:P}=He(),N=S("");function _(){!N.value||n.confirmDisabled||(h("update:modelValue",N.value),h("password:confirm",N.value))}function A(){U()}function U(){h("update:show",!1)}function y(){N.value=""}function v(){U()}return(d,w)=>{const f=s("f7-list-input"),I=s("f7-list"),m=s("f7-button"),$=s("f7-link"),F=s("f7-page-content"),D=s("f7-sheet");return a(),i(D,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:p.show,"onSheet:open":y,"onSheet:closed":v},{default:l(()=>[w[2]||(w[2]=o("div",{class:"swipe-handler"},null,-1)),t(F,{class:"margin-top no-padding-top"},{default:l(()=>[o("div",Pr,[p.title?(a(),C("div",Ur,[o("b",null,c(p.title),1)])):u("",!0)]),o("div",Nr,[p.hint?(a(),C("p",Br,c(p.hint),1)):u("",!0),t(I,{class:"no-margin"},{default:l(()=>[t(f,{type:"password",autocomplete:"current-password",outline:"","clear-button":"",class:R(["no-margin no-padding-bottom",p.color?"color-"+p.color:""]),placeholder:e(P)("Current Password"),value:N.value,"onUpdate:value":w[0]||(w[0]=V=>N.value=V),onKeyup:w[1]||(w[1]=hl(V=>_(),["enter"]))},null,8,["class","placeholder","value"])]),_:1}),t(m,{large:"",fill:"",class:R({disabled:!N.value||p.confirmDisabled}),color:p.color||"primary",text:e(P)("Confirm"),onClick:_},null,8,["class","color","text"]),o("div",Er,[t($,{class:R({disabled:p.cancelDisabled}),onClick:A,text:e(P)("Cancel")},null,8,["class","text"])])])]),_:1})]),_:1},8,["opened"])}}}),Lr={class:"display-flex padding justify-content-space-between align-items-center"},Rr={key:0,class:"ebk-sheet-title"},Or={class:"padding-horizontal padding-bottom"},zr={key:0,class:"no-margin"},Yr={class:"margin-top text-align-center"},Hr=Oe({__name:"PasscodeInputSheet",props:{modelValue:{},title:{},hint:{},confirmDisabled:{type:Boolean},cancelDisabled:{type:Boolean},show:{type:Boolean}},emits:["update:modelValue","update:show","passcode:confirm"],setup(p,{emit:g}){const n=p,h=g,{tt:P}=He(),N=S("");function _(){!N.value||n.confirmDisabled||(h("update:modelValue",N.value),h("passcode:confirm",N.value))}function A(){U()}function U(){h("update:show",!1)}function y(){N.value=""}function v(){U()}return(d,w)=>{const f=s("f7-list-input"),I=s("f7-list"),m=s("f7-button"),$=s("f7-link"),F=s("f7-page-content"),D=s("f7-sheet");return a(),i(D,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:p.show,"onSheet:open":y,"onSheet:closed":v},{default:l(()=>[w[2]||(w[2]=o("div",{class:"swipe-handler"},null,-1)),t(F,{class:"margin-top no-padding-top"},{default:l(()=>[o("div",Lr,[p.title?(a(),C("div",Rr,[o("b",null,c(p.title),1)])):u("",!0)]),o("div",Or,[p.hint?(a(),C("p",zr,c(p.hint),1)):u("",!0),jl(d.$slots,"default"),t(I,{class:"no-margin"},{default:l(()=>[t(f,{type:"number",autocomplete:"one-time-code",outline:"","clear-button":"",class:"no-margin no-padding-bottom",placeholder:e(P)("Passcode"),value:N.value,"onUpdate:value":w[0]||(w[0]=V=>N.value=V),onKeyup:w[1]||(w[1]=hl(V=>_(),["enter"]))},null,8,["placeholder","value"])]),_:1}),t(m,{large:"",fill:"",class:R({disabled:!N.value||p.confirmDisabled}),text:e(P)("Continue"),onClick:_},null,8,["class","text"]),o("div",Yr,[t($,{class:R({disabled:p.cancelDisabled}),onClick:A,text:e(P)("Cancel")},null,8,["class","text"])])])]),_:3})]),_:3},8,["opened"])}}}),qr={class:"left"},Wr={class:"right"},Gr={class:"block no-margin no-padding"},jr={class:"block no-margin no-padding padding-vertical-half"},Kr={class:"picker picker-inline picker-3d"},Zr={class:"picker-columns"},Xr={key:0,class:"picker-column"},Qr=["data-value","onClick"],Jr={class:"picker-column"},eu=["data-items-index","data-value","onClick"],tu={class:"picker-column"},lu=["data-items-index","data-value","onClick"],nu={class:"picker-column"},au=["data-items-index","data-value","onClick"],ou={key:1,class:"picker-column"},su=["data-value","onClick"],iu=Oe({__name:"DateTimeSelectionSheet",props:{modelValue:{},timezoneUtcOffset:{},initMode:{},show:{type:Boolean}},emits:["update:modelValue","update:show"],setup(p,{emit:g}){const n=p,h=g,{tt:P,getCurrentNumeralSystemType:N}=He(),{showToast:_}=nt(),{is24Hour:A,isHourTwoDigits:U,isMinuteTwoDigits:y,isSecondTwoDigits:v,isMeridiemIndicatorFirst:d,meridiemItems:w,getLocalDatetimeFromSameDateTimeOfUnixTime:f,getUnixTimeFromSameDateTimeOfLocalDatetime:I,getDisplayTimeValue:m,generateAllHours:$,generateAllMinutesOrSeconds:F}=Uo(),D=Al(),V=Wt("datetimepicker"),k=Wt("timePickerContainer");let K,T,b,z;const J=S(n.initMode||"time"),r=S(f(n.modelValue||El(),n.timezoneUtcOffset)),Y=S(void 0),te=S(void 0),x=fe(()=>D.framework7DarkMode||!1),O=fe(()=>N()),H=fe(()=>$(3,U.value)),W=fe(()=>F(3,y.value)),Q=fe(()=>F(3,v.value)),le=fe({get:()=>No(r.value.getHours()),set:be=>{r.value=vn(r.value,O.value,oe.value,ne.value,se.value,be,A.value)}}),oe=fe({get:()=>m(A.value?r.value.getHours():Bo(r.value.getHours()),U.value),set:be=>{r.value=vn(r.value,O.value,be,ne.value,se.value,le.value,A.value)}}),ne=fe({get:()=>m(r.value.getMinutes(),y.value),set:be=>{r.value=vn(r.value,O.value,oe.value,be,se.value,le.value,A.value)}}),se=fe({get:()=>m(r.value.getSeconds(),v.value),set:be=>{r.value=vn(r.value,O.value,oe.value,ne.value,be,le.value,A.value)}});function Z(){J.value==="time"?J.value="date":J.value="time"}function E(){r.value=f(El(),n.timezoneUtcOffset),J.value==="time"&&he()}function M(){if(!r.value)return;const be=I(r.value,n.timezoneUtcOffset);if(be<0){_("Date is too early");return}h("update:modelValue",be),h("update:show",!1)}function ee(be,L,xe,Fe){if(!Y.value||!te.value)return"";const Te=parseInt(Fe[0].value),Pe=parseInt(Fe[Fe.length-1].value),pe=parseInt(be,10),B=parseInt(L,10);let _e=pe-B;Math.abs(_e)>=5&&(xe===0&&Pe-5<pe&&B<Te+5?_e=pe-(Pe+B+1):xe===2&&Pe-5<B&&pe<Te+5&&(_e=Pe+pe+1-B));const Ne=-24*_e;return Ne>180||Ne<-180?"":`transform: translate3d(0, ${-_e*te.value}px, -100px) rotateX(${Ne}deg)`}function ve(){const be=k.value?.querySelectorAll(".picker-item"),L=be?be[0]:null;k.value&&(Y.value=k.value.offsetHeight),L&&"offsetHeight"in L&&(te.value=L.offsetHeight),k.value&&L&&"offsetHeight"in L&&k.value.style.setProperty("--f7-picker-scroll-padding",`${(k.value.offsetHeight-L.offsetHeight)/2}px`)}function he(){Be("picker-items-hour","picker-hour",oe.value),Be("picker-items-minute","picker-minute",ne.value),Be("picker-items-second","picker-second",se.value),Be("picker-items-meridiem-indicator-first","picker-meridiem-indicator",le.value),Be("picker-items-meridiem-indicator-last","picker-meridiem-indicator",le.value)}function re(be,L){switch(T){case"picker-hour":Be(be,L,oe.value);break;case"picker-minute":Be(be,L,ne.value);break;case"picker-second":Be(be,L,se.value);break}}function Be(be,L,xe){const Fe=k.value?.querySelector(`.${be}`),Te=Fe?.querySelectorAll(`.${L}`);if(!(!Fe||!Te||!Te.length))for(let Pe=0;Pe<Te.length;Pe++){const pe=Te[Pe];if("offsetHeight"in Fe&&"offsetTop"in pe&&"offsetHeight"in pe&&(!pe.hasAttribute("data-items-index")||pe.getAttribute("data-items-index")==="1")&&pe.getAttribute("data-value")===xe){Fe.scrollTop=pe.offsetTop-Fe.offsetHeight/2+pe.offsetHeight/2;break}}}function Me(be,L,xe){const Fe=k.value?.querySelector(`.${be}`),Te=Fe?.querySelectorAll(`.${L}`),Pe=Te?Te[0]:null;if(!Fe||!Te||!Te.length||!Pe||!("offsetHeight"in Pe))return;const pe=Pe.offsetHeight,B=Fe?.scrollTop||0,_e=Math.round(B/pe),Ne=Te[_e];if(Ne){const me=Ne.getAttribute("data-value"),rt=Ne.getAttribute("data-items-index");if(me){switch(L){case"picker-hour":oe.value=me;break;case"picker-minute":ne.value=me;break;case"picker-second":se.value=me;break;case"picker-meridiem-indicator":le.value=me;break}(rt==="0"||rt==="2")&&(xe?Be(be,L,me):(K&&T&&K!==be&&T!==L&&(re(K,T),K=void 0,T=void 0,b=void 0,z=void 0),!z&&window.requestAnimationFrame&&(K=be,T=L,b=Fe.scrollTop,z=1,window.requestAnimationFrame(Le))))}}}function Le(){if(!K||!T||!fl(b)||!fl(z))return;const be=k.value?.querySelector(`.${K}`);if(be){if(be.scrollTop===b?z++:(b=be.scrollTop,z=0),z>3){re(K,T),K=void 0,T=void 0,b=void 0,z=void 0;return}window.requestAnimationFrame(Le)}}function Ye(){J.value=n.initMode||"time",n.modelValue&&(r.value=f(n.modelValue,n.timezoneUtcOffset)),J.value==="time"&&Wl(()=>{ve(),he()}),V.value?.switchView("calendar")}function Ie(){h("update:show",!1)}return xl(J,be=>{be==="date"?V.value?.switchView("calendar"):be==="time"&&Wl(()=>{ve(),he()})}),(be,L)=>{const xe=s("f7-link"),Fe=s("f7-button"),Te=s("f7-toolbar"),Pe=s("f7-page-content"),pe=s("f7-sheet");return a(),i(pe,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:"date-time-selection-sheet",style:{height:"auto"},opened:p.show,"onSheet:open":Ye,"onSheet:closed":Ie},{default:l(()=>[t(Te,{class:"toolbar-with-swipe-handler"},{default:l(()=>[L[9]||(L[9]=o("div",{class:"swipe-handler"},null,-1)),o("div",qr,[t(xe,{text:e(P)("Now"),onClick:E},null,8,["text"])]),o("div",Wr,[t(xe,{"icon-f7":J.value==="time"?"calendar":"clock",onClick:Z},null,8,["icon-f7"]),t(Fe,{round:"",fill:"","icon-f7":"checkmark_alt",onClick:M})])]),_:1}),t(Pe,{class:"margin-top"},{default:l(()=>[o("div",Gr,[dt(t(Zn,{ref_key:"datetimepicker",ref:V,"datetime-picker-class":"justify-content-center","is-dark-mode":x.value,"enable-time-picker":!1,"show-alternate-dates":!0,modelValue:r.value,"onUpdate:modelValue":L[0]||(L[0]=B=>r.value=B)},null,8,["is-dark-mode","modelValue"]),[[Tt,J.value==="date"]])]),dt(o("div",jr,[o("div",{class:"time-picker-container",ref_key:"timePickerContainer",ref:k},[o("div",Kr,[o("div",Zr,[!e(A)&&e(d)?(a(),C("div",Xr,[o("div",{class:"picker-items picker-items-meridiem-indicator-first",onScroll:L[1]||(L[1]=B=>Me("picker-items-meridiem-indicator-first","picker-meridiem-indicator",!1))},[(a(!0),C(ke,null,Ce(e(w),B=>(a(),C("div",{class:R({"picker-item":!0,"picker-meridiem-indicator":!0,"picker-item-selected":le.value===B.value}),key:B.value,"data-value":B.value,onClick:_e=>{le.value=B.value,Be("picker-items-meridiem-indicator-first","picker-meridiem-indicator",B.value)}},[o("span",null,c(B.name),1)],10,Qr))),128))],32)])):u("",!0),o("div",Jr,[o("div",{class:"picker-items picker-items-hour",onScroll:L[2]||(L[2]=B=>Me("picker-items-hour","picker-hour",!1)),onScrollend:L[3]||(L[3]=B=>Me("picker-items-hour","picker-hour",!0))},[(a(!0),C(ke,null,Ce(H.value,B=>(a(),C("div",{class:R({"picker-item":!0,"picker-hour":!0,"picker-item-selected":oe.value===B.value}),key:`${B.itemsIndex}_${B.value}`,"data-items-index":B.itemsIndex,"data-value":B.value,onClick:_e=>{oe.value=B.value,Be("picker-items-hour","picker-hour",B.value)}},[o("span",{style:vt(ee(B.value,oe.value,B.itemsIndex,H.value))},c(B.value),5)],10,eu))),128))],32)]),L[10]||(L[10]=o("div",{class:"picker-column picker-column-divider"},":",-1)),o("div",tu,[o("div",{class:"picker-items picker-items-minute",onScroll:L[4]||(L[4]=B=>Me("picker-items-minute","picker-minute",!1)),onScrollend:L[5]||(L[5]=B=>Me("picker-items-minute","picker-minute",!0))},[(a(!0),C(ke,null,Ce(W.value,B=>(a(),C("div",{class:R({"picker-item":!0,"picker-minute":!0,"picker-item-selected":ne.value===B.value}),key:`${B.itemsIndex}_${B.value}`,"data-items-index":B.itemsIndex,"data-value":B.value,onClick:_e=>{ne.value=B.value,Be("picker-items-minute","picker-minute",B.value)}},[o("span",{style:vt(ee(B.value,ne.value,B.itemsIndex,W.value))},c(B.value),5)],10,lu))),128))],32)]),L[11]||(L[11]=o("div",{class:"picker-column picker-column-divider"},":",-1)),o("div",nu,[o("div",{class:"picker-items picker-items-second",onScroll:L[6]||(L[6]=B=>Me("picker-items-second","picker-second",!1)),onScrollend:L[7]||(L[7]=B=>Me("picker-items-second","picker-second",!0))},[(a(!0),C(ke,null,Ce(Q.value,B=>(a(),C("div",{class:R({"picker-item":!0,"picker-second":!0,"picker-item-selected":se.value===B.value}),key:`${B.itemsIndex}_${B.value}`,"data-items-index":B.itemsIndex,"data-value":B.value,onClick:_e=>{se.value=B.value,Be("picker-items-second","picker-second",B.value)}},[o("span",{style:vt(ee(B.value,se.value,B.itemsIndex,Q.value))},c(B.value),5)],10,au))),128))],32)]),!e(A)&&!e(d)?(a(),C("div",ou,[o("div",{class:"picker-items picker-items-meridiem-indicator-last",onScroll:L[8]||(L[8]=B=>Me("picker-items-meridiem-indicator-last","picker-meridiem-indicator",!1))},[(a(!0),C(ke,null,Ce(e(w),B=>(a(),C("div",{class:R({"picker-item":!0,"picker-meridiem-indicator":!0,"picker-item-selected":le.value===B.value}),key:B.value,"data-value":B.value,onClick:_e=>{le.value=B.value,Be("picker-items-meridiem-indicator-last","picker-meridiem-indicator",B.value)}},[o("span",null,c(B.name),1)],10,su))),128))],32)])):u("",!0),L[12]||(L[12]=o("div",{class:"picker-center-highlight"},null,-1))])])],512)],512),[[Tt,J.value==="time"]]),L[13]||(L[13]=o("input",{id:"time-picker-input",style:{display:"none"},type:"text",readonly:!0},null,-1))]),_:1})]),_:1},8,["opened"])}}}),ru={class:"left"},uu={class:"right"},cu={class:"block no-margin no-padding"},du=Oe({__name:"DateSelectionSheet",props:{modelValue:{},show:{type:Boolean}},emits:["update:modelValue","update:show"],setup(p,{emit:g}){const n=p,h=g,{tt:P}=He(),N=Al(),_=S(null),A=fe(()=>N.framework7DarkMode||!1);function U(){_.value=null,y()}function y(){h("update:modelValue",_.value?Eo(_.value):""),h("update:show",!1)}function v(){_.value=n.modelValue?Mo(n.modelValue):null}function d(){h("update:show",!1)}return(w,f)=>{const I=s("f7-link"),m=s("f7-button"),$=s("f7-toolbar"),F=s("date-time-picker"),D=s("f7-page-content"),V=s("f7-sheet");return a(),i(V,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:"date-selection-sheet",style:{height:"auto"},opened:p.show,"onSheet:open":v,"onSheet:closed":d},{default:l(()=>[t($,{class:"toolbar-with-swipe-handler"},{default:l(()=>[f[1]||(f[1]=o("div",{class:"swipe-handler"},null,-1)),o("div",ru,[t(I,{text:e(P)("Clear"),onClick:U},null,8,["text"])]),o("div",uu,[t(m,{round:"",fill:"","icon-f7":"checkmark_alt",onClick:y})])]),_:1}),t(D,{class:"margin-top"},{default:l(()=>[o("div",cu,[t(F,{"datetime-picker-class":"justify-content-center","is-dark-mode":A.value,"enable-time-picker":!1,clearable:!0,"show-alternate-dates":!0,modelValue:_.value,"onUpdate:modelValue":f[0]||(f[0]=k=>_.value=k)},null,8,["is-dark-mode","modelValue"])])]),_:1})]),_:1},8,["opened"])}}}),fu={class:"left"},pu={class:"right"},mu={class:"block no-margin no-padding"},vu=Oe({__name:"FiscalYearStartSelectionSheet",props:{show:{type:Boolean},modelValue:{},disabled:{type:Boolean},readonly:{type:Boolean},label:{},numeralSystem:{}},emits:["update:show","update:modelValue"],setup(p,{emit:g}){const n=p,h=g,{tt:P}=He(),N=Al(),_=tl(),{disabledDates:A,selectedFiscalYearStart:U,selectedFiscalYearStartValue:y,allowedMinDate:v,allowedMaxDate:d}=Lo(n),w=fe(()=>N.framework7DarkMode||!1);function f(){h("update:modelValue",U.value),h("update:show",!1)}function I(){U.value=_.currentUserFiscalYearStart}function m(){if(n.modelValue){const F=Ro.valueOf(n.modelValue);F&&(U.value=F.value)}}function $(){h("update:show",!1)}return(F,D)=>{const V=s("f7-link"),k=s("f7-button"),K=s("f7-toolbar"),T=s("date-time-picker"),b=s("f7-page-content"),z=s("f7-sheet");return a(),i(z,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:"fiscal-year-start-selection-sheet",style:{height:"auto"},opened:p.show,"onSheet:open":m,"onSheet:closed":$},{default:l(()=>[t(K,{class:"toolbar-with-swipe-handler"},{default:l(()=>[D[1]||(D[1]=o("div",{class:"swipe-handler"},null,-1)),o("div",fu,[t(V,{text:e(P)("Reset"),onClick:I},null,8,["text"])]),o("div",pu,[t(k,{round:"",fill:"","icon-f7":"checkmark_alt",onClick:f})])]),_:1}),t(b,{class:"margin-top"},{default:l(()=>[o("div",mu,[t(T,{"datetime-picker-class":"justify-content-center","is-dark-mode":w.value,"numeral-system":p.numeralSystem,"enable-time-picker":!1,"disable-year-select":!0,"no-swipe-and-scroll":!0,"min-date":e(v),"max-date":e(d),"disabled-dates":e(A),modelValue:e(y),"onUpdate:modelValue":D[0]||(D[0]=J=>kt(y)?y.value=J:null)},null,8,["is-dark-mode","numeral-system","min-date","max-date","disabled-dates","modelValue"])])]),_:1})]),_:1},8,["opened"])}}}),gu={class:"display-flex padding justify-content-space-between align-items-center"},hu={key:0,class:"ebk-sheet-title"},yu={class:"padding-horizontal padding-bottom"},_u={key:0,class:"no-margin-top"},ku={key:1,class:"no-margin-top margin-bottom"},bu={class:"margin-top text-align-center"},wu=Oe({__name:"DateRangeSelectionSheet",props:{minTime:{},maxTime:{},title:{},hint:{},show:{type:Boolean}},emits:["update:show","dateRange:change"],setup(p,{emit:g}){const n=p,h=g,{tt:P}=He(),{showToast:N}=nt(),{dateRange:_,beginDateTime:A,endDateTime:U,presetRanges:y,getLocalDatetimeFromSameDateTimeOfUnixTime:v,getFinalDateRange:d}=Oo(n),w=Al(),f=Wt("datetimepicker"),I=fe(()=>w.framework7DarkMode||!1);function m(){try{const V=d();if(!V)return;h("dateRange:change",V.minUnixTime,V.maxUnixTime)}catch(V){V instanceof Error&&N(V.message)}}function $(){h("update:show",!1)}function F(){n.minTime&&(_.value[0]=v(n.minTime)),n.maxTime&&(_.value[1]=v(n.maxTime)),window.dispatchEvent(new Event("resize")),f.value?.switchView("calendar")}function D(){h("update:show",!1)}return(V,k)=>{const K=s("f7-button"),T=s("f7-link"),b=s("f7-page-content"),z=s("f7-sheet");return a(),i(z,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:p.show,"onSheet:open":F,"onSheet:closed":D},{default:l(()=>[k[2]||(k[2]=o("div",{class:"swipe-handler"},null,-1)),t(b,null,{default:l(()=>[o("div",gu,[p.title?(a(),C("div",hu,[o("b",null,c(p.title),1)])):u("",!0)]),o("div",yu,[p.hint?(a(),C("p",_u,c(p.hint),1)):u("",!0),e(A)&&e(U)?(a(),C("p",ku,[o("span",null,c(e(A)),1),k[1]||(k[1]=o("span",null," - ",-1)),o("span",null,c(e(U)),1)])):u("",!0),jl(V.$slots,"default"),t(Zn,{ref_key:"datetimepicker",ref:f,"datetime-picker-class":"justify-content-center margin-bottom","is-dark-mode":I.value,"enable-time-picker":!0,"preset-dates":e(y),"show-alternate-dates":!0,modelValue:e(_),"onUpdate:modelValue":k[0]||(k[0]=J=>kt(_)?_.value=J:null)},null,8,["is-dark-mode","preset-dates","modelValue"]),t(K,{large:"",fill:"",class:R({disabled:!e(_)[0]||!e(_)[1]}),text:e(P)("Continue"),onClick:m},null,8,["class","text"]),o("div",bu,[t(T,{onClick:$,text:e(P)("Cancel")},null,8,["text"])])])]),_:3})]),_:3},8,["opened"])}}}),Cu={class:"display-flex padding justify-content-space-between align-items-center"},Tu={key:0,class:"ebk-sheet-title"},Su={class:"padding-horizontal padding-bottom"},xu={key:0,class:"no-margin-top"},Au={class:"margin-top text-align-center"},$u=Oe({__name:"MonthSelectionSheet",props:{modelValue:{},title:{},hint:{},show:{type:Boolean}},emits:["update:modelValue","update:show"],setup(p,{emit:g}){const n=p,h=g,{tt:P}=He(),{showToast:N}=nt(),_=Al(),A=S(zo(Yo())),U=fe(()=>_.framework7DarkMode||!1);function y(){if(A.value.year<=0||A.value.month0base<0){N("Date is too early");return}h("update:modelValue",A.value)}function v(){h("update:show",!1)}function d(){n.modelValue&&(A.value=n.modelValue)}function w(){h("update:show",!1)}return(f,I)=>{const m=s("month-picker"),$=s("f7-button"),F=s("f7-link"),D=s("f7-page-content"),V=s("f7-sheet");return a(),i(V,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:"month-selection-sheet",style:{height:"auto"},opened:p.show,"onSheet:open":d,"onSheet:closed":w},{default:l(()=>[I[1]||(I[1]=o("div",{class:"swipe-handler"},null,-1)),t(D,null,{default:l(()=>[o("div",Cu,[p.title?(a(),C("div",Tu,[o("b",null,c(p.title),1)])):u("",!0)]),o("div",Su,[p.hint?(a(),C("p",xu,c(p.hint),1)):u("",!0),jl(f.$slots,"default"),t(m,{"month-picker-class":"justify-content-center margin-bottom","is-dark-mode":U.value,modelValue:A.value,"onUpdate:modelValue":I[0]||(I[0]=k=>A.value=k)},null,8,["is-dark-mode","modelValue"]),t($,{large:"",fill:"",class:R({disabled:!A.value}),text:e(P)("Continue"),onClick:y},null,8,["class","text"]),o("div",Au,[t(F,{onClick:v,text:e(P)("Cancel")},null,8,["text"])])])]),_:3})]),_:3},8,["opened"])}}}),Du={class:"display-flex padding justify-content-space-between align-items-center"},Iu={key:0,class:"ebk-sheet-title"},Fu={class:"padding-horizontal padding-bottom"},Vu={key:0,class:"no-margin-top"},Pu={key:1,class:"no-margin-top margin-bottom"},Uu={class:"margin-top text-align-center"},Nu=Oe({__name:"MonthRangeSelectionSheet",props:{minTime:{},maxTime:{},title:{},hint:{},show:{type:Boolean}},emits:["update:show","dateRange:change"],setup(p,{emit:g}){const n=p,h=g,{tt:P}=He(),{showToast:N}=nt(),{dateRange:_,beginDateTime:A,endDateTime:U,getFinalMonthRange:y}=Ho(n),v=Al(),d=fe(()=>v.framework7DarkMode||!1);function w(){try{const $=y();if(!$)return;h("dateRange:change",$.minYearMonth,$.maxYearMonth)}catch($){$ instanceof Error&&N($.message)}}function f(){h("update:show",!1)}function I(){if(n.minTime){const $=aa(n.minTime);$&&(_.value[0]=$)}if(n.maxTime){const $=aa(n.maxTime);$&&(_.value[1]=$)}}function m(){h("update:show",!1)}return($,F)=>{const D=s("month-picker"),V=s("f7-button"),k=s("f7-link"),K=s("f7-page-content"),T=s("f7-sheet");return a(),i(T,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:"month-range-selection-sheet",style:{height:"auto"},opened:p.show,"onSheet:open":I,"onSheet:closed":m},{default:l(()=>[F[2]||(F[2]=o("div",{class:"swipe-handler"},null,-1)),t(K,null,{default:l(()=>[o("div",Du,[p.title?(a(),C("div",Iu,[o("b",null,c(p.title),1)])):u("",!0)]),o("div",Fu,[p.hint?(a(),C("p",Vu,c(p.hint),1)):u("",!0),e(A)&&e(U)?(a(),C("p",Pu,[o("span",null,c(e(A)),1),F[1]||(F[1]=o("span",null," - ",-1)),o("span",null,c(e(U)),1)])):u("",!0),jl($.$slots,"default"),t(D,{"month-picker-class":"justify-content-center margin-bottom","is-dark-mode":d.value,modelValue:e(_),"onUpdate:modelValue":F[0]||(F[0]=b=>kt(_)?_.value=b:null)},null,8,["is-dark-mode","modelValue"]),t(V,{large:"",fill:"",class:R({disabled:!e(_)[0]||!e(_)[1]}),text:e(P)("Continue"),onClick:w},null,8,["class","text"]),o("div",Uu,[t(k,{onClick:f,text:e(P)("Cancel")},null,8,["text"])])])]),_:3})]),_:3},8,["opened"])}}}),Bu=Oe({__name:"ListNumberInput",props:{minValue:{},maxValue:{},maxDecimalCount:{},label:{},placeholder:{},disabled:{type:Boolean},readonly:{type:Boolean},modelValue:{}},emits:["update:modelValue"],setup(p,{emit:g}){const n=p,h=g,{currentValue:P,onKeyUpDown:N,onPaste:_}=qo(n,h);return(A,U)=>{const y=s("f7-list-input");return a(),i(y,{type:"text",readonly:!!p.readonly,disabled:!!p.disabled,label:p.label,placeholder:p.placeholder,value:e(P),"onUpdate:value":U[0]||(U[0]=v=>kt(P)?P.value=v:null),onKeydown:e(N),onKeyup:e(N),onPaste:e(_)},null,8,["readonly","disabled","label","placeholder","value","onKeydown","onKeyup","onPaste"])}}}),Eu={class:"left"},Mu=Oe({__name:"ListItemSelectionSheet",props:{modelValue:{},valueType:{},keyField:{},valueField:{},titleField:{},titleI18n:{type:Boolean},afterField:{},afterI18n:{type:Boolean},iconField:{},iconType:{},colorField:{},hiddenField:{},items:{},show:{type:Boolean}},emits:["update:modelValue","update:show"],setup(p,{emit:g}){const n=p,h=g,{ti:P}=He(),N=S(n.modelValue),_=fe(()=>n.items.length>10?"list-item-selection-huge-sheet":n.items.length>6?"list-item-selection-large-sheet":"list-item-selection-default-sheet");function A(f,I){return n.valueType==="index"?N.value===I:n.valueField?N.value===f[n.valueField]:N.value===f}function U(f,I,m,$){return $==="index"?I:m?f[m]:f}function y(){h("update:show",!1)}function v(f,I){n.valueType==="index"?N.value=I:n.valueField?N.value=f[n.valueField]:N.value=f,h("update:modelValue",N.value),y()}function d(f){N.value=n.modelValue,Qt(f.$el[0],".sheet-modal-inner",".page-content","li.list-item-selected")}function w(){y()}return(f,I)=>{const m=s("f7-link"),$=s("f7-toolbar"),F=s("f7-icon"),D=s("ItemIcon"),V=s("f7-list-item"),k=s("f7-list"),K=s("f7-page-content"),T=s("f7-sheet");return a(),i(T,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:R(_.value),opened:p.show,"onSheet:open":d,"onSheet:closed":w},{default:l(()=>[t($,{class:"toolbar-with-swipe-handler"},{default:l(()=>[I[0]||(I[0]=o("div",{class:"swipe-handler"},null,-1)),o("div",Eu,[t(m,{"sheet-close":"","icon-f7":"xmark"})])]),_:1}),t(K,{class:"margin-top"},{default:l(()=>[t(k,{dividers:"",class:"no-margin-vertical"},{default:l(()=>[(a(!0),C(ke,null,Ce(p.items,(b,z)=>dt((a(),i(V,{link:"#","no-chevron":"",title:e(P)(p.titleField?b[p.titleField]:b,!!p.titleI18n),value:U(b,z,p.valueField,p.valueType),after:e(P)(p.afterField?b[p.afterField]:"",!!p.afterI18n),class:R({"list-item-selected":A(b,z)}),key:U(b,z,p.keyField,p.valueType),onClick:J=>v(b,z)},jn({"content-start":l(()=>[t(F,{class:"list-item-checked-icon",f7:"checkmark_alt",style:vt({color:A(b,z)?"":"transparent"})},null,8,["style"])]),_:2},[p.iconField?{name:"media",fn:l(()=>[t(D,{"icon-type":p.iconType,"icon-id":b[p.iconField],color:p.colorField?b[p.colorField]:void 0},null,8,["icon-type","icon-id","color"])]),key:"0"}:void 0]),1032,["title","value","after","class","onClick"])),[[Tt,b&&(!p.hiddenField||!b[p.hiddenField])]])),128))]),_:1})]),_:1})]),_:1},8,["class","opened"])}}}),Lu={key:0},Ru=Oe({__name:"ListItemSelectionPopup",props:{modelValue:{},title:{},valueType:{},keyField:{},valueField:{},titleField:{},titleI18n:{type:Boolean},afterField:{},afterI18n:{type:Boolean},iconField:{},iconType:{},colorField:{},hiddenField:{},enableFilter:{type:Boolean},filterPlaceholder:{},filterNoItemsText:{},items:{},show:{type:Boolean}},emits:["update:modelValue","update:show"],setup(p,{emit:g}){const n=p,h=g,{ti:P}=He(),N=Wt("searchbar"),_=S(n.modelValue),A=S(""),U=S(!1),y=fe(()=>{const F=[],D=n.items,V=A.value?.toLowerCase()??"";for(const k of D)if(n.valueType==="index"){if(!n.enableFilter||!V||String(k).toLowerCase().indexOf(V)>=0){F.push(k);continue}}else{const K=k;if(n.hiddenField&&K[n.hiddenField])continue;if(!n.enableFilter||!V){F.push(k);continue}if(P(K[n.titleField],!!n.titleI18n).toLowerCase().indexOf(V)>=0){F.push(k);continue}if(w(k).toLowerCase().indexOf(V)>=0){F.push(k);continue}}return F});function v(F,D){return n.valueType==="index"?_.value===D:n.valueField?_.value===F[n.valueField]:_.value===F}function d(F,D,V,k){return k==="index"?D:V?F[V]:F}function w(F){return n.valueType==="index"?"":n.afterField?P(F[n.afterField],!!n.afterI18n):""}function f(){h("update:show",!1)}function I(F,D){n.valueType==="index"?_.value=D:n.valueField?_.value=F[n.valueField]:_.value=F,h("update:modelValue",_.value),f()}function m(F){_.value=n.modelValue,Qt(F.$el[0],".popup > .page",".page-content","li.list-item-selected")}function $(){f(),A.value="",U.value=!1,N.value?.clear()}return(F,D)=>{const V=s("f7-link"),k=s("f7-nav-left"),K=s("f7-searchbar"),T=s("f7-nav-title"),b=s("f7-nav-right"),z=s("f7-navbar"),J=s("f7-icon"),r=s("ItemIcon"),Y=s("f7-list-item"),te=s("f7-list"),x=s("f7-block"),O=s("f7-page"),H=s("f7-popup");return a(),i(H,{push:"",opened:p.show,"onPopup:open":m,"onPopup:closed":$},{default:l(()=>[t(O,null,{default:l(()=>[t(z,{outline:!1},{default:l(()=>[t(k,null,{default:l(()=>[t(V,{"popup-close":"","icon-f7":"xmark"})]),_:1}),p.enableFilter&&U.value?(a(),i(K,{key:0,ref_key:"searchbar",ref:N,"custom-searchs":"",value:A.value,placeholder:p.filterPlaceholder,"disable-button":!1,onInput:D[0]||(D[0]=W=>A.value=W.target.value),"onClick:clear":D[1]||(D[1]=W=>{A.value="",U.value=!1})},null,8,["value","placeholder"])):u("",!0),p.title&&!U.value?(a(),i(T,{key:1,title:p.title},null,8,["title"])):u("",!0),p.enableFilter&&!U.value?(a(),i(b,{key:2},{default:l(()=>[t(V,{"icon-f7":"search",onClick:D[2]||(D[2]=W=>U.value=!0)})]),_:1})):u("",!0)]),_:1}),t(x,{class:"no-margin no-padding"},{default:l(()=>[t(te,{class:"no-margin",strong:"",outline:"",dividers:""},{default:l(()=>[(a(!0),C(ke,null,Ce(y.value,(W,Q)=>dt((a(),i(Y,{link:"#","no-chevron":"",title:e(P)(p.titleField?W[p.titleField]:W,!!p.titleI18n),value:d(W,Q,p.valueField,p.valueType),class:R({"list-item-selected":v(W,Q)}),key:d(W,Q,p.keyField,p.valueType),onClick:le=>I(W,Q)},jn({"content-start":l(()=>[t(J,{class:"list-item-checked-icon",f7:"checkmark_alt",style:vt({color:v(W,Q)?"":"transparent"})},null,8,["style"])]),after:l(()=>[p.afterField?(a(),C("small",Lu,c(w(W)),1)):u("",!0)]),_:2},[p.iconField?{name:"media",fn:l(()=>[t(r,{"icon-type":p.iconType,"icon-id":W[p.iconField],color:p.colorField?W[p.colorField]:void 0},null,8,["icon-type","icon-id","color"])]),key:"0"}:void 0]),1032,["title","value","class","onClick"])),[[Tt,W&&(!p.hiddenField||!W[p.hiddenField])]])),128)),!y.value||!y.value.length?(a(),i(Y,{key:0,title:p.filterNoItemsText},null,8,["title"])):u("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["opened"])}}}),Ou={class:"left"},zu={class:"primary-list-container"},Yu={class:"secondary-list-container"},Hu=Oe({__name:"TwoColumnListItemSelectionSheet",props:{show:{type:Boolean},primaryValueField:{},primaryHeaderField:{},primaryHeaderI18n:{type:Boolean},primaryFooterField:{},primaryFooterI18n:{type:Boolean},secondaryHeaderField:{},secondaryHeaderI18n:{type:Boolean},secondaryFooterField:{},secondaryFooterI18n:{type:Boolean},modelValue:{},primaryKeyField:{},primaryTitleField:{},primaryTitleI18n:{type:Boolean},primaryIconField:{},primaryIconType:{},primaryColorField:{},primaryHiddenField:{},primarySubItemsField:{},secondaryKeyField:{},secondaryValueField:{},secondaryTitleField:{},secondaryTitleI18n:{type:Boolean},secondaryIconField:{},secondaryIconType:{},secondaryColorField:{},secondaryHiddenField:{},enableFilter:{type:Boolean},filterPlaceholder:{},filterNoItemsText:{},items:{}},emits:["update:modelValue","update:show"],setup(p,{emit:g}){const n=p,h=g,{ti:P}=He(),{filterContent:N,filteredItems:_,getFilteredSubItems:A,getCurrentPrimaryValueBySecondaryValue:U,isSecondaryValueSelected:y,getSelectedPrimaryItem:v,updateCurrentPrimaryValue:d,updateCurrentSecondaryValue:w}=Wo(n),f=Wt("sheet"),I=Wt("searchbar"),m=S(U(n.modelValue)),$=S(n.modelValue),F=fe(()=>A(D.value)),D=fe(()=>v(m.value));function V(r){return y($.value,r)}function k(){h("update:show",!1)}function K(r){d(m,r)}function T(r){w($,r),h("update:modelValue",$.value),k()}function b(){ea(f.value?.$el,window.innerHeight)}function z(r){m.value=U(n.modelValue),$.value=n.modelValue,Qt(r.$el[0],".primary-list-container",".primary-list-container","li.primary-list-item-selected"),Qt(r.$el[0],".secondary-list-container",".secondary-list-container","li.secondary-list-item-selected")}function J(){k(),N.value="",I.value?.clear()}return(r,Y)=>{const te=s("f7-link"),x=s("f7-searchbar"),O=s("f7-toolbar"),H=s("ItemIcon"),W=s("f7-icon"),Q=s("f7-list-item"),le=s("f7-list"),oe=s("f7-page-content"),ne=s("f7-sheet");return a(),i(ne,{ref_key:"sheet",ref:f,"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:p.show,"onSheet:open":z,"onSheet:closed":J},{default:l(()=>[t(O,{class:"toolbar-with-swipe-handler"},{default:l(()=>[Y[1]||(Y[1]=o("div",{class:"swipe-handler"},null,-1)),o("div",Ou,[t(te,{"sheet-close":"","icon-f7":"xmark"})]),p.enableFilter?(a(),i(x,{key:0,ref_key:"searchbar",ref:I,"custom-searchs":"",value:e(N),placeholder:p.filterPlaceholder,"disable-button":!1,onInput:Y[0]||(Y[0]=se=>N.value=se.target.value),onFocus:b},null,8,["value","placeholder"])):u("",!0)]),_:1}),t(oe,{class:"margin-top"},{default:l(()=>[o("div",{class:R(["grid grid-gap",{"grid-cols-2":e(_)&&e(_).length}])},[o("div",null,[o("div",zu,[t(le,{dividers:"",class:"primary-list no-margin-vertical"},{default:l(()=>[(a(!0),C(ke,null,Ce(e(_),se=>(a(),i(Q,{link:"#","no-chevron":"",class:R({"primary-list-item-selected":se===D.value}),value:p.primaryValueField?se[p.primaryValueField]:se,title:p.primaryTitleField?e(P)(se[p.primaryTitleField],!!p.primaryTitleI18n):"",header:p.primaryHeaderField?e(P)(se[p.primaryHeaderField],!!p.primaryHeaderI18n):"",footer:p.primaryFooterField?e(P)(se[p.primaryFooterField],!!p.primaryFooterI18n):"",key:p.primaryKeyField?se[p.primaryKeyField]:se,onClick:Z=>K(se)},{media:l(()=>[t(H,{"icon-type":p.primaryIconType,"icon-id":p.primaryIconField?se[p.primaryIconField]:void 0,color:p.primaryColorField?se[p.primaryColorField]:void 0},null,8,["icon-type","icon-id","color"])]),after:l(()=>[se===D.value?(a(),i(W,{key:0,class:"list-item-showing icon-with-direction",f7:"chevron_right"})):u("",!0)]),_:2},1032,["class","value","title","header","footer","onClick"]))),128)),!e(_)||!e(_).length?(a(),i(Q,{key:0,title:p.filterNoItemsText},null,8,["title"])):u("",!0)]),_:1})])]),dt(o("div",null,[o("div",Yu,[D.value&&p.primarySubItemsField&&D.value[p.primarySubItemsField]?(a(),i(le,{key:0,dividers:"",class:"secondary-list no-margin-vertical"},{default:l(()=>[(a(!0),C(ke,null,Ce(F.value,se=>(a(),i(Q,{link:"#","no-chevron":"",class:R({"secondary-list-item-selected":V(se)}),value:p.secondaryValueField?se[p.secondaryValueField]:se,title:p.secondaryTitleField?e(P)(se[p.secondaryTitleField],!!p.secondaryTitleI18n):"",header:p.secondaryHeaderField?e(P)(se[p.secondaryHeaderField],!!p.secondaryHeaderI18n):"",footer:p.secondaryFooterField?e(P)(se[p.secondaryFooterField],!!p.secondaryFooterI18n):"",key:p.secondaryKeyField?se[p.secondaryKeyField]:se,onClick:Z=>T(se)},{media:l(()=>[t(H,{"icon-type":p.secondaryIconType,"icon-id":p.secondaryIconField?se[p.secondaryIconField]:void 0,color:p.secondaryColorField?se[p.secondaryColorField]:void 0},null,8,["icon-type","icon-id","color"])]),after:l(()=>[V(se)?(a(),i(W,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:2},1032,["class","value","title","header","footer","onClick"]))),128))]),_:1})):u("",!0)])],512),[[Tt,e(_)&&e(_).length]])],2)]),_:1})]),_:1},8,["opened"])}}}),qu={class:"left"},Wu=Oe({__name:"TreeViewSelectionSheet",props:{show:{type:Boolean},modelValue:{},primaryKeyField:{},primaryTitleField:{},primaryTitleI18n:{type:Boolean},primaryIconField:{},primaryIconType:{},primaryColorField:{},primaryHiddenField:{},primarySubItemsField:{},secondaryKeyField:{},secondaryValueField:{},secondaryTitleField:{},secondaryTitleI18n:{type:Boolean},secondaryIconField:{},secondaryIconType:{},secondaryColorField:{},secondaryHiddenField:{},enableFilter:{type:Boolean},filterPlaceholder:{},filterNoItemsText:{},items:{}},emits:["update:modelValue","update:show"],setup(p,{emit:g}){const n=p,h=g,{ti:P}=He(),{filterContent:N,visibleItemsCount:_,filteredItems:A,getFilteredSubItems:U,isSecondaryValueSelected:y,updateCurrentSecondaryValue:v}=Go(n),d=Wt("sheet"),w=Wt("searchbar"),f=S(n.modelValue),I=fe(()=>_.value>6?"tree-view-selection-huge-sheet":_.value>2?"tree-view-selection-large-sheet":"tree-view-selection-default-sheet");function m(k){const K=k[n.primarySubItemsField];if(K.length<1)return!1;const T=N.value?.toLowerCase()??"";for(const b of K)if(!(n.secondaryHiddenField&&b[n.secondaryHiddenField])){if(n.primaryTitleField&&T&&P(b[n.primaryTitleField],!!n.primaryTitleI18n).toLowerCase().indexOf(T)>=0||n.secondaryValueField&&b[n.secondaryValueField]===f.value)return!0;if(!n.secondaryValueField&&b===f.value)return!0}return!1}function $(k){v(f,k),h("update:modelValue",f.value),h("update:show",!1)}function F(){ea(d.value?.$el,window.innerHeight)}function D(k){f.value=n.modelValue,Qt(k.$el[0],".sheet-modal-inner",".page-content",".treeview-item > .treeview-item-selected")}function V(){h("update:show",!1),N.value="",w.value?.clear()}return(k,K)=>{const T=s("f7-link"),b=s("f7-searchbar"),z=s("f7-toolbar"),J=s("f7-list-item"),r=s("f7-list"),Y=s("ItemIcon"),te=s("f7-treeview-item"),x=s("f7-treeview"),O=s("f7-page-content"),H=s("f7-sheet");return a(),i(H,{ref_key:"sheet",ref:d,"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:p.show,"onSheet:open":D,"onSheet:closed":V},{default:l(()=>[t(z,{class:"toolbar-with-swipe-handler"},{default:l(()=>[K[1]||(K[1]=o("div",{class:"swipe-handler"},null,-1)),o("div",qu,[t(T,{"sheet-close":"","icon-f7":"xmark"})]),p.enableFilter?(a(),i(b,{key:0,ref_key:"searchbar",ref:w,"custom-searchs":"",value:e(N),placeholder:p.filterPlaceholder,"disable-button":!1,onInput:K[0]||(K[0]=W=>N.value=W.target.value),onFocus:F},null,8,["value","placeholder"])):u("",!0)]),_:1}),t(O,{class:R("margin-top "+I.value)},{default:l(()=>[!e(A)||!e(A).length?(a(),i(r,{key:0,class:"no-margin-top no-margin-bottom"},{default:l(()=>[t(J,{title:p.filterNoItemsText},null,8,["title"])]),_:1})):u("",!0),t(x,{class:"tree-view-selection-treeview"},{default:l(()=>[(a(!0),C(ke,null,Ce(e(A),W=>(a(),i(te,{"item-toggle":"",opened:m(W),label:e(P)(p.primaryTitleField?W[p.primaryTitleField]:W,!!p.primaryTitleI18n),key:p.primaryKeyField?W[p.primaryKeyField]:W},{media:l(()=>[p.primaryIconField?(a(),i(Y,{key:0,"icon-type":p.primaryIconType,"icon-id":W[p.primaryIconField],color:p.primaryColorField?W[p.primaryColorField]:void 0},null,8,["icon-type","icon-id","color"])):u("",!0)]),default:l(()=>[(a(!0),C(ke,null,Ce(e(U)(W),Q=>(a(),i(te,{selectable:"",selected:e(y)(f.value,Q),label:e(P)(p.secondaryTitleField?Q[p.secondaryTitleField]:Q,!!p.secondaryTitleI18n),key:p.secondaryKeyField?Q[p.secondaryKeyField]:Q,onClick:le=>$(Q)},{media:l(()=>[p.secondaryIconField?(a(),i(Y,{key:0,"icon-type":p.secondaryIconType,"icon-id":Q[p.secondaryIconField],color:p.secondaryColorField?Q[p.secondaryColorField]:void 0},null,8,["icon-type","icon-id","color"])):u("",!0)]),_:2},1032,["selected","label","onClick"]))),128))]),_:2},1032,["opened","label"]))),128))]),_:1})]),_:1},8,["class"])]),_:1},8,["opened"])}}}),Gu={class:"left"},ju=Oe({__name:"IconSelectionSheet",props:{modelValue:{},show:{type:Boolean},columnCount:{},color:{},allIconInfos:{}},emits:["update:modelValue","update:show"],setup(p,{emit:g}){const n=p,h=g,P=S(n.modelValue),N=S(n.columnCount||7),_=fe(()=>jo(n.allIconInfos,N.value)),A=fe(()=>_.value.length>10?"icon-selection-huge-sheet":_.value.length>6?"icon-selection-large-sheet":"icon-selection-default-sheet");function U(w){P.value=w.id,h("update:modelValue",P.value)}function y(w){return ba(w,"id",P.value)}function v(w){Qt(w.$el[0],".sheet-modal-inner",".page-content",".row-has-selected-item")}function d(){h("update:show",!1)}return(w,f)=>{const I=s("f7-link"),m=s("f7-toolbar"),$=s("f7-icon"),F=s("f7-badge"),D=s("ItemIcon"),V=s("f7-block"),k=s("f7-page-content"),K=s("f7-sheet");return a(),i(K,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:R(A.value),opened:p.show,"onSheet:open":v,"onSheet:closed":d},{default:l(()=>[t(m,{class:"toolbar-with-swipe-handler"},{default:l(()=>[f[0]||(f[0]=o("div",{class:"swipe-handler"},null,-1)),o("div",Gu,[t(I,{"sheet-close":"","icon-f7":"xmark"})])]),_:1}),t(k,null,{default:l(()=>[t(V,{class:"margin-vertical no-padding"},{default:l(()=>[(a(!0),C(ke,null,Ce(_.value,(T,b)=>(a(),C("div",{class:R(["grid padding-vertical-half padding-horizontal-half",{"row-has-selected-item":y(T)}]),style:vt(`grid-template-columns: repeat(${N.value}, minmax(0, 1fr));`),key:b},[(a(!0),C(ke,null,Ce(T,z=>(a(),C("div",{class:"text-align-center",key:z.id},[t(D,{"icon-type":"fixed","icon-id":z.icon,color:p.color,onClick:J=>U(z)},{default:l(()=>[P.value&&P.value===z.id?(a(),i(F,{key:0,color:"default",class:"right-bottom-icon"},{default:l(()=>[t($,{f7:"checkmark_alt"})]),_:1})):u("",!0)]),_:2},1032,["icon-id","color","onClick"])]))),128))],6))),128))]),_:1})]),_:1})]),_:1},8,["class","opened"])}}}),Ku={class:"left"},Zu=Oe({__name:"ColorSelectionSheet",props:{modelValue:{},show:{type:Boolean},columnCount:{},allColorInfos:{}},emits:["update:modelValue","update:show"],setup(p,{emit:g}){const n=p,h=g,P=S(n.modelValue),N=S(n.columnCount||7),_=fe(()=>Ko(n.allColorInfos,N.value));function A(d){P.value=d.color,h("update:modelValue",P.value)}function U(d){return ba(d,"id",P.value)}function y(d){P.value=n.modelValue,Qt(d.$el[0],".sheet-modal-inner",".page-content",".row-has-selected-item")}function v(){h("update:show",!1)}return(d,w)=>{const f=s("f7-link"),I=s("f7-toolbar"),m=s("f7-icon"),$=s("f7-badge"),F=s("ItemIcon"),D=s("f7-block"),V=s("f7-page-content"),k=s("f7-sheet");return a(),i(k,{"swipe-to-close":"","swipe-handler":".swipe-handler",opened:p.show,"onSheet:open":y,"onSheet:closed":v},{default:l(()=>[t(I,{class:"toolbar-with-swipe-handler"},{default:l(()=>[w[0]||(w[0]=o("div",{class:"swipe-handler"},null,-1)),o("div",Ku,[t(f,{"sheet-close":"","icon-f7":"xmark"})])]),_:1}),t(V,null,{default:l(()=>[t(D,{class:"margin-vertical no-padding"},{default:l(()=>[(a(!0),C(ke,null,Ce(_.value,(K,T)=>(a(),C("div",{class:R(["grid padding-vertical-half padding-horizontal-half",{"row-has-selected-item":U(K)}]),style:vt(`grid-template-columns: repeat(${N.value}, minmax(0, 1fr));`),key:T},[(a(!0),C(ke,null,Ce(K,b=>(a(),C("div",{class:"text-align-center",key:b.color},[t(F,{"icon-type":"fixed-f7","icon-id":"app_fill",color:b.color,onClick:z=>A(b)},{default:l(()=>[P.value&&P.value===b.color?(a(),i($,{key:0,color:"default",class:"right-bottom-icon"},{default:l(()=>[t(m,{f7:"checkmark_alt"})]),_:1})):u("",!0)]),_:2},1032,["color","onClick"])]))),128))],6))),128))]),_:1})]),_:1})]),_:1},8,["opened"])}}}),Xu={class:"display-flex padding justify-content-space-between align-items-center"},Qu={key:0,class:"ebk-sheet-title"},Ju={class:"padding-horizontal padding-bottom"},ec={key:0,class:"no-margin-top margin-bottom-half"},tc=["rows","value"],lc={class:"margin-top text-align-center"},nc=Oe({__name:"InformationSheet",props:{title:{},hint:{},information:{},rowCount:{},enableCopy:{type:Boolean},show:{type:Boolean}},emits:["update:show","info:copied"],setup(p,{emit:g}){const n=p,h=g,{tt:P}=He();function N(){Zo(n.information),h("info:copied")}function _(){h("update:show",!1)}function A(){_()}return(U,y)=>{const v=s("f7-link"),d=s("f7-page-content"),w=s("f7-sheet");return a(),i(w,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:p.show,"onSheet:closed":A},{default:l(()=>[y[0]||(y[0]=o("div",{class:"swipe-handler"},null,-1)),t(d,{class:"margin-top no-padding-top"},{default:l(()=>[o("div",Xu,[p.title?(a(),C("div",Qu,[o("b",null,c(p.title),1)])):u("",!0)]),o("div",Ju,[p.hint?(a(),C("p",ec,[o("span",null,c(p.hint),1),p.enableCopy?(a(),i(v,{key:0,class:"icon-after-text","icon-only":"","icon-f7":"doc_on_doc",onClick:N})):u("",!0)])):u("",!0),o("textarea",{class:"information-content full-line",readonly:!0,rows:p.rowCount,value:p.information},null,8,tc),o("div",lc,[t(v,{onClick:_,text:e(P)("Close")},null,8,["text"])])])]),_:1})]),_:1},8,["opened"])}}}),ac={key:0,class:"margin-top padding-horizontal"},oc={class:"numpad-buttons"},sc={class:"numpad-button-text numpad-button-text-normal"},ic={class:"numpad-button-text numpad-button-text-normal"},rc={class:"numpad-button-text numpad-button-text-normal"},uc={class:"numpad-button-text numpad-button-text-normal"},cc={class:"numpad-button-text numpad-button-text-normal"},dc={class:"numpad-button-text numpad-button-text-normal"},fc={class:"numpad-button-text numpad-button-text-normal"},pc={class:"numpad-button-text numpad-button-text-normal"},mc={class:"numpad-button-text numpad-button-text-normal"},vc={class:"numpad-button-text numpad-button-text-normal"},gc={class:"numpad-button-text numpad-button-text-normal"},hc={class:"numpad-button-text numpad-button-text-normal"},yc={class:"numpad-button-text numpad-button-text-normal"},_c=Oe({__name:"NumberPadSheet",props:{modelValue:{},minValue:{},maxValue:{},currency:{},flipNegative:{type:Boolean},hint:{},show:{type:Boolean}},emits:["update:modelValue","update:show"],setup(p,{emit:g}){const n=p,h=g,{tt:P,getAllLocalizedDigits:N,getCurrentNumeralSystemType:_,getCurrentDecimalSeparator:A,parseAmountFromLocalizedNumerals:U,parseAmountFromWesternArabicNumerals:y,formatAmountToWesternArabicNumeralsWithoutDigitGrouping:v,appendDigitGroupingSymbolAndDecimalSeparator:d}=He(),{showToast:w}=nt(),f=!!navigator.clipboard,I=S(""),m=S(""),$=S(J(n.modelValue,n.flipNegative)),F=S(!1),D=fe(()=>_()),V=fe(()=>N()),k=fe(()=>A()),K=fe(()=>!n.currency||!Nn[n.currency]||!zt(Nn[n.currency].fraction)?!0:Nn[n.currency].fraction>0),T=fe(()=>{const Z=d(D.value.replaceWesternArabicDigitsToLocalizedDigits(I.value));let E=$.value,M="";return E&&E[E.length-1]===k.value&&(E=E.substring(0,E.length-1),M=k.value),E=d(D.value.replaceWesternArabicDigitsToLocalizedDigits(E)),M&&(E+=M),m.value?`${Z} ${m.value} ${E}`:E}),b=fe(()=>T.value&&T.value.length>=24?"numpad-value-small":T.value&&T.value.length>=16?"numpad-value-normal":"numpad-value-large"),z=fe(()=>m.value?"=":P("OK"));function J(Z,E){return E&&(Z=-Z),r(Z,!0)}function r(Z,E){if(!zt(Z))return"";const M=v(Z,n.currency),ee=A(),ve=M.indexOf(ee);if(ve<0)return E&&M===dl.WesternArabicNumerals.digitZero?"":M;const he=M.substring(0,ve),re=M.substring(ve+1,M.length);let Be="";for(let Me=re.length-1;Me>=0;Me--)(re[Me]!==dl.WesternArabicNumerals.digitZero||Be.length>0)&&(Be=re[Me]+Be);return Be.length<1?E&&he===dl.WesternArabicNumerals.digitZero?"":he:`${he}${ee}${Be}`}function Y(Z){if(!I.value&&m.value===""&&($.value="-"+$.value,m.value=""),$.value===dl.WesternArabicNumerals.digitZero){$.value=Z.toString();return}else if($.value===`-${dl.WesternArabicNumerals.digitZero}`){$.value="-"+Z.toString();return}const E=$.value.indexOf(k.value);if(E>=0&&$.value.substring(E+1,$.value.length).length>=2)return;const M=$.value+Z.toString();zt(n.minValue)&&y(M)<n.minValue||zt(n.maxValue)&&y(M)>n.maxValue||($.value=M)}function te(Z){Y(Z),Y(Z)}function x(){$.value.indexOf(k.value)>=0||(!I.value&&m.value===""&&($.value="-"+$.value,m.value=""),$.value.length<1?$.value=dl.WesternArabicNumerals.digitZero:$.value==="-"&&($.value="-"+dl.WesternArabicNumerals.digitZero),$.value=$.value+k.value)}function O(Z){if($.value){if(m.value&&!le())return;I.value=$.value,$.value=""}m.value=Z}function H(){if(!$.value||$.value.length<1){m.value&&($.value=I.value,I.value="",m.value="");return}$.value=$.value.substring(0,$.value.length-1)}function W(){$.value="",I.value="",m.value=""}function Q(){if(!An()||!f||F.value){F.value=!1;return}F.value=!0,navigator.clipboard.readText().then(Z=>{if(F.value=!1,!Z)return;const E=U(Z);if(Number.isNaN(E)||!Number.isFinite(E)){w("Cannot parse amount from clipboard");return}if(zt(n.minValue)&&E<n.minValue){w("Numeric Overflow");return}if(zt(n.maxValue)&&E>n.maxValue){w("Numeric Overflow");return}$.value=r(E,!1)}).catch(Z=>{sl.error("failed to read clipboard text",Z)})}function le(){if(m.value&&$.value.length>=1){const Z=y(I.value),E=y($.value);let M=0;switch(m.value){case"+":M=Z+E;break;case"":M=Z-E;break;case"":M=Math.trunc(Z*E/100);break;default:M=Z}return zt(n.minValue)&&M<n.minValue||zt(n.maxValue)&&M>n.maxValue?(w("Numeric Overflow"),!1):($.value=r(M,!1),I.value="",m.value="",!0)}else{if(m.value&&$.value.length<1)return $.value=I.value,I.value="",m.value="",!0;{let Z=y($.value);return n.flipNegative&&(Z=-Z),h("update:modelValue",Z),oe(),!0}}}function oe(){h("update:show",!1)}function ne(){$.value=J(n.modelValue,n.flipNegative),I.value="",m.value=""}function se(){oe()}return xl(()=>n.flipNegative,Z=>{$.value=J(n.modelValue,Z)}),(Z,E)=>{const M=s("f7-button"),ee=s("f7-icon"),ve=s("f7-page-content"),he=s("f7-sheet");return a(),i(he,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:"numpad-sheet",style:{height:"auto"},opened:p.show,"onSheet:open":ne,"onSheet:closed":se},{default:l(()=>[E[20]||(E[20]=o("div",{class:"swipe-handler"},null,-1)),t(ve,{class:"margin-top no-padding-top"},{default:l(()=>[p.hint?(a(),C("div",ac,[o("span",null,c(p.hint),1)])):u("",!0),o("div",{class:"numpad-values",onClick:Q},[o("span",{class:R(["numpad-value",b.value])},c(T.value),3)]),o("div",oc,[t(M,{class:"numpad-button numpad-button-num",onClick:E[0]||(E[0]=re=>Y(7))},{default:l(()=>[o("span",sc,c(V.value[7]),1)]),_:1}),t(M,{class:"numpad-button numpad-button-num",onClick:E[1]||(E[1]=re=>Y(8))},{default:l(()=>[o("span",ic,c(V.value[8]),1)]),_:1}),t(M,{class:"numpad-button numpad-button-num",onClick:E[2]||(E[2]=re=>Y(9))},{default:l(()=>[o("span",rc,c(V.value[9]),1)]),_:1}),t(M,{class:"numpad-button numpad-button-function no-right-border",onClick:E[3]||(E[3]=re=>O(""))},{default:l(()=>[...E[17]||(E[17]=[o("span",{class:"numpad-button-text numpad-button-text-normal"},"",-1)])]),_:1}),t(M,{class:"numpad-button numpad-button-num",onClick:E[4]||(E[4]=re=>Y(4))},{default:l(()=>[o("span",uc,c(V.value[4]),1)]),_:1}),t(M,{class:"numpad-button numpad-button-num",onClick:E[5]||(E[5]=re=>Y(5))},{default:l(()=>[o("span",cc,c(V.value[5]),1)]),_:1}),t(M,{class:"numpad-button numpad-button-num",onClick:E[6]||(E[6]=re=>Y(6))},{default:l(()=>[o("span",dc,c(V.value[6]),1)]),_:1}),t(M,{class:"numpad-button numpad-button-function no-right-border",onClick:E[7]||(E[7]=re=>O(""))},{default:l(()=>[...E[18]||(E[18]=[o("span",{class:"numpad-button-text numpad-button-text-normal"},"",-1)])]),_:1}),t(M,{class:"numpad-button numpad-button-num",onClick:E[8]||(E[8]=re=>Y(1))},{default:l(()=>[o("span",fc,c(V.value[1]),1)]),_:1}),t(M,{class:"numpad-button numpad-button-num",onClick:E[9]||(E[9]=re=>Y(2))},{default:l(()=>[o("span",pc,c(V.value[2]),1)]),_:1}),t(M,{class:"numpad-button numpad-button-num",onClick:E[10]||(E[10]=re=>Y(3))},{default:l(()=>[o("span",mc,c(V.value[3]),1)]),_:1}),t(M,{class:"numpad-button numpad-button-function no-right-border",onClick:E[11]||(E[11]=re=>O("+"))},{default:l(()=>[...E[19]||(E[19]=[o("span",{class:"numpad-button-text numpad-button-text-normal"},"+",-1)])]),_:1}),K.value?(a(),i(M,{key:0,class:"numpad-button numpad-button-num",onClick:E[12]||(E[12]=re=>x())},{default:l(()=>[o("span",vc,c(k.value),1)]),_:1})):u("",!0),K.value?u("",!0):(a(),i(M,{key:1,class:"numpad-button numpad-button-num",onClick:E[13]||(E[13]=re=>te(0))},{default:l(()=>[o("span",gc,c(`${V.value[0]}${V.value[0]}`),1)]),_:1})),t(M,{class:"numpad-button numpad-button-num",onClick:E[14]||(E[14]=re=>Y(0))},{default:l(()=>[o("span",hc,c(V.value[0]),1)]),_:1}),t(M,{class:"numpad-button numpad-button-num",onClick:H,onTaphold:E[15]||(E[15]=re=>W())},{default:l(()=>[o("span",yc,[t(ee,{class:"icon-with-direction",f7:"delete_left"})])]),_:1}),t(M,{class:"numpad-button numpad-button-confirm no-right-border no-bottom-border",fill:"",onClick:E[16]||(E[16]=re=>le())},{default:l(()=>[o("span",{class:R({"numpad-button-text":!0,"numpad-button-text-confirm":!m.value})},c(z.value),3)]),_:1})])]),_:1})]),_:1},8,["opened"])}}}),kc={class:"left"},bc={class:"right map-sheet-toolbar-right"},wc={class:"display-flex map-sheet-error-title padding justify-content-space-between align-items-center"},Cc={key:0,class:"ebk-sheet-title"},Tc={key:1,class:"ebk-sheet-title"},Sc={key:2,class:"ebk-sheet-title"},xc={class:"padding-horizontal padding-bottom"},Ac={class:"no-margin"},$c={class:"margin-top text-align-center"},Dc=Oe({__name:"MapSheet",props:{modelValue:{},readonly:{type:Boolean},setGeoLocationByClickMap:{type:Boolean},show:{type:Boolean}},emits:["update:modelValue","update:setGeoLocationByClickMap","update:show"],setup(p,{emit:g}){const n=p,h=g,{tt:P}=He(),N=Wt("map"),_=fe({get:()=>n.modelValue,set:w=>{h("update:modelValue",w)}});function A(w){!n.readonly&&Bn()&&n.setGeoLocationByClickMap&&(_.value=w,N.value?.setMarkerPosition(w))}function U(w){h("update:setGeoLocationByClickMap",w)}function y(){h("update:show",!1)}function v(){N.value&&N.value.initMapView()}function d(){y()}return(w,f)=>{const I=s("f7-link"),m=s("f7-toolbar"),$=s("f7-page-content"),F=s("f7-sheet");return a(),i(F,{"swipe-to-close":"","swipe-handler":".swipe-handler",class:"map-sheet",style:{height:"auto"},opened:p.show,"onSheet:open":v,"onSheet:closed":d},{default:l(()=>[t(m,{class:"toolbar-with-swipe-handler"},{default:l(()=>[f[4]||(f[4]=o("div",{class:"swipe-handler"},null,-1)),o("div",kc,[t(I,{"icon-f7":"minus",class:R({disabled:!N.value?.allowZoomOut()}),onClick:f[0]||(f[0]=D=>N.value?.zoomOut())},null,8,["class"]),t(I,{"icon-f7":"plus",class:R({disabled:!N.value?.allowZoomIn()}),onClick:f[1]||(f[1]=D=>N.value?.zoomIn())},null,8,["class"])]),o("div",bc,[!p.readonly&&e(Bn)()&&n.setGeoLocationByClickMap?(a(),i(I,{key:0,text:e(P)("Disable Click to Set Location"),onClick:f[2]||(f[2]=D=>U(!1))},null,8,["text"])):u("",!0),!p.readonly&&e(Bn)()&&!n.setGeoLocationByClickMap?(a(),i(I,{key:1,class:"map-sheet-toolbar-auto-hidden",text:e(P)("Enable Click to Set Location"),onClick:f[3]||(f[3]=D=>U(!0))},null,8,["text"])):u("",!0)])]),_:1}),t($,{class:"no-margin no-padding"},{default:l(()=>[t(wa,{ref_key:"map",ref:N,height:"var(--ebk-map-sheet-height)","enable-zoom-control":!1,"geo-location":_.value,onClick:A},{"error-title":l(({mapSupported:D,mapDependencyLoaded:V})=>[o("div",wc,[D?V?(a(),C("div",Sc)):(a(),C("div",Tc,[o("b",null,c(e(P)("Cannot Initialize Map")),1)])):(a(),C("div",Cc,[o("b",null,c(e(P)("Unsupported Map Provider")),1)]))])]),"error-content":l(()=>[o("div",xc,[o("p",Ac,c(e(P)("Please refresh the page and try again. If the error persists, ensure that the server's map settings are correctly configured.")),1),o("div",$c,[t(I,{onClick:y,text:e(P)("Close")},null,8,["text"])])])]),_:1},8,["geo-location"])]),_:1})]),_:1},8,["opened"])}}}),Ic={class:"left"},Fc={class:"right"},Vc={class:"display-flex"},Pc={class:"tag-selection-list-item list-item-valign-middle padding-inline-start-half"},Uc={class:"display-flex"},Nc=Oe({__name:"TransactionTagSelectionSheet",props:{modelValue:{},allowAddNewTag:{type:Boolean},enableFilter:{type:Boolean},show:{type:Boolean}},emits:["update:modelValue","update:show"],setup(p,{emit:g}){const n=p,h=g,{tt:P}=He(),{showToast:N}=nt(),_=ln(),A=Wt("sheet"),U=Wt("searchbar"),y=S(""),v=S(Array.from(n.modelValue)),d=S(null),w=S(m()),f=fe(()=>{const J=[];for(const r of _.allTransactionTags)if(!(r.hidden&&!$(r.id))){if(!n.enableFilter||!y.value){J.push(r);continue}r.name.toLowerCase().indexOf(y.value.toLowerCase())>=0&&J.push(r)}return J}),I=fe(()=>{if(_.allTransactionTags){for(const J of _.allTransactionTags)if(!J.hidden)return!1}return!0});function m(){return _.allTransactionTags&&_.allVisibleTagsCount>6?"tag-selection-huge-sheet":_.allTransactionTags&&_.allVisibleTagsCount>3?"tag-selection-large-sheet":"tag-selection-default-sheet"}function $(J){return v.value.indexOf(J)>=0}function F(J){const r=J.target,Y=r.value,te=v.value.indexOf(Y);r.checked?te<0&&v.value.push(Y):te>=0&&v.value.splice(te,1)}function D(){h("update:modelValue",v.value),h("update:show",!1)}function V(){d.value=Hn.createNewTag()}function k(){d.value&&(Ke(),_.saveTag({tag:d.value}).then(J=>{Se(),d.value=null,J&&J.id&&v.value.push(J.id)}).catch(J=>{Se(),J.processed||N(J.message||J)}))}function K(){d.value=null}function T(){ea(A.value?.$el,window.innerHeight)}function b(J){v.value=Array.from(n.modelValue),d.value=null,Qt(J.$el[0],".sheet-modal-inner",".page-content","li.list-item-selected")}function z(){h("update:show",!1),y.value="",U.value?.clear()}return(J,r)=>{const Y=s("f7-link"),te=s("f7-searchbar"),x=s("f7-button"),O=s("f7-toolbar"),H=s("f7-list-item"),W=s("f7-list"),Q=s("f7-icon"),le=s("f7-block"),oe=s("f7-input"),ne=s("f7-page-content"),se=s("f7-sheet");return a(),i(se,{ref_key:"sheet",ref:A,"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:p.show,"onSheet:open":b,"onSheet:closed":z},{default:l(()=>[t(O,{class:"toolbar-with-swipe-handler"},{default:l(()=>[r[6]||(r[6]=o("div",{class:"swipe-handler"},null,-1)),o("div",Ic,[t(Y,{"sheet-close":"","icon-f7":"xmark"})]),p.enableFilter?(a(),i(te,{key:0,ref_key:"searchbar",ref:U,"custom-searchs":"",value:y.value,placeholder:e(P)("Find tag"),"disable-button":!1,onInput:r[0]||(r[0]=Z=>y.value=Z.target.value),onFocus:T},null,8,["value","placeholder"])):u("",!0),o("div",Fc,[f.value&&f.value.length&&!I.value?(a(),i(x,{key:0,round:"",fill:"","icon-f7":"checkmark_alt",onClick:D})):u("",!0),!f.value||!f.value.length||I.value?(a(),i(Y,{key:1,"icon-f7":"plus",class:R({disabled:d.value}),onClick:V},null,8,["class"])):u("",!0)])]),_:1}),t(ne,{class:R("margin-top "+w.value)},{default:l(()=>[(!f.value||!f.value.length||I.value)&&!d.value?(a(),i(W,{key:0,class:"no-margin-top no-margin-bottom"},{default:l(()=>[t(H,{title:e(P)("No available tag")},null,8,["title"])]),_:1})):f.value&&f.value.length&&!I.value||d.value?(a(),i(W,{key:1,dividers:"",class:"no-margin-top no-margin-bottom tag-selection-list"},{default:l(()=>[(a(!0),C(ke,null,Ce(f.value,Z=>(a(),i(H,{checkbox:"",class:R($(Z.id)?"list-item-selected":""),value:Z.id,checked:$(Z.id),key:Z.id,onChange:F},{title:l(()=>[t(le,{class:"no-padding no-margin"},{default:l(()=>[o("div",Vc,[t(Q,{class:"transaction-tag-icon",f7:"number"}),o("div",Pc,c(Z.name),1)])]),_:2},1024)]),_:2},1032,["class","value","checked"]))),128)),p.allowAddNewTag&&!d.value?(a(),i(H,{key:0,link:"#","no-chevron":"",title:e(P)("Add new tag"),onClick:r[1]||(r[1]=Z=>V())},null,8,["title"])):u("",!0),p.allowAddNewTag&&d.value?(a(),i(H,{key:1,class:"editing-list-item",checkbox:"",indeterminate:"",disabled:""},{media:l(()=>[t(Q,{class:"transaction-tag-icon",f7:"number"})]),title:l(()=>[o("div",Uc,[t(oe,{class:"list-title-input padding-inline-start-half",type:"text",placeholder:e(P)("Tag Title"),value:d.value.name,"onUpdate:value":r[2]||(r[2]=Z=>d.value.name=Z),onKeyup:r[3]||(r[3]=hl(Z=>k(),["enter"]))},null,8,["placeholder","value"])])]),after:l(()=>[t(x,{class:R({"no-padding":!0,disabled:!d.value||!d.value.name}),raised:"",fill:"","icon-f7":"checkmark_alt",color:"blue",onClick:r[4]||(r[4]=Z=>k())},null,8,["class"]),t(x,{class:"no-padding margin-inline-start-half",raised:"",fill:"","icon-f7":"xmark",color:"gray",onClick:r[5]||(r[5]=Z=>K())})]),_:1})):u("",!0)]),_:1})):u("",!0)]),_:1},8,["class"])]),_:1},8,["opened"])}}}),Bc={class:"left"},Ec={class:"right"},Mc={class:"grid grid-cols-2 grid-gap"},Lc={class:"schedule-frequency-type-container"},Rc={class:"schedule-frequency-value-container"},Oc=Oe({__name:"ScheduleFrequencySheet",props:{show:{type:Boolean},type:{},modelValue:{},disabled:{type:Boolean},readonly:{type:Boolean},label:{}},emits:["update:type","update:modelValue","update:show"],setup(p,{emit:g}){const n=p,h=g,{tt:P}=He(),{allTransactionScheduledFrequencyTypes:N,allWeekDays:_,allAvailableMonthDays:A,getFrequencyValues:U}=Xo(),y=tl(),v=S(n.type),d=S(U(n.modelValue)),w=fe(()=>y.currentUserFirstDayOfWeek);function f(k){return d.value.indexOf(k)>=0}function I(k){v.value!==k&&(v.value=k,k===gl.Weekly.type?d.value=[w.value]:k===gl.Monthly.type?d.value=[1]:d.value=[])}function m(k){const K=parseInt(k.target.value);if(k.target.checked){for(const T of d.value)if(T===K)return;d.value.push(K)}else for(const[T,b]of tn(d.value))if(T===K){d.value.splice(b,1);break}}function $(){h("update:type",v.value),h("update:modelValue",Qo(d.value).join(",")),h("update:show",!1)}function F(){h("update:show",!1)}function D(k){v.value=n.type,d.value=U(n.modelValue),Qt(k.$el[0],".schedule-frequency-value-container",".schedule-frequency-value-container","li.list-item-selected")}function V(){F()}return(k,K)=>{const T=s("f7-link"),b=s("f7-button"),z=s("f7-toolbar"),J=s("f7-icon"),r=s("f7-list-item"),Y=s("f7-list"),te=s("f7-page-content"),x=s("f7-sheet");return a(),i(x,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:p.show,"onSheet:open":D,"onSheet:closed":V},{default:l(()=>[t(z,{class:"toolbar-with-swipe-handler"},{default:l(()=>[K[0]||(K[0]=o("div",{class:"swipe-handler"},null,-1)),o("div",Bc,[t(T,{"sheet-close":"","icon-f7":"xmark"})]),o("div",Ec,[t(b,{round:"",fill:"","icon-f7":"checkmark_alt",onClick:$})])]),_:1}),t(te,{class:"margin-top"},{default:l(()=>[o("div",Mc,[o("div",null,[o("div",Lc,[t(Y,{dividers:"",class:"schedule-frequency-type-list no-margin-vertical"},{default:l(()=>[(a(!0),C(ke,null,Ce(e(N),O=>(a(),i(r,{link:"#","no-chevron":"",key:O.type,title:O.displayName,onClick:H=>I(O.type)},{after:l(()=>[v.value===O.type?(a(),i(J,{key:0,class:"list-item-showing icon-with-direction",f7:"chevron_right"})):u("",!0)]),_:2},1032,["title","onClick"]))),128))]),_:1})])]),o("div",null,[o("div",Rc,[v.value===e(gl).Disabled.type?(a(),i(Y,{key:0,dividers:"",class:"schedule-frequency-value-list no-margin-vertical"},{default:l(()=>[t(r,{title:e(P)("None")},null,8,["title"])]),_:1})):u("",!0),v.value===e(gl).Weekly.type?(a(),i(Y,{key:1,dividers:"",class:"schedule-frequency-value-list no-margin-vertical"},{default:l(()=>[(a(!0),C(ke,null,Ce(e(_),O=>(a(),i(r,{checkbox:"",class:R(f(O.type)?"list-item-selected":""),key:O.type,value:O.type,checked:f(O.type),title:O.displayName,onChange:m},null,8,["class","value","checked","title"]))),128))]),_:1})):u("",!0),v.value===e(gl).Monthly.type?(a(),i(Y,{key:2,dividers:"",class:"schedule-frequency-value-list no-margin-vertical"},{default:l(()=>[(a(!0),C(ke,null,Ce(e(A),O=>(a(),i(r,{checkbox:"",class:R(f(O.day)?"list-item-selected":""),key:O.day,value:O.day,checked:f(O.day),title:O.displayName,onChange:m},null,8,["class","value","checked","title"]))),128))]),_:1})):u("",!0)])])])]),_:1})]),_:1},8,["opened"])}}}),zc={class:"display-flex padding-top-half"},Yc={class:"statistics-percent-line width-100 no-margin-horizontal"},Hc={class:"display-flex padding-top-half"},qc={class:"statistics-percent-line width-100 no-margin-horizontal"},Wc=Oe({__name:"AccountBalanceTrendsBarChart",props:{loading:{type:Boolean},items:{},dateAggregationType:{},fiscalYearStart:{},account:{}},setup(p){const g=p,{tt:n,formatAmountToLocalizedNumeralsWithCurrency:h}=He(),{allDataItems:P}=Jo(g),N=S({items:[],topPosition:0}),_=fe(()=>{const U=[];let y=0;for(const[v,d]of tn(P.value)){v.closingBalance>y&&(y=v.closingBalance);const w={index:d,displayDate:v.displayDate,openingBalance:v.openingBalance,closingBalance:v.closingBalance,medianBalance:v.medianBalance,averageBalance:v.averageBalance,minimumBalance:v.minimumBalance,maximumBalance:v.maximumBalance,color:`#${Yn[0]}`,percent:0};U.push(w)}for(const v of U)y>0&&v.closingBalance>0?v.percent=100*v.closingBalance/y:v.percent=0;return U});function A(U,y){N.value=y}return(U,y)=>{const v=s("f7-icon"),d=s("f7-progressbar"),w=s("f7-list-item"),f=s("f7-list");return p.loading?(a(),i(f,{key:0,class:"skeleton-text margin-top-half","media-list":""},{default:l(()=>[(a(),C(ke,null,Ce([1,2,3,4,5,6,7,8,9,10,11,12],I=>t(w,{class:"account-balance-trends-list-item",title:"Date Range",after:"0.00 USD",key:I},{media:l(()=>[t(v,{f7:"app_fill"})]),inner:l(()=>[o("div",zc,[o("div",Yc,[t(d,{progress:0})])])]),_:1})),64))]),_:1})):!p.loading&&(!_.value||!_.value.length)?(a(),i(f,{key:1},{default:l(()=>[t(w,{title:e(n)("No transaction data")},null,8,["title"])]),_:1})):!p.loading&&_.value&&_.value.length>0?(a(),i(f,{class:"margin-top-half","media-list":"","virtual-list":"","virtual-list-params":{items:_.value,renderExternal:A,height:"auto"},key:`account-balance-trends-${p.dateAggregationType}`},{default:l(()=>[o("ul",null,[(a(!0),C(ke,null,Ce(N.value.items,I=>(a(),i(w,{class:"account-balance-trends-list-item",key:I.index,style:vt(`top: ${N.value.topPosition}px`),"virtual-list-index":I.index,title:I.displayDate,after:e(h)(I.closingBalance,p.account.currency)},{media:l(()=>[t(v,{f7:"calendar"})]),inner:l(()=>[o("div",Hc,[o("div",qc,[t(d,{progress:I.percent>=0?I.percent:0,style:vt({"--f7-progressbar-progress-color":I.color})},null,8,["progress","style"])])])]),_:2},1032,["style","virtual-list-index","title","after"]))),128))])]),_:1},8,["virtual-list-params"])):u("",!0)}}}),Gc={class:"left"},jc={class:"right"},Kc=["src"],Zc={key:1,class:"image-container-background display-flex justify-content-center align-items-center text-align-center padding-horizontal"},Xc={key:0,class:"display-inline-flex flex-direction-column"},Qc={class:"margin-top-half"},Jc={key:1},ed=["accept"],td=Oe({__name:"AIImageRecognitionSheet",props:{show:{type:Boolean}},emits:["update:show","recognition:change"],setup(p,{emit:g}){const n=g,{tt:h}=He(),{showCancelableLoading:P,showToast:N}=nt(),_=Ll(),A=Wt("imageInput"),U=S(!1),y=S(!1),v=S(void 0),d=S(null),w=S(void 0);function f(T){U.value=!0,d.value=null,w.value=void 0,es(T,1280,1280,.8).then(b=>{d.value=ts.JPG.createFileFromBlob(b,"image"),w.value=URL.createObjectURL(b),U.value=!1}).catch(b=>{d.value=null,w.value=void 0,U.value=!1,sl.error("failed to compress image",b),N("Unable to load image")})}function I(){U.value||y.value||A.value?.click()}function m(T){if(!T||!T.target)return;const b=T.target;if(!b.files||!b.files.length||!b.files[0])return;const z=b.files[0];b.value="",f(z)}function $(){U.value||y.value||!d.value||(v.value=nn(),y.value=!0,P("Recognizing","AI can make mistakes. Check important info.","Cancel Recognition",F),_.recognizeReceiptImage({imageFile:d.value,cancelableUuid:v.value}).then(T=>{y.value=!1,v.value=void 0,zn(),n("update:show",!1),n("recognition:change",T)}).catch(T=>{T.canceled||(y.value=!1,v.value=void 0,zn(),T.processed||N(T.message||T))}))}function F(){v.value&&(_.cancelRecognizeReceiptImage(v.value),y.value=!1,v.value=void 0,zn(),N("User Canceled"))}function D(){V()}function V(){n("update:show",!1),U.value=!1,y.value=!1,v.value=void 0,d.value=null,w.value=void 0}function k(){U.value=!1,y.value=!1,v.value=void 0,d.value=null,w.value=void 0}function K(){V()}return(T,b)=>{const z=s("f7-link"),J=s("f7-button"),r=s("f7-toolbar"),Y=s("f7-page-content"),te=s("f7-sheet");return a(),i(te,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:p.show,"onSheet:open":k,"onSheet:closed":K},{default:l(()=>[t(r,{class:"toolbar-with-swipe-handler"},{default:l(()=>[b[1]||(b[1]=o("div",{class:"swipe-handler"},null,-1)),o("div",Gc,[t(z,{"icon-f7":"xmark",class:R({disabled:U.value||y.value}),onClick:D},null,8,["class"])]),o("div",jc,[t(J,{round:"",fill:"","icon-f7":"checkmark_alt",class:R({disabled:U.value||y.value||!d.value}),onClick:$},null,8,["class"])])]),_:1}),t(Y,{class:"no-margin-vertical no-padding-vertical"},{default:l(()=>[o("div",{class:"image-container display-flex justify-content-center",onClick:I},[w.value?(a(),C("img",{key:0,src:w.value},null,8,Kc)):u("",!0),w.value?u("",!0):(a(),C("div",Zc,[U.value?U.value?(a(),C("span",Jc,c(e(h)("Loading image...")),1)):u("",!0):(a(),C("div",Xc,[o("span",null,c(e(h)("Click here to select a receipt or transaction image")),1),o("small",Qc,c(e(h)("Uploaded image and personal data will be sent to the large language model, please be aware of potential privacy risks.")),1)]))]))])]),_:1}),o("input",{ref_key:"imageInput",ref:A,type:"file",style:{display:"none"},accept:`${e(Ca)};capture=camera`,onChange:b[0]||(b[0]=x=>m(x))},null,40,ed)]),_:1},8,["opened"])}}}),ld={mounted(p){va(p)},updated(p){va(p)}},nd={class:"no-margin"},ad={key:0,class:"card-header-content"},od={key:1,class:"card-header-content"},sd={class:"home-summary-month"},id={class:"no-margin"},rd={key:0,class:"month-expense"},ud={key:1,class:"month-expense"},cd={class:"no-margin"},dd={key:0,class:"home-summary-misc"},fd={key:1,class:"home-summary-misc"},pd={class:"padding-top-half"},md={key:0},vd={key:1},gd={class:"overview-transaction-footer padding-bottom-half"},hd={key:0},yd={key:1},_d={class:"overview-transaction-amount"},kd={class:"text-income text-align-right"},bd={key:0},wd={key:1},Cd={class:"text-expense text-align-right"},Td={key:0},Sd={key:1},xd={class:"padding-top-half"},Ad={key:0},$d={key:1},Dd={class:"overview-transaction-footer padding-bottom-half"},Id={key:0},Fd={key:1},Vd={key:2},Pd={key:3},Ud={class:"overview-transaction-amount"},Nd={class:"text-income text-align-right"},Bd={key:0},Ed={key:1},Md={class:"text-expense text-align-right"},Ld={key:0},Rd={key:1},Od={class:"padding-top-half"},zd={key:0},Yd={key:1},Hd={class:"overview-transaction-footer padding-bottom-half"},qd={key:0},Wd={key:1},Gd={key:2},jd={key:3},Kd={class:"overview-transaction-amount"},Zd={class:"text-income text-align-right"},Xd={key:0},Qd={key:1},Jd={class:"text-expense text-align-right"},ef={key:0},tf={key:1},lf={class:"padding-top-half"},nf={key:0},af={key:1},of={class:"overview-transaction-footer padding-bottom-half"},sf={key:0},rf={key:1},uf={class:"overview-transaction-amount"},cf={class:"text-income text-align-right"},df={key:0},ff={key:1},pf={class:"text-expense text-align-right"},mf={key:0},vf={key:1},gf={class:"tabbar-label"},hf={class:"tabbar-label"},yf={class:"tabbar-label"},_f={class:"tabbar-label"},kf=Oe({__name:"HomePage",props:{f7router:{}},setup(p){const g=p,{tt:n}=He(),{showToast:h}=nt(),{showAmountInHomePage:P,displayDateRange:N,transactionOverview:_,getDisplayIncomeAmount:A,getDisplayExpenseAmount:U}=ls(),y=il(),v=rl(),d=Xn(),w=ns(),f=S(!0),I=S(!1),m=S(!1),$=fe(()=>d.allVisibleTemplates[Rt.Normal.type]||[]);function F(){(oa()||$.value&&$.value.length)&&(I.value=!0)}function D(){if(Ml()&&an()){f.value=!0;const T=[y.loadAllAccounts({force:!1}),v.loadAllCategories({force:!1}),d.loadAllTemplates({templateType:Rt.Normal.type,force:!1}),w.loadTransactionOverview({force:!1})];Promise.all(T).then(()=>{f.value=!1}).catch(b=>{f.value=!1,b.processed||h(b.message||b)})}}function V(T){const b=!!T;w.loadTransactionOverview({force:b}).then(()=>{T?.(),b&&h("Data has been updated")}).catch(z=>{T?.(),z.processed||h(z.message||z)})}function k(T){const b=[];T.type&&b.push(`type=${T.type}`),T.time&&b.push(`time=${T.time}`),T.categoryId&&b.push(`categoryId=${T.categoryId}`),T.sourceAccountId&&b.push(`accountId=${T.sourceAccountId}`),T.destinationAccountId&&b.push(`destinationAccountId=${T.destinationAccountId}`),T.sourceAmount&&b.push(`amount=${T.sourceAmount}`),T.destinationAmount&&b.push(`destinationAmount=${T.destinationAmount}`),T.tagIds&&b.push(`tagIds=${T.tagIds.join(",")}`),T.comment&&b.push(`comment=${encodeURIComponent(T.comment)}`),b.push("noTransactionDraft=true"),g.f7router.navigate(`/transaction/add?${b.join("&")}`)}function K(){f.value||V()}return D(),(T,b)=>{const z=s("f7-nav-title"),J=s("f7-navbar"),r=s("f7-icon"),Y=s("f7-link"),te=s("f7-card-header"),x=s("f7-card"),O=s("f7-list-item"),H=s("f7-list"),W=s("f7-toolbar"),Q=s("f7-popover"),le=s("a-i-image-recognition-sheet"),oe=s("f7-page");return a(),i(oe,{ptr:"","onPtr:refresh":V,"onPage:afterin":K},{default:l(()=>[t(J,null,{default:l(()=>[t(z,{title:e(n)("global.app.title")},null,8,["title"])]),_:1}),t(x,{class:R(["home-summary-card no-margin-top",{"skeleton-text":f.value}])},{default:l(()=>[t(te,{class:"display-block",style:{"padding-top":"120px"}},{default:l(()=>[o("p",nd,[f.value?(a(),C("span",ad,[...b[4]||(b[4]=[o("span",{class:"home-summary-month"},"Month",-1),o("span",null,"",-1),o("small",null,"Expense",-1)])])):f.value?u("",!0):(a(),C("span",od,[o("span",sd,c(e(N)?.thisMonth?.displayTime),1),b[5]||(b[5]=o("span",null,"",-1)),o("small",null,c(e(n)("Expense")),1)]))]),o("p",id,[f.value?(a(),C("span",rd,"0.00 USD")):f.value?u("",!0):(a(),C("span",ud,c(e(_)&&e(_).thisMonth?e(U)(e(_).thisMonth):"-"),1)),t(Y,{class:"display-inline-flex margin-inline-start-half",onClick:b[0]||(b[0]=ne=>P.value=!e(P))},{default:l(()=>[t(r,{class:"ebk-hide-icon",f7:e(P)?"eye_slash_fill":"eye_fill"},null,8,["f7"])]),_:1})]),o("p",cd,[f.value?(a(),C("small",dd,"Monthly income 0.00 USD")):f.value?u("",!0):(a(),C("small",fd,[o("span",null,c(e(n)("Monthly income")),1),o("span",null,c(e(_)&&e(_).thisMonth?e(A)(e(_).thisMonth):"-"),1)]))])]),_:1})]),_:1},8,["class"]),t(H,{strong:"",inset:"",dividers:"",class:R(["margin-top overview-transaction-list",{"skeleton-text":f.value}])},{default:l(()=>[t(O,{link:`/transaction/list?${e(w).getTransactionListPageParams({dateType:e(Ft).Today.type})}`,"chevron-center":""},{media:l(()=>[t(r,{f7:"calendar_today"})]),title:l(()=>[o("div",pd,[f.value?(a(),C("span",md,"Today")):f.value?u("",!0):(a(),C("span",vd,c(e(n)("Today")),1))])]),footer:l(()=>[o("div",gd,[f.value?(a(),C("span",hd,"MM/DD/YYYY")):f.value?u("",!0):(a(),C("span",yd,c(e(N)?.today?.displayTime),1))])]),after:l(()=>[o("div",_d,[o("div",kd,[f.value?(a(),C("small",bd,"0.00 USD")):!f.value&&e(_).today&&e(_).today.valid?(a(),C("small",wd,c(e(A)(e(_).today)),1)):u("",!0)]),o("div",Cd,[f.value?(a(),C("small",Td,"0.00 USD")):!f.value&&e(_).today&&e(_).today.valid?(a(),C("small",Sd,c(e(U)(e(_).today)),1)):u("",!0)])])]),_:1},8,["link"]),t(O,{link:`/transaction/list?${e(w).getTransactionListPageParams({dateType:e(Ft).ThisWeek.type})}`,"chevron-center":""},{media:l(()=>[t(r,{f7:"calendar"})]),title:l(()=>[o("div",xd,[f.value?(a(),C("span",Ad,"This Week")):f.value?u("",!0):(a(),C("span",$d,c(e(n)("This Week")),1))])]),footer:l(()=>[o("div",Dd,[f.value?(a(),C("span",Id,"MM/DD")):f.value?u("",!0):(a(),C("span",Fd,c(e(N)?.thisWeek?.startTime),1)),b[6]||(b[6]=o("span",null,"-",-1)),f.value?(a(),C("span",Vd,"MM/DD")):f.value?u("",!0):(a(),C("span",Pd,c(e(N)?.thisWeek?.endTime),1))])]),after:l(()=>[o("div",Ud,[o("div",Nd,[f.value?(a(),C("small",Bd,"0.00 USD")):!f.value&&e(_).thisWeek&&e(_).thisWeek.valid?(a(),C("small",Ed,c(e(A)(e(_).thisWeek)),1)):u("",!0)]),o("div",Md,[f.value?(a(),C("small",Ld,"0.00 USD")):!f.value&&e(_).thisWeek&&e(_).thisWeek.valid?(a(),C("small",Rd,c(e(U)(e(_).thisWeek)),1)):u("",!0)])])]),_:1},8,["link"]),t(O,{link:`/transaction/list?${e(w).getTransactionListPageParams({dateType:e(Ft).ThisMonth.type})}`,"chevron-center":""},{media:l(()=>[t(r,{f7:"calendar"})]),title:l(()=>[o("div",Od,[f.value?(a(),C("span",zd,"This Month")):f.value?u("",!0):(a(),C("span",Yd,c(e(n)("This Month")),1))])]),footer:l(()=>[o("div",Hd,[f.value?(a(),C("span",qd,"MM/DD")):f.value?u("",!0):(a(),C("span",Wd,c(e(N)?.thisMonth?.startTime),1)),b[7]||(b[7]=o("span",null,"-",-1)),f.value?(a(),C("span",Gd,"MM/DD")):f.value?u("",!0):(a(),C("span",jd,c(e(N)?.thisMonth?.endTime),1))])]),after:l(()=>[o("div",Kd,[o("div",Zd,[f.value?(a(),C("small",Xd,"0.00 USD")):!f.value&&e(_).thisMonth&&e(_).thisMonth.valid?(a(),C("small",Qd,c(e(A)(e(_).thisMonth)),1)):u("",!0)]),o("div",Jd,[f.value?(a(),C("small",ef,"0.00 USD")):!f.value&&e(_).thisMonth&&e(_).thisMonth.valid?(a(),C("small",tf,c(e(U)(e(_).thisMonth)),1)):u("",!0)])])]),_:1},8,["link"]),t(O,{link:`/transaction/list?${e(w).getTransactionListPageParams({dateType:e(Ft).ThisYear.type})}`,"chevron-center":""},{media:l(()=>[t(r,{f7:"square_stack_3d_up"})]),title:l(()=>[o("div",lf,[f.value?(a(),C("span",nf,"This Year")):f.value?u("",!0):(a(),C("span",af,c(e(n)("This Year")),1))])]),footer:l(()=>[o("div",of,[f.value?(a(),C("span",sf,"YYYY")):f.value?u("",!0):(a(),C("span",rf,c(e(N)?.thisYear?.displayTime),1))])]),after:l(()=>[o("div",uf,[o("div",cf,[f.value?(a(),C("small",df,"0.00 USD")):!f.value&&e(_).thisYear&&e(_).thisYear.valid?(a(),C("small",ff,c(e(A)(e(_).thisYear)),1)):u("",!0)]),o("div",pf,[f.value?(a(),C("small",mf,"0.00 USD")):!f.value&&e(_).thisYear&&e(_).thisYear.valid?(a(),C("small",vf,c(e(U)(e(_).thisYear)),1)):u("",!0)])])]),_:1},8,["link"])]),_:1},8,["class"]),t(W,{tabbar:"",icons:"",bottom:"",class:"main-tabbar"},{default:l(()=>[t(Y,{class:"link",href:"/transaction/list"},{default:l(()=>[t(r,{f7:"square_list"}),o("span",gf,c(e(n)("Details")),1)]),_:1}),t(Y,{class:"link",href:"/account/list"},{default:l(()=>[t(r,{f7:"creditcard"}),o("span",hf,c(e(n)("Accounts")),1)]),_:1}),t(Y,{id:"homepage-add-button",class:"link",href:"/transaction/add",onTaphold:F},{default:l(()=>[t(r,{f7:"plus_square",class:"ebk-tarbar-big-icon"})]),_:1}),t(Y,{class:"link",href:"/statistic/transaction"},{default:l(()=>[t(r,{f7:"chart_pie"}),o("span",yf,c(e(n)("Statistics")),1)]),_:1}),t(Y,{class:"link",href:"/settings"},{default:l(()=>[t(r,{f7:"gear_alt"}),o("span",_f,c(e(n)("Settings")),1)]),_:1})]),_:1}),t(Q,{class:"template-popover-menu","target-el":"#homepage-add-button",opened:I.value,"onUpdate:opened":b[2]||(b[2]=ne=>I.value=ne)},{default:l(()=>[$.value?(a(),i(H,{key:0,dividers:""},{default:l(()=>[e(oa)()?(a(),i(O,{key:"AIImageRecognition",title:e(n)("AI Image Recognition"),onClick:b[1]||(b[1]=ne=>{m.value=!0,I.value=!1})},{media:l(()=>[t(r,{f7:"wand_stars"})]),_:1},8,["title"])):u("",!0),(a(!0),C(ke,null,Ce($.value,ne=>(a(),i(O,{key:ne.id,title:ne.name,link:"/transaction/add?templateId="+ne.id},{media:l(()=>[t(r,{f7:"doc_plaintext"})]),_:1},8,["title","link"]))),128))]),_:1})):u("",!0)]),_:1},8,["opened"]),t(le,{show:m.value,"onUpdate:show":b[3]||(b[3]=ne=>m.value=ne),"onRecognition:change":k},null,8,["show"])]),_:1})}}}),bf=["src"],wf={class:"login-page-powered-by margin-top-half"},Cf={class:"login-page-powered-by margin-top-half"},Tf={class:"display-flex padding justify-content-space-between align-items-center"},Sf={class:"ebk-sheet-title"},xf={class:"padding-horizontal padding-bottom"},Af={class:"margin-top text-align-center"},$f={class:"display-flex padding justify-content-space-between align-items-center"},Df={class:"ebk-sheet-title"},If={class:"padding-horizontal padding-bottom"},Ff={class:"no-margin"},Vf={class:"margin-top text-align-center"},Pf=Oe({__name:"LoginPage",props:{f7router:{}},setup(p){const g=p,{tt:n}=He(),{showAlert:h,showConfirm:P,showToast:N,openExternalUrl:_}=nt(),A=Rl(),{version:U,username:y,password:v,passcode:d,backupCode:w,tempToken:f,twoFAVerifyType:I,oauth2ClientSessionId:m,loggingInByPassword:$,loggingInByOAuth2:F,verifying:D,inputIsEmpty:V,twoFAInputIsEmpty:k,oauth2LoginUrl:K,oauth2LoginDisplayName:T,tips:b,doAfterLogin:z}=as("mobile"),J=S(""),r=S(""),Y=S(!1),te=S(""),x=S(!1),O=S(!1),H=S(!1),W=S(!1),Q=S(!1),le=fe(()=>I.value==="backupcode"?"Use Passcode":"Use Backup Code");function oe(){P("Are you sure you want to switch to desktop version?",()=>{window.location.replace(Ta())})}function ne(){const he=g.f7router;if(!y.value){h("Username cannot be blank");return}if(!v.value){h("Password cannot be blank");return}if(f.value){H.value=!0;return}$.value=!0,r.value="",Y.value=!1,te.value="",Ke(()=>$.value),A.authorize({loginName:y.value,password:v.value}).then(re=>{if($.value=!1,Se(),re.need2FA){f.value=re.token,H.value=!0;return}z(re),he.refreshPage()}).catch(re=>{if($.value=!1,Se(),qn()&&re.error&&re.error.errorCode===Jl.UserEmailNotVerified&&re.error.context&&re.error.context.email){r.value=re.error.context.email,Y.value=re.error.context.hasValidEmailVerifyToken||!1,te.value="",Q.value=!0;return}re.processed||N(re.message||re)})}function se(){if(!Jn())return ne()}function Z(){F.value=!0,Ke()}function E(){const he=g.f7router;if(!(k.value||D.value)){if(I.value==="passcode"&&!d.value){h("Passcode cannot be blank");return}else if(I.value==="backupcode"&&!w.value){h("Backup code cannot be blank");return}D.value=!0,Ke(()=>D.value),A.authorize2FA({token:f.value,passcode:I.value==="passcode"?d.value:null,recoveryCode:I.value==="backupcode"?w.value:null}).then(re=>{D.value=!1,Se(),z(re),H.value=!1,he.refreshPage()}).catch(re=>{D.value=!1,Se(),re.processed||N(re.message||re)})}}function M(){if(!J.value){h("Email address cannot be blank");return}x.value=!0,Ke(()=>x.value),A.requestResetPassword({email:J.value}).then(()=>{x.value=!1,Se(),N("Password reset email has been sent"),W.value=!1}).catch(he=>{x.value=!1,Se(),he.processed||N(he.message||he)})}function ee(){if(!te.value){N("Current password cannot be blank");return}O.value=!0,Ke(()=>O.value),A.resendVerifyEmailByUnloginUser({email:r.value,password:te.value}).then(()=>{O.value=!1,Se(),N("Validation email has been sent"),Q.value=!1}).catch(he=>{O.value=!1,Se(),he.processed||N(he.message||he)})}function ve(){I.value==="passcode"?I.value="backupcode":I.value="passcode"}return m.value=nn(),(he,re)=>{const Be=s("f7-block"),Me=s("f7-login-screen-title"),Le=s("f7-block-footer"),Ye=s("f7-list"),Ie=s("f7-list-input"),be=s("f7-link"),L=s("f7-list-item"),xe=s("f7-list-button"),Fe=s("language-select-button"),Te=s("f7-toolbar"),Pe=s("f7-button"),pe=s("f7-page-content"),B=s("f7-sheet"),_e=s("password-input-sheet"),Ne=s("f7-page");return a(),i(Ne,{"no-navbar":"","no-swipeback":"","login-screen":"","hide-toolbar-on-scroll":""},{default:l(()=>[t(Me,null,{default:l(()=>[o("img",{alt:"logo",class:"login-page-logo",src:e(Qn)},null,8,bf),t(Be,{class:"login-page-tile margin-vertical-half"},{default:l(()=>[X(c(e(n)("global.app.title")),1)]),_:1})]),_:1}),e(b)?(a(),i(Ye,{key:0,inset:""},{default:l(()=>[t(Le,null,{default:l(()=>[X(c(e(b)),1)]),_:1})]),_:1})):u("",!0),e(gn)()?(a(),i(Ye,{key:1,form:"",dividers:"",class:"margin-bottom-half"},{default:l(()=>[t(Ie,{type:"text",autocomplete:"username","clear-button":"",disabled:e($)||e(F),label:e(n)("Username"),placeholder:e(n)("Your username or email"),value:e(y),"onUpdate:value":re[0]||(re[0]=me=>kt(y)?y.value=me:null),onInput:re[1]||(re[1]=me=>f.value="")},null,8,["disabled","label","placeholder","value"]),t(Ie,{type:"password",autocomplete:"current-password","clear-button":"",disabled:e($)||e(F),label:e(n)("Password"),placeholder:e(n)("Your password"),value:e(v),"onUpdate:value":re[2]||(re[2]=me=>kt(v)?v.value=me:null),onInput:re[3]||(re[3]=me=>f.value=""),onKeyup:hl(se,["enter"])},null,8,["disabled","label","placeholder","value"])]),_:1})):u("",!0),t(Ye,{class:"no-margin-vertical"},{default:l(()=>[t(L,null,{title:l(()=>[o("small",null,[t(be,{class:R({disabled:e($)||e(F)}),onClick:oe},{default:l(()=>[X(c(e(n)("Switch to Desktop Version")),1)]),_:1},8,["class"])])]),after:l(()=>[o("small",null,[t(be,{class:R({disabled:!e(os)()||e($)||e(F)}),onClick:re[4]||(re[4]=me=>{J.value="",W.value=!0})},{default:l(()=>[X(c(e(n)("Forget Password?")),1)]),_:1},8,["class"])])]),_:1})]),_:1}),t(Ye,{class:"margin-vertical-half"},{default:l(()=>[e(gn)()?(a(),i(xe,{key:0,class:R({disabled:e(V)||e($)||e(F)}),text:e(n)("Log In"),onClick:ne},null,8,["class","text"])):u("",!0),e(gn)()&&e(sa)()?(a(),i(L,{key:1,class:"login-divider display-flex align-items-center"},{default:l(()=>[re[15]||(re[15]=o("hr",{class:"margin-inline-end-half"},null,-1)),o("small",null,c(e(n)("or")),1),re[16]||(re[16]=o("hr",{class:"margin-inline-start-half"},null,-1))]),_:1})):u("",!0),e(sa)()?(a(),i(xe,{key:2,external:"",class:R({disabled:e($)||e(F)}),href:e(K),text:e(T),onClick:Z},null,8,["class","href","text"])):u("",!0),e(gn)()?(a(),i(Le,{key:3},{default:l(()=>[o("span",null,c(e(n)("Don't have an account?")),1),re[17]||(re[17]=X(" ",-1)),t(be,{class:R({disabled:!e(ss)()||e($)||e(F)}),href:"/signup",text:e(n)("Create an account")},null,8,["class","text"])]),_:1})):u("",!0),t(Le,{class:"padding-bottom"})]),_:1}),t(Ye,{class:"login-page-bottom"},{default:l(()=>[t(Le,null,{default:l(()=>[t(Fe,{disabled:e($)||e(F)},null,8,["disabled"]),o("div",wf,[re[19]||(re[19]=o("span",null,"Powered by",-1)),t(be,{onClick:re[5]||(re[5]=me=>e(_)("https://github.com/mayswind/ezbookkeeping")),target:"_blank"},{default:l(()=>[...re[18]||(re[18]=[X("ezBookkeeping",-1)])]),_:1}),o("span",null,c(e(U)),1)])]),_:1})]),_:1}),t(Te,{class:"login-page-fixed-bottom",tabbar:"",bottom:"",outline:!1},{default:l(()=>[t(Fe,{disabled:e($)||e(F)},null,8,["disabled"]),o("div",Cf,[re[21]||(re[21]=o("span",null,"Powered by",-1)),t(be,{onClick:re[6]||(re[6]=me=>e(_)("https://github.com/mayswind/ezbookkeeping")),target:"_blank"},{default:l(()=>[...re[20]||(re[20]=[X("ezBookkeeping",-1)])]),_:1}),o("span",null,c(e(U)),1)])]),_:1}),t(B,{style:{height:"auto"},opened:H.value,"onSheet:closed":re[9]||(re[9]=me=>H.value=!1)},{default:l(()=>[t(pe,null,{default:l(()=>[o("div",Tf,[o("div",Sf,[o("b",null,c(e(n)("Two-Factor Authentication")),1)])]),o("div",xf,[t(Ye,{strong:"",class:"no-margin"},{default:l(()=>[e(I)==="passcode"?(a(),i(Ie,{key:0,type:"number",autocomplete:"one-time-code",outline:"","floating-label":"","clear-button":"",class:"no-margin no-padding-bottom",label:e(n)("Passcode"),placeholder:e(n)("Passcode"),value:e(d),"onUpdate:value":re[7]||(re[7]=me=>kt(d)?d.value=me:null),onKeyup:hl(E,["enter"])},null,8,["label","placeholder","value"])):u("",!0),e(I)==="backupcode"?(a(),i(Ie,{key:1,outline:"","floating-label":"","clear-button":"",class:"no-margin no-padding-bottom",label:e(n)("Backup Code"),placeholder:e(n)("Backup Code"),value:e(w),"onUpdate:value":re[8]||(re[8]=me=>kt(w)?w.value=me:null),onKeyup:hl(E,["enter"])},null,8,["label","placeholder","value"])):u("",!0)]),_:1}),t(Pe,{large:"",fill:"",class:R({disabled:e(k)||e(D)}),text:e(n)("Verify"),onClick:E},null,8,["class","text"]),o("div",Af,[t(be,{onClick:ve,text:e(n)(le.value)},null,8,["text"])])])]),_:1})]),_:1},8,["opened"]),t(B,{"swipe-to-close":"","swipe-handler":".swipe-handler",style:{height:"auto"},opened:W.value,"onSheet:closed":re[12]||(re[12]=me=>W.value=!1)},{default:l(()=>[re[22]||(re[22]=o("div",{class:"swipe-handler"},null,-1)),t(pe,null,{default:l(()=>[o("div",$f,[o("div",Df,[o("b",null,c(e(n)("Forget Password?")),1)])]),o("div",If,[o("p",Ff,[o("span",null,c(e(n)("Please enter your email address used for registration and we'll send you an email with a reset password link")),1)]),t(Ye,{strong:"",class:"no-margin"},{default:l(()=>[t(Ie,{type:"email",autocomplete:"email",outline:"","floating-label":"","clear-button":"",class:"no-margin no-padding-bottom",label:e(n)("E-mail"),placeholder:e(n)("Your email address"),value:J.value,"onUpdate:value":re[10]||(re[10]=me=>J.value=me),onKeyup:hl(M,["enter"])},null,8,["label","placeholder","value"])]),_:1}),t(Pe,{large:"",fill:"",class:R({disabled:!J.value||x.value}),text:e(n)("Send Reset Link"),onClick:M},null,8,["class","text"]),o("div",Vf,[t(be,{class:R({disabled:x.value}),onClick:re[11]||(re[11]=me=>W.value=!1),text:e(n)("Cancel")},null,8,["class","text"])])])]),_:1})]),_:1},8,["opened"]),t(_e,{title:e(n)("Verify your email"),hint:e(n)(Y.value?"format.misc.accountActivationAndResendValidationEmailTip":"format.misc.resendValidationEmailTip",{email:r.value}),"confirm-disabled":O.value,"cancel-disabled":O.value,show:Q.value,"onUpdate:show":re[13]||(re[13]=me=>Q.value=me),modelValue:te.value,"onUpdate:modelValue":re[14]||(re[14]=me=>te.value=me),"onPassword:confirm":ee},null,8,["title","hint","confirm-disabled","cancel-disabled","show","modelValue"])]),_:1})}}}),Uf={class:"smaller"},Nf=Oe({__name:"SignupPage",props:{f7router:{}},setup(p){const g=p,{tt:n,getAllLanguageOptions:h,getAllCurrencies:P,getAllWeekDays:N,getAllTransactionDefaultCategories:_,getCurrencyName:A}=He(),{showAlert:U,showToast:y}=nt(),{user:v,submitting:d,languageTitle:w,currentLocale:f,currentLanguageName:I,inputEmptyProblemMessage:m,inputInvalidProblemMessage:$,inputIsEmpty:F,inputIsInvalid:D,getCategoryTypeName:V,doAfterSignupSuccess:k}=is(),K=Rl(),T=S(!1),b=S(!1),z=S(!1),J=S(!1),r=S(!1),Y=S(!1),te=S(!1),x=fe(()=>h(!1)),O=fe(()=>P()),H=fe(()=>N()),W=fe(()=>_(0,f.value)),Q=fe(()=>mt(H.value,v.value.firstDayOfWeek));function le(){const oe=g.f7router,ne=m.value||$.value;if(ne){U(ne);return}d.value=!0,Ke(()=>d.value);let se=[];T.value&&(se=Sa(W.value)),K.register({user:v.value,presetCategories:se}).then(Z=>{if(!Ml()){d.value=!1,Se(),T.value&&!Z.presetCategoriesSaved?y("You have been successfully registered, but there was an failure when adding preset categories. You can re-add preset categories in settings page anytime.",5e3):Z.needVerifyEmail?y("You have been successfully registered. An account activation link has been sent to your email address, please activate your account first.",5e3):y("You have been successfully registered"),oe.navigate("/");return}k(Z),d.value=!1,Se(),T.value&&!Z.presetCategoriesSaved?y("You have been successfully registered, but there was an failure when adding preset categories. You can re-add preset categories in settings page anytime."):y("You have been successfully registered"),oe.navigate("/")}).catch(Z=>{d.value=!1,Se(),Z.processed||y(Z.message||Z)})}return(oe,ne)=>{const se=s("f7-nav-left"),Z=s("f7-nav-title"),E=s("f7-link"),M=s("f7-nav-right"),ee=s("f7-navbar"),ve=s("f7-list-input"),he=s("f7-list-item"),re=s("f7-list"),Be=s("list-item-selection-popup"),Me=s("f7-block"),Le=s("f7-toggle"),Ye=s("f7-block-title"),Ie=s("ItemIcon"),be=s("f7-accordion-content"),L=s("f7-page"),xe=s("f7-actions-button"),Fe=s("f7-actions-group"),Te=s("f7-actions"),Pe=s("list-item-selection-sheet"),pe=s("f7-popup");return a(),i(L,null,{default:l(()=>[t(ee,null,{default:l(()=>[t(se,{"back-link":e(n)("Back")},null,8,["back-link"]),t(Z,{title:e(n)("Sign Up")},null,8,["title"]),t(M,null,{default:l(()=>[t(E,{class:R({disabled:e(F)||e(d)}),text:e(n)("Submit"),onClick:le},null,8,["class","text"])]),_:1})]),_:1}),t(re,{form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(ve,{type:"text",autocomplete:"username","clear-button":"",label:e(n)("Username"),placeholder:e(n)("Your username"),value:e(v).username,"onUpdate:value":ne[0]||(ne[0]=B=>e(v).username=B)},null,8,["label","placeholder","value"]),t(ve,{type:"password",autocomplete:"new-password","clear-button":"",label:e(n)("Password"),placeholder:e(n)("Your password, at least 6 characters"),value:e(v).password,"onUpdate:value":ne[1]||(ne[1]=B=>e(v).password=B)},null,8,["label","placeholder","value"]),t(ve,{type:"password",autocomplete:"new-password","clear-button":"",label:e(n)("Confirm Password"),placeholder:e(n)("Re-enter the password"),value:e(v).confirmPassword,"onUpdate:value":ne[2]||(ne[2]=B=>e(v).confirmPassword=B)},null,8,["label","placeholder","value"]),t(ve,{type:"email",autocomplete:"email","clear-button":"",label:e(n)("E-mail"),placeholder:e(n)("Your email address"),value:e(v).email,"onUpdate:value":ne[3]||(ne[3]=B=>e(v).email=B)},null,8,["label","placeholder","value"]),t(ve,{type:"text",autocomplete:"nickname","clear-button":"",label:e(n)("Nickname"),placeholder:e(n)("Your nickname"),value:e(v).nickname,"onUpdate:value":ne[4]||(ne[4]=B=>e(v).nickname=B)},null,8,["label","placeholder","value"]),e(D)?(a(),i(he,{key:0,class:"ebk-list-item-error-info",footer:e(n)(e($))},null,8,["footer"])):u("",!0)]),_:1}),t(re,{strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(he,{class:"list-item-with-header-and-title list-item-no-item-after",link:"#",header:e(w),title:e(I),onClick:ne[7]||(ne[7]=B=>b.value=!0)},{default:l(()=>[t(Be,{"value-type":"item","key-field":"languageTag","value-field":"languageTag","title-field":"nativeDisplayName","after-field":"displayName",title:e(w),"enable-filter":!0,"filter-placeholder":e(n)("Language"),"filter-no-items-text":e(n)("No results"),items:x.value,show:b.value,"onUpdate:show":ne[5]||(ne[5]=B=>b.value=B),modelValue:e(f),"onUpdate:modelValue":ne[6]||(ne[6]=B=>kt(f)?f.value=B:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(he,{class:"list-item-with-header-and-title list-item-no-item-after",link:"#",header:e(n)("Default Currency"),onClick:ne[10]||(ne[10]=B=>z.value=!0)},{title:l(()=>[t(Me,{class:"no-padding no-margin"},{default:l(()=>[o("span",null,c(e(A)(e(v).defaultCurrency))+"",1),o("small",Uf,c(e(v).defaultCurrency),1)]),_:1})]),default:l(()=>[t(Be,{"value-type":"item","key-field":"currencyCode","value-field":"currencyCode","title-field":"displayName","after-field":"currencyCode",title:e(n)("Default Currency"),"enable-filter":!0,"filter-placeholder":e(n)("Currency"),"filter-no-items-text":e(n)("No results"),items:O.value,show:z.value,"onUpdate:show":ne[8]||(ne[8]=B=>z.value=B),modelValue:e(v).defaultCurrency,"onUpdate:modelValue":ne[9]||(ne[9]=B=>e(v).defaultCurrency=B)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header"]),t(he,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("First Day of Week"),title:Q.value,onClick:ne[13]||(ne[13]=B=>J.value=!0)},{default:l(()=>[t(Be,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("First Day of Week"),"enable-filter":!0,"filter-placeholder":e(n)("Date"),"filter-no-items-text":e(n)("No results"),items:H.value,show:J.value,"onUpdate:show":ne[11]||(ne[11]=B=>J.value=B),modelValue:e(v).firstDayOfWeek,"onUpdate:modelValue":ne[12]||(ne[12]=B=>e(v).firstDayOfWeek=B)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"])]),_:1}),t(re,{strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(he,{title:e(n)("Use preset transaction categories"),link:"#",onClick:ne[15]||(ne[15]=B=>r.value=!0)},{default:l(()=>[t(Le,{checked:T.value,"onToggle:change":ne[14]||(ne[14]=B=>T.value=B)},null,8,["checked"])]),_:1},8,["title"])]),_:1}),t(pe,{push:"","close-on-escape":!1,opened:r.value,"onPopup:closed":ne[23]||(ne[23]=B=>r.value=!1)},{default:l(()=>[t(L,null,{default:l(()=>[t(ee,null,{default:l(()=>[t(se,null,{default:l(()=>[t(E,{"popup-close":"",text:e(n)("Back")},null,8,["text"])]),_:1}),t(Z,{title:e(n)("Preset Categories")},null,8,["title"]),t(M,null,{default:l(()=>[t(E,{"icon-f7":"ellipsis",onClick:ne[16]||(ne[16]=B=>Y.value=!0)}),T.value?u("",!0):(a(),i(E,{key:0,close:"",onClick:ne[17]||(ne[17]=B=>{T.value=!0,r.value=!1})},{default:l(()=>[X(c(e(n)("Enable")),1)]),_:1})),T.value?(a(),i(E,{key:1,close:"",onClick:ne[18]||(ne[18]=B=>{T.value=!1,r.value=!1})},{default:l(()=>[X(c(e(n)("Disable")),1)]),_:1})):u("",!0)]),_:1})]),_:1}),(a(!0),C(ke,null,Ce(W.value,(B,_e)=>(a(),i(Me,{class:"no-padding no-margin",key:_e},{default:l(()=>[t(Ye,{class:"margin-top margin-horizontal"},{default:l(()=>[X(c(e(V)(parseInt(_e))),1)]),_:2},1024),r.value?(a(),i(re,{key:0,strong:"",inset:"",dividers:""},{default:l(()=>[(a(!0),C(ke,null,Ce(B,(Ne,me)=>(a(),i(he,{title:Ne.name,"accordion-item":!!Ne.subCategories.length,key:me},{media:l(()=>[t(Ie,{"icon-type":"category","icon-id":Ne.icon,color:Ne.color},null,8,["icon-id","color"])]),default:l(()=>[Ne.subCategories.length?(a(),i(be,{key:0,class:"padding-inline-start-half"},{default:l(()=>[t(re,null,{default:l(()=>[(a(!0),C(ke,null,Ce(Ne.subCategories,(rt,ft)=>(a(),i(he,{title:rt.name,key:ft},{media:l(()=>[t(Ie,{"icon-type":"category","icon-id":rt.icon,color:rt.color},null,8,["icon-id","color"])]),_:2},1032,["title"]))),128))]),_:2},1024)]),_:2},1024)):u("",!0)]),_:2},1032,["title","accordion-item"]))),128))]),_:2},1024)):u("",!0)]),_:2},1024))),128))]),_:1}),t(Te,{"close-by-outside-click":"","close-on-escape":"",opened:Y.value,"onActions:closed":ne[20]||(ne[20]=B=>Y.value=!1)},{default:l(()=>[t(Fe,null,{default:l(()=>[t(xe,{onClick:ne[19]||(ne[19]=B=>te.value=!0)},{default:l(()=>[X(c(e(n)("Change Language")),1)]),_:1})]),_:1}),t(Fe,null,{default:l(()=>[t(xe,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(Pe,{"value-type":"item","key-field":"languageTag","value-field":"languageTag","title-field":"nativeDisplayName","after-field":"displayName",items:x.value,show:te.value,"onUpdate:show":ne[21]||(ne[21]=B=>te.value=B),modelValue:e(f),"onUpdate:modelValue":ne[22]||(ne[22]=B=>kt(f)?f.value=B:null)},null,8,["items","show","modelValue"])]),_:1},8,["opened"])]),_:1})}}}),Bf=["src"],Ef={class:"display-flex justify-content-center full-line"},Mf={class:"login-page-powered-by margin-top-half"},Lf={class:"login-page-powered-by margin-top-half"},Rf=Oe({__name:"UnlockPage",props:{f7router:{}},setup(p){const g=p,{tt:n}=He(),{showToast:h,showConfirm:P,openExternalUrl:N}=nt(),{version:_,pinCode:A,isWebAuthnAvailable:U,isPinCodeValid:y,doAfterUnlocked:v,doRelogin:d}=rs(),w=Ol(),f=tl();function I(){const F=g.f7router,D=us();if(!f.currentUserBasicInfo||!D){h("An error occurred");return}if(!w.appSettings.applicationLockWebAuthn||!cs()){h("WebAuthn is not enabled");return}if(!ds()){h("WebAuth is not supported on this device");return}Ke(),fs(f.currentUserBasicInfo,D).then(({id:V,userName:k,userSecret:K})=>{Se(),ps(V,k,K),v(),F.refreshPage()}).catch(V=>{Se(),sl.error("failed to use webauthn to verify",V),V.notSupported?h("WebAuth is not supported on this device"):V.name==="NotAllowedError"?h("User has canceled authentication"):V.invalid?h("Failed to authenticate with WebAuthn"):h("User has canceled or this device does not support WebAuthn")})}function m(F){if(!y(F)||Jn())return;const D=g.f7router,V=f.currentUserBasicInfo;if(!V||!V.username){h("An error occurred");return}try{ms(V.username,F),v(),D.refreshPage()}catch(k){sl.error("failed to unlock with pin code",k),h("Incorrect PIN code")}}function $(){const F=g.f7router;P("Are you sure you want to re-login?",()=>{d(),F.navigate("/login",{clearPreviousHistory:!0})})}return(F,D)=>{const V=s("f7-block"),k=s("f7-login-screen-title"),K=s("f7-list-item"),T=s("pin-code-input"),b=s("f7-list"),z=s("f7-list-button"),J=s("f7-link"),r=s("f7-block-footer"),Y=s("language-select-button"),te=s("f7-toolbar"),x=s("f7-page");return a(),i(x,{"no-navbar":"","no-swipeback":"","login-screen":"","hide-toolbar-on-scroll":""},{default:l(()=>[t(k,null,{default:l(()=>[o("img",{alt:"logo",class:"login-page-logo",src:e(Qn)},null,8,Bf),t(V,{class:"login-page-tile margin-vertical-half"},{default:l(()=>[X(c(e(n)("global.app.title")),1)]),_:1})]),_:1}),t(b,{form:""},{default:l(()=>[t(K,{class:"no-padding no-margin"},{inner:l(()=>[o("div",Ef,c(e(n)("Unlock Application")),1)]),_:1}),t(K,{class:"list-item-pincode-input padding-horizontal margin-horizontal"},{default:l(()=>[t(T,{secure:!0,length:6,"auto-confirm":!0,modelValue:e(A),"onUpdate:modelValue":D[0]||(D[0]=O=>kt(A)?A.value=O:null),"onPincode:confirm":m},null,8,["modelValue"])]),_:1})]),_:1}),t(b,null,{default:l(()=>[t(z,{class:R({disabled:!e(y)(e(A))}),text:e(n)("Unlock with PIN Code"),onClick:m},null,8,["class","text"]),e(U)?(a(),i(z,{key:0,text:e(n)("Unlock with WebAuthn"),onClick:I},null,8,["text"])):u("",!0),t(r,null,{default:l(()=>[t(J,{text:e(n)("Re-login"),onClick:$},null,8,["text"])]),_:1}),t(r,{class:"padding-bottom"})]),_:1}),t(b,{class:"login-page-bottom"},{default:l(()=>[t(r,null,{default:l(()=>[t(Y),o("div",Mf,[D[4]||(D[4]=o("span",null,"Powered by",-1)),t(J,{onClick:D[1]||(D[1]=O=>e(N)("https://github.com/mayswind/ezbookkeeping")),target:"_blank"},{default:l(()=>[...D[3]||(D[3]=[X("ezBookkeeping",-1)])]),_:1}),o("span",null,c(e(_)),1)])]),_:1})]),_:1}),t(te,{class:"login-page-fixed-bottom",tabbar:"",bottom:"",outline:!1},{default:l(()=>[t(Y),o("div",Lf,[D[6]||(D[6]=o("span",null,"Powered by",-1)),t(J,{onClick:D[2]||(D[2]=O=>e(N)("https://github.com/mayswind/ezbookkeeping")),target:"_blank"},{default:l(()=>[...D[5]||(D[5]=[X("ezBookkeeping",-1)])]),_:1}),o("span",null,c(e(_)),1)])]),_:1})]),_:1})}}}),Of={style:{color:"var(--f7-text-color)"}},zf={key:1,class:"skeleton-text"},Yf={key:0,class:"transaction-amount-statistics"},Hf={class:"display-flex no-padding-horizontal"},qf={class:"item-media"},Wf={class:"transaction-icon display-flex align-items-center"},Gf={key:0,class:"transaction-amount-statistics"},jf={class:"text-income"},Kf={class:"text-expense"},Zf={class:"transaction-day full-line flex-direction-column"},Xf={key:0,class:"transaction-day-of-week full-line flex-direction-column"},Qf={class:"display-flex no-padding-horizontal"},Jf={class:"item-media"},ep={class:"transaction-icon display-flex align-items-center"},tp={class:"actual-item-inner"},lp={class:"item-title-row"},np={class:"item-title"},ap={class:"transaction-category-name no-padding"},op={key:0},sp={key:1},ip={key:2},rp={class:"item-after"},up={class:"item-text"},cp={key:0,class:"transaction-description"},dp={class:"item-footer"},fp={key:0,class:"transaction-tags"},pp={class:"transaction-footer"},mp={key:0},vp={key:1},gp={key:2},hp={key:4},yp={key:0},_p={key:0,class:"margin-inline-end-half"},kp=Oe({__name:"ListPage",props:{f7route:{},f7router:{}},setup(p){const g=p,{tt:n,getCurrentLanguageTextDirection:h,getCurrentNumeralSystemType:P,getWeekdayShortName:N}=He(),{showAlert:_,showToast:A,routeBackOnError:U}=nt(),{pageType:y,loading:v,customMinDatetime:d,customMaxDatetime:w,currentCalendarDate:f,firstDayOfWeek:I,fiscalYearStart:m,defaultCurrency:$,showTotalAmountInTransactionListPage:F,showTagInTransactionListPage:D,allDateRanges:V,allAccounts:k,allAccountsMap:K,allAvailableAccountsCount:T,allCategories:b,allPrimaryCategories:z,allAvailableCategoriesCount:J,allTransactionTags:r,allAvailableTagsCount:Y,displayPageTypeName:te,query:x,queryDateRangeName:O,queryMinTime:H,queryMaxTime:W,queryMonthlyData:Q,queryMonth:le,queryAllFilterCategoryIds:oe,queryAllFilterAccountIds:ne,queryAllFilterTagIds:se,queryAllFilterCategoryIdsCount:Z,queryAllFilterAccountIdsCount:E,queryAllFilterTagIdsCount:M,queryAccountName:ee,queryCategoryName:ve,queryAmount:he,transactionCalendarMinDate:re,transactionCalendarMaxDate:Be,currentMonthTransactionData:Me,hasSubCategoryInQuery:Le,isSameAsDefaultTimezoneOffsetMinutes:Ye,canAddTransaction:Ie,getDisplayTime:be,getDisplayLongYearMonth:L,getDisplayTimezone:xe,getDisplayAmount:Fe,getDisplayMonthTotalAmount:Te,getTransactionTypeName:Pe}=vs(),pe=Al(),B=il(),_e=rl(),Ne=ln(),me=Ll(),rt=S(null),ft=S(!1),bt=S(null),St=S({}),ht=S({}),wt=S(!1),Pt=S(!1),ze=S(!1),Ae=S(!1),We=fe(()=>h()),at=fe(()=>P()),Qe=fe(()=>pe.framework7DarkMode||!1),lt=fe(()=>{if(v.value)return[];if(y.value===Et.List.type)return me.transactions;if(y.value===Et.Calendar.type)if(Q.value){const de=Me.value;if(!de||!de.items)return[];const ie=[];for(const $e of de.items)$e.gregorianCalendarYearDashMonthDashDay===f.value&&ie.push($e);return[{year:Me.value.year,month:Me.value.month,yearDashMonth:Me.value.yearDashMonth,opened:!0,items:ie,totalAmount:{income:0,expense:0,incompleteIncome:!1,incompleteExpense:!1},dailyTotalAmounts:{}}]}else return[];else return[]}),$t=fe(()=>y.value===Et.List.type?me.noTransaction:y.value===Et.Calendar.type?!lt.value||!lt.value.length||!lt.value[0].items||!lt.value[0].items.length:!0),yt=fe(()=>me.hasMoreTransaction);function Je(de){return"transaction_month_title_"+de}function ue(de){return"transaction_month_list_"+de}function ce(de){return"transaction_"+de.id}function ae(de){return ht.value[de.yearDashMonth]?!!(!de.opened||St.value[de.yearDashMonth]):!1}function Ee(de){return ae(de)?ht.value[de.yearDashMonth]+"px":"auto"}function it(de){return Wl(()=>{if(de&&(St.value={},ht.value={}),lt.value&&lt.value.length){const ie=zi(".transaction-month-list");for(let Ze=0;Ze<lt.value.length-1;Ze++){const ut=lt.value[Ze].yearDashMonth,cl=ue(ut),De=ie[cl];!ht.value[ut]&&zt(De)&&(ht.value[ut]=De)}}})}function Vt(){if(!(!lt.value||!lt.value.length))for(let de=0;de<lt.value.length-1;de++){const Ze=lt.value[de].yearDashMonth,$e=Je(Ze),ut=Yi(`#${$e}`);if(!ut)continue;const cl=ht.value[Ze]||0,De=ut.top+ut.height,G=De+cl;De>2*window.innerHeight||G<-2*window.innerHeight?St.value[Ze]=!0:delete St.value[Ze]}}function ll(de,ie){return!ie||de.gregorianCalendarDayOfMonth!==ie.gregorianCalendarDayOfMonth?{}:{color:"transparent"}}function nl(de,ie){if(ie&&ie[de.id])return{"list-item-checked":!0};if(de.subCategories){for(const Ze of de.subCategories)if(ie&&ie[Ze.id])return{"list-item-checked":!0}}return{}}function Ct(){const de=g.f7route.query;let ie=en(de.dateType?parseInt(de.dateType):void 0,I.value,m.value);!ie&&de.dateType&&de.maxTime&&de.minTime&&(Ft.isBillingCycle(parseInt(de.dateType))||de.dateType===Ft.Custom.type.toString())&&parseInt(de.maxTime)>0&&parseInt(de.minTime)>0&&(ie={dateType:parseInt(de.dateType),maxTime:parseInt(de.maxTime),minTime:parseInt(de.minTime)}),me.initTransactionListFilter({dateType:ie?ie.dateType:void 0,maxTime:ie?ie.maxTime:void 0,minTime:ie?ie.minTime:void 0,type:de.type&&parseInt(de.type)>0?parseInt(de.type):void 0,categoryIds:de.categoryIds,accountIds:de.accountIds,tagFilter:de.tagFilter,keyword:de.keyword}),j()}function j(de){const ie=!!de;de||(v.value=!0),St.value={},ht.value={},Promise.all([B.loadAllAccounts({force:!1}),_e.loadAllCategories({force:!1}),Ne.loadAllTags({force:!1})]).then(()=>{if(Q.value){const Ze=$n(x.value.minTime),$e=Ze.getGregorianCalendarYear(),ut=Ze.getGregorianCalendarMonth();return me.loadMonthlyAllTransactions({year:$e,month:ut,autoExpand:!0,defaultCurrency:$.value})}else return me.loadTransactions({reload:!0,autoExpand:!0,defaultCurrency:$.value})}).then(()=>{de?.(),ie&&A("Data has been updated"),v.value=!1,it(!0)}).catch(Ze=>{(Ze.processed||de)&&(v.value=!1),de?.(),Ze.processed||(de||(rt.value=Ze),A(Ze.message||Ze))})}function Dt(de){yt.value&&(ft.value||v.value||(ft.value=!0,me.loadTransactions({reload:!1,autoExpand:de,defaultCurrency:$.value}).then(()=>{ft.value=!1,it(!1)}).catch(ie=>{ft.value=!1,ie.processed||A(ie.message||ie)})))}function Nt(de){if(y.value=de,f.value=ml(x.value.minTime,f.value),y.value===Et.Calendar.type){const ie=hn(x.value.minTime,x.value.maxTime,I.value,m.value);ie&&me.updateTransactionListFilter({dateType:ie.dateType,maxTime:ie.maxTime,minTime:ie.minTime})&&(f.value=ml(x.value.minTime,f.value),j())}}function It(de){if(de===Ft.Custom.type){!x.value.minTime||!x.value.maxTime?(w.value=El(),d.value=gs(w.value)):(w.value=x.value.maxTime,d.value=x.value.minTime),y.value===Et.Calendar.type?ze.value=!0:Pt.value=!0;return}else if(x.value.dateType===de)return;let ie=null;if(Ft.isBillingCycle(de)?ie=xa(de,I.value,m.value,B.getAccountStatementDate(x.value.accountIds)):ie=en(de,I.value,m.value),!ie)return;if(y.value===Et.Calendar.type){f.value=ml(ie.minTime,f.value);const $e=hn(ie.minTime,ie.maxTime,I.value,m.value);$e&&(ie=$e,f.value=ml(ie.minTime,f.value))}me.updateTransactionListFilter({dateType:ie.dateType,maxTime:ie.maxTime,minTime:ie.minTime})&&j()}function Gt(de,ie){if(!de||!ie)return;let Ze=Aa(de,ie,I.value,m.value,Yt.Normal,B.getAccountStatementDate(x.value.accountIds));if(Ze||(Ze=Bl(de,ie,I.value,m.value,Yt.Normal)),y.value===Et.Calendar.type){f.value=ml(de,f.value);const ut=hn(de,ie,I.value,m.value);ut&&(de=ut.minTime,ie=ut.maxTime,Ze=ut.dateType,f.value=ml(de,f.value))}const $e=me.updateTransactionListFilter({dateType:Ze,maxTime:ie,minTime:de});Pt.value=!1,$e&&j()}function Ht(de){if(!de)return;const ie=Gl(de),Ze=Sn(de),$e=Bl(ie,Ze,I.value,m.value,Yt.Normal);y.value===Et.Calendar.type&&(f.value=ml(ie,f.value));const ut=me.updateTransactionListFilter({dateType:$e,maxTime:Ze,minTime:ie});ze.value=!1,ut&&j()}function Ut(de,ie,Ze){if(x.value.dateType===Ft.All.type)return;let $e=null;if((Ft.isBillingCycle(x.value.dateType)||x.value.dateType===Ft.Custom.type)&&($e=hs(de,ie,Ze,I.value,m.value,Yt.Normal,B.getAccountStatementDate(x.value.accountIds))),$e||($e=Cn(de,ie,Ze,I.value,m.value,Yt.Normal)),y.value===Et.Calendar.type){f.value=ml($e.minTime,f.value);const cl=hn($e.minTime,$e.maxTime,I.value,m.value);cl&&($e=cl,f.value=ml($e.minTime,f.value))}me.updateTransactionListFilter({dateType:$e.dateType,maxTime:$e.maxTime,minTime:$e.minTime})&&j()}function ye(de){if(x.value.type===de)return;let ie;if(de&&x.value.categoryIds){ie="";for(const $e of ys(oe.value)){const ut=b.value[$e];ut&&ut.type===ia(de)&&(ie.length>0&&(ie+=","),ie+=$e)}}me.updateTransactionListFilter({type:de,categoryIds:ie})&&j()}function Re(de){if(x.value.categoryIds===de)return;me.updateTransactionListFilter({categoryIds:de})&&j()}function kl(){let de="/settings/filter/category?type=transactionListCurrent";qe.Income<=x.value.type&&x.value.type<=qe.Transfer&&(de+="&allowCategoryTypes="+ia(x.value.type)),g.f7router.navigate(de)}function xt(de){if(x.value.accountIds===de)return;me.updateTransactionListFilter({accountIds:de})&&j()}function Dl(){g.f7router.navigate("/settings/filter/account?type=transactionListCurrent")}function pl(de){if(x.value.tagFilter===de)return;me.updateTransactionListFilter({tagFilter:de})&&j()}function jt(){g.f7router.navigate("/settings/filter/tag?type=transactionListCurrent")}function al(){wt.value?(wt.value=!1,x.value.keyword&&ul("")):wt.value=!0}function ul(de){if(x.value.keyword===de)return;me.updateTransactionListFilter({keyword:de})&&j()}function bl(de){if(x.value.amountFilter===de)return;if(de){g.f7router.navigate(`/transaction/filter/amount?type=${de}&value=${x.value.amountFilter}`);return}me.updateTransactionListFilter({amountFilter:de})&&j()}function Il(){const de=El();let ie=!1,Ze;x.value.maxTime&&x.value.minTime&&(x.value.maxTime<de?(ie=!0,Ze=x.value.maxTime):de<x.value.minTime&&(ie=!0,Ze=x.value.minTime));const $e=[];ie&&$e.push(`time=${Ze}`),x.value.type!==qe.ModifyBalance&&$e.push(`type=${x.value.type}`),Z.value===1&&$e.push(`categoryId=${x.value.categoryIds}`),E.value===1&&$e.push(`accountId=${x.value.accountIds}`),x.value.tagFilter&&$e.push(`tagIds=${_s(se.value,!0).join(",")||""}`),g.f7router.navigate(`/transaction/add?${$e.join("&")}`)}function q(de){g.f7router.navigate(`/transaction/add?id=${de.id}&type=${de.type}`)}function Kt(de){g.f7router.navigate(`/transaction/edit?id=${de.id}&type=${de.type}`)}function Kl(de,ie){if(!de){_("An error occurred");return}if(!ie){bt.value=de,Ae.value=!0;return}Ae.value=!1,bt.value=null,Ke(),me.deleteTransaction({transaction:de,defaultCurrency:$.value,beforeResolve:Ze=>{$l(ce(de),Ze)}}).then(()=>{Se()}).catch(Ze=>{Se(),Ze.processed||A(Ze.message||Ze)})}function on(de,ie){me.collapseMonthInTransactionList({monthList:de,collapse:ie}),!ie&&St.value[de.yearDashMonth]&&delete St.value[de.yearDashMonth]}function sn(de){Qt(de.$el[0],".popover-inner",".popover-inner","li.list-item-selected")}function rn(de){Qt(de.$el[0],".popover-inner",".popover-inner","li.list-item-checked")}function un(){me.transactionListStateInvalid&&!v.value&&j(),U(g.f7router,rt)}function Zl(){it(!0).then(()=>{it(!1)})}function In(){Vt()}function zl(){it(!1).then(()=>{Vt()})}return ka(()=>{window.addEventListener("resize",Zl),Hi(In)}),Ma(()=>{window.removeEventListener("resize",Zl)}),Ct(),(de,ie)=>{const Ze=s("f7-nav-left"),$e=s("f7-icon"),ut=s("f7-link"),cl=s("f7-nav-title"),De=s("f7-nav-right"),G=s("f7-searchbar"),Ge=s("f7-subnavbar"),ct=s("f7-navbar"),et=s("f7-list-item"),Zt=s("f7-list"),Fl=s("f7-popover"),Yl=s("f7-toolbar"),Fn=s("transaction-calendar"),Xt=s("f7-block"),Vl=s("f7-accordion-toggle"),At=s("f7-block-title"),Pl=s("f7-accordion-content"),Xl=s("f7-accordion-item"),Ul=s("ItemIcon"),wl=s("f7-chip"),Nl=s("f7-swipeout-button"),cn=s("f7-swipeout-actions"),Vn=s("date-range-selection-sheet"),Pn=s("month-selection-sheet"),dn=s("f7-actions-label"),fn=s("f7-actions-button"),pn=s("f7-actions-group"),Un=s("f7-actions"),mn=s("f7-page");return a(),i(mn,{ptr:"",infinite:"","infinite-preloader":ft.value,"infinite-distance":600,"with-subnavbar":wt.value,"onPtr:refresh":j,"onPage:afterin":un,onInfinite:ie[24]||(ie[24]=ge=>Dt(!0))},{default:l(()=>[t(ct,null,{default:l(()=>[t(Ze,{"back-link":e(n)("Back")},null,8,["back-link"]),t(cl,null,{default:l(()=>[t(ut,{"popover-open":".chart-data-type-popover-menu"},{default:l(()=>[o("span",Of,c(e(te)),1),t($e,{class:"page-title-bar-icon",color:"gray",style:{opacity:"0.5"},f7:"chevron_down_circle_fill"})]),_:1})]),_:1}),t(De,{class:"navbar-compact-icons"},{default:l(()=>[t(ut,{"icon-f7":"search",onClick:al}),t(ut,{"icon-f7":"plus",class:R({disabled:!e(Ie)}),onClick:Il},null,8,["class"])]),_:1}),wt.value?(a(),i(Ge,{key:0,inner:!1},{default:l(()=>[t(G,{"custom-searchs":"",value:e(x).keyword,placeholder:e(n)("Search transaction description"),"disable-button-text":e(n)("Cancel"),onChange:ie[0]||(ie[0]=ge=>ul(ge.target.value)),"onClick:clear":ie[1]||(ie[1]=ge=>{ul(""),wt.value=!1}),"onSearchbar:disable":ie[2]||(ie[2]=ge=>{ul(""),wt.value=!1})},null,8,["value","placeholder","disable-button-text"])]),_:1})):u("",!0)]),_:1}),t(Fl,{class:"chart-data-type-popover-menu"},{default:l(()=>[t(Zt,{dividers:""},{default:l(()=>[(a(!0),C(ke,null,Ce(e(Et).values(),ge=>(a(),i(et,{link:"#","no-chevron":"","popover-close":"",title:e(n)(ge.name),class:R({"list-item-selected":e(y)===ge.type}),key:ge.type,onClick:Ve=>Nt(ge.type)},{after:l(()=>[e(y)===ge.type?(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1})]),_:1}),t(Yl,{tabbar:"",bottom:"",class:"toolbar-item-auto-size transaction-list-toolbar"},{default:l(()=>[t(ut,{class:R({disabled:e(v)||e(x).dateType===e(Ft).All.type}),onClick:ie[3]||(ie[3]=ge=>Ut(e(x).minTime,e(x).maxTime,-1))},{default:l(()=>[t($e,{class:"icon-with-direction",f7:"arrow_left_square"})]),_:1},8,["class"]),t(ut,{class:R({"tabbar-text-with-ellipsis":!0,disabled:e(v)}),"popover-open":".date-popover-menu"},{default:l(()=>[o("span",{class:R({"tabbar-item-changed":e(x).dateType!==e(Ft).All.type})},c(e(O)),3)]),_:1},8,["class"]),t(ut,{class:R({disabled:e(v)||e(x).dateType===e(Ft).All.type}),onClick:ie[4]||(ie[4]=ge=>Ut(e(x).minTime,e(x).maxTime,1))},{default:l(()=>[t($e,{class:"icon-with-direction",f7:"arrow_right_square"})]),_:1},8,["class"]),t(ut,{class:R(["tabbar-text-with-ellipsis",{disabled:e(x).type===1}]),"popover-open":".category-popover-menu"},{default:l(()=>[o("span",{class:R({"tabbar-item-changed":e(x).categoryIds})},c(e(ve)),3)]),_:1},8,["class"]),t(ut,{class:"tabbar-text-with-ellipsis","popover-open":".account-popover-menu"},{default:l(()=>[o("span",{class:R({"tabbar-item-changed":e(x).accountIds})},c(e(ee)),3)]),_:1}),t(ut,{"popover-open":".more-popover-menu"},{default:l(()=>[t($e,{f7:"ellipsis_vertical",class:R({"tabbar-item-changed":e(x).type>0||e(x).amountFilter||e(x).tagFilter})},null,8,["class"])]),_:1})]),_:1}),e(y)===e(Et).Calendar.type?(a(),i(Xt,{key:0,class:"transaction-calendar-container margin-vertical"},{default:l(()=>[t(Fn,{"calendar-class":"justify-content-center","week-day-name-type":"short",readonly:e(v),"is-dark-mode":Qe.value,"default-currency":!1,"min-date":e(re),"max-date":e(Be),dailyTotalAmounts:e(Me)?.dailyTotalAmounts,modelValue:e(f),"onUpdate:modelValue":ie[5]||(ie[5]=ge=>kt(f)?f.value=ge:null)},null,8,["readonly","is-dark-mode","min-date","max-date","dailyTotalAmounts","modelValue"])]),_:1})):u("",!0),e(v)?(a(),C("div",zf,[(a(!0),C(ke,null,Ce(e(y)===e(Et).List.type?[1,2]:[1],ge=>(a(),i(Xt,{class:R(["combination-list-wrapper margin-vertical",{"no-accordion-toggle":e(y)!==e(Et).List.type}]),key:ge},{default:l(()=>[t(Xl,null,{default:l(()=>[e(y)===e(Et).List.type?(a(),i(At,{key:0},{default:l(()=>[t(Vl,null,{default:l(()=>[t(Zt,{strong:"",inset:"",dividers:"","media-list":"",class:"transaction-amount-list combination-list-header combination-list-opened"},{default:l(()=>[t(et,null,{title:l(()=>[ie[26]||(ie[26]=o("small",null,"YYYY-MM",-1)),e(F)?(a(),C("small",Yf,[...ie[25]||(ie[25]=[o("span",null,"0.00 USD",-1),o("span",null,"0.00 USD",-1)])])):u("",!0),t($e,{class:"combination-list-chevron-icon",f7:"chevron_up"})]),_:1})]),_:1})]),_:1})]),_:1})):u("",!0),t(Pl,{style:{height:"auto"}},{default:l(()=>[t(Zt,{strong:"",inset:"",dividers:"","media-list":"","accordion-list":"",class:"transaction-info-list combination-list-content"},{default:l(()=>[(a(!0),C(ke,null,Ce(e(y)===e(Et).List.type&&ge===1?[1,2,3,4,5,6,7]:[1,2,3],Ve=>(a(),i(et,{link:"#","chevron-center":"",class:"transaction-info",key:Ve},{media:l(()=>[...ie[27]||(ie[27]=[o("div",{class:"display-flex flex-direction-column transaction-date"},[o("span",{class:"transaction-day full-line flex-direction-column"},"DD"),o("span",{class:"transaction-day-of-week full-line flex-direction-column"},"Sun")],-1)])]),inner:l(()=>[o("div",Hf,[o("div",qf,[o("div",Wf,[t($e,{f7:"app_fill"})])]),ie[28]||(ie[28]=o("div",{class:"actual-item-inner"},[o("div",{class:"item-title-row"},[o("div",{class:"item-title"},[o("div",{class:"transaction-category-name no-padding"},[o("span",null,"Category")])]),o("div",{class:"item-after"},[o("div",{class:"transaction-amount"},[o("span",null,"0.00 USD")])])]),o("div",{class:"item-text"},[o("div",{class:"transaction-description"},[o("span",null,"Transaction Description")])]),o("div",{class:"item-footer"},[o("div",{class:"transaction-footer"},[o("span",null,"HH:mm"),o("span",null,""),o("span",null,"Source Account")])])],-1))])]),_:1}))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))])):u("",!0),!e(v)&&$t.value?(a(),i(Zt,{key:2,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(et,{title:e(n)("No transaction data")},null,8,["title"])]),_:1})):u("",!0),(a(!0),C(ke,null,Ce(lt.value,ge=>(a(),i(Xt,{class:R(["combination-list-wrapper margin-vertical",{"no-accordion-toggle":e(y)!==e(Et).List.type}]),key:ge.yearDashMonth},{default:l(()=>[t(Xl,{opened:ge.opened,"onAccordion:open":Ve=>on(ge,!1),"onAccordion:opened":zl,"onAccordion:close":Ve=>on(ge,!0),"onAccordion:closed":zl},{default:l(()=>[e(y)===e(Et).List.type?(a(),i(At,{key:0,id:Je(ge.yearDashMonth)},{default:l(()=>[t(Vl,null,{default:l(()=>[t(Zt,{strong:"",inset:"",dividers:"","media-list":"",class:R(["transaction-amount-list combination-list-header",ge.opened?"combination-list-opened":"combination-list-closed"])},{default:l(()=>[t(et,null,{title:l(()=>[o("small",null,[o("span",null,c(e(L)(ge)),1)]),e(F)&&ge.totalAmount?(a(),C("small",Gf,[o("span",jf,c(e(Te)(ge.totalAmount.income,e($),"+",ge.totalAmount.incompleteIncome)),1),o("span",Kf,c(e(Te)(ge.totalAmount.expense,e($),"-",ge.totalAmount.incompleteExpense)),1)])):u("",!0),t($e,{class:"combination-list-chevron-icon",f7:ge.opened?"chevron_up":"chevron_down"},null,8,["f7"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["id"])):u("",!0),t(Pl,null,{default:l(()=>[ae(ge)?(a(),i(Xt,{key:0,style:vt({height:Ee(ge)})},null,8,["style"])):u("",!0),ae(ge)?u("",!0):(a(),i(Zt,{key:1,strong:"",inset:"",dividers:"","media-list":"","accordion-list":"",class:"transaction-info-list transaction-month-list combination-list-content",id:ue(ge.yearDashMonth)},{default:l(()=>[(a(!0),C(ke,null,Ce(ge.items,(Ve,Bt)=>(a(),i(et,{swipeout:"","chevron-center":"","accordion-item":"",class:"transaction-info",id:ce(Ve),link:`/transaction/detail?id=${Ve.id}&type=${Ve.type}`,key:Ve.id},{media:l(()=>[o("div",{class:"display-flex flex-direction-column transaction-date",style:vt(ll(Ve,Bt>0?ge.items[Bt-1]:void 0))},[o("span",Zf,c(Ve.gregorianCalendarDayOfMonth?at.value.formatNumber(Ve.gregorianCalendarDayOfMonth):""),1),Ve.displayDayOfWeek?(a(),C("span",Xf,c(e(N)(Ve.displayDayOfWeek)),1)):u("",!0)],4)]),inner:l(()=>[o("div",Qf,[o("div",Jf,[o("div",ep,[Ve.category&&Ve.category.color?(a(),i(Ul,{key:0,"icon-type":"category","icon-id":Ve.category.icon,color:Ve.category.color},null,8,["icon-id","color"])):!Ve.category||!Ve.category.color?(a(),i($e,{key:1,f7:"pencil_ellipsis_rectangle"})):u("",!0)])]),o("div",tp,[o("div",lp,[o("div",np,[o("div",ap,[Ve.type===e(qe).ModifyBalance?(a(),C("span",op,c(e(n)("Modify Balance")),1)):Ve.type!==e(qe).ModifyBalance&&Ve.category?(a(),C("span",sp,c(Ve.category.name),1)):Ve.type!==e(qe).ModifyBalance&&!Ve.category?(a(),C("span",ip,c(e(Pe)(Ve.type,"Transaction")),1)):u("",!0)])]),o("div",rp,[Ve.sourceAccount?(a(),C("div",{key:0,class:R(["transaction-amount",{"text-expense":Ve.type===e(qe).Expense,"text-income":Ve.type===e(qe).Income}])},[o("span",null,c(e(Fe)(Ve)),1)],2)):u("",!0)])]),o("div",up,[Ve.comment?(a(),C("div",cp,[o("span",null,c(Ve.comment),1)])):u("",!0)]),o("div",dp,[e(D)&&Ve.tagIds&&Ve.tagIds.length?(a(),C("div",fp,[(a(!0),C(ke,null,Ce(Ve.tagIds,Lt=>(a(),i(wl,{"media-text-color":"var(--f7-chip-text-color)",class:"transaction-tag",text:e(r)[Lt]?.name,key:Lt},{media:l(()=>[t($e,{f7:"number"})]),_:1},8,["text"]))),128))])):u("",!0),o("div",pp,[o("span",null,c(e(be)(Ve)),1),e(Ye)(Ve)?u("",!0):(a(),C("span",mp,c(`(${e(xe)(Ve)})`),1)),Ve.sourceAccount?(a(),C("span",vp,"")):u("",!0),Ve.sourceAccount?(a(),C("span",gp,c(Ve.sourceAccount.name),1)):u("",!0),Ve.sourceAccount&&Ve.type===e(qe).Transfer&&Ve.destinationAccount&&Ve.sourceAccount.id!==Ve.destinationAccount.id?(a(),i($e,{key:3,class:"transaction-account-arrow icon-with-direction",f7:"arrow_right"})):u("",!0),Ve.sourceAccount&&Ve.type===e(qe).Transfer&&Ve.destinationAccount&&Ve.sourceAccount.id!==Ve.destinationAccount.id?(a(),C("span",hp,c(Ve.destinationAccount.name),1)):u("",!0)])])])])]),default:l(()=>[t(cn,{left:We.value===e(gt).RTL,right:We.value===e(gt).LTR},{default:l(()=>[Ve.type!==e(qe).ModifyBalance?(a(),i(Nl,{key:0,color:"primary",close:"",text:e(n)("Duplicate"),onClick:Lt=>q(Ve)},null,8,["text","onClick"])):u("",!0),Ve.editable?(a(),i(Nl,{key:1,color:"orange",close:"",text:e(n)("Edit"),onClick:Lt=>Kt(Ve)},null,8,["text","onClick"])):u("",!0),Ve.editable?(a(),i(Nl,{key:2,color:"red",class:"padding-horizontal",onClick:Lt=>Kl(Ve,!1)},{default:l(()=>[t($e,{f7:"trash"})]),_:1},8,["onClick"])):u("",!0)]),_:2},1032,["left","right"])]),_:2},1032,["id","link"]))),128))]),_:2},1032,["id"]))]),_:2},1024)]),_:2},1032,["opened","onAccordion:open","onAccordion:close"])]),_:2},1032,["class"]))),128)),e(y)===e(Et).List.type?dt((a(),i(Xt,{key:3,class:R(["text-align-center",{disabled:ft.value}])},{default:l(()=>[t(ut,{href:"#",onClick:ie[6]||(ie[6]=ge=>Dt(!1))},{default:l(()=>[X(c(e(n)("Load More")),1)]),_:1})]),_:1},8,["class"])),[[Tt,!e(v)&&yt.value]]):u("",!0),t(Fl,{class:"date-popover-menu","onPopover:open":sn},{default:l(()=>[t(Zt,{dividers:""},{default:l(()=>[(a(!0),C(ke,null,Ce(e(V),ge=>dt((a(),i(et,{link:"#","no-chevron":"","popover-close":"",title:ge.displayName,class:R({"list-item-selected":e(x).dateType===ge.type}),key:ge.type,onClick:Ve=>It(ge.type)},{after:l(()=>[e(x).dateType===ge.type?(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),footer:l(()=>[ge.isUserCustomRange&&e(x).dateType===ge.type&&e(x).minTime&&e(x).maxTime?(a(),C("div",yp,[o("span",null,c(e(H)),1),ie[29]||(ie[29]=o("span",null,"-",-1)),ie[30]||(ie[30]=o("br",null,null,-1)),o("span",null,c(e(W)),1)])):u("",!0)]),_:2},1032,["title","class","onClick"])),[[Tt,e(y)===e(Et).List.type||ge.type===e(Ft).ThisMonth.type||ge.type===e(Ft).LastMonth.type||ge.type===e(Ft).Custom.type]])),128))]),_:1})]),_:1}),t(Vn,{title:e(n)("Custom Date Range"),"min-time":e(d),"max-time":e(w),show:Pt.value,"onUpdate:show":ie[7]||(ie[7]=ge=>Pt.value=ge),"onDateRange:change":Gt},null,8,["title","min-time","max-time","show"]),t(Pn,{title:e(n)("Select Month"),"model-value":e(le),show:ze.value,"onUpdate:show":ie[8]||(ie[8]=ge=>ze.value=ge),"onUpdate:modelValue":Ht},null,8,["title","model-value","show"]),t(Fl,{class:"category-popover-menu","onPopover:open":rn},{default:l(()=>[t(Zt,{dividers:"","accordion-list":""},{default:l(()=>[t(et,{link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":!e(x).categoryIds}),title:e(n)("All"),onClick:ie[9]||(ie[9]=ge=>Re(""))},{media:l(()=>[t($e,{f7:"rectangle_grid_2x2"})]),after:l(()=>[e(x).categoryIds?u("",!0):(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"}))]),_:1},8,["class","title"]),e(J)>0?(a(),i(et,{key:0,link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":e(x).categoryIds&&e(Z)>1}),title:e(n)("Multiple Categories"),onClick:ie[10]||(ie[10]=ge=>kl())},{media:l(()=>[t($e,{f7:"rectangle_on_rectangle"})]),after:l(()=>[e(x).categoryIds&&e(Z)>1?(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:1},8,["class","title"])):u("",!0),(a(!0),C(ke,null,Ce(e(z),(ge,Ve)=>(a(),C(ke,{key:Ve},[ge&&ge.length?(a(),C(ke,{key:0},[t(et,{divider:"",title:e(Pe)(e(ks)(parseInt(Ve)),"Type")},null,8,["title"]),(a(!0),C(ke,null,Ce(ge,Bt=>dt((a(),i(et,{"accordion-item":"",title:Bt.name,class:R(nl(Bt,e(oe))),key:Bt.id},{media:l(()=>[t(Ul,{"icon-type":"category","icon-id":Bt.icon,color:Bt.color},null,8,["icon-id","color"])]),default:l(()=>[t(Pl,null,{default:l(()=>[t(Zt,{dividers:"",class:"padding-inline-start"},{default:l(()=>[t(et,{link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":e(x).categoryIds===Bt.id,"item-in-multiple-selection":e(Z)>1&&e(oe)[Bt.id]}),title:e(n)("All"),onClick:Lt=>Re(Bt.id)},{media:l(()=>[t($e,{f7:"rectangle_grid_2x2"})]),after:l(()=>[e(x).categoryIds===Bt.id?(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:2},1032,["class","title","onClick"]),(a(!0),C(ke,null,Ce(Bt.subCategories,Lt=>dt((a(),i(et,{link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":e(x).categoryIds===Lt.id,"item-in-multiple-selection":e(Z)>1&&e(oe)[Lt.id]}),title:Lt.name,key:Lt.id,onClick:ta=>Re(Lt.id)},{media:l(()=>[t(Ul,{"icon-type":"category","icon-id":Lt.icon,color:Lt.color},null,8,["icon-id","color"])]),after:l(()=>[e(x).categoryIds===Lt.id?(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:2},1032,["class","title","onClick"])),[[Tt,!Lt.hidden||e(oe)[Lt.id]]])),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","class"])),[[Tt,!Bt.hidden||e(oe)[Bt.id]||e(b)[e(x).categoryIds]?.parentId===Bt.id||e(Le)(Bt)]])),128))],64)):u("",!0)],64))),128))]),_:1})]),_:1}),t(Fl,{class:"account-popover-menu","onPopover:open":sn},{default:l(()=>[t(Zt,{dividers:""},{default:l(()=>[t(et,{link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":!e(x).accountIds}),title:e(n)("All"),onClick:ie[11]||(ie[11]=ge=>xt(""))},{media:l(()=>[t($e,{f7:"rectangle_grid_2x2"})]),after:l(()=>[e(x).accountIds?u("",!0):(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"}))]),_:1},8,["class","title"]),e(T)>0?(a(),i(et,{key:0,link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":e(x).accountIds&&e(E)>1}),title:e(n)("Multiple Accounts"),onClick:ie[12]||(ie[12]=ge=>Dl())},{media:l(()=>[t($e,{f7:"rectangle_on_rectangle"})]),after:l(()=>[e(x).accountIds&&e(E)>1?(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:1},8,["class","title"])):u("",!0),(a(!0),C(ke,null,Ce(e(k),ge=>dt((a(),i(et,{link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":e(x).accountIds===ge.id,"item-in-multiple-selection":e(E)>1&&e(ne)[ge.id]}),title:ge.name,key:ge.id,onClick:Ve=>xt(ge.id)},{media:l(()=>[t(Ul,{"icon-type":"account","icon-id":ge.icon,color:ge.color},null,8,["icon-id","color"])]),after:l(()=>[e(x).accountIds===ge.id?(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:2},1032,["class","title","onClick"])),[[Tt,!ge.hidden&&(!e(K)[ge.parentId]||!e(K)[ge.parentId].hidden)||e(ne)[ge.id]]])),128))]),_:1})]),_:1}),t(Fl,{class:"more-popover-menu"},{default:l(()=>[t(Zt,{dividers:""},{default:l(()=>[t(et,{"group-title":""},{default:l(()=>[o("small",null,c(e(n)("Type")),1)]),_:1}),t(et,{link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":e(x).type===0}),title:e(n)("All"),onClick:ie[13]||(ie[13]=ge=>ye(0))},{after:l(()=>[e(x).type===0?(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:1},8,["class","title"]),t(et,{link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":e(x).type===1}),title:e(n)("Modify Balance"),onClick:ie[14]||(ie[14]=ge=>ye(1))},{after:l(()=>[e(x).type===1?(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:1},8,["class","title"]),t(et,{link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":e(x).type===2}),title:e(n)("Income"),onClick:ie[15]||(ie[15]=ge=>ye(2))},{after:l(()=>[e(x).type===2?(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:1},8,["class","title"]),t(et,{link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":e(x).type===3}),title:e(n)("Expense"),onClick:ie[16]||(ie[16]=ge=>ye(3))},{after:l(()=>[e(x).type===3?(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:1},8,["class","title"]),t(et,{link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":e(x).type===4}),title:e(n)("Transfer"),onClick:ie[17]||(ie[17]=ge=>ye(4))},{after:l(()=>[e(x).type===4?(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:1},8,["class","title"]),t(et,{"group-title":""},{default:l(()=>[o("small",null,c(e(n)("Amount")),1)]),_:1}),t(et,{link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":!e(x).amountFilter}),title:e(n)("All"),onClick:ie[18]||(ie[18]=ge=>bl(""))},{after:l(()=>[e(x).amountFilter?u("",!0):(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"}))]),_:1},8,["class","title"]),(a(!0),C(ke,null,Ce(e(vl).values(),ge=>(a(),i(et,{link:"#","no-chevron":"","popover-close":"",key:ge.type,class:R({"list-item-selected":e(x).amountFilter&&e(x).amountFilter.startsWith(`${ge.type}:`)}),title:e(n)(ge.name),onClick:Ve=>bl(ge.type)},{after:l(()=>[e(x).amountFilter&&e(x).amountFilter.startsWith(`${ge.type}:`)?(a(),C("span",_p,c(e(he)),1)):u("",!0),e(x).amountFilter&&e(x).amountFilter.startsWith(`${ge.type}:`)?(a(),i($e,{key:1,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:2},1032,["class","title","onClick"]))),128)),t(et,{"group-title":""},{default:l(()=>[o("small",null,c(e(n)("Tags")),1)]),_:1}),t(et,{link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":!e(x).tagFilter}),title:e(n)("All"),onClick:ie[19]||(ie[19]=ge=>pl(""))},{after:l(()=>[e(x).tagFilter?u("",!0):(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"}))]),_:1},8,["class","title"]),t(et,{link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":e(x).tagFilter===e(yn).TransactionNoTagFilterValue}),title:e(n)("Without Tags"),onClick:ie[20]||(ie[20]=ge=>pl(e(yn).TransactionNoTagFilterValue))},{after:l(()=>[e(x).tagFilter===e(yn).TransactionNoTagFilterValue?(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:1},8,["class","title"]),e(Y)>0?(a(),i(et,{key:0,link:"#","no-chevron":"","popover-close":"",class:R({"list-item-selected":e(x).tagFilter&&e(M)>1}),title:e(n)("Multiple Tags"),onClick:ie[21]||(ie[21]=ge=>jt())},{after:l(()=>[e(x).tagFilter&&e(M)>1?(a(),i($e,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:1},8,["class","title"])):u("",!0),(a(!0),C(ke,null,Ce(e(r),ge=>dt((a(),i(et,{link:"#","no-chevron":"","popover-close":"",title:ge.name,class:R({"list-item-selected":e(M)===1&&e(fl)(e(se)[ge.id]),"item-in-multiple-selection":e(M)>1&&e(fl)(e(se)[ge.id])}),key:ge.id,onClick:Ve=>pl(e(yn).of(ge.id).toTextualTagFilter())},{"before-title":l(()=>[t($e,{class:"transaction-tag-name transaction-tag-icon",f7:"number"})]),after:l(()=>[e(fl)(e(se)[ge.id])?(a(),i($e,{key:0,class:"list-item-checked-icon",f7:e(se)[ge.id]===!0?"checkmark_alt":e(se)[ge.id]===!1?"multiply":void 0},null,8,["f7"])):u("",!0)]),_:2},1032,["title","class","onClick"])),[[Tt,!ge.hidden||e(fl)(e(se)[ge.id])]])),128))]),_:1})]),_:1}),t(Un,{"close-by-outside-click":"","close-on-escape":"",opened:Ae.value,"onActions:closed":ie[23]||(ie[23]=ge=>Ae.value=!1)},{default:l(()=>[t(pn,null,{default:l(()=>[t(dn,null,{default:l(()=>[X(c(e(n)("Are you sure you want to delete this transaction?")),1)]),_:1}),t(fn,{color:"red",onClick:ie[22]||(ie[22]=ge=>Kl(bt.value,!0))},{default:l(()=>[X(c(e(n)("Delete")),1)]),_:1})]),_:1}),t(pn,null,{default:l(()=>[t(fn,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1},8,["infinite-preloader","with-subnavbar"])}}}),bp={key:0,class:"list-item-custom-title"},wp={key:1,class:"list-item-custom-title"},Cp={key:0,class:"list-item-custom-title"},Tp={key:1,class:"list-item-custom-title"},Sp={key:0,class:"list-item-custom-title"},xp={key:1,class:"list-item-custom-title"},Ap={class:"transaction-edit-datetime-title"},$p={key:0,class:"transaction-edit-timezone-name"},Dp={key:1,class:"transaction-edit-timezone-name"},Ip={key:0},Fp={key:1},Vp={pagination:!1,"space-between":10,"slides-per-view":"auto",class:"transaction-pictures"},Pp=["onClick"],Up={class:"transaction-picture"},Np={key:0,class:"display-flex justify-content-center align-items-center transaction-picture-control-backdrop"},Bp=["src"],Ep={class:"display-flex justify-content-center align-items-center transaction-picture transaction-picture-add"},Mp={class:"tabbar-primary-link"},Lp=["accept"],Ql=Oe({__name:"EditPage",props:{f7route:{},f7router:{}},setup(p){const g=p,n=g.f7route.query,h=Kt(),{tt:P,getMultiMonthdayShortNames:N,getMultiWeekdayLongNames:_,formatDateTimeToLongDate:A,formatDateTimeToLongTime:U,formatGregorianTextualYearMonthDayToLongDate:y,parseAmountFromLocalizedNumerals:v}=He(),{showAlert:d,showConfirm:w,showToast:f,routeBackOnError:I}=nt(),{mode:m,isSupportGeoLocation:$,editId:F,addByTemplateId:D,duplicateFromId:V,clientSessionId:k,loading:K,submitting:T,uploadingPicture:b,geoLocationStatus:z,setGeoLocationByClickMap:J,transaction:r,numeralSystem:Y,currentTimezoneOffsetMinutes:te,defaultCurrency:x,defaultAccountId:O,firstDayOfWeek:H,coordinateDisplayType:W,allTimezones:Q,allVisibleAccounts:le,allAccountsMap:oe,allVisibleCategorizedAccounts:ne,allCategories:se,allCategoriesMap:Z,allTags:E,allTagsMap:M,firstVisibleAccountId:ee,hasVisibleExpenseCategories:ve,hasVisibleIncomeCategories:he,hasVisibleTransferCategories:re,canAddTransactionPicture:Be,title:Me,saveButtonTitle:Le,sourceAmountTitle:Ye,sourceAccountTitle:Ie,transferInAmountTitle:be,sourceAccountName:L,destinationAccountName:xe,sourceAccountCurrency:Fe,destinationAccountCurrency:Te,transactionDisplayTimezone:Pe,transactionTimezoneTimeDifference:pe,geoLocationStatusInfo:B,inputEmptyProblemMessage:_e,inputIsEmpty:Ne,updateTransactionTime:me,updateTransactionTimezone:rt,swapTransactionData:ft,getDisplayAmount:bt,getTransactionPictureUrl:St}=bs(h?.type||Xe.Transaction,h?.mode,n.type?parseInt(n.type):void 0),ht=Ol(),wt=tl(),Pt=il(),ze=rl(),Ae=ln(),We=Ll(),at=Xn(),Qe=Wt("pictureBrowser"),lt=Wt("pictureInput"),$t=!!navigator.clipboard,yt=S(null),Je=S(!1),ue=S(null),ce=S("time"),ae=S(!1),Ee=S(!1),it=S(!1),Vt=S(!1),ll=S(!1),nl=S(!1),Ct=S(!1),j=S(!1),Dt=S(!1),Nt=S(!1),It=S(!1),Gt=S(!1),Ht=S(!1),Ut=S(!1),ye=S(!1),Re=S(h?.type===Xe.Transaction&&(h?.mode===Ue.Add||h?.mode===Ue.Edit)&&ht.appSettings.alwaysShowTransactionPicturesInMobileTransactionEditPage),kl=fe(()=>{const De={readonly:m.value===Ue.View,"text-expense":r.value.type===qe.Expense,"text-income":r.value.type===qe.Income,"text-color-primary":r.value.type===qe.Transfer};return De[Kl(r.value.sourceAmount)]=!0,De}),xt=fe(()=>{const De={readonly:m.value===Ue.View};return De[Kl(r.value.destinationAmount)]=!0,De}),Dl=fe(()=>{if(m.value!==Ue.View||!ae.value){const G=ql(r.value.time,r.value.utcOffset);return A(G)}const De=ql(r.value.time,xn(r.value.time));return A(De)}),pl=fe(()=>{if(m.value!==Ue.View||!ae.value){const Ge=ql(r.value.time,r.value.utcOffset);return U(Ge)}const De=ql(r.value.time,xn(r.value.time)),G=Y.value.replaceWesternArabicDigitsToLocalizedDigits(ws(r.value.time));return`${U(De)} (UTC${G})`}),jt=fe(()=>{for(const De of Q.value)if(De.name===r.value.timeZone)return De.displayName;return""}),al=fe(()=>{const De=[];if(!r.value.pictures||!r.value.pictures.length)return De;for(const G of r.value.pictures)De.push({url:St(G)});return De}),ul=fe(()=>{const De=[];if(!r.value.pictures||!r.value.pictures.length)return De;for(const G of r.value.pictures)De.push(St(G));return De}),bl=fe(()=>{if(h?.type!==Xe.Template)return"";const De=r.value;if(De.scheduledFrequencyType===gl.Disabled.type)return P("Disabled");const G=(De.scheduledFrequency||"").split(","),Ge=[];for(const ct of G)ct&&Ge.push(parseInt(ct));return De.scheduledFrequencyType===gl.Weekly.type?Ge.length?P("format.misc.everyMultiDaysOfWeek",{days:_(Ge,H.value)}):P("Weekly"):De.scheduledFrequencyType===gl.Monthly.type?Ge.length?P("format.misc.everyMultiDaysOfMonth",{days:N(Ge)}):P("Monthly"):""}),Il=fe(()=>{if(h?.type!==Xe.Template)return"";const De=r.value;return De.scheduledStartDate?y(De.scheduledStartDate):P("No limit")}),q=fe(()=>{if(h?.type!==Xe.Template)return"";const De=r.value;return De.scheduledEndDate?y(De.scheduledEndDate):P("No limit")});function Kt(){return g.f7route.path==="/transaction/add"?{type:Xe.Transaction,mode:Ue.Add}:g.f7route.path==="/transaction/edit"?{type:Xe.Transaction,mode:Ue.Edit}:g.f7route.path==="/transaction/detail"?{type:Xe.Transaction,mode:Ue.View}:g.f7route.path==="/template/add"?{type:Xe.Template,mode:Ue.Add}:g.f7route.path==="/template/edit"?{type:Xe.Template,mode:Ue.Edit}:null}function Kl(De){return De>=1e8||De<=-1e8?"ebk-small-amount":De>=1e6||De<=-1e6?"ebk-normal-amount":"ebk-large-amount"}function on(De){for(const G of E.value)if(G.id===De)return G.name;return""}function sn(){if(!h){f("Parameter Invalid"),yt.value="Parameter Invalid";return}K.value=!0;const De=[Pt.loadAllAccounts({force:!1}),ze.loadAllCategories({force:!1}),Ae.loadAllTags({force:!1}),at.loadAllTemplates({force:!1,templateType:Rt.Normal.type})];if(h.type===Xe.Transaction)n.id&&(m.value===Ue.Edit?F.value=n.id:m.value===Ue.Add&&(V.value=n.id),De.push(We.getTransaction({transactionId:n.id,withPictures:m.value!==Ue.Add})));else if(h.type===Xe.Template){const Ge=Jt.createNewTransactionTemplate(r.value);Ge.name="",n.templateType&&(Ge.templateType=parseInt(n.templateType)),Ge.templateType===Rt.Schedule.type&&(Ge.scheduledFrequencyType=gl.Disabled.type,Ge.scheduledFrequency=""),r.value=Ge,n.id&&(m.value===Ue.Edit&&(F.value=n.id),De.push(at.getTemplate({templateId:n.id})))}const G=n.type?parseInt(n.type):0;(G&&G>=qe.Income&&G<=qe.Transfer||G===qe.ModifyBalance&&h.type===Xe.Transaction&&m.value===Ue.View)&&(r.value.type=G),m.value===Ue.Add&&(k.value=nn()),Promise.all(De).then(function(Ge){if(n.id&&!Ge[4]){h.type===Xe.Transaction?(f("Unable to retrieve transaction"),yt.value="Unable to retrieve transaction"):h.type===Xe.Template&&(f("Unable to retrieve template"),yt.value="Unable to retrieve template");return}let ct=null;if(h.type===Xe.Transaction?n.id&&Ge[4]instanceof En?ct=Ge[4]:n.templateId&&at.allTransactionTemplatesMap&&at.allTransactionTemplatesMap[Rt.Normal.type]?(ct=at.allTransactionTemplatesMap[Rt.Normal.type][n.templateId]??null,ct&&(D.value=ct.id)):n.noTransactionDraft!=="true"&&(ht.appSettings.autoSaveTransactionDraft==="enabled"||ht.appSettings.autoSaveTransactionDraft==="confirmation")&&We.transactionDraft&&(ct=En.ofDraft(We.transactionDraft)):h.type===Xe.Template&&Ge[4]instanceof Jt&&n.id&&(ct=Ge[4]),Cs(r.value,ct,se.value,Z.value,le.value,oe.value,M.value,O.value,{time:n.time?parseInt(n.time):void 0,type:G,categoryId:n.categoryId,accountId:n.accountId,destinationAccountId:n.destinationAccountId,amount:n.amount?parseInt(n.amount):void 0,destinationAmount:n.destinationAmount?parseInt(n.destinationAmount):void 0,tagIds:n.tagIds,comment:n.comment},h.type===Xe.Transaction&&(m.value===Ue.Edit||m.value===Ue.View)),h.type===Xe.Transaction&&n.id&&Ge[4]instanceof En)ct&&n.withTime&&n.withTime==="true"&&(r.value.time=ct.time,r.value.timeZone=ct.timeZone,r.value.utcOffset=ct.utcOffset),ct&&n.withGeoLocation&&n.withGeoLocation==="true"&&r.value.setGeoLocation(ct.geoLocation);else if(h.type===Xe.Template&&n.id&&Ge[4]instanceof Jt){const et=Ge[4];r.value.id=et.id,r.value instanceof Jt||(r.value=Jt.createNewTransactionTemplate(r.value)),r.value.fillFrom(et)}K.value=!1}).catch(Ge=>{sl.error("failed to load essential data for editing transaction",Ge),Ge.processed?K.value=!1:(yt.value=Ge,f(Ge.message||Ge))})}function rn(){const De=g.f7router;if(m.value===Ue.View)return;const G=_e.value;if(G){d(G);return}if(h?.type===Xe.Transaction&&(m.value===Ue.Add||m.value===Ue.Edit)){const Ge=function(){T.value=!0,Ke(()=>T.value),We.saveTransaction({transaction:r.value,defaultCurrency:x.value,isEdit:m.value===Ue.Edit,clientSessionId:k.value}).then(()=>{T.value=!1,Se(),m.value===Ue.Add?f("You have added a new transaction"):m.value===Ue.Edit&&f("You have saved this transaction"),m.value===Ue.Add&&n.noTransactionDraft!=="true"&&!D.value&&!V.value&&We.clearTransactionDraft(),Je.value=!0,De.back()}).catch(ct=>{T.value=!1,Se(),ct.error&&(ct.error.errorCode===Jl.TransactionCannotCreateInThisTime||ct.error.errorCode===Jl.TransactionCannotModifyInThisTime)?w("You have set this time range to prevent editing transactions. Would you like to change the editable transaction range to All?",()=>{T.value=!0,Ke(()=>T.value),wt.updateUserTransactionEditScope({transactionEditScope:Ts.All.type}).then(()=>{T.value=!1,Se(),f("Your editable transaction range has been set to All")}).catch(et=>{T.value=!1,Se(),et.processed||f(et.message||et)})}):ct.processed||f(ct.message||ct)})};r.value.sourceAmount===0?w("Are you sure you want to save this transaction with a zero amount?",()=>{Ge()}):Ge()}else h?.type===Xe.Template&&(m.value===Ue.Add||m.value===Ue.Edit)&&(T.value=!0,Ke(()=>T.value),at.saveTemplateContent({template:r.value,isEdit:m.value===Ue.Edit,clientSessionId:k.value}).then(()=>{T.value=!1,Se(),m.value===Ue.Add?f("You have added a new template"):m.value===Ue.Edit&&f("You have saved this template"),Je.value=!0,De.back()}).catch(Ge=>{T.value=!1,Se(),Ge.processed||f(Ge.message||Ge)}))}function un(De){m.value===Ue.View||!$t||navigator.clipboard.readText().then(G=>{if(!G)return;const Ge=v(G);if(Number.isNaN(Ge)||!Number.isFinite(Ge)){f("Cannot parse amount from clipboard");return}if(Ge<yl||Ge>_l){f("Numeric Overflow");return}De==="sourceAmount"?r.value.sourceAmount=Ge:De==="destinationAmount"&&(r.value.destinationAmount=Ge)}).catch(G=>{sl.error("failed to read clipboard text",G),f("Unable to read clipboard text")})}function Zl(De){if(!$){sl.warn("this browser does not support geo location"),De&&f("Unable to retrieve current position");return}navigator.geolocation.getCurrentPosition(function(G){if(!G||!G.coords){sl.error("current position is null"),z.value=_n.Error,De&&f("Unable to retrieve current position");return}z.value=_n.Success,r.value.setLatitudeAndLongitude(G.coords.latitude,G.coords.longitude)},function(G){sl.error("cannot retrieve current position",G),z.value=_n.Error,De&&f("Unable to retrieve current position")}),z.value=_n.Getting}function In(){z.value=null,r.value.removeGeoLocation()}function zl(De){m.value===Ue.View?ae.value=!ae.value:(ce.value=De,Nt.value=!0)}function de(){!Be.value||T.value||lt.value?.click()}function ie(De){if(!De||!De.target)return;const G=De.target;if(!G.files||!G.files.length)return;const Ge=G.files[0];G.value="",b.value=!0,T.value=!0,We.uploadTransactionPicture({pictureFile:Ge}).then(ct=>{r.value.addPicture(ct),b.value=!1,T.value=!1}).catch(ct=>{b.value=!1,T.value=!1,ct.processed||f(ct.message||ct)})}function Ze(De){if(m.value!==Ue.Add&&m.value!==Ue.Edit&&r.value.pictures&&r.value.pictures.length){Qe.value?.open();return}w("Are you sure you want to remove this transaction picture?",()=>{ue.value=De.pictureId,T.value=!0,We.removeUnusedTransactionPicture({pictureInfo:De}).then(G=>{G&&r.value.removePicture(De),ue.value="",T.value=!1}).catch(G=>{G.error&&G.error.errorCode===Jl.TransactionPictureNotFound?r.value.removePicture(De):G.processed||f(G.message||G),ue.value="",T.value=!1})})}function $e(De,G){g.f7router.navigate(`/transaction/add?id=${r.value.id}&type=${r.value.type}&withTime=${De??!1}&withGeoLocation=${G??!1}`)}function ut(){I(g.f7router,yt),ht.appSettings.autoGetCurrentGeoLocation&&m.value===Ue.Add&&!z.value&&!r.value.geoLocation&&Zl(!1)}function cl(){if(Je.value||h?.type!==Xe.Transaction||m.value!==Ue.Add||n.noTransactionDraft==="true"||D.value||V.value)return;const De=n.amount?parseInt(n.amount):void 0;ht.appSettings.autoSaveTransactionDraft==="confirmation"?We.isTransactionDraftModified(r.value,De,n.categoryId,n.accountId,n.tagIds,ee.value)?w("Do you want to save this transaction draft?",()=>{We.saveTransactionDraft(r.value,De,n.categoryId,n.accountId,n.tagIds,ee.value)},()=>{We.clearTransactionDraft()}):We.clearTransactionDraft():ht.appSettings.autoSaveTransactionDraft==="enabled"&&We.saveTransactionDraft(r.value,De,n.categoryId,n.accountId,n.tagIds,ee.value)}return sn(),(De,G)=>{const Ge=s("f7-nav-left"),ct=s("f7-nav-title"),et=s("f7-link"),Zt=s("f7-nav-right"),Fl=s("f7-navbar"),Yl=s("f7-button"),Fn=s("f7-segmented"),Xt=s("f7-block"),Vl=s("f7-list-input"),At=s("f7-list-item"),Pl=s("f7-chip"),Xl=s("f7-list"),Ul=s("number-pad-sheet"),wl=s("f7-icon"),Nl=s("tree-view-selection-sheet"),cn=s("two-column-list-item-selection-sheet"),Vn=s("date-time-selection-sheet"),Pn=s("schedule-frequency-sheet"),dn=s("date-selection-sheet"),fn=s("list-item-selection-popup"),pn=s("map-sheet"),Un=s("transaction-tag-selection-sheet"),mn=s("f7-preloader"),ge=s("f7-actions-button"),Ve=s("f7-actions-group"),Bt=s("f7-actions"),Lt=s("f7-toolbar"),ta=s("f7-photo-browser"),Na=s("f7-page"),Ba=Kn("textarea-auto-size");return a(),i(Na,{"onPage:afterin":ut,"onPage:beforeout":cl},{default:l(()=>[t(Fl,null,{default:l(()=>[t(Ge,{"back-link":e(P)("Back")},null,8,["back-link"]),t(ct,{title:e(P)(e(Me))},null,8,["title"]),e(m)!==e(Ue).View||e(r).type!==e(qe).ModifyBalance?(a(),i(Zt,{key:0,class:"navbar-compact-icons"},{default:l(()=>[t(et,{"icon-f7":"ellipsis",onClick:G[0]||(G[0]=we=>Vt.value=!0)}),e(m)!==e(Ue).View?(a(),i(et,{key:0,"icon-f7":"checkmark_alt",class:R({disabled:e(Ne)||e(T)}),onClick:rn},null,8,["class"])):u("",!0)]),_:1})):u("",!0)]),_:1}),t(Xt,{class:"no-margin-top margin-bottom"},{default:l(()=>[t(Fn,{strong:"",round:"",class:R({readonly:e(h)?.type===e(Xe).Transaction&&e(m)!==e(Ue).Add})},{default:l(()=>[e(r).type!==e(qe).ModifyBalance?(a(),i(Yl,{key:0,round:"",text:e(P)("Expense"),active:e(r).type===e(qe).Expense,disabled:e(h)?.type===e(Xe).Transaction&&e(m)!==e(Ue).Add&&e(r).type!==e(qe).Expense,onClick:G[1]||(G[1]=we=>e(r).type=e(qe).Expense)},null,8,["text","active","disabled"])):u("",!0),e(r).type!==e(qe).ModifyBalance?(a(),i(Yl,{key:1,round:"",text:e(P)("Income"),active:e(r).type===e(qe).Income,disabled:e(h)?.type===e(Xe).Transaction&&e(m)!==e(Ue).Add&&e(r).type!==e(qe).Income,onClick:G[2]||(G[2]=we=>e(r).type=e(qe).Income)},null,8,["text","active","disabled"])):u("",!0),e(r).type!==e(qe).ModifyBalance?(a(),i(Yl,{key:2,round:"",text:e(P)("Transfer"),active:e(r).type===e(qe).Transfer,disabled:e(h)?.type===e(Xe).Transaction&&e(m)!==e(Ue).Add&&e(r).type!==e(qe).Transfer,onClick:G[3]||(G[3]=we=>e(r).type=e(qe).Transfer)},null,8,["text","active","disabled"])):u("",!0),e(h)?.type===e(Xe).Transaction&&e(r).type===e(qe).ModifyBalance?(a(),i(Yl,{key:3,round:"",text:e(P)("Modify Balance"),active:e(r).type===e(qe).ModifyBalance},null,8,["text","active"])):u("",!0)]),_:1},8,["class"])]),_:1}),e(K)?(a(),i(Xl,{key:0,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[e(h)?.type===e(Xe).Template?(a(),i(Vl,{key:0,label:"Template Name",placeholder:"Template Name"})):u("",!0),t(At,{class:"transaction-edit-amount ebk-large-amount",header:"Expense Amount",title:"0.00"}),e(r).type!==e(qe).ModifyBalance?(a(),i(At,{key:1,class:"list-item-with-header-and-title list-item-title-hide-overflow",header:"Category",title:"Category Names"})):u("",!0),t(At,{class:"list-item-with-header-and-title",header:"Account",title:"Account Name"}),e(h)?.type===e(Xe).Transaction?(a(),i(At,{key:2,class:"list-item-with-header-and-title",header:"Transaction Time",title:"YYYY/MM/DD HH:mm:ss"})):u("",!0),e(h)?.type===e(Xe).Template&&e(r)instanceof e(Jt)&&e(r).templateType===e(Rt).Schedule.type?(a(),i(At,{key:3,class:"list-item-with-header-and-title",header:"Scheduled Transaction Frequency",title:"Every XXXXX"})):u("",!0),e(h)?.type===e(Xe).Transaction||e(h)?.type===e(Xe).Template&&e(r)instanceof e(Jt)&&e(r).templateType===e(Rt).Schedule.type?(a(),i(At,{key:4,class:"list-item-with-header-and-title list-item-title-hide-overflow list-item-no-item-after",header:"Transaction Timezone",title:"(UTC XX:XX) System Default",link:"#","no-chevron":e(m)===e(Ue).View},null,8,["no-chevron"])):u("",!0),e(h)?.type===e(Xe).Transaction?(a(),i(At,{key:5,class:"list-item-with-header-and-title list-item-title-hide-overflow",header:"Geographic Location",title:"No Location"})):u("",!0),t(At,{header:"Tags"},{footer:l(()=>[t(Xt,{class:"margin-top-half no-padding no-margin"},{default:l(()=>[t(Pl,{class:"transaction-edit-tag",text:"None"})]),_:1})]),_:1}),t(Vl,{type:"textarea",label:"Description",placeholder:"Your transaction description (optional)"})]),_:1})):e(K)?u("",!0):(a(),i(Xl,{key:1,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[e(h)?.type===e(Xe).Template&&e(r)instanceof e(Jt)?(a(),i(Vl,{key:0,type:"text","clear-button":"",label:e(P)("Template Name"),placeholder:e(P)("Template Name"),value:e(r).name,"onUpdate:value":G[4]||(G[4]=we=>e(r).name=we)},null,8,["label","placeholder","value"])):u("",!0),t(At,{class:R(["transaction-edit-amount",kl.value]),link:"#","no-chevron":"",header:e(Ye),title:e(bt)(e(r).sourceAmount,e(r).hideAmount,e(Fe)),onClick:G[7]||(G[7]=we=>ll.value=!0)},{default:l(()=>[t(Ul,{"min-value":e(yl),"max-value":e(_l),currency:e(Fe),show:ll.value,"onUpdate:show":G[5]||(G[5]=we=>ll.value=we),modelValue:e(r).sourceAmount,"onUpdate:modelValue":G[6]||(G[6]=we=>e(r).sourceAmount=we)},null,8,["min-value","max-value","currency","show","modelValue"])]),_:1},8,["class","header","title"]),e(r).type===e(qe).Transfer?(a(),i(At,{key:1,class:R(["transaction-edit-amount text-color-primary",xt.value]),link:"#","no-chevron":"",header:e(be),title:e(bt)(e(r).destinationAmount,e(r).hideAmount,e(Te)),onClick:G[10]||(G[10]=we=>nl.value=!0)},{default:l(()=>[t(Ul,{"min-value":e(yl),"max-value":e(_l),currency:e(Te),show:nl.value,"onUpdate:show":G[8]||(G[8]=we=>nl.value=we),modelValue:e(r).destinationAmount,"onUpdate:modelValue":G[9]||(G[9]=we=>e(r).destinationAmount=we)},null,8,["min-value","max-value","currency","show","modelValue"])]),_:1},8,["class","header","title"])):u("",!0),e(r).type===e(qe).Expense?(a(),i(At,{class:R(["list-item-with-header-and-title list-item-title-hide-overflow",{disabled:!e(ve),readonly:e(m)===e(Ue).View}]),key:"expenseCategorySelection",link:"#","no-chevron":"",header:e(P)("Category"),onClick:G[13]||(G[13]=we=>Ct.value=!0)},{title:l(()=>[e(ve)?(a(),C("div",bp,[o("span",null,c(e(Mn)(e(r).expenseCategoryId,e(se)[e(_t).Expense])),1),t(wl,{class:"category-separate-icon icon-with-direction",f7:"chevron_right"}),o("span",null,c(e(Ln)(e(r).expenseCategoryId,e(se)[e(_t).Expense])),1)])):e(ve)?u("",!0):(a(),C("div",wp,[o("span",null,c(e(P)("None")),1)]))]),default:l(()=>[t(Nl,{"primary-key-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden","enable-filter":!0,"filter-placeholder":e(P)("Find category"),"filter-no-items-text":e(P)("No available category"),items:e(se)[e(_t).Expense],show:Ct.value,"onUpdate:show":G[11]||(G[11]=we=>Ct.value=we),modelValue:e(r).expenseCategoryId,"onUpdate:modelValue":G[12]||(G[12]=we=>e(r).expenseCategoryId=we)},null,8,["filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header"])):u("",!0),e(r).type===e(qe).Income?(a(),i(At,{class:R(["list-item-with-header-and-title list-item-title-hide-overflow",{disabled:!e(he),readonly:e(m)===e(Ue).View}]),key:"incomeCategorySelection",link:"#","no-chevron":"",header:e(P)("Category"),onClick:G[16]||(G[16]=we=>Ct.value=!0)},{title:l(()=>[e(he)?(a(),C("div",Cp,[o("span",null,c(e(Mn)(e(r).incomeCategoryId,e(se)[e(_t).Income])),1),t(wl,{class:"category-separate-icon icon-with-direction",f7:"chevron_right"}),o("span",null,c(e(Ln)(e(r).incomeCategoryId,e(se)[e(_t).Income])),1)])):e(he)?u("",!0):(a(),C("div",Tp,[o("span",null,c(e(P)("None")),1)]))]),default:l(()=>[t(Nl,{"primary-key-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden","enable-filter":!0,"filter-placeholder":e(P)("Find category"),"filter-no-items-text":e(P)("No available category"),items:e(se)[e(_t).Income],show:Ct.value,"onUpdate:show":G[14]||(G[14]=we=>Ct.value=we),modelValue:e(r).incomeCategoryId,"onUpdate:modelValue":G[15]||(G[15]=we=>e(r).incomeCategoryId=we)},null,8,["filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header"])):u("",!0),e(r).type===e(qe).Transfer?(a(),i(At,{class:R(["list-item-with-header-and-title list-item-title-hide-overflow",{disabled:!e(re),readonly:e(m)===e(Ue).View}]),key:"transferCategorySelection",link:"#","no-chevron":"",header:e(P)("Category"),onClick:G[19]||(G[19]=we=>Ct.value=!0)},{title:l(()=>[e(re)?(a(),C("div",Sp,[o("span",null,c(e(Mn)(e(r).transferCategoryId,e(se)[e(_t).Transfer])),1),t(wl,{class:"category-separate-icon icon-with-direction",f7:"chevron_right"}),o("span",null,c(e(Ln)(e(r).transferCategoryId,e(se)[e(_t).Transfer])),1)])):e(re)?u("",!0):(a(),C("div",xp,[o("span",null,c(e(P)("None")),1)]))]),default:l(()=>[t(Nl,{"primary-key-field":"id","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"category","primary-color-field":"color","primary-hidden-field":"hidden","primary-sub-items-field":"subCategories","secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"category","secondary-color-field":"color","secondary-hidden-field":"hidden","enable-filter":!0,"filter-placeholder":e(P)("Find category"),"filter-no-items-text":e(P)("No available category"),items:e(se)[e(_t).Transfer],show:Ct.value,"onUpdate:show":G[17]||(G[17]=we=>Ct.value=we),modelValue:e(r).transferCategoryId,"onUpdate:modelValue":G[18]||(G[18]=we=>e(r).transferCategoryId=we)},null,8,["filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header"])):u("",!0),t(At,{class:R(["list-item-with-header-and-title",{disabled:!e(le).length||e(m)===e(Ue).Edit&&e(r).type===e(qe).ModifyBalance,readonly:e(m)===e(Ue).View}]),link:"#","no-chevron":"",header:e(P)(e(Ie)),title:e(L),onClick:G[22]||(G[22]=we=>j.value=!0)},{default:l(()=>[t(cn,{"primary-key-field":"id","primary-value-field":"category","primary-title-field":"name","primary-footer-field":"displayBalance","primary-icon-field":"icon","primary-icon-type":"account","primary-sub-items-field":"accounts","primary-title-i18n":!0,"secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-footer-field":"displayBalance","secondary-icon-field":"icon","secondary-icon-type":"account","secondary-color-field":"color","enable-filter":!0,"filter-placeholder":e(P)("Find account"),"filter-no-items-text":e(P)("No available account"),items:e(ne),show:j.value,"onUpdate:show":G[20]||(G[20]=we=>j.value=we),modelValue:e(r).sourceAccountId,"onUpdate:modelValue":G[21]||(G[21]=we=>e(r).sourceAccountId=we)},null,8,["filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header","title"]),e(r).type===e(qe).Transfer?(a(),i(At,{key:5,class:R(["list-item-with-header-and-title",{disabled:!e(le).length,readonly:e(m)===e(Ue).View}]),link:"#","no-chevron":"",header:e(P)("Destination Account"),title:e(xe),onClick:G[25]||(G[25]=we=>Dt.value=!0)},{default:l(()=>[t(cn,{"primary-key-field":"id","primary-value-field":"category","primary-title-field":"name","primary-footer-field":"displayBalance","primary-icon-field":"icon","primary-icon-type":"account","primary-sub-items-field":"accounts","primary-title-i18n":!0,"secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-footer-field":"displayBalance","secondary-icon-field":"icon","secondary-icon-type":"account","secondary-color-field":"color","enable-filter":!0,"filter-placeholder":e(P)("Find account"),"filter-no-items-text":e(P)("No available account"),items:e(ne),show:Dt.value,"onUpdate:show":G[23]||(G[23]=we=>Dt.value=we),modelValue:e(r).destinationAccountId,"onUpdate:modelValue":G[24]||(G[24]=we=>e(r).destinationAccountId=we)},null,8,["filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header","title"])):u("",!0),e(h)?.type===e(Xe).Transaction?(a(),i(At,{key:6,class:R(["transaction-edit-datetime list-item-with-header-and-title",{disabled:e(m)===e(Ue).Edit&&e(r).type===e(qe).ModifyBalance,readonly:e(m)===e(Ue).View&&e(r).utcOffset===e(te)}]),link:"#","no-chevron":""},{header:l(()=>[o("div",{class:"transaction-edit-datetime-header",onClick:G[26]||(G[26]=we=>zl("time"))},c(e(P)("Transaction Time")),1)]),title:l(()=>[o("div",Ap,[o("div",{onClick:G[27]||(G[27]=we=>zl("date"))},c(Dl.value),1),G[67]||(G[67]=X("",-1)),o("div",{class:"transaction-edit-datetime-time",onClick:G[28]||(G[28]=we=>zl("time"))},c(pl.value),1)])]),default:l(()=>[t(Vn,{"init-mode":ce.value,"timezone-utc-offset":e(r).utcOffset,"model-value":e(r).time,show:Nt.value,"onUpdate:show":G[29]||(G[29]=we=>Nt.value=we),"onUpdate:modelValue":e(me)},null,8,["init-mode","timezone-utc-offset","model-value","show","onUpdate:modelValue"])]),_:1},8,["class"])):u("",!0),e(h)?.type===e(Xe).Template&&e(r)instanceof e(Jt)&&e(r).templateType===e(Rt).Schedule.type?(a(),i(At,{key:7,class:R(["list-item-with-header-and-title",{readonly:e(m)===e(Ue).View}]),link:"#","no-chevron":"",header:e(P)("Scheduled Transaction Frequency"),title:bl.value,onClick:G[33]||(G[33]=we=>It.value=!0)},{default:l(()=>[t(Pn,{show:It.value,"onUpdate:show":G[30]||(G[30]=we=>It.value=we),type:e(r).scheduledFrequencyType,"onUpdate:type":G[31]||(G[31]=we=>e(r).scheduledFrequencyType=we),modelValue:e(r).scheduledFrequency,"onUpdate:modelValue":G[32]||(G[32]=we=>e(r).scheduledFrequency=we)},null,8,["show","type","modelValue"])]),_:1},8,["class","header","title"])):u("",!0),e(h)?.type===e(Xe).Template&&e(r)instanceof e(Jt)&&e(r).templateType===e(Rt).Schedule.type?(a(),i(At,{key:8,class:R(["transaction-edit-datetime list-item-with-header-and-title",{readonly:e(m)===e(Ue).View}]),link:"#","no-chevron":"",header:e(P)("Start Date"),title:Il.value,onClick:G[36]||(G[36]=we=>Gt.value=!0)},{default:l(()=>[t(dn,{show:Gt.value,"onUpdate:show":G[34]||(G[34]=we=>Gt.value=we),modelValue:e(r).scheduledStartDate,"onUpdate:modelValue":G[35]||(G[35]=we=>e(r).scheduledStartDate=we)},null,8,["show","modelValue"])]),_:1},8,["class","header","title"])):u("",!0),e(h)?.type===e(Xe).Template&&e(r)instanceof e(Jt)&&e(r).templateType===e(Rt).Schedule.type?(a(),i(At,{key:9,class:R(["transaction-edit-datetime list-item-with-header-and-title",{readonly:e(m)===e(Ue).View}]),link:"#","no-chevron":"",header:e(P)("End Date"),title:q.value,onClick:G[39]||(G[39]=we=>Ht.value=!0)},{default:l(()=>[t(dn,{show:Ht.value,"onUpdate:show":G[37]||(G[37]=we=>Ht.value=we),modelValue:e(r).scheduledEndDate,"onUpdate:modelValue":G[38]||(G[38]=we=>e(r).scheduledEndDate=we)},null,8,["show","modelValue"])]),_:1},8,["class","header","title"])):u("",!0),e(h)?.type===e(Xe).Transaction||e(h)?.type===e(Xe).Template&&e(r)instanceof e(Jt)&&e(r).templateType===e(Rt).Schedule.type?(a(),i(At,{key:10,"no-chevron":e(m)===e(Ue).View,link:"#",class:R(["list-item-with-header-and-title list-item-title-hide-overflow list-item-no-item-after",{disabled:e(m)===e(Ue).Edit&&e(r).type===e(qe).ModifyBalance,readonly:e(m)===e(Ue).View}]),header:e(P)("Transaction Timezone"),onClick:G[41]||(G[41]=we=>Ee.value=!0)},{title:l(()=>[t(Xt,{class:"list-item-custom-title no-padding no-margin"},{default:l(()=>[o("span",null,c(`(${e(Pe)})`),1),e(r).timeZone||e(r).timeZone===""?(a(),C("span",$p,c(jt.value),1)):!e(r).timeZone&&e(r).timeZone!==""?(a(),C("span",Dp,c(e(pe)),1)):u("",!0)]),_:1})]),default:l(()=>[t(fn,{"value-type":"item","key-field":"name","value-field":"name","title-field":"displayNameWithUtcOffset",title:e(P)("Transaction Timezone"),"enable-filter":!0,"filter-placeholder":e(P)("Timezone"),"filter-no-items-text":e(P)("No results"),items:e(Q),"model-value":e(r).timeZone,show:Ee.value,"onUpdate:show":G[40]||(G[40]=we=>Ee.value=we),"onUpdate:modelValue":e(rt)},null,8,["title","filter-placeholder","filter-no-items-text","items","model-value","show","onUpdate:modelValue"])]),_:1},8,["no-chevron","class","header"])):u("",!0),e(h)?.type===e(Xe).Transaction?(a(),i(At,{key:11,link:"#","no-chevron":"",class:R(["list-item-with-header-and-title list-item-title-hide-overflow",{readonly:e(m)===e(Ue).View&&!e(r).geoLocation}]),header:e(P)("Geographic Location"),onClick:G[45]||(G[45]=we=>it.value=!0)},{title:l(()=>[t(Xt,{class:"list-item-custom-title no-padding no-margin"},{default:l(()=>[e(r).geoLocation?(a(),C("span",Ip,c(`(${e(Ss)(e(r).geoLocation,e(W))})`),1)):e(r).geoLocation?u("",!0):(a(),C("span",Fp,c(e(B)),1))]),_:1})]),default:l(()=>[t(pn,{readonly:e(m)===e(Ue).View,modelValue:e(r).geoLocation,"onUpdate:modelValue":G[42]||(G[42]=we=>e(r).geoLocation=we),"set-geo-location-by-click-map":e(J),"onUpdate:setGeoLocationByClickMap":G[43]||(G[43]=we=>kt(J)?J.value=we:null),show:Ut.value,"onUpdate:show":G[44]||(G[44]=we=>Ut.value=we)},null,8,["readonly","modelValue","set-geo-location-by-click-map","show"])]),_:1},8,["class","header"])):u("",!0),t(At,{link:"#","no-chevron":"",class:R({readonly:e(m)===e(Ue).View}),header:e(P)("Tags"),onClick:G[48]||(G[48]=we=>ye.value=!0)},{footer:l(()=>[e(r).tagIds&&e(r).tagIds.length?(a(),i(Xt,{key:0,class:"margin-top-half no-padding no-margin"},{default:l(()=>[(a(!0),C(ke,null,Ce(e(r).tagIds,we=>(a(),i(Pl,{"media-text-color":"var(--f7-chip-text-color)",class:"transaction-edit-tag",text:on(we),key:we},{media:l(()=>[t(wl,{f7:"number"})]),_:1},8,["text"]))),128))]),_:1})):!e(r).tagIds||!e(r).tagIds.length?(a(),i(Xt,{key:1,class:"margin-top-half no-padding no-margin"},{default:l(()=>[t(Pl,{class:"transaction-edit-tag",text:e(P)("None")},null,8,["text"])]),_:1})):u("",!0)]),default:l(()=>[t(Un,{"allow-add-new-tag":!0,"enable-filter":!0,show:ye.value,"onUpdate:show":G[46]||(G[46]=we=>ye.value=we),modelValue:e(r).tagIds,"onUpdate:modelValue":G[47]||(G[47]=we=>e(r).tagIds=we)},null,8,["show","modelValue"])]),_:1},8,["class","header"]),Re.value||e(r).pictures&&e(r).pictures.length>0?(a(),i(At,{key:12,link:"#","no-chevron":"",header:e(P)("Pictures")},{footer:l(()=>[t(Xt,{class:R(["margin-top-half no-padding no-margin",{readonly:e(T)||e(b)||ue.value}])},{default:l(()=>[o("swiper-container",Vp,[(a(!0),C(ke,null,Ce(e(r).pictures,(we,Ea)=>(a(),C("swiper-slide",{class:"transaction-picture-container",key:Ea,onClick:jy=>Ze(we)},[o("div",Up,[e(m)===e(Ue).Add||e(m)===e(Ue).Edit?(a(),C("div",Np,[we.pictureId!==ue.value?(a(),i(wl,{key:0,class:"picture-control-icon picture-remove-icon",f7:"trash"})):u("",!0),we.pictureId===ue.value?(a(),i(mn,{key:1,color:"white",size:28})):u("",!0)])):u("",!0),o("img",{alt:"picture",src:e(St)(we)},null,8,Bp)])],8,Pp))),128)),e(Be)?(a(),C("swiper-slide",{key:0,onClick:de},[o("div",Ep,[e(b)?u("",!0):(a(),i(wl,{key:0,class:"picture-control-icon",f7:"plus"})),e(b)?(a(),i(mn,{key:1,size:28})):u("",!0)])])):u("",!0)])]),_:1},8,["class"])]),_:1},8,["header"])):u("",!0),dt(t(Vl,{type:"textarea",class:R(["transaction-edit-comment",{readonly:e(m)===e(Ue).View}]),style:{height:"auto"},label:e(P)("Description"),placeholder:e(m)!==e(Ue).View?e(P)("Your transaction description (optional)"):"",value:e(r).comment,"onUpdate:value":G[49]||(G[49]=we=>e(r).comment=we)},null,8,["class","label","placeholder","value"]),[[Ba]])]),_:1})),t(Bt,{"close-by-outside-click":"","close-on-escape":"",opened:it.value,"onActions:closed":G[52]||(G[52]=we=>it.value=!1)},{default:l(()=>[t(Ve,null,{default:l(()=>[e(m)!==e(Ue).View?(a(),i(ge,{key:0,onClick:G[50]||(G[50]=we=>Zl(!0))},{default:l(()=>[X(c(e(P)("Update Geographic Location")),1)]),_:1})):u("",!0),e(m)!==e(Ue).View?(a(),i(ge,{key:1,onClick:In},{default:l(()=>[X(c(e(P)("Clear Geographic Location")),1)]),_:1})):u("",!0)]),_:1}),e(xs)()?(a(),i(Ve,{key:0},{default:l(()=>[t(ge,{class:R({disabled:!e(r).geoLocation}),onClick:G[51]||(G[51]=we=>{J.value=!1,Ut.value=!0})},{default:l(()=>[X(c(e(P)("Show on the map")),1)]),_:1},8,["class"])]),_:1})):u("",!0),t(Ve,null,{default:l(()=>[t(ge,{bold:"",close:""},{default:l(()=>[X(c(e(P)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(Bt,{"close-by-outside-click":"","close-on-escape":"",opened:Vt.value,"onActions:closed":G[65]||(G[65]=we=>Vt.value=!1)},{default:l(()=>[e(m)!==e(Ue).View&&e(r).type===e(qe).Transfer?(a(),i(Ve,{key:0},{default:l(()=>[t(ge,{onClick:G[53]||(G[53]=we=>e(ft)(!0,!1))},{default:l(()=>[X(c(e(P)("Swap Account")),1)]),_:1}),t(ge,{onClick:G[54]||(G[54]=we=>e(ft)(!1,!0))},{default:l(()=>[X(c(e(P)("Swap Amount")),1)]),_:1}),t(ge,{onClick:G[55]||(G[55]=we=>e(ft)(!0,!0))},{default:l(()=>[X(c(e(P)("Swap Account and Amount")),1)]),_:1})]),_:1})):u("",!0),e(m)!==e(Ue).View?(a(),i(Ve,{key:1},{default:l(()=>[$t&&!e(An)()?(a(),i(ge,{key:0,onClick:G[56]||(G[56]=we=>un("sourceAmount"))},{default:l(()=>[X(c(e(P)("Paste Amount")),1)]),_:1})):u("",!0),$t&&!e(An)()&&e(r).type===e(qe).Transfer?(a(),i(ge,{key:1,onClick:G[57]||(G[57]=we=>un("destinationAmount"))},{default:l(()=>[X(c(e(P)("Paste Destination Amount")),1)]),_:1})):u("",!0),e(r).hideAmount?(a(),i(ge,{key:2,onClick:G[58]||(G[58]=we=>e(r).hideAmount=!1)},{default:l(()=>[X(c(e(P)("Show Amount")),1)]),_:1})):u("",!0),e(r).hideAmount?u("",!0):(a(),i(ge,{key:3,onClick:G[59]||(G[59]=we=>e(r).hideAmount=!0)},{default:l(()=>[X(c(e(P)("Hide Amount")),1)]),_:1}))]),_:1})):u("",!0),e(h)?.type===e(Xe).Transaction&&(e(m)===e(Ue).Add||e(m)===e(Ue).Edit)&&e(As)()&&!Re.value?(a(),i(Ve,{key:2},{default:l(()=>[t(ge,{onClick:G[60]||(G[60]=we=>Re.value=!0)},{default:l(()=>[X(c(e(P)("Add Picture")),1)]),_:1})]),_:1})):u("",!0),e(h)?.type===e(Xe).Transaction&&e(m)===e(Ue).View&&e(r).type!==e(qe).ModifyBalance?(a(),i(Ve,{key:3},{default:l(()=>[t(ge,{onClick:G[61]||(G[61]=we=>$e(!1,!1))},{default:l(()=>[X(c(e(P)("Duplicate")),1)]),_:1}),t(ge,{onClick:G[62]||(G[62]=we=>$e(!0,!1))},{default:l(()=>[X(c(e(P)("Duplicate (With Time)")),1)]),_:1}),e(r).geoLocation?(a(),i(ge,{key:0,onClick:G[63]||(G[63]=we=>$e(!1,!0))},{default:l(()=>[X(c(e(P)("Duplicate (With Geographic Location)")),1)]),_:1})):u("",!0),e(r).geoLocation?(a(),i(ge,{key:1,onClick:G[64]||(G[64]=we=>$e(!0,!0))},{default:l(()=>[X(c(e(P)("Duplicate (With Time and Geographic Location)")),1)]),_:1})):u("",!0)]),_:1})):u("",!0),t(Ve,null,{default:l(()=>[t(ge,{bold:"",close:""},{default:l(()=>[X(c(e(P)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),e(m)!==e(Ue).View?(a(),i(Lt,{key:2,tabbar:"",bottom:""},{default:l(()=>[t(et,{class:R({disabled:e(Ne)||e(T)}),onClick:rn},{default:l(()=>[o("span",Mp,c(e(P)(e(Le))),1)]),_:1},8,["class"])]),_:1})):u("",!0),t(ta,{ref_key:"pictureBrowser",ref:Qe,type:"popup","navbar-of-text":"/","navbar-show-count":!0,exposition:!1,photos:al.value,thumbs:ul.value},null,8,["photos","thumbs"]),o("input",{ref_key:"pictureInput",ref:lt,type:"file",style:{display:"none"},accept:`${e(Ca)};capture=camera`,onChange:G[66]||(G[66]=we=>ie(we))},null,40,Lp)]),_:1})}}}),Rp=Oe({__name:"AmountFilterPage",props:{f7route:{},f7router:{}},setup(p){const g=p,n=S(""),h=S(0),P=S(0),N=S(!1),_=S(!1),{tt:A,formatAmountToLocalizedNumeralsWithCurrency:U}=He(),{showToast:y}=nt(),v=Ll(),d=fe(()=>I(n.value)),w=fe(()=>n.value===vl.GreaterThan.type||n.value===vl.Between.type||n.value===vl.NotBetween.type?A("Minimum Amount"):n.value===vl.LessThan.type?A("Maximum Amount"):A("Amount")),f=fe(()=>n.value===vl.Between.type||n.value===vl.NotBetween.type?A("Maximum Amount"):A("Amount"));function I(F){const D=vl.valueOf(F);return D?D.paramCount:0}function m(){const F=g.f7route.query;n.value=F.type||"";let D=0,V=0;if(Wn(F.value))try{const k=F.value.split(":"),K=I(k[0]);k.length===2&&K===1?D=parseInt(k[1]):k.length===3&&K===2&&(D=parseInt(k[1]),V=parseInt(k[2]))}catch(k){sl.warn("cannot parse amount from filter value, original value is "+F.value,k)}h.value=D,P.value=V}function $(){const F=g.f7router;let D=n.value;if(d.value===1)D+=":"+h.value;else if(d.value===2){if(P.value<h.value){y("Incorrect amount range");return}D+=":"+h.value+":"+P.value}else{F.back();return}v.updateTransactionListFilter({amountFilter:D})&&v.updateTransactionListInvalidState(!0),F.back()}return m(),(F,D)=>{const V=s("f7-nav-left"),k=s("f7-nav-title"),K=s("f7-link"),T=s("f7-nav-right"),b=s("f7-navbar"),z=s("number-pad-sheet"),J=s("f7-list-item"),r=s("f7-list"),Y=s("f7-icon"),te=s("f7-page");return a(),i(te,null,{default:l(()=>[t(b,null,{default:l(()=>[t(V,{"back-link":e(A)("Back")},null,8,["back-link"]),t(k,{title:e(A)("Filter Amount")},null,8,["title"]),t(T,null,{default:l(()=>[t(K,{"icon-f7":"checkmark_alt",onClick:$})]),_:1})]),_:1}),t(r,{form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(J,{class:"ebk-small-amount",link:"#","no-chevron":"",header:w.value,title:e(U)(h.value),onClick:D[2]||(D[2]=x=>N.value=!0)},{default:l(()=>[t(z,{"min-value":e(yl),"max-value":e(_l),show:N.value,"onUpdate:show":D[0]||(D[0]=x=>N.value=x),modelValue:h.value,"onUpdate:modelValue":D[1]||(D[1]=x=>h.value=x)},null,8,["min-value","max-value","show","modelValue"])]),_:1},8,["header","title"]),d.value===2?(a(),i(J,{key:0,class:"ebk-small-amount",link:"#","no-chevron":"",header:f.value,title:e(U)(P.value),onClick:D[5]||(D[5]=x=>_.value=!0)},{default:l(()=>[t(z,{"min-value":e(yl),"max-value":e(_l),show:_.value,"onUpdate:show":D[3]||(D[3]=x=>_.value=x),modelValue:P.value,"onUpdate:modelValue":D[4]||(D[4]=x=>P.value=x)},null,8,["min-value","max-value","show","modelValue"])]),_:1},8,["header","title"])):u("",!0)]),_:1}),t(r,{form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[(a(!0),C(ke,null,Ce(e(vl).values(),x=>(a(),i(J,{key:x.type,title:e(A)(x.name),onClick:O=>n.value=x.type},{after:l(()=>[n.value===x.type?(a(),i(Y,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1})}}}),Op={class:"no-margin"},zp={key:0,class:"card-header-content"},Yp={key:1,class:"card-header-content"},Hp={class:"no-margin"},qp={key:0,class:"net-assets"},Wp={key:1,class:"net-assets"},Gp={class:"no-margin"},jp={key:0,class:"account-overview-info"},Kp={key:1,class:"account-overview-info"},Zp={key:0,class:"skeleton-text"},Xp={style:{"margin-inline-start":"10px"}},Qp={class:"nested-list-item-inner display-flex padding-top-half padding-bottom-half"},Jp={class:"nested-list-item-title"},em={key:0,class:"item-footer"},tm={key:1,class:"nested-list-item-after"},lm={key:0},nm={class:"no-padding"},am=Oe({__name:"ListPage",props:{f7router:{}},setup(p){const g=p,{tt:n,getCurrentLanguageTextDirection:h}=He(),{showAlert:P,showToast:N,routeBackOnError:_}=nt(),{loading:A,showHidden:U,displayOrderModified:y,showAccountBalance:v,allCategorizedAccountsMap:d,allAccountCount:w,netAssets:f,totalAssets:I,totalLiabilities:m,accountCategoryTotalBalance:$,accountBalance:F}=$s(),D=Rl(),V=il(),k=S(null),K=S(!1),T=S(null),b=S(null),z=S(null),J=S(""),r=S(!1),Y=S(!1),te=S(!1),x=S(!1),O=S(!1),H=S(!1),W=fe(()=>h()),Q=fe(()=>V.getFirstShowingIds(U.value)),le=fe(()=>V.getLastShowingIds(U.value)),oe=fe(()=>V.allVisibleAccountsCount>0),ne=fe(()=>U.value?V.allAvailableAccountsCount<1:V.allVisibleAccountsCount<1);function se(pe,B){return V.hasAccount(pe,B)}function Z(pe){return V.hasVisibleSubAccount(U.value,pe)}function E(pe){return"account_"+pe.id}function M(pe){return!pe||pe.indexOf("account_")!==0?null:pe.substring(8)}function ee(){A.value=!0,V.loadAllAccounts({force:!1}).then(()=>{A.value=!1}).catch(pe=>{pe.processed?A.value=!1:(k.value=pe,N(pe.message||pe))})}function ve(pe){if(K.value){pe?.();return}const B=!!pe;V.loadAllAccounts({force:B}).then(()=>{pe?.(),B&&N("Account list has been updated")}).catch(_e=>{pe?.(),_e.processed||N(_e.message||_e)})}function he(pe){g.f7router.navigate("/account/edit?id="+pe.id)}function re(pe){T.value=pe,Y.value=!0}function Be(pe){if(!pe){P("An error occurred");return}g.f7router.navigate("/account/reconciliation_statements?accountId="+pe.id),Y.value=!1,T.value=null}function Me(pe){if(!pe){P("An error occurred");return}g.f7router.navigate("/account/move_all_transactions?fromAccountId="+pe.id),Y.value=!1,T.value=null}function Le(pe){if(!pe){P("An error occurred");return}z.value=pe,J.value="",O.value=!0,Y.value=!1,T.value=null}function Ye(pe){if(!z.value){P("An error occurred");return}r.value=!0,Ke(()=>r.value),D.clearAllUserTransactionsOfAccount({accountId:z.value.id,password:pe}).then(()=>{r.value=!1,J.value="",Se(),O.value=!1,N("All transactions in this account has been cleared")}).catch(B=>{r.value=!1,Se(),B.processed||N(B.message||B)})}function Ie(pe,B){Ke(),V.hideAccount({account:pe,hidden:B}).then(()=>{Se()}).catch(_e=>{Se(),_e.processed||N(_e.message||_e)})}function be(pe,B){if(!pe){P("An error occurred");return}if(!B){b.value=pe,x.value=!0;return}x.value=!1,b.value=null,Ke(),V.deleteAccount({account:pe,beforeResolve:_e=>{$l(E(pe),_e)}}).then(()=>{Se()}).catch(_e=>{Se(),_e.processed||N(_e.message||_e)})}function L(){K.value||(U.value=!0,K.value=!0,y.value=!1)}function xe(){if(!y.value){U.value=!1,K.value=!1;return}H.value=!0,Ke(),V.updateAccountDisplayOrders().then(()=>{H.value=!1,Se(),U.value=!1,K.value=!1,y.value=!1}).catch(pe=>{H.value=!1,Se(),pe.processed||N(pe.message||pe)})}function Fe(){g.f7router.navigate("/settings/filter/account?type=accountListTotalAmount")}function Te(pe){if(!pe||!pe.el||!pe.el.id){N("Unable to move account");return}const B=M(pe.el.id);if(!B){N("Unable to move account");return}V.changeAccountDisplayOrder({accountId:B,from:pe.from-1,to:pe.to-1,updateListOrder:!0,updateGlobalListOrder:!0}).then(()=>{y.value=!0}).catch(_e=>{N(_e.message||_e)})}function Pe(){V.accountListStateInvalid&&!A.value&&ve(),_(g.f7router,k)}return ee(),(pe,B)=>{const _e=s("f7-nav-left"),Ne=s("f7-nav-title"),me=s("f7-link"),rt=s("f7-nav-right"),ft=s("f7-navbar"),bt=s("f7-icon"),St=s("f7-card-header"),ht=s("f7-card"),wt=s("f7-list-item"),Pt=s("f7-list"),ze=s("f7-badge"),Ae=s("ItemIcon"),We=s("f7-swipeout-button"),at=s("f7-swipeout-actions"),Qe=s("f7-actions-button"),lt=s("f7-actions-group"),$t=s("f7-actions-label"),yt=s("f7-actions"),Je=s("password-input-sheet"),ue=s("f7-page");return a(),i(ue,{ptr:!K.value,"onPtr:refresh":ve,"onPage:afterin":Pe},{default:l(()=>[t(ft,null,{default:l(()=>[t(_e,{"back-link":e(n)("Back")},null,8,["back-link"]),t(Ne,{title:e(n)("Account List")},null,8,["title"]),t(rt,{class:"navbar-compact-icons"},{default:l(()=>[K.value?u("",!0):(a(),i(me,{key:0,"icon-f7":"ellipsis",class:R({disabled:!e(w)}),onClick:B[0]||(B[0]=ce=>te.value=!0)},null,8,["class"])),K.value?K.value?(a(),i(me,{key:2,text:e(n)("Done"),class:R({disabled:H.value}),onClick:xe},null,8,["text","class"])):u("",!0):(a(),i(me,{key:1,"icon-f7":"plus",href:"/account/add"}))]),_:1})]),_:1}),t(ht,{class:R(["account-overview-card",{"skeleton-text":e(A)}])},{default:l(()=>[t(St,{class:"display-block",style:{"padding-top":"120px"}},{default:l(()=>[o("p",Op,[e(A)?(a(),C("small",zp,"Net assets")):e(A)?u("",!0):(a(),C("small",Yp,c(e(n)("Net assets")),1))]),o("p",Hp,[e(A)?(a(),C("span",qp,"0.00 USD")):e(A)?u("",!0):(a(),C("span",Wp,c(e(f)),1)),t(me,{class:"display-inline-flex margin-inline-start-half",onClick:B[1]||(B[1]=ce=>v.value=!e(v))},{default:l(()=>[t(bt,{class:"ebk-hide-icon",f7:e(v)?"eye_slash_fill":"eye_fill"},null,8,["f7"])]),_:1})]),o("p",Gp,[e(A)?(a(),C("small",jp,[...B[16]||(B[16]=[o("span",null,"Total assets | Total liabilities",-1)])])):e(A)?u("",!0):(a(),C("small",Kp,[o("span",null,c(e(n)("Total assets")),1),o("span",null,c(e(I)),1),B[17]||(B[17]=o("span",null,"|",-1)),o("span",null,c(e(n)("Total liabilities")),1),o("span",null,c(e(m)),1)]))])]),_:1})]),_:1},8,["class"]),e(A)?(a(),C("div",Zp,[(a(),C(ke,null,Ce([1,2,3],ce=>t(Pt,{strong:"",inset:"",dividers:"",sortable:"",class:"list-has-group-title account-list margin-vertical",key:ce},{default:l(()=>[t(wt,{"group-title":"",sortable:!1},{default:l(()=>[...B[18]||(B[18]=[o("small",null,[o("span",null,"Account Category"),o("span",{style:{"margin-inline-start":"10px"}},"0.00 USD")],-1)])]),_:1}),(a(!0),C(ke,null,Ce(ce===1?[1]:[1,2],ae=>(a(),i(wt,{class:"nested-list-item",after:"0.00 USD",link:"#",key:ae},{media:l(()=>[t(bt,{f7:"app_fill"})]),title:l(()=>[...B[19]||(B[19]=[o("div",{class:"display-flex padding-top-half padding-bottom-half"},[o("div",{class:"nested-list-item-title"},[o("span",null,"Account Name")])],-1)])]),_:1}))),128))]),_:2},1024)),64))])):u("",!0),!e(A)&&ne.value?(a(),i(Pt,{key:1,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(wt,{title:e(n)("No available account")},null,8,["title"])]),_:1})):u("",!0),(a(!0),C(ke,null,Ce(e($a).values(),ce=>dt((a(),C("div",{key:ce.type},[e(d)[ce.type]?(a(),i(Pt,{key:0,strong:"",inset:"",dividers:"",sortable:"",class:"list-has-group-title account-list margin-vertical","sortable-enabled":K.value,"onSortable:sort":Te},{default:l(()=>[t(wt,{"group-title":"",sortable:!1},{default:l(()=>[o("small",null,[o("span",null,c(e(n)(ce.name)),1),o("span",Xp,c(e($)(ce)),1)])]),_:2},1024),(a(!0),C(ke,null,Ce(e(d)[ce.type].accounts,ae=>dt((a(),i(wt,{swipeout:"",class:R(["nested-list-item",{"has-child-list-item":ae.type===e(Ot).MultiSubAccounts.type&&Z(ae),"actual-first-child":ae.id===Q.value.accounts[ce.type],"actual-last-child":ae.id===le.value.accounts[ce.type]}]),id:E(ae),after:ae.type===e(Ot).SingleAccount.type?e(F)(ae):"",link:K.value?null:"/transaction/list?accountIds="+ae.id,key:ae.id,onTaphold:B[2]||(B[2]=Ee=>L())},jn({title:l(()=>[o("div",Qp,[ae.type===e(Ot).MultiSubAccounts.type&&Z(ae)?(a(),i(Ae,{key:0,"icon-type":"account","icon-id":ae.icon,color:ae.color},{default:l(()=>[ae.hidden?(a(),i(ze,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(bt,{f7:"eye_slash_fill"})]),_:1})):u("",!0)]),_:2},1032,["icon-id","color"])):u("",!0),o("div",Jp,[o("span",null,c(ae.name),1),ae.comment?(a(),C("div",em,c(ae.comment),1)):u("",!0)]),ae.type===e(Ot).MultiSubAccounts.type?(a(),C("div",tm,[o("span",null,c(e(F)(ae)),1)])):u("",!0)]),ae.type===e(Ot).MultiSubAccounts.type?(a(),C("li",lm,[o("ul",nm,[(a(!0),C(ke,null,Ce(ae.subAccounts,Ee=>dt((a(),i(wt,{class:R(["no-sortable nested-list-item-child",{"actual-first-child":Ee.id===Q.value.subAccounts[ae.id],"actual-last-child":Ee.id===le.value.subAccounts[ae.id]}]),id:E(Ee),title:Ee.name,footer:Ee.comment,after:e(F)(ae,Ee.id),link:K.value?null:"/transaction/list?accountIds="+Ee.id,key:Ee.id},{media:l(()=>[t(Ae,{"icon-type":"account","icon-id":Ee.icon,color:Ee.color},{default:l(()=>[Ee.hidden?(a(),i(ze,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(bt,{f7:"eye_slash_fill"})]),_:1})):u("",!0)]),_:2},1032,["icon-id","color"])]),_:2},1032,["class","id","title","footer","after","link"])),[[Tt,e(U)||!Ee.hidden]])),128))])])):u("",!0)]),default:l(()=>[K.value?(a(),i(at,{key:0,left:W.value===e(gt).LTR,right:W.value===e(gt).RTL},{default:l(()=>[t(We,{color:ae.hidden?"blue":"gray",class:"padding-horizontal",overswipe:"",close:"",onClick:Ee=>Ie(ae,!ae.hidden)},{default:l(()=>[t(bt,{f7:ae.hidden?"eye":"eye_slash"},null,8,["f7"])]),_:2},1032,["color","onClick"])]),_:2},1032,["left","right"])):u("",!0),K.value?u("",!0):(a(),i(at,{key:1,left:W.value===e(gt).RTL,right:W.value===e(gt).LTR},{default:l(()=>[t(We,{color:"orange",close:"",text:e(n)("Edit"),onClick:Ee=>he(ae)},null,8,["text","onClick"]),t(We,{color:"primary",close:"",text:e(n)("More"),onClick:Ee=>re(ae)},null,8,["text","onClick"]),t(We,{color:"red",class:"padding-horizontal",onClick:Ee=>be(ae,!1)},{default:l(()=>[t(bt,{f7:"trash"})]),_:1},8,["onClick"])]),_:2},1032,["left","right"]))]),_:2},[ae.type!==e(Ot).MultiSubAccounts.type||!Z(ae)?{name:"media",fn:l(()=>[t(Ae,{"icon-type":"account","icon-id":ae.icon,color:ae.color},{default:l(()=>[ae.hidden?(a(),i(ze,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(bt,{f7:"eye_slash_fill"})]),_:1})):u("",!0)]),_:2},1032,["icon-id","color"])]),key:"0"}:void 0]),1032,["id","class","after","link"])),[[Tt,e(U)||!ae.hidden]])),128))]),_:2},1032,["sortable-enabled"])):u("",!0)])),[[Tt,!e(A)&&(e(U)&&se(ce,!1)||se(ce,!0))]])),128)),t(yt,{"close-by-outside-click":"","close-on-escape":"",opened:Y.value,"onActions:closed":B[6]||(B[6]=ce=>Y.value=!1)},{default:l(()=>[T.value&&T.value.type===e(Ot).SingleAccount.type?(a(),i(lt,{key:0},{default:l(()=>[t(Qe,{onClick:B[3]||(B[3]=ce=>Be(T.value))},{default:l(()=>[X(c(e(n)("Reconciliation Statement")),1)]),_:1})]),_:1})):u("",!0),T.value&&T.value.type===e(Ot).SingleAccount.type?(a(),i(lt,{key:1},{default:l(()=>[t(Qe,{onClick:B[4]||(B[4]=ce=>Me(T.value))},{default:l(()=>[X(c(e(n)("Move All Transactions")),1)]),_:1}),t(Qe,{color:"red",onClick:B[5]||(B[5]=ce=>Le(T.value))},{default:l(()=>[X(c(e(n)("Clear All Transactions")),1)]),_:1})]),_:1})):u("",!0),T.value&&T.value.type===e(Ot).MultiSubAccounts.type?(a(!0),C(ke,{key:2},Ce(T.value.subAccounts,ce=>dt((a(),i(lt,{key:ce.id},{default:l(()=>[t($t,null,{default:l(()=>[X(c(ce.name),1)]),_:2},1024),t(Qe,{onClick:ae=>Be(ce)},{default:l(()=>[X(c(e(n)("Reconciliation Statement")),1)]),_:1},8,["onClick"]),t(Qe,{onClick:ae=>Me(ce)},{default:l(()=>[X(c(e(n)("Move All Transactions")),1)]),_:1},8,["onClick"]),t(Qe,{color:"red",onClick:ae=>Le(ce)},{default:l(()=>[X(c(e(n)("Clear All Transactions")),1)]),_:1},8,["onClick"])]),_:2},1024)),[[Tt,e(U)||!ce.hidden]])),128)):u("",!0),t(lt,null,{default:l(()=>[t(Qe,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(yt,{"close-by-outside-click":"","close-on-escape":"",opened:te.value,"onActions:closed":B[11]||(B[11]=ce=>te.value=!1)},{default:l(()=>[t(lt,null,{default:l(()=>[t(Qe,{onClick:B[7]||(B[7]=ce=>L())},{default:l(()=>[X(c(e(n)("Sort")),1)]),_:1}),e(U)?u("",!0):(a(),i(Qe,{key:0,onClick:B[8]||(B[8]=ce=>U.value=!0)},{default:l(()=>[X(c(e(n)("Show Hidden Accounts")),1)]),_:1})),e(U)?(a(),i(Qe,{key:1,onClick:B[9]||(B[9]=ce=>U.value=!1)},{default:l(()=>[X(c(e(n)("Hide Hidden Accounts")),1)]),_:1})):u("",!0)]),_:1}),oe.value?(a(),i(lt,{key:0},{default:l(()=>[t(Qe,{onClick:B[10]||(B[10]=ce=>Fe())},{default:l(()=>[X(c(e(n)("Set Accounts Included in Total")),1)]),_:1})]),_:1})):u("",!0),t(lt,null,{default:l(()=>[t(Qe,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(yt,{"close-by-outside-click":"","close-on-escape":"",opened:x.value,"onActions:closed":B[13]||(B[13]=ce=>x.value=!1)},{default:l(()=>[t(lt,null,{default:l(()=>[t($t,null,{default:l(()=>[X(c(e(n)("Are you sure you want to delete this account?")),1)]),_:1}),t(Qe,{color:"red",onClick:B[12]||(B[12]=ce=>be(b.value,!0))},{default:l(()=>[X(c(e(n)("Delete")),1)]),_:1})]),_:1}),t(lt,null,{default:l(()=>[t(Qe,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(Je,{title:e(n)("Are you sure you want to clear all transactions?"),hint:e(n)("format.misc.clearTransactionsInAccountTip",{account:z.value?.name??"undefined"}),"confirm-disabled":r.value,"cancel-disabled":r.value,color:"red",show:O.value,"onUpdate:show":B[14]||(B[14]=ce=>O.value=ce),modelValue:J.value,"onUpdate:modelValue":B[15]||(B[15]=ce=>J.value=ce),"onPassword:confirm":Ye},null,8,["title","hint","confirm-disabled","cancel-disabled","show","modelValue"])]),_:1},8,["ptr"])}}}),om={class:"grid grid-cols-2"},sm={class:"list-item-subitem no-chevron"},im={class:"item-link",href:"#"},rm={class:"item-content"},um={class:"item-inner"},cm={class:"item-title"},dm={class:"list-item-custom-title no-padding"},fm={class:"list-item-subitem no-chevron"},pm={class:"item-link",href:"#"},mm={class:"item-content"},vm={class:"item-inner"},gm={class:"item-title"},hm={class:"list-item-custom-title no-padding"},ym={class:"grid grid-cols-2"},_m={class:"list-item-subitem no-chevron"},km={class:"item-content"},bm={class:"item-inner"},wm={class:"item-header"},Cm={class:"item-title"},Tm={class:"list-item-custom-title no-padding"},Sm={class:"list-item-subitem no-chevron"},xm={class:"item-content"},Am={class:"item-inner"},$m={class:"item-header"},Dm={class:"item-title"},Im={class:"list-item-custom-title no-padding"},Fm={class:"no-padding no-margin"},Vm={class:"smaller"},Pm={class:"account-edit-balancetime-title"},Um={class:"grid grid-cols-2"},Nm={class:"list-item-subitem no-chevron"},Bm={class:"item-content"},Em={class:"item-inner"},Mm={class:"item-header"},Lm={class:"item-title"},Rm={class:"list-item-custom-title no-padding"},Om={class:"list-item-subitem no-chevron"},zm={class:"item-content"},Ym={class:"item-inner"},Hm={class:"item-header"},qm={class:"item-title"},Wm={class:"list-item-custom-title no-padding"},Gm={class:"grid grid-cols-2"},jm={class:"list-item-subitem no-chevron"},Km=["onClick"],Zm={class:"item-content"},Xm={class:"item-inner"},Qm={class:"item-header"},Jm={class:"item-title"},ev={class:"list-item-custom-title no-padding"},tv={class:"list-item-subitem no-chevron"},lv=["onClick"],nv={class:"item-content"},av={class:"item-inner"},ov={class:"item-header"},sv={class:"item-title"},iv={class:"list-item-custom-title no-padding"},rv={class:"no-padding no-margin"},uv={class:"smaller"},cv=["onClick"],dv={class:"account-edit-balancetime-title"},fv=["onClick"],pv=["onClick"],ga=Oe({__name:"EditPage",props:{f7route:{},f7router:{}},setup(p){const g=p,{tt:n,getAllCurrencies:h,getCurrencyName:P,formatDateTimeToLongDate:N,formatDateTimeToLongTime:_,formatAmountToLocalizedNumeralsWithCurrency:A}=He(),{showAlert:U,showToast:y,routeBackOnError:v}=nt(),{editAccountId:d,clientSessionId:w,loading:f,submitting:I,account:m,subAccounts:$,title:F,inputEmptyProblemMessage:D,inputIsEmpty:V,allAccountCategories:k,allAccountTypes:K,allAvailableMonthDays:T,isAccountSupportCreditCardStatementDate:b,getDefaultTimezoneOffsetMinutes:z,getAccountCreditCardStatementDate:J,updateAccountBalanceTime:r,isNewAccount:Y,addSubAccount:te,setAccount:x}=Ds(),O=il(),H={showIconSelectionSheet:!1,showColorSelectionSheet:!1,showCurrencyPopup:!1,showCreditCardStatementDatePopup:!1,showBalanceSheet:!1,showBalanceDateTimeSheet:!1,balanceDateTimeSheetMode:"time"},W=S(Object.assign({},H)),Q=S([]),le=S(null),oe=S(null),ne=S(!1),se=S(!1),Z=S(!1),E=S(!1),M=fe(()=>h());function ee(be){const L=m.value.isLiability?-be.balance:be.balance;return A(L,be.currency)}function ve(be){if(!fl(be.balanceTime))return"";const L=ql(be.balanceTime,xn(be.balanceTime));return N(L)}function he(be){if(!fl(be.balanceTime))return"";const L=ql(be.balanceTime,xn(be.balanceTime));return _(L)}function re(){const be=g.f7route.query;w.value=nn(),be.id?(f.value=!0,d.value=be.id,O.getAccount({accountId:d.value}).then(L=>{x(L),Q.value=[];for(let xe=0;xe<$.value.length;xe++)Q.value.push(Object.assign({},H));f.value=!1}).catch(L=>{L.processed?f.value=!1:(oe.value=L,y(L.message||L))})):f.value=!1}function Be(){const be=g.f7router,L=D.value;if(L){U(L);return}I.value=!0,Ke(()=>I.value),O.saveAccount({account:m.value,subAccounts:$.value,isEdit:!!d.value,clientSessionId:w.value}).then(()=>{I.value=!1,Se(),d.value?y("You have saved this account"):y("You have added a new account"),be.back()}).catch(xe=>{I.value=!1,Se(),xe.processed||y(xe.message||xe)})}function Me(){te()&&Q.value.push(Object.assign({},H))}function Le(be,L){if(!be){U("An error occurred");return}if(!L){le.value=be,E.value=!0;return}E.value=!1,le.value=null;for(const[xe,Fe]of tn($.value))xe===be&&($.value.splice(Fe,1),Q.value.splice(Fe,1))}function Ye(be,L){be.balanceDateTimeSheetMode=L,be.showBalanceDateTimeSheet=!0}function Ie(){v(g.f7router,oe)}return xl(()=>m.value.type,()=>{$.value.length<1&&Me()}),re(),(be,L)=>{const xe=s("f7-nav-left"),Fe=s("f7-nav-title"),Te=s("f7-link"),Pe=s("f7-nav-right"),pe=s("f7-navbar"),B=s("f7-list-item"),_e=s("f7-list"),Ne=s("list-item-selection-sheet"),me=s("f7-list-input"),rt=s("f7-icon"),ft=s("ItemIcon"),bt=s("icon-selection-sheet"),St=s("color-selection-sheet"),ht=s("list-item-selection-popup"),wt=s("number-pad-sheet"),Pt=s("date-time-selection-sheet"),ze=s("f7-toggle"),Ae=s("f7-button"),We=s("f7-block"),at=s("f7-actions-button"),Qe=s("f7-actions-group"),lt=s("f7-actions"),$t=s("f7-actions-label"),yt=s("f7-page"),Je=Kn("textarea-auto-size");return a(),i(yt,{"onPage:afterin":Ie},{default:l(()=>[t(pe,null,{default:l(()=>[t(xe,{"back-link":e(n)("Back")},null,8,["back-link"]),t(Fe,{title:e(n)(e(F))},null,8,["title"]),t(Pe,{class:"navbar-compact-icons"},{default:l(()=>[t(Te,{"icon-f7":"ellipsis",class:R({disabled:e(m).type!==e(Ot).MultiSubAccounts.type}),onClick:L[0]||(L[0]=ue=>Z.value=!0)},null,8,["class"]),t(Te,{"icon-f7":"checkmark_alt",class:R({disabled:e(V)||e(I)}),onClick:Be},null,8,["class"])]),_:1})]),_:1}),e(f)?(a(),i(_e,{key:0,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(B,{class:"list-item-with-header-and-title",header:"Account Category",title:"Category"}),t(B,{class:"list-item-with-header-and-title",header:"Account Type",title:"Account Type"})]),_:1})):e(f)?u("",!0):(a(),i(_e,{key:1,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(B,{link:"#","no-chevron":"",class:"list-item-with-header-and-title",header:e(n)("Account Category"),title:e(mt)(e(k),e(m).category),onClick:L[3]||(L[3]=ue=>ne.value=!0)},{default:l(()=>[t(Ne,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName","icon-field":"defaultAccountIconId","icon-type":"account",items:e(k),show:ne.value,"onUpdate:show":L[1]||(L[1]=ue=>ne.value=ue),modelValue:e(m).category,"onUpdate:modelValue":L[2]||(L[2]=ue=>e(m).category=ue)},null,8,["items","show","modelValue"])]),_:1},8,["header","title"]),t(B,{link:"#","no-chevron":"",class:R(["list-item-with-header-and-title",{disabled:e(d)}]),header:e(n)("Account Type"),title:e(mt)(e(K),e(m).type),onClick:L[6]||(L[6]=ue=>se.value=!0)},{default:l(()=>[t(Ne,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",items:e(K),show:se.value,"onUpdate:show":L[4]||(L[4]=ue=>se.value=ue),modelValue:e(m).type,"onUpdate:modelValue":L[5]||(L[5]=ue=>e(m).type=ue)},null,8,["items","show","modelValue"])]),_:1},8,["class","header","title"])]),_:1})),e(f)?(a(),i(_e,{key:2,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(me,{label:"Account Name",placeholder:"Your account name"}),t(B,{class:"list-item-with-header-and-title list-item-with-multi-item"},{default:l(()=>[o("div",om,[o("div",sm,[o("a",im,[o("div",rm,[o("div",um,[L[45]||(L[45]=o("div",{class:"item-header"},[o("span",null,"Account Icon")],-1)),o("div",cm,[o("div",dm,[t(rt,{f7:"app_fill"})])])])])])]),o("div",fm,[o("a",pm,[o("div",mm,[o("div",vm,[L[46]||(L[46]=o("div",{class:"item-header"},[o("span",null,"Account Color")],-1)),o("div",gm,[o("div",hm,[t(rt,{f7:"app_fill"})])])])])])])])]),_:1}),t(B,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Currency",title:"Currency",link:e(d)?null:"#"},null,8,["link"]),t(B,{class:"list-item-with-header-and-title",header:"Account Balance",title:"Balance"}),t(B,{class:"list-item-toggle",header:"Visible",after:"True"}),t(me,{label:"Description",type:"textarea",placeholder:"Your account description (optional)"})]),_:1})):!e(f)&&e(m).type===e(Ot).SingleAccount.type?(a(),i(_e,{key:3,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(me,{type:"text","clear-button":"",label:e(n)("Account Name"),placeholder:e(n)("Your account name"),value:e(m).name,"onUpdate:value":L[7]||(L[7]=ue=>e(m).name=ue)},null,8,["label","placeholder","value"]),t(B,{class:"list-item-with-header-and-title list-item-with-multi-item"},{default:l(()=>[o("div",ym,[o("div",_m,[o("a",{class:"item-link",href:"#",onClick:L[8]||(L[8]=ue=>W.value.showIconSelectionSheet=!0)},[o("div",km,[o("div",bm,[o("div",wm,[o("span",null,c(e(n)("Account Icon")),1)]),o("div",Cm,[o("div",Tm,[t(ft,{"icon-type":"account","icon-id":e(m).icon,color:e(m).color},null,8,["icon-id","color"])])])])])]),t(bt,{"all-icon-infos":e(Rn),color:e(m).color,show:W.value.showIconSelectionSheet,"onUpdate:show":L[9]||(L[9]=ue=>W.value.showIconSelectionSheet=ue),modelValue:e(m).icon,"onUpdate:modelValue":L[10]||(L[10]=ue=>e(m).icon=ue)},null,8,["all-icon-infos","color","show","modelValue"])]),o("div",Sm,[o("a",{class:"item-link",href:"#",onClick:L[11]||(L[11]=ue=>W.value.showColorSelectionSheet=!0)},[o("div",xm,[o("div",Am,[o("div",$m,[o("span",null,c(e(n)("Account Color")),1)]),o("div",Dm,[o("div",Im,[t(ft,{"icon-type":"fixed-f7","icon-id":"app_fill",color:e(m).color},null,8,["color"])])])])])]),t(St,{"all-color-infos":e(On),show:W.value.showColorSelectionSheet,"onUpdate:show":L[12]||(L[12]=ue=>W.value.showColorSelectionSheet=ue),modelValue:e(m).color,"onUpdate:modelValue":L[13]||(L[13]=ue=>e(m).color=ue)},null,8,["all-color-infos","show","modelValue"])])])]),_:1}),t(B,{class:R(["list-item-with-header-and-title list-item-no-item-after",{disabled:e(d)}]),link:"#",header:e(n)("Currency"),"no-chevron":!!e(d),onClick:L[16]||(L[16]=ue=>W.value.showCurrencyPopup=!0)},{title:l(()=>[o("div",Fm,[o("span",null,c(e(P)(e(m).currency))+"",1),o("small",Vm,c(e(m).currency),1)])]),default:l(()=>[t(ht,{"value-type":"item","key-field":"currencyCode","value-field":"currencyCode","title-field":"displayName","after-field":"currencyCode",title:e(n)("Currency Name"),"enable-filter":!0,"filter-placeholder":e(n)("Currency"),"filter-no-items-text":e(n)("No results"),items:M.value,show:W.value.showCurrencyPopup,"onUpdate:show":L[14]||(L[14]=ue=>W.value.showCurrencyPopup=ue),modelValue:e(m).currency,"onUpdate:modelValue":L[15]||(L[15]=ue=>e(m).currency=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header","no-chevron"]),e(b)?(a(),i(B,{key:0,link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Statement Date"),title:e(J)(e(m).creditCardStatementDate),onClick:L[19]||(L[19]=ue=>W.value.showCreditCardStatementDatePopup=!0)},{default:l(()=>[t(ht,{"value-type":"item","key-field":"day","value-field":"day","title-field":"displayName",title:e(n)("Statement Date"),"enable-filter":!0,"filter-placeholder":e(n)("Statement Date"),"filter-no-items-text":e(n)("No results"),items:e(T),show:W.value.showCreditCardStatementDatePopup,"onUpdate:show":L[17]||(L[17]=ue=>W.value.showCreditCardStatementDatePopup=ue),modelValue:e(m).creditCardStatementDate,"onUpdate:modelValue":L[18]||(L[18]=ue=>e(m).creditCardStatementDate=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"])):u("",!0),t(B,{link:"#","no-chevron":"",class:R(["list-item-with-header-and-title",{disabled:e(d)}]),header:e(m).isLiability?e(n)("Account Outstanding Balance"):e(n)("Account Balance"),title:ee(e(m)),onClick:L[22]||(L[22]=ue=>W.value.showBalanceSheet=!0)},{default:l(()=>[t(wt,{"min-value":e(yl),"max-value":e(_l),currency:e(m).currency,"flip-negative":e(m).isLiability,show:W.value.showBalanceSheet,"onUpdate:show":L[20]||(L[20]=ue=>W.value.showBalanceSheet=ue),modelValue:e(m).balance,"onUpdate:modelValue":L[21]||(L[21]=ue=>e(m).balance=ue)},null,8,["min-value","max-value","currency","flip-negative","show","modelValue"])]),_:1},8,["class","header","title"]),e(d)?u("",!0):dt((a(),i(B,{key:1,class:"account-edit-balancetime list-item-with-header-and-title",link:"#","no-chevron":""},{header:l(()=>[o("div",{class:"account-edit-balancetime-header",onClick:L[23]||(L[23]=ue=>Ye(W.value,"time"))},c(e(n)("Balance Time")),1)]),title:l(()=>[o("div",Pm,[o("div",{onClick:L[24]||(L[24]=ue=>Ye(W.value,"date"))},c(ve(e(m))),1),L[47]||(L[47]=X("",-1)),o("div",{class:"account-edit-balancetime-time",onClick:L[25]||(L[25]=ue=>Ye(W.value,"time"))},c(he(e(m))),1)])]),default:l(()=>[t(Pt,{"init-mode":W.value.balanceDateTimeSheetMode,"timezone-utc-offset":e(z)(e(m)),"model-value":e(m).balanceTime,show:W.value.showBalanceDateTimeSheet,"onUpdate:show":L[26]||(L[26]=ue=>W.value.showBalanceDateTimeSheet=ue),"onUpdate:modelValue":L[27]||(L[27]=ue=>e(r)(e(m),ue))},null,8,["init-mode","timezone-utc-offset","model-value","show"])]),_:1},512)),[[Tt,e(m).balance]]),e(d)?(a(),i(B,{key:2,title:e(n)("Visible")},{default:l(()=>[t(ze,{checked:e(m).visible,"onToggle:change":L[28]||(L[28]=ue=>e(m).visible=ue)},null,8,["checked"])]),_:1},8,["title"])):u("",!0),dt(t(me,{type:"textarea",style:{height:"auto"},label:e(n)("Description"),placeholder:e(n)("Your account description (optional)"),value:e(m).comment,"onUpdate:value":L[29]||(L[29]=ue=>e(m).comment=ue)},null,8,["label","placeholder","value"]),[[Je]])]),_:1})):!e(f)&&e(m).type===e(Ot).MultiSubAccounts.type?(a(),i(_e,{key:4,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(me,{type:"text","clear-button":"",label:e(n)("Account Name"),placeholder:e(n)("Your account name"),value:e(m).name,"onUpdate:value":L[30]||(L[30]=ue=>e(m).name=ue)},null,8,["label","placeholder","value"]),t(B,{class:"list-item-with-header-and-title list-item-with-multi-item"},{default:l(()=>[o("div",Um,[o("div",Nm,[o("a",{class:"item-link",href:"#",onClick:L[31]||(L[31]=ue=>W.value.showIconSelectionSheet=!0)},[o("div",Bm,[o("div",Em,[o("div",Mm,[o("span",null,c(e(n)("Account Icon")),1)]),o("div",Lm,[o("div",Rm,[t(ft,{"icon-type":"account","icon-id":e(m).icon,color:e(m).color},null,8,["icon-id","color"])])])])])]),t(bt,{"all-icon-infos":e(Rn),color:e(m).color,show:W.value.showIconSelectionSheet,"onUpdate:show":L[32]||(L[32]=ue=>W.value.showIconSelectionSheet=ue),modelValue:e(m).icon,"onUpdate:modelValue":L[33]||(L[33]=ue=>e(m).icon=ue)},null,8,["all-icon-infos","color","show","modelValue"])]),o("div",Om,[o("a",{class:"item-link",href:"#",onClick:L[34]||(L[34]=ue=>W.value.showColorSelectionSheet=!0)},[o("div",zm,[o("div",Ym,[o("div",Hm,[o("span",null,c(e(n)("Account Color")),1)]),o("div",qm,[o("div",Wm,[t(ft,{"icon-type":"fixed-f7","icon-id":"app_fill",color:e(m).color},null,8,["color"])])])])])]),t(St,{"all-color-infos":e(On),show:W.value.showColorSelectionSheet,"onUpdate:show":L[35]||(L[35]=ue=>W.value.showColorSelectionSheet=ue),modelValue:e(m).color,"onUpdate:modelValue":L[36]||(L[36]=ue=>e(m).color=ue)},null,8,["all-color-infos","show","modelValue"])])])]),_:1}),e(b)?(a(),i(B,{key:0,link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Statement Date"),title:e(J)(e(m).creditCardStatementDate),onClick:L[39]||(L[39]=ue=>W.value.showCreditCardStatementDatePopup=!0)},{default:l(()=>[t(ht,{"value-type":"item","key-field":"day","value-field":"day","title-field":"displayName",title:e(n)("Statement Date"),"enable-filter":!0,"filter-placeholder":e(n)("Statement Date"),"filter-no-items-text":e(n)("No results"),items:e(T),show:W.value.showCreditCardStatementDatePopup,"onUpdate:show":L[37]||(L[37]=ue=>W.value.showCreditCardStatementDatePopup=ue),modelValue:e(m).creditCardStatementDate,"onUpdate:modelValue":L[38]||(L[38]=ue=>e(m).creditCardStatementDate=ue)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"])):u("",!0),e(d)?(a(),i(B,{key:1,title:e(n)("Visible")},{default:l(()=>[t(ze,{checked:e(m).visible,"onToggle:change":L[40]||(L[40]=ue=>e(m).visible=ue)},null,8,["checked"])]),_:1},8,["title"])):u("",!0),dt(t(me,{type:"textarea",style:{height:"auto"},label:e(n)("Description"),placeholder:e(n)("Your account description (optional)"),value:e(m).comment,"onUpdate:value":L[41]||(L[41]=ue=>e(m).comment=ue)},null,8,["label","placeholder","value"]),[[Je]])]),_:1})):u("",!0),!e(f)&&e(m).type===e(Ot).MultiSubAccounts.type?(a(),i(We,{key:5,class:"no-padding no-margin"},{default:l(()=>[(a(!0),C(ke,null,Ce(e($),(ue,ce)=>(a(),i(_e,{strong:"",inset:"",dividers:"",class:"subaccount-edit-list margin-vertical",key:ce},{default:l(()=>[t(B,{"group-title":""},{default:l(()=>[o("small",null,c(e(n)("Sub Account")+" #"+(ce+1)),1),t(Ae,{rasied:"",fill:"",class:"subaccount-delete-button",color:"red","icon-f7":"trash","icon-size":"16px",tooltip:e(n)("Remove Sub-account"),onClick:ae=>Le(ue,!1)},null,8,["tooltip","onClick"])]),_:2},1024),t(me,{type:"text","clear-button":"",label:e(n)("Sub-account Name"),placeholder:e(n)("Your sub-account name"),value:ue.name,"onUpdate:value":ae=>ue.name=ae},null,8,["label","placeholder","value","onUpdate:value"]),t(B,{class:"list-item-with-header-and-title list-item-with-multi-item"},{default:l(()=>[o("div",Gm,[o("div",jm,[o("a",{class:"item-link",href:"#",onClick:ae=>Q.value[ce].showIconSelectionSheet=!0},[o("div",Zm,[o("div",Xm,[o("div",Qm,[o("span",null,c(e(n)("Sub-account Icon")),1)]),o("div",Jm,[o("div",ev,[t(ft,{"icon-type":"account","icon-id":ue.icon,color:ue.color},null,8,["icon-id","color"])])])])])],8,Km),t(bt,{"all-icon-infos":e(Rn),color:ue.color,show:Q.value[ce].showIconSelectionSheet,"onUpdate:show":ae=>Q.value[ce].showIconSelectionSheet=ae,modelValue:ue.icon,"onUpdate:modelValue":ae=>ue.icon=ae},null,8,["all-icon-infos","color","show","onUpdate:show","modelValue","onUpdate:modelValue"])]),o("div",tv,[o("a",{class:"item-link",href:"#",onClick:ae=>Q.value[ce].showColorSelectionSheet=!0},[o("div",nv,[o("div",av,[o("div",ov,[o("span",null,c(e(n)("Sub-account Color")),1)]),o("div",sv,[o("div",iv,[t(ft,{"icon-type":"fixed-f7","icon-id":"app_fill",color:ue.color},null,8,["color"])])])])])],8,lv),t(St,{"all-color-infos":e(On),show:Q.value[ce].showColorSelectionSheet,"onUpdate:show":ae=>Q.value[ce].showColorSelectionSheet=ae,modelValue:ue.color,"onUpdate:modelValue":ae=>ue.color=ae},null,8,["all-color-infos","show","onUpdate:show","modelValue","onUpdate:modelValue"])])])]),_:2},1024),t(B,{class:R(["list-item-with-header-and-title list-item-no-item-after",{disabled:e(d)&&!e(Y)(ue)}]),link:"#",header:e(n)("Currency"),"no-chevron":!!e(d)&&!e(Y)(ue),onClick:ae=>Q.value[ce].showCurrencyPopup=!0},{title:l(()=>[o("div",rv,[o("span",null,c(e(P)(ue.currency))+"",1),o("small",uv,c(ue.currency),1)])]),default:l(()=>[t(ht,{"value-type":"item","key-field":"currencyCode","value-field":"currencyCode","title-field":"displayName","after-field":"currencyCode",title:e(n)("Currency Name"),"enable-filter":!0,"filter-placeholder":e(n)("Currency"),"filter-no-items-text":e(n)("No results"),items:M.value,show:Q.value[ce].showCurrencyPopup,"onUpdate:show":ae=>Q.value[ce].showCurrencyPopup=ae,modelValue:ue.currency,"onUpdate:modelValue":ae=>ue.currency=ae},null,8,["title","filter-placeholder","filter-no-items-text","items","show","onUpdate:show","modelValue","onUpdate:modelValue"])]),_:2},1032,["class","header","no-chevron","onClick"]),t(B,{link:"#","no-chevron":"",class:R(["list-item-with-header-and-title",{disabled:e(d)&&!e(Y)(ue)}]),header:e(m).isLiability?e(n)("Sub-account Outstanding Balance"):e(n)("Sub-account Balance"),title:ee(ue),onClick:ae=>Q.value[ce].showBalanceSheet=!0},{default:l(()=>[t(wt,{"min-value":e(yl),"max-value":e(_l),currency:ue.currency,"flip-negative":e(m).isLiability,show:Q.value[ce].showBalanceSheet,"onUpdate:show":ae=>Q.value[ce].showBalanceSheet=ae,modelValue:ue.balance,"onUpdate:modelValue":ae=>ue.balance=ae},null,8,["min-value","max-value","currency","flip-negative","show","onUpdate:show","modelValue","onUpdate:modelValue"])]),_:2},1032,["class","header","title","onClick"]),!e(d)||e(Y)(ue)?dt((a(),i(B,{key:0,class:"account-edit-balancetime list-item-with-header-and-title",link:"#","no-chevron":""},{header:l(()=>[o("div",{class:"account-edit-balancetime-header",onClick:ae=>Ye(Q.value[ce],"time")},c(e(n)("Sub-account Balance Time")),9,cv)]),title:l(()=>[o("div",dv,[o("div",{onClick:ae=>Ye(Q.value[ce],"date")},c(ve(ue)),9,fv),L[48]||(L[48]=X("",-1)),o("div",{class:"account-edit-balancetime-time",onClick:ae=>Ye(Q.value[ce],"time")},c(he(ue)),9,pv)])]),default:l(()=>[t(Pt,{"init-mode":Q.value[ce].balanceDateTimeSheetMode,"timezone-utc-offset":e(z)(ue),"model-value":ue.balanceTime,show:Q.value[ce].showBalanceDateTimeSheet,"onUpdate:show":ae=>Q.value[ce].showBalanceDateTimeSheet=ae,"onUpdate:modelValue":ae=>e(r)(ue,ae)},null,8,["init-mode","timezone-utc-offset","model-value","show","onUpdate:show","onUpdate:modelValue"])]),_:2},1536)),[[Tt,ue.balance]]):u("",!0),e(d)&&!e(Y)(ue)?(a(),i(B,{key:1,title:e(n)("Visible")},{default:l(()=>[t(ze,{checked:ue.visible,"onToggle:change":ae=>ue.visible=ae},null,8,["checked","onToggle:change"])]),_:2},1032,["title"])):u("",!0),dt(t(me,{type:"textarea",style:{height:"auto"},label:e(n)("Description"),placeholder:e(n)("Your sub-account description (optional)"),value:ue.comment,"onUpdate:value":ae=>ue.comment=ae},null,8,["label","placeholder","value","onUpdate:value"]),[[Je]])]),_:2},1024))),128))]),_:1})):u("",!0),t(lt,{"close-by-outside-click":"","close-on-escape":"",opened:Z.value,"onActions:closed":L[42]||(L[42]=ue=>Z.value=!1)},{default:l(()=>[t(Qe,null,{default:l(()=>[t(at,{onClick:Me},{default:l(()=>[X(c(e(n)("Add Sub-account")),1)]),_:1})]),_:1}),t(Qe,null,{default:l(()=>[t(at,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(lt,{"close-by-outside-click":"","close-on-escape":"",opened:E.value,"onActions:closed":L[44]||(L[44]=ue=>E.value=!1)},{default:l(()=>[t(Qe,null,{default:l(()=>[t($t,null,{default:l(()=>[X(c(e(n)("Are you sure you want to remove this sub-account?")),1)]),_:1}),t(at,{color:"red",onClick:L[43]||(L[43]=ue=>Le(le.value,!0))},{default:l(()=>[X(c(e(n)("Remove")),1)]),_:1})]),_:1}),t(Qe,null,{default:l(()=>[t(at,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),mv={key:0,style:{color:"var(--f7-text-color)"}},vv={style:{color:"var(--f7-text-color)"}},gv={key:0},hv={key:0,class:"display-flex no-padding-horizontal"},yv={key:1,class:"display-flex no-padding-horizontal"},_v={class:"item-media"},kv={class:"transaction-icon display-flex align-items-center"},bv={key:0,class:"display-flex no-padding-horizontal"},wv={class:"actual-item-inner"},Cv={class:"item-title-row"},Tv={class:"item-title"},Sv={key:1,class:"display-flex no-padding-horizontal"},xv={class:"item-media"},Av={class:"transaction-icon display-flex align-items-center"},$v={class:"actual-item-inner"},Dv={class:"item-title-row"},Iv={class:"item-title"},Fv={class:"transaction-category-name no-padding"},Vv={key:0},Pv={key:1},Uv={class:"item-after"},Nv={key:0},Bv={key:1},Ev={class:"item-text"},Mv={key:0,class:"transaction-description"},Lv={class:"item-footer"},Rv={class:"transaction-footer display-flex justify-content-space-between"},Ov={class:"flex-shrink-0"},zv={key:0,style:{"margin-inline-start":"4px"}},Yv={class:"account-balance flex-shrink-1"},Hv={style:{"margin-inline-start":"4px"}},qv={class:"statistics-chart-header display-flex full-line justify-content-space-between"},Wv={class:"align-self-flex-end"},Gv={style:{"margin-inline-end":"4px"}},jv=Oe({__name:"ReconciliationStatementPage",props:{f7route:{},f7router:{}},setup(p){const g=p,{tt:n,getCurrentLanguageTextDirection:h,getAllDateRanges:P,formatNumberToLocalizedNumerals:N}=He(),{showAlert:_,showToast:A,routeBackOnError:U}=nt(),{accountId:y,startTime:v,endTime:d,reconciliationStatements:w,firstDayOfWeek:f,fiscalYearStart:I,allDateAggregationTypes:m,isCurrentLiabilityAccount:$,currentAccount:F,currentAccountCurrency:D,displayStartDateTime:V,displayEndDateTime:k,displayTotalInflows:K,displayTotalOutflows:T,displayTotalBalance:b,displayOpeningBalance:z,displayClosingBalance:J,setReconciliationStatements:r,getDisplayDate:Y,getDisplayTime:te,isSameAsDefaultTimezoneOffsetMinutes:x,getDisplayTimezone:O,getDisplaySourceAmount:H,getDisplayDestinationAmount:W,getDisplayAccountBalance:Q}=Is(),le=il(),oe=rl(),ne=Ll(),se=S(!1),Z=S(!1),E=S(null),M=S(Ft.ThisMonth.type),ee=S(!1),ve=S(Mt.Day.type),he=S(null),re=S(0),Be=S(!1),Me=S(!1),Le=S(!1),Ye=S(!1),Ie=S({items:[],topPosition:0}),be=fe(()=>h()),L=fe(()=>F.value&&F.value.type===Ot.SingleAccount.type),xe=fe(()=>P(Yt.Normal,!0,!!le.getAccountStatementDate(y.value))),Fe=fe(()=>{const ze=[];if(!w.value||!w.value.transactions||w.value.transactions.length<1)return ze;let Ae=0,We=null;for(const at of w.value.transactions){const Qe=Y(at);We!==Qe&&(We=Qe,ze.push({index:Ae++,type:"date",displayDate:Qe})),ze.push({index:Ae++,type:"transaction",transaction:at})}return ze}),Te=fe(()=>mt(m.value,ve.value)||n("Unknown"));function Pe(ze){return"transaction_"+ze.id}function pe(){const ze=g.f7route.query,Ae=en(M.value,f.value,I.value);se.value=!1,Z.value=!1,y.value=ze.accountId||"",v.value=Ae?.minTime||0,d.value=Ae?.maxTime||0,w.value=void 0,Promise.all([le.loadAllAccounts({force:!1}),oe.loadAllCategories({force:!1})]).catch(We=>{E.value=We,A(We.message||We)})}function B(ze){if(ze===Ft.Custom.type){Be.value=!0;return}let Ae=null;Ft.isBillingCycle(ze)?Ae=xa(ze,f.value,I.value,le.getAccountStatementDate(y.value)):Ae=en(ze,f.value,I.value),Ae&&(M.value=Ae.dateType,v.value=Ae.minTime,d.value=Ae.maxTime)}function _e(ze,Ae){if(!ze||!Ae)return;let We=Aa(ze,Ae,f.value,I.value,Yt.Normal,le.getAccountStatementDate(y.value));We||(We=Bl(ze,Ae,f.value,I.value,Yt.Normal)),M.value=We,v.value=ze,d.value=Ae,Be.value=!1}function Ne(ze){se.value=!0,Z.value=!0,ne.getReconciliationStatements({accountId:y.value,startTime:v.value,endTime:d.value}).then(Ae=>{ze&&(Da(w.value,Ae)?A("Data is up to date"):A("Data has been updated")),Z.value=!1,r(Ae)}).catch(Ae=>{Z.value=!1,Ae.processed||A(Ae.message||Ae)})}function me(){g.f7router.navigate(`/transaction/add?accountId=${y.value}`)}function rt(ze){g.f7router.navigate(`/transaction/add?id=${ze.id}&type=${ze.type}`)}function ft(ze){g.f7router.navigate(`/transaction/edit?id=${ze.id}&type=${ze.type}`)}function bt(ze){let Ae=w.value?.closingBalance??0;if($.value&&(Ae=-Ae),!fl(ze)){re.value=Ae,Me.value=!0;return}const We=El();let at=!1,Qe;d.value<We?(at=!0,Qe=d.value):We<v.value&&(at=!0,Qe=v.value);let lt=$.value?qe.Expense:qe.Income,$t=ze-Ae;$t<0&&(lt=$.value?qe.Income:qe.Expense,$t=-$t);const yt=[];at&&yt.push(`time=${Qe}`),yt.push(`type=${lt}`),yt.push(`amount=${$t}`),yt.push(`accountId=${y.value}`),yt.push("noTransactionDraft=true"),g.f7router.navigate(`/transaction/add?${yt.join("&")}`)}function St(ze,Ae){if(!ze){_("An error occurred");return}if(!Ae){he.value=ze,Ye.value=!0;return}Ye.value=!1,he.value=null,Ke(),ne.deleteTransaction({transaction:ze,defaultCurrency:D.value,beforeResolve:We=>{$l(Pe(ze),We)}}).then(()=>{Se(),Ne(!1)}).catch(We=>{Se(),We.processed||A(We.message||We)})}function ht(ze){ve.value=ze}function wt(ze,Ae){Ie.value=Ae}function Pt(){se.value&&ne.transactionReconciliationStatementStateInvalid&&Ne(!1),U(g.f7router,E)}return pe(),(ze,Ae)=>{const We=s("f7-nav-left"),at=s("f7-icon"),Qe=s("f7-link"),lt=s("f7-nav-title"),$t=s("f7-nav-right"),yt=s("f7-navbar"),Je=s("f7-list-item"),ue=s("f7-list"),ce=s("f7-popover"),ae=s("ItemIcon"),Ee=s("f7-swipeout-button"),it=s("f7-swipeout-actions"),Vt=s("f7-card-header"),ll=s("account-balance-trends-bar-chart"),nl=s("f7-card-content"),Ct=s("f7-card"),j=s("date-range-selection-sheet"),Dt=s("number-pad-sheet"),Nt=s("f7-actions-button"),It=s("f7-actions-group"),Gt=s("f7-actions"),Ht=s("f7-actions-label"),Ut=s("f7-page");return a(),i(Ut,{"onPage:afterin":Pt},{default:l(()=>[t(yt,null,{default:l(()=>[t(We,{"back-link":e(n)("Back")},null,8,["back-link"]),t(lt,null,{default:l(()=>[se.value?u("",!0):(a(),C("span",mv,c(e(n)("Reconciliation Statement")),1)),se.value?(a(),i(Qe,{key:1,"popover-open":".display-mode-popover-menu"},{default:l(()=>[o("span",vv,c(e(n)("Reconciliation Statement")),1),t(at,{class:"page-title-bar-icon",style:{opacity:"0.5"},color:"gray",f7:"chevron_down_circle_fill"})]),_:1})):u("",!0)]),_:1}),t($t,{class:"navbar-compact-icons"},{default:l(()=>[se.value?u("",!0):(a(),i(Qe,{key:0,"icon-f7":"checkmark_alt",class:R({disabled:!L.value}),onClick:Ae[0]||(Ae[0]=ye=>Ne(!1))},null,8,["class"])),se.value?(a(),i(Qe,{key:1,"icon-f7":"ellipsis",class:R({disabled:Z.value}),onClick:Ae[1]||(Ae[1]=ye=>Le.value=!0)},null,8,["class"])):u("",!0)]),_:1})]),_:1}),t(ce,{class:"display-mode-popover-menu"},{default:l(()=>[t(ue,{dividers:""},{default:l(()=>[t(Je,{link:"#","no-chevron":"","popover-close":"",title:e(n)("Transaction List"),class:R({"list-item-selected":!ee.value}),onClick:Ae[2]||(Ae[2]=ye=>ee.value=!1)},{after:l(()=>[ee.value?u("",!0):(a(),i(at,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"}))]),_:1},8,["title","class"]),t(Je,{link:"#","no-chevron":"","popover-close":"",title:e(n)("Account Balance Trends"),class:R({"list-item-selected":ee.value}),onClick:Ae[3]||(Ae[3]=ye=>ee.value=!0)},{after:l(()=>[ee.value?(a(),i(at,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:1},8,["title","class"])]),_:1})]),_:1}),se.value?u("",!0):(a(),i(ue,{key:0,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Je,{"group-title":""},{default:l(()=>[o("small",null,c(e(n)("Date Range")),1)]),_:1}),(a(!0),C(ke,null,Ce(xe.value,ye=>(a(),i(Je,{key:ye.type,title:ye.displayName,disabled:!L.value,onClick:Re=>B(ye.type)},{after:l(()=>[M.value===ye.type?(a(),i(at,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),footer:l(()=>[ye.isUserCustomRange&&M.value===ye.type&&e(v)&&e(d)?(a(),C("div",gv,[o("span",null,c(e(V)),1),Ae[13]||(Ae[13]=o("span",null,"-",-1)),Ae[14]||(Ae[14]=o("br",null,null,-1)),o("span",null,c(e(k)),1)])):u("",!0)]),_:2},1032,["title","disabled","onClick"]))),128))]),_:1})),se.value&&!e(v)&&!e(d)?(a(),i(ue,{key:1,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Je,{title:e(n)("Date Range"),after:e(n)("All")},null,8,["title","after"])]),_:1})):u("",!0),se.value&&(e(v)||e(d))?(a(),i(ue,{key:2,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Je,{title:e(n)("Start Time"),after:e(V)},null,8,["title","after"]),t(Je,{title:e(n)("End Time"),after:e(k)},null,8,["title","after"])]),_:1})):u("",!0),se.value&&Z.value?(a(),i(ue,{key:3,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Je,{title:e(n)("Total Transactions"),after:"Count"},null,8,["title"]),t(Je,{title:e(n)("Total Inflows"),after:"Count"},null,8,["title"]),t(Je,{title:e(n)("Total Outflows"),after:"Count"},null,8,["title"]),t(Je,{title:e(n)("Net Cash Flow"),after:"Count"},null,8,["title"])]),_:1})):u("",!0),se.value&&!Z.value?(a(),i(ue,{key:4,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[e(w)&&e(w).transactions?(a(),i(Je,{key:0,title:e(n)("Total Transactions"),after:e(N)(e(w).transactions.length)},null,8,["title","after"])):u("",!0),t(Je,{title:e(n)("Total Inflows"),after:e(K)},null,8,["title","after"]),t(Je,{title:e(n)("Total Outflows"),after:e(T)},null,8,["title","after"]),t(Je,{title:e(n)("Net Cash Flow"),after:e(b)},null,8,["title","after"])]),_:1})):u("",!0),se.value&&Z.value?(a(),i(ue,{key:5,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Je,{title:e(n)("Opening Balance"),after:"Count"},null,8,["title"]),t(Je,{title:e(n)("Closing Balance"),after:"Count"},null,8,["title"])]),_:1})):u("",!0),se.value&&!Z.value?(a(),i(ue,{key:6,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Je,{title:e(n)("Opening Balance"),after:e(z)},null,8,["title","after"]),t(Je,{title:e(n)("Closing Balance"),after:e(J)},null,8,["title","after"])]),_:1})):u("",!0),se.value&&!ee.value&&Z.value?(a(),i(ue,{key:7,strong:"",inset:"",dividers:"","media-list":"",class:"skeleton-text margin-vertical transaction-info-list reconciliation-statement-list"},{default:l(()=>[o("ul",null,[(a(),C(ke,null,Ce(["d","t","t","d","t","t","t"],(ye,Re)=>t(Je,{"chevron-center":"",key:Re,class:R({"transaction-info":ye==="t","last-transaction-of-day":Re===2,"reconciliation-statement-transaction-date":ye==="d"}),link:ye==="t"?"#":null},{default:l(()=>[ye==="d"?(a(),C("div",hv,[...Ae[15]||(Ae[15]=[o("div",{class:"actual-item-inner"},[o("div",{class:"item-title-row"},[o("div",{class:"item-title"},[o("small",null,"yyyy-MM-dd")])])],-1)])])):u("",!0),ye==="t"?(a(),C("div",yv,[o("div",_v,[o("div",kv,[t(at,{f7:"app_fill"})])]),Ae[16]||(Ae[16]=o("div",{class:"actual-item-inner"},[o("div",{class:"item-title-row"},[o("div",{class:"item-title"},[o("div",{class:"transaction-category-name no-padding"},[o("span",null,"Category")])]),o("div",{class:"item-after"},[o("div",{class:"transaction-amount"},[o("span",null,"0.00 USD")])])]),o("div",{class:"item-text"},[o("div",{class:"transaction-description"},[o("span",null,"Transaction Description")])]),o("div",{class:"item-footer"},[o("div",{class:"transaction-footer display-flex justify-content-space-between"},[o("div",{class:"flex-shrink-0"},[o("span",null,"HH:mm")]),o("div",{class:"account-balance flex-shrink-1"},[o("span",null,"Balance"),o("span",{style:{"margin-inline-start":"4px"}},"0.00 USD")])])])],-1))])):u("",!0)]),_:2},1032,["class","link"])),64))])]),_:1})):u("",!0),se.value&&!ee.value&&!Z.value&&(!Fe.value||!Fe.value.length)?(a(),i(ue,{key:8,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Je,{title:e(n)("No transaction data")},null,8,["title"])]),_:1})):u("",!0),se.value&&!ee.value&&!Z.value&&Fe.value&&Fe.value.length?(a(),i(ue,{key:9,strong:"",inset:"",dividers:"","media-list":"","virtual-list":"",class:"margin-vertical transaction-info-list reconciliation-statement-list","virtual-list-params":{items:Fe.value,renderExternal:wt,height:"auto"}},{default:l(()=>[o("ul",null,[(a(!0),C(ke,null,Ce(Ie.value.items,ye=>(a(),i(Je,{"chevron-center":"",key:ye.index,id:ye.transaction?Pe(ye.transaction):void 0,class:R({"transaction-info":ye.type=="transaction","last-transaction-of-day":Fe.value[ye.index+1]&&Fe.value[ye.index+1].type==="date","reconciliation-statement-transaction-date":ye.type=="date"}),style:vt(`top: ${Ie.value.topPosition}px`),"virtual-list-index":ye.index,swipeout:ye.type==="transaction"&&!!ye.transaction,"accordion-item":ye.type==="transaction"&&!!ye.transaction,link:ye.type=="transaction"&&ye.transaction&&ye.transaction.type!==e(qe).ModifyBalance?`/transaction/detail?id=${ye.transaction?.id}&type=${ye.transaction.type}`:null},{inner:l(()=>[ye.type=="date"&&ye.displayDate?(a(),C("div",bv,[o("div",wv,[o("div",Cv,[o("div",Tv,[o("small",null,c(ye.displayDate),1)])])])])):u("",!0),ye.type=="transaction"&&ye.transaction?(a(),C("div",Sv,[o("div",xv,[o("div",Av,[ye.transaction.category&&ye.transaction.category?.color?(a(),i(ae,{key:0,"icon-type":"category","icon-id":ye.transaction.category?.icon,color:ye.transaction.category?.color},null,8,["icon-id","color"])):!ye.transaction.category||!ye.transaction.category?.color?(a(),i(at,{key:1,f7:"pencil_ellipsis_rectangle"})):u("",!0)])]),o("div",$v,[o("div",Dv,[o("div",Iv,[o("div",Fv,[ye.transaction.type===e(qe).ModifyBalance?(a(),C("span",Vv,c(e(n)("Modify Balance")),1)):ye.transaction.type!==e(qe).ModifyBalance&&ye.transaction.category?(a(),C("span",Pv,c(ye.transaction.category.name),1)):u("",!0)])]),o("div",Uv,[o("div",{class:R(["transaction-amount",{"text-expense":ye.transaction.type===e(qe).Expense,"text-income":ye.transaction.type===e(qe).Income}])},[ye.transaction.type===e(qe).Transfer&&ye.transaction.destinationAccountId===e(y)?(a(),C("span",Nv,c(e(W)(ye.transaction)),1)):ye.transaction.type!==e(qe).Transfer||ye.transaction.destinationAccountId!==e(y)?(a(),C("span",Bv,c(e(H)(ye.transaction)),1)):u("",!0)],2)])]),o("div",Ev,[ye.transaction.comment?(a(),C("div",Mv,[o("span",null,c(ye.transaction.comment),1)])):u("",!0)]),o("div",Lv,[o("div",Rv,[o("div",Ov,[o("span",null,c(e(te)(ye.transaction)),1),e(x)(ye.transaction)?u("",!0):(a(),C("span",zv,c(`(${e(O)(ye.transaction)})`),1))]),o("div",Yv,[o("span",null,c(e($)?e(n)("Outstanding Balance"):e(n)("Balance")),1),o("span",Hv,c(e(Q)(ye.transaction)),1)])])])])])):u("",!0)]),default:l(()=>[ye.type=="transaction"&&ye.transaction?(a(),i(it,{key:0,left:be.value===e(gt).RTL,right:be.value===e(gt).LTR},{default:l(()=>[ye.transaction.type!==e(qe).ModifyBalance?(a(),i(Ee,{key:0,color:"primary",close:"",text:e(n)("Duplicate"),onClick:Re=>rt(ye.transaction)},null,8,["text","onClick"])):u("",!0),ye.transaction.editable&&ye.transaction.type!==e(qe).ModifyBalance?(a(),i(Ee,{key:1,color:"orange",close:"",text:e(n)("Edit"),onClick:Re=>ft(ye.transaction)},null,8,["text","onClick"])):u("",!0),ye.transaction.editable?(a(),i(Ee,{key:2,color:"red",class:"padding-horizontal",onClick:Re=>St(ye.transaction,!1)},{default:l(()=>[t(at,{f7:"trash"})]),_:1},8,["onClick"])):u("",!0)]),_:2},1032,["left","right"])):u("",!0)]),_:2},1032,["id","class","style","virtual-list-index","swipeout","accordion-item","link"]))),128))])]),_:1},8,["virtual-list-params"])):u("",!0),se.value&&ee.value?(a(),i(Ct,{key:10},{default:l(()=>[t(Vt,{class:"no-border display-block"},{default:l(()=>[o("div",qv,[Ae[17]||(Ae[17]=o("div",null,null,-1)),o("div",Wv,[o("span",Gv,c(e(n)("Time Granularity")),1),t(Qe,{class:R({disabled:Z.value}),href:"#","popover-open":".chart-data-date-aggregation-type-popover-menu"},{default:l(()=>[X(c(Te.value),1)]),_:1},8,["class"])])])]),_:1}),t(nl,{style:{"margin-top":"-14px"},padding:!1},{default:l(()=>[t(ll,{loading:Z.value,"date-aggregation-type":ve.value,"fiscal-year-start":e(I),items:e(w)?.transactions,account:e(F)},null,8,["loading","date-aggregation-type","fiscal-year-start","items","account"])]),_:1})]),_:1})):u("",!0),t(ce,{class:"chart-data-date-aggregation-type-popover-menu"},{default:l(()=>[t(ue,{dividers:""},{default:l(()=>[(a(!0),C(ke,null,Ce(e(m),ye=>(a(),i(Je,{link:"#","no-chevron":"","popover-close":"",title:ye.displayName,class:R({"list-item-selected":ve.value===ye.type}),key:ye.type,onClick:Re=>ht(ye.type)},{after:l(()=>[ve.value===ye.type?(a(),i(at,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1})]),_:1}),t(j,{title:e(n)("Custom Date Range"),"min-time":e(v),"max-time":e(d),show:Be.value,"onUpdate:show":Ae[4]||(Ae[4]=ye=>Be.value=ye),"onDateRange:change":_e},null,8,["title","min-time","max-time","show"]),t(Dt,{"min-value":e(yl),"max-value":e(_l),currency:e(D),hint:e(n)("Please enter the new closing balance for the account"),show:Me.value,"onUpdate:show":Ae[5]||(Ae[5]=ye=>Me.value=ye),modelValue:re.value,"onUpdate:modelValue":[Ae[6]||(Ae[6]=ye=>re.value=ye),bt]},null,8,["min-value","max-value","currency","hint","show","modelValue"]),t(Gt,{"close-by-outside-click":"","close-on-escape":"",opened:Le.value,"onActions:closed":Ae[10]||(Ae[10]=ye=>Le.value=!1)},{default:l(()=>[t(It,null,{default:l(()=>[t(Nt,{class:R({disabled:Z.value}),onClick:Ae[7]||(Ae[7]=ye=>me())},{default:l(()=>[X(c(e(n)("Add Transaction")),1)]),_:1},8,["class"]),t(Nt,{class:R({disabled:Z.value}),onClick:Ae[8]||(Ae[8]=ye=>bt(void 0))},{default:l(()=>[X(c(e(n)("Update Closing Balance")),1)]),_:1},8,["class"])]),_:1}),t(It,null,{default:l(()=>[t(Nt,{class:R({disabled:Z.value}),onClick:Ae[9]||(Ae[9]=ye=>Ne(!0))},{default:l(()=>[X(c(e(n)("Refresh")),1)]),_:1},8,["class"])]),_:1}),t(It,null,{default:l(()=>[t(Nt,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(Gt,{"close-by-outside-click":"","close-on-escape":"",opened:Ye.value,"onActions:closed":Ae[12]||(Ae[12]=ye=>Ye.value=!1)},{default:l(()=>[t(It,null,{default:l(()=>[t(Ht,null,{default:l(()=>[X(c(e(n)("Are you sure you want to delete this transaction?")),1)]),_:1}),t(Nt,{color:"red",onClick:Ae[11]||(Ae[11]=ye=>St(he.value,!0))},{default:l(()=>[X(c(e(n)("Delete")),1)]),_:1})]),_:1}),t(It,null,{default:l(()=>[t(Nt,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),Kv=Oe({__name:"MoveAllTransactionsPage",props:{f7route:{},f7router:{}},setup(p){const g=p,{tt:n}=He(),{showToast:h,routeBackOnError:P}=nt(),{moving:N,fromAccount:_,toAccountId:A,toAccountName:U,allAccounts:y,allVisibleAccounts:v,allVisibleCategorizedAccounts:d,displayToAccountName:w,isToAccountNameValid:f}=Fs(),I=il(),m=Ll(),$=S(!0),F=S(null),D=S(!1);function V(){const b=g.f7route.query.fromAccountId;if(!b){h("Parameter Invalid"),F.value="Parameter Invalid";return}I.loadAllAccounts({force:!1}).then(()=>{$.value=!1;const z=I.allAccountsMap[b];if(!z){h("Parameter Invalid"),F.value="Parameter Invalid";return}_.value=z}).catch(z=>{z.processed?$.value=!1:(F.value=z,h(z.message||z))})}function k(){const T=g.f7router;!_.value||!A.value||_.value?.id===A.value||!U.value||!f.value||(N.value=!0,Ke(()=>N.value),m.moveAllTransactionsBetweenAccounts({fromAccountId:_.value.id,toAccountId:A.value}).then(()=>{N.value=!1,Se(),h("All transactions in this account has been moved."),T.back()}).catch(b=>{N.value=!1,Se(),b.processed||h(b.message||b)}))}function K(){P(g.f7router,F)}return V(),(T,b)=>{const z=s("f7-nav-left"),J=s("f7-nav-title"),r=s("f7-link"),Y=s("f7-nav-right"),te=s("f7-navbar"),x=s("f7-card"),O=s("f7-list-item"),H=s("f7-list"),W=s("two-column-list-item-selection-sheet"),Q=s("f7-list-input"),le=s("f7-page");return a(),i(le,{"onPage:afterin":K},{default:l(()=>[t(te,null,{default:l(()=>[t(z,{"back-link":e(n)("Back")},null,8,["back-link"]),t(J,{title:e(n)("Move All Transactions")},null,8,["title"]),t(Y,null,{default:l(()=>[t(r,{"icon-f7":"checkmark_alt",class:R({disabled:!e(_)||!e(A)||e(_)?.id===e(A)||!e(U)||!e(f)||e(N)}),onClick:k},null,8,["class"])]),_:1})]),_:1}),t(x,{title:e(n)("Are you sure you want to move all transactions?"),content:e(n)("format.misc.moveTransactionsInAccountTip",{fromAccount:e(_)?.name,toAccount:e(w)})},null,8,["title","content"]),$.value?(a(),i(H,{key:0,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(O,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Target Account",title:"Unspecified"}),t(O,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Confirm Target Account Name",title:"Unspecified"})]),_:1})):u("",!0),$.value?u("",!0):(a(),i(H,{key:1,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(O,{class:R(["list-item-with-header-and-title",{disabled:e(N)||!e(v).length}]),link:"#","no-chevron":"",header:e(n)("Target Account"),title:e(Ia).findAccountNameById(e(y),e(A),e(n)("Unspecified")),onClick:b[2]||(b[2]=oe=>D.value=!0)},{default:l(()=>[t(W,{"primary-key-field":"id","primary-value-field":"category","primary-title-field":"name","primary-footer-field":"displayBalance","primary-icon-field":"icon","primary-icon-type":"account","primary-sub-items-field":"accounts","primary-title-i18n":!0,"secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-footer-field":"displayBalance","secondary-icon-field":"icon","secondary-icon-type":"account","secondary-color-field":"color","enable-filter":!0,"filter-placeholder":e(n)("Find account"),"filter-no-items-text":e(n)("No available account"),items:e(d),show:D.value,"onUpdate:show":b[0]||(b[0]=oe=>D.value=oe),modelValue:e(A),"onUpdate:modelValue":b[1]||(b[1]=oe=>kt(A)?A.value=oe:null)},null,8,["filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header","title"]),t(Q,{type:"text","clear-button":"",label:e(n)("Confirm Target Account Name"),placeholder:e(n)("Please re-enter the target account name to confirm"),value:e(U),"onUpdate:value":b[3]||(b[3]=oe=>kt(U)?U.value=oe:null)},null,8,["label","placeholder","value"])]),_:1}))]),_:1})}}}),Zv={class:"statistics-page-title"},Xv={style:{"margin-inline-end":"4px"}},Qv={key:0,class:"statistics-pie-chart-total-amount-title"},Jv={key:1,class:"statistics-pie-chart-total-amount-value"},eg={key:2,class:"statistics-pie-chart-total-no-data",cy:"50%"},tg={class:"statistics-chart-header display-flex full-line justify-content-space-between"},lg={class:"align-self-flex-end"},ng={style:{"margin-inline-end":"4px"}},ag={class:"display-flex full-line"},og={key:0},sg={class:"display-flex no-padding-horizontal"},ig={class:"display-flex align-items-center statistics-icon"},rg={class:"statistics-item-end"},ug={class:"statistics-percent-line"},cg={class:"display-flex no-padding-horizontal"},dg={class:"display-flex align-items-center statistics-icon"},fg={class:"statistics-list-item-text"},pg={key:0,class:"statistics-percent"},mg={class:"statistics-item-end"},vg={class:"statistics-percent-line"},gg={class:"statistics-chart-header display-flex full-line justify-content-space-between"},hg={class:"align-self-flex-end"},yg={style:{"margin-inline-end":"4px"}},_g={class:"statistics-chart-header display-flex full-line justify-content-space-between"},kg={class:"align-self-flex-end"},bg={style:{"margin-inline-end":"4px"}},wg={key:0},Cg=Oe({__name:"TransactionPage",props:{f7router:{}},setup(p){const g=p,{tt:n,getCurrentLanguageTextDirection:h,getAllCategoricalChartTypes:P,formatPercentToLocalizedNumerals:N}=He(),{showPrompt:_,showToast:A,routeBackOnError:U}=nt(),{loading:y,analysisType:v,trendDateAggregationType:d,assetTrendsDateAggregationType:w,defaultCurrency:f,firstDayOfWeek:I,fiscalYearStart:m,allDateRanges:$,allSortingTypes:F,allTrendAnalysisDateAggregationTypes:D,allAssetTrendsDateAggregationTypes:V,query:k,queryChartDataCategory:K,queryDateType:T,queryStartTime:b,queryEndTime:z,queryDateRangeName:J,queryChartDataTypeName:r,querySortingTypeName:Y,queryTrendDateAggregationTypeName:te,queryAssetTrendsDateAggregationTypeName:x,isQueryDateRangeChanged:O,canChangeDateRange:H,canShiftDateRange:W,canUseCategoryFilter:Q,canUseTagFilter:le,canUseKeywordFilter:oe,showAmountInChart:ne,totalAmountName:se,showPercentInCategoricalChart:Z,showStackedInTrendsChart:E,translateNameInTrendsChart:M,categoricalAnalysisData:ee,trendsAnalysisData:ve,assetTrendsData:he,canShowCustomDateRange:re,getTransactionCategoricalAnalysisDataItemDisplayColor:Be,getDisplayAmount:Me}=Vs(),Le=il(),Ye=rl(),Ie=Ps(),be=S(null),L=S(!1),xe=S(!1),Fe=S(!1),Te=S(!1),Pe=fe(()=>h()),pe=fe(()=>v.value===je.CategoricalAnalysis?P():[]),B=fe({get:()=>v.value===je.CategoricalAnalysis?k.value.categoricalChartType:v.value===je.TrendAnalysis?k.value.trendChartType:v.value===je.AssetTrends?k.value.assetTrendsChartType:void 0,set:ce=>{rt(ce)}});function _e(ce,ae){return`/transaction/list?${Ie.getTransactionListPageParams(v.value,ce,ae)}`}function Ne(){Ie.initTransactionStatisticsFilter(v.value),Promise.all([Le.loadAllAccounts({force:!1}),Ye.loadAllCategories({force:!1})]).then(()=>v.value===je.CategoricalAnalysis?Ie.loadCategoricalAnalysis({force:!1}):v.value===je.TrendAnalysis?Ie.loadTrendAnalysis({force:!1}):v.value===je.AssetTrends?Ie.loadAssetTrends({force:!1}):Promise.reject("An error occurred")).then(()=>{y.value=!1}).catch(ce=>{ce.processed?y.value=!1:(be.value=ce,A(ce.message||ce))})}function me(ce){const ae=!!ce;let Ee=null;L.value=!0,k.value.chartDataType===pt.OutflowsByAccount.type||k.value.chartDataType===pt.ExpenseByAccount.type||k.value.chartDataType===pt.ExpenseByPrimaryCategory.type||k.value.chartDataType===pt.ExpenseBySecondaryCategory.type||k.value.chartDataType===pt.InflowsByAccount.type||k.value.chartDataType===pt.IncomeByAccount.type||k.value.chartDataType===pt.IncomeByPrimaryCategory.type||k.value.chartDataType===pt.IncomeBySecondaryCategory.type||k.value.chartDataType===pt.TotalOutflows.type||k.value.chartDataType===pt.TotalExpense.type||k.value.chartDataType===pt.TotalInflows.type||k.value.chartDataType===pt.TotalIncome.type||k.value.chartDataType===pt.NetCashFlow.type||k.value.chartDataType===pt.NetIncome.type||k.value.chartDataType===pt.NetWorth.type?v.value===je.CategoricalAnalysis?Ee=Ie.loadCategoricalAnalysis({force:ae}):v.value===je.TrendAnalysis?Ee=Ie.loadTrendAnalysis({force:ae}):v.value===je.AssetTrends&&(Ee=Ie.loadAssetTrends({force:ae})):(k.value.chartDataType===pt.AccountTotalAssets.type||k.value.chartDataType===pt.AccountTotalLiabilities.type)&&(v.value===je.CategoricalAnalysis?Ee=Le.loadAllAccounts({force:ae}):v.value===je.AssetTrends&&(Ee=Ie.loadAssetTrends({force:ae}))),Ee?Ee.then(()=>{L.value=!1,ce?.(),ae&&A("Data has been updated")}).catch(it=>{L.value=!1,ce?.(),it.processed||A(it.message||it)}):L.value=!1}function rt(ce){v.value===je.CategoricalAnalysis?Ie.updateTransactionStatisticsFilter({categoricalChartType:ce}):v.value===je.TrendAnalysis?Ie.updateTransactionStatisticsFilter({trendChartType:ce}):v.value===je.AssetTrends&&Ie.updateTransactionStatisticsFilter({assetTrendsChartType:ce})}function ft(ce,ae){let Ee=!1;v.value!==ce&&(pt.isAvailableForAnalysisType(k.value.chartDataType,ce)||Ie.updateTransactionStatisticsFilter({chartDataType:pt.Default.type}),v.value=ce,Ie.updateTransactionStatisticsInvalidState(!0),Ee=!0),Ie.updateTransactionStatisticsFilter({chartDataType:ae}),Ee&&me()}function bt(ce){ce<ra.Amount.type||ce>ra.Name.type||Ie.updateTransactionStatisticsFilter({sortingType:ce})}function St(ce){d.value=ce}function ht(ce){w.value=ce}function wt(ce){if(v.value===je.CategoricalAnalysis){if(ce===Ft.Custom.type){xe.value=!0;return}else if(k.value.categoricalChartDateType===ce)return}else if(v.value===je.TrendAnalysis){if(ce===Ft.Custom.type){Fe.value=!0;return}else if(k.value.trendChartDateType===ce)return}else if(v.value===je.AssetTrends){if(ce===Ft.Custom.type){xe.value=!0;return}else if(k.value.assetTrendsChartDateType===ce)return}const ae=en(ce,I.value,m.value);if(!ae)return;let Ee=!1;v.value===je.CategoricalAnalysis?Ee=Ie.updateTransactionStatisticsFilter({categoricalChartDateType:ae.dateType,categoricalChartStartTime:ae.minTime,categoricalChartEndTime:ae.maxTime}):v.value===je.TrendAnalysis?Ee=Ie.updateTransactionStatisticsFilter({trendChartDateType:ae.dateType,trendChartStartYearMonth:kn(ae.minTime),trendChartEndYearMonth:kn(ae.maxTime)}):v.value===je.AssetTrends&&(Ee=Ie.updateTransactionStatisticsFilter({assetTrendsChartDateType:ae.dateType,assetTrendsChartStartTime:ae.minTime,assetTrendsChartEndTime:ae.maxTime})),Ee&&me()}function Pt(ce,ae){if(!ce||!ae)return;let Ee=!1;if(v.value===je.CategoricalAnalysis&&zt(ce)&&zt(ae)){const it=Bl(ce,ae,I.value,m.value,Yt.Normal);Ee=Ie.updateTransactionStatisticsFilter({categoricalChartDateType:it,categoricalChartStartTime:ce,categoricalChartEndTime:ae}),xe.value=!1}else if(v.value===je.TrendAnalysis&&Wn(ce)&&Wn(ae)){const it=Bl(Gl(ce),Sn(ae),I.value,m.value,Yt.TrendAnalysis);Ee=Ie.updateTransactionStatisticsFilter({trendChartDateType:it,trendChartStartYearMonth:ce,trendChartEndYearMonth:ae}),Fe.value=!1}else if(v.value===je.AssetTrends&&zt(ce)&&zt(ae)){const it=Bl(ce,ae,I.value,m.value,Yt.AssetTrends);Ee=Ie.updateTransactionStatisticsFilter({assetTrendsChartDateType:it,assetTrendsChartStartTime:ce,assetTrendsChartEndTime:ae}),xe.value=!1}Ee&&me()}function ze(ce){let ae=!1;if(v.value===je.CategoricalAnalysis){if(k.value.categoricalChartDateType===Ft.All.type)return;const Ee=Cn(k.value.categoricalChartStartTime,k.value.categoricalChartEndTime,ce,I.value,m.value,Yt.Normal);ae=Ie.updateTransactionStatisticsFilter({categoricalChartDateType:Ee.dateType,categoricalChartStartTime:Ee.minTime,categoricalChartEndTime:Ee.maxTime})}else if(v.value===je.TrendAnalysis){const Ee=Cn(Gl(k.value.trendChartStartYearMonth),Sn(k.value.trendChartEndYearMonth),ce,I.value,m.value,Yt.TrendAnalysis);ae=Ie.updateTransactionStatisticsFilter({trendChartDateType:Ee.dateType,trendChartStartYearMonth:kn(Ee.minTime),trendChartEndYearMonth:kn(Ee.maxTime)})}else if(v.value===je.AssetTrends){if(k.value.assetTrendsChartDateType===Ft.All.type)return;const Ee=Cn(k.value.assetTrendsChartStartTime,k.value.assetTrendsChartEndTime,ce,I.value,m.value,Yt.AssetTrends);ae=Ie.updateTransactionStatisticsFilter({assetTrendsChartDateType:Ee.dateType,assetTrendsChartStartTime:Ee.minTime,assetTrendsChartEndTime:Ee.maxTime})}ae&&me()}function Ae(){g.f7router.navigate("/settings/filter/account?type=statisticsCurrent")}function We(){g.f7router.navigate("/settings/filter/category?type=statisticsCurrent")}function at(){g.f7router.navigate("/settings/filter/tag?type=statisticsCurrent")}function Qe(){v.value!==je.AssetTrends&&_("Filter transaction description",k.value.keyword,ce=>{if(k.value.keyword===ce)return;let ae=!1;v.value===je.CategoricalAnalysis?ae=Ie.updateTransactionStatisticsFilter({keyword:ce}):v.value===je.TrendAnalysis&&(ae=Ie.updateTransactionStatisticsFilter({keyword:ce})),ae&&me()})}function lt(){g.f7router.navigate("/statistic/settings")}function $t(ce){Qt(ce.$el[0],".popover-inner",".popover-inner","li.list-item-selected")}function yt(ce){g.f7router.navigate(_e(ce.id))}function Je(ce){g.f7router.navigate(_e(ce.itemId,ce.dateRange))}function ue(){Ie.transactionStatisticsStateInvalid&&!y.value&&me(),U(g.f7router,be)}return Ne(),(ce,ae)=>{const Ee=s("f7-nav-left"),it=s("f7-icon"),Vt=s("f7-link"),ll=s("f7-nav-title"),nl=s("f7-nav-right"),Ct=s("f7-navbar"),j=s("f7-list-item"),Dt=s("f7-list"),Nt=s("f7-popover"),It=s("f7-card-header"),Gt=s("pie-chart"),Ht=s("f7-card-content"),Ut=s("f7-card"),ye=s("f7-progressbar"),Re=s("ItemIcon"),kl=s("trends-bar-chart"),xt=s("f7-toolbar"),Dl=s("date-range-selection-sheet"),pl=s("month-range-selection-sheet"),jt=s("f7-actions-button"),al=s("f7-actions-group"),ul=s("f7-actions-label"),bl=s("f7-actions"),Il=s("f7-page");return a(),i(Il,{ptr:"","onPtr:refresh":me,"onPage:afterin":ue},{default:l(()=>[t(Ct,null,{default:l(()=>[t(Ee,{"back-link":e(n)("Back")},null,8,["back-link"]),t(ll,null,{default:l(()=>[t(Vt,{"popover-open":".chart-data-type-popover-menu"},{default:l(()=>[o("span",Zv,c(e(r)),1),t(it,{class:"page-title-bar-icon",color:"gray",style:{opacity:"0.5"},f7:"chevron_down_circle_fill"})]),_:1})]),_:1}),t(nl,null,{default:l(()=>[t(Vt,{"icon-f7":"ellipsis",onClick:ae[0]||(ae[0]=q=>Te.value=!0)})]),_:1})]),_:1}),t(Nt,{class:"chart-data-type-popover-menu","onPopover:open":$t},{default:l(()=>[t(Dt,{dividers:""},{default:l(()=>[t(j,{"group-title":""},{default:l(()=>[o("small",null,c(e(n)("Categorical Analysis")),1)]),_:1}),(a(!0),C(ke,null,Ce(e(pt).values(e(je).CategoricalAnalysis),q=>(a(),i(j,{link:"#","no-chevron":"","popover-close":"",title:e(n)(q.name),class:R({"list-item-selected":e(v)===e(je).CategoricalAnalysis&&e(k).chartDataType===q.type}),key:q.type,onClick:Kt=>ft(e(je).CategoricalAnalysis,q.type)},{after:l(()=>[e(v)===e(je).CategoricalAnalysis&&e(k).chartDataType===q.type?(a(),i(it,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:2},1032,["title","class","onClick"]))),128)),t(j,{"group-title":""},{default:l(()=>[o("small",null,c(e(n)("Trend Analysis")),1)]),_:1}),(a(!0),C(ke,null,Ce(e(pt).values(e(je).TrendAnalysis),q=>(a(),i(j,{link:"#","no-chevron":"","popover-close":"",title:e(n)(q.name),class:R({"list-item-selected":e(v)===e(je).TrendAnalysis&&e(k).chartDataType===q.type}),key:q.type,onClick:Kt=>ft(e(je).TrendAnalysis,q.type)},{after:l(()=>[e(v)===e(je).TrendAnalysis&&e(k).chartDataType===q.type?(a(),i(it,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:2},1032,["title","class","onClick"]))),128)),t(j,{"group-title":""},{default:l(()=>[o("small",null,c(e(n)("Asset Trends")),1)]),_:1}),(a(!0),C(ke,null,Ce(e(pt).values(e(je).AssetTrends),q=>(a(),i(j,{link:"#","no-chevron":"","popover-close":"",title:e(n)(q.name),class:R({"list-item-selected":e(v)===e(je).AssetTrends&&e(k).chartDataType===q.type}),key:q.type,onClick:Kt=>ft(e(je).AssetTrends,q.type)},{after:l(()=>[e(v)===e(je).AssetTrends&&e(k).chartDataType===q.type?(a(),i(it,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1})]),_:1}),e(v)===e(je).CategoricalAnalysis&&e(k).categoricalChartType===e(ua).Pie.type?(a(),i(Ut,{key:0},{default:l(()=>[t(It,{class:"no-border display-block"},{default:l(()=>[o("div",{class:R({"statistics-chart-header":!0,"full-line":!0,"text-align-right":Pe.value===e(gt).LTR,"text-align-left":Pe.value===e(gt).RTL})},[o("span",Xv,c(e(n)("Sort by")),1),t(Vt,{href:"#","popover-open":".sorting-type-popover-menu"},{default:l(()=>[X(c(e(Y)),1)]),_:1})],2)]),_:1}),t(Ht,{class:"pie-chart-container",style:{"margin-top":"-6px"},padding:!1},{default:l(()=>[e(y)?(a(),i(Gt,{key:0,items:[{value:60,color:"7c7c7f"},{value:20,color:"a5a5aa"},{value:20,color:"c5c5c9"}],skeleton:!0,"show-center-text":!0,"show-selected-item-info":!0,class:"statistics-pie-chart","name-field":"name","value-field":"value","color-field":"color","center-text-background":"#cccccc"})):e(y)?u("",!0):(a(),i(Gt,{key:1,items:e(ee).items,"min-valid-percent":1e-4,"show-value":e(ne),"show-percent":e(Z),"show-center-text":!0,"show-selected-item-info":!0,"enable-click-item":!0,"amount-value":!0,"default-currency":e(f),class:"statistics-pie-chart","name-field":"name","value-field":"totalAmount","percent-field":"percent","hidden-field":"hidden",onClick:yt},{default:l(()=>[e(ee).items&&e(ee).items.length?(a(),C("text",Qv,c(e(se)),1)):u("",!0),e(ee).items&&e(ee).items.length?(a(),C("text",Jv,c(e(Me)(e(ee).totalAmount,e(f),16)),1)):u("",!0),!e(ee).items||!e(ee).items.length?(a(),C("text",eg,c(e(n)("No data")),1)):u("",!0)]),_:1},8,["items","show-value","show-percent","default-currency"]))]),_:1})]),_:1})):e(v)===e(je).CategoricalAnalysis&&e(k).categoricalChartType===e(ua).Bar.type?(a(),i(Ut,{key:1},{default:l(()=>[t(It,{class:"no-border display-block"},{default:l(()=>[o("div",tg,[o("div",null,c(e(se)),1),o("div",lg,[o("span",ng,c(e(n)("Sort by")),1),t(Vt,{href:"#","popover-open":".sorting-type-popover-menu"},{default:l(()=>[X(c(e(Y)),1)]),_:1})])]),o("div",ag,[o("div",{class:R({"statistics-list-item-overview-amount":!0,"text-expense":e(k).chartDataType===e(pt).OutflowsByAccount.type||e(k).chartDataType===e(pt).ExpenseByAccount.type||e(k).chartDataType===e(pt).ExpenseByPrimaryCategory.type||e(k).chartDataType===e(pt).ExpenseBySecondaryCategory.type,"text-income":e(k).chartDataType===e(pt).InflowsByAccount.type||e(k).chartDataType===e(pt).IncomeByAccount.type||e(k).chartDataType===e(pt).IncomeByPrimaryCategory.type||e(k).chartDataType===e(pt).IncomeBySecondaryCategory.type})},[!e(y)&&e(ee)&&e(ee).items&&e(ee).items.length?(a(),C("span",og,c(e(Me)(e(ee).totalAmount,e(f))),1)):e(y)||!e(ee)||!e(ee).items||!e(ee).items.length?(a(),C("span",{key:1,class:R({"skeleton-text":e(y)})},c(e(y)?"***.**":"---"),3)):u("",!0)],2)])]),_:1}),t(Ht,{style:{"margin-top":"-14px"},padding:!1},{default:l(()=>[e(y)?(a(),i(Dt,{key:0,class:"statistics-list-item skeleton-text"},{default:l(()=>[(a(),C(ke,null,Ce([1,2,3],q=>t(j,{link:"#",key:q},{media:l(()=>[o("div",sg,[o("div",ig,[t(it,{f7:"app_fill"})])])]),title:l(()=>[...ae[6]||(ae[6]=[o("div",{class:"statistics-list-item-text"},[o("span",null,"Category Name"),o("small",{class:"statistics-percent"},"33.33")],-1)])]),after:l(()=>[...ae[7]||(ae[7]=[o("span",null,"0.00 USD",-1)])]),"inner-end":l(()=>[o("div",rg,[o("div",ug,[t(ye)])])]),_:1})),64))]),_:1})):!e(y)&&(!e(ee)||!e(ee).items||!e(ee).items.length)?(a(),i(Dt,{key:1},{default:l(()=>[t(j,{title:e(n)("No transaction data")},null,8,["title"])]),_:1})):!e(y)&&e(ee)&&e(ee).items&&e(ee).items.length?(a(),i(Dt,{key:2},{default:l(()=>[(a(!0),C(ke,null,Ce(e(ee).items,(q,Kt)=>dt((a(),i(j,{class:"statistics-list-item",link:_e(q.id),key:Kt},{media:l(()=>[o("div",cg,[o("div",dg,[q.icon?(a(),i(Re,{key:0,"icon-type":e(K),"icon-id":q.icon,color:q.color},null,8,["icon-type","icon-id","color"])):q.icon?u("",!0):(a(),i(it,{key:1,f7:"pencil_ellipsis_rectangle"}))])])]),title:l(()=>[o("div",fg,[o("span",null,c(q.name),1),e(Z)&&q.percent>=0?(a(),C("small",pg,c(e(N)(q.percent,2,"<0.01")),1)):u("",!0)])]),after:l(()=>[o("span",null,c(e(Me)(q.totalAmount,e(f))),1)]),"inner-end":l(()=>[o("div",mg,[o("div",vg,[t(ye,{progress:q.percent>=0?q.percent:0,style:vt({"--f7-progressbar-progress-color":q.color?e(Be)(q):""})},null,8,["progress","style"])])])]),_:2},1032,["link"])),[[Tt,!q.hidden]])),128))]),_:1})):u("",!0)]),_:1})]),_:1})):e(v)===e(je).TrendAnalysis?(a(),i(Ut,{key:2},{default:l(()=>[t(It,{class:"no-border display-block"},{default:l(()=>[o("div",gg,[ae[8]||(ae[8]=o("div",null,null,-1)),o("div",hg,[o("span",yg,c(e(n)("Sort by")),1),t(Vt,{href:"#","popover-open":".sorting-type-popover-menu"},{default:l(()=>[X(c(e(Y)),1)]),_:1})])])]),_:1}),t(Ht,{style:{"margin-top":"-14px"},padding:!1},{default:l(()=>[t(kl,{"chart-mode":"monthly",loading:e(y)||L.value,"start-time":void 0,"end-time":void 0,"start-year-month":e(k).trendChartStartYearMonth,"end-year-month":e(k).trendChartEndYearMonth,"sorting-type":e(k).sortingType,"data-aggregation-type":e(Tn).Sum,"date-aggregation-type":e(d),"fiscal-year-start":e(m),items:e(ve)&&e(ve).items&&e(ve).items.length?e(ve).items:[],stacked:e(E),"translate-name":e(M),"default-currency":e(f),"id-field":"id","name-field":"name","value-field":"totalAmount","hidden-field":"hidden","display-orders-field":"displayOrders",onClick:Je},null,8,["loading","start-year-month","end-year-month","sorting-type","data-aggregation-type","date-aggregation-type","fiscal-year-start","items","stacked","translate-name","default-currency"])]),_:1})]),_:1})):e(v)===e(je).AssetTrends?(a(),i(Ut,{key:3},{default:l(()=>[t(It,{class:"no-border display-block"},{default:l(()=>[o("div",_g,[ae[9]||(ae[9]=o("div",null,null,-1)),o("div",kg,[o("span",bg,c(e(n)("Sort by")),1),t(Vt,{href:"#","popover-open":".sorting-type-popover-menu"},{default:l(()=>[X(c(e(Y)),1)]),_:1})])])]),_:1}),t(Ht,{style:{"margin-top":"-14px"},padding:!1},{default:l(()=>[t(kl,{"chart-mode":"daily",loading:e(y)||L.value,"start-time":e(k).assetTrendsChartStartTime,"end-time":e(k).assetTrendsChartEndTime,"start-year-month":void 0,"end-year-month":void 0,"sorting-type":e(k).sortingType,"data-aggregation-type":e(Tn).Last,"date-aggregation-type":e(w),"fiscal-year-start":e(m),items:e(he)&&e(he).items&&e(he).items.length?e(he).items:[],stacked:e(E),"translate-name":e(M),"default-currency":e(f),"id-field":"id","name-field":"name","value-field":"totalAmount","hidden-field":"hidden","display-orders-field":"displayOrders",onClick:Je},null,8,["loading","start-time","end-time","sorting-type","data-aggregation-type","date-aggregation-type","fiscal-year-start","items","stacked","translate-name","default-currency"])]),_:1})]),_:1})):u("",!0),t(Nt,{class:"sorting-type-popover-menu"},{default:l(()=>[t(Dt,{dividers:""},{default:l(()=>[(a(!0),C(ke,null,Ce(e(F),q=>(a(),i(j,{link:"#","no-chevron":"","popover-close":"",title:q.displayName,class:R({"list-item-selected":e(k).sortingType===q.type}),key:q.type,onClick:Kt=>bt(q.type)},{after:l(()=>[e(k).sortingType===q.type?(a(),i(it,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1})]),_:1}),t(xt,{tabbar:"",bottom:"",class:"toolbar-item-auto-size"},{default:l(()=>[t(Vt,{class:R({disabled:L.value||!e(W)}),onClick:ae[1]||(ae[1]=q=>ze(-1))},{default:l(()=>[t(it,{class:"icon-with-direction",f7:"arrow_left_square"})]),_:1},8,["class"]),t(Vt,{class:R({"tabbar-text-with-ellipsis":!0,disabled:L.value||!e(H)}),"popover-open":".date-popover-menu"},{default:l(()=>[o("span",{class:R({"tabbar-item-changed":e(O)})},c(e(J)),3)]),_:1},8,["class"]),t(Vt,{class:R({disabled:L.value||!e(W)}),onClick:ae[2]||(ae[2]=q=>ze(1))},{default:l(()=>[t(it,{class:"icon-with-direction",f7:"arrow_right_square"})]),_:1},8,["class"]),e(v)===e(je).TrendAnalysis?(a(),i(Vt,{key:0,class:R({"tabbar-text-with-ellipsis":!0,disabled:L.value}),"popover-open":".date-aggregation-popover-menu"},{default:l(()=>[o("span",{class:R({"tabbar-item-changed":e(d)!==e(Mt).Default.type})},c(e(te)),3)]),_:1},8,["class"])):u("",!0),e(v)===e(je).AssetTrends?(a(),i(Vt,{key:1,class:R({"tabbar-text-with-ellipsis":!0,disabled:L.value}),"popover-open":".date-aggregation-popover-menu"},{default:l(()=>[o("span",{class:R({"tabbar-item-changed":e(w)!==e(Mt).Default.type})},c(e(x)),3)]),_:1},8,["class"])):u("",!0),(a(!0),C(ke,null,Ce(pe.value,q=>(a(),i(Vt,{class:"tabbar-text-with-ellipsis",key:q.type,onClick:Kt=>rt(q.type)},{default:l(()=>[o("span",{class:R({"tabbar-item-changed":B.value===q.type})},c(q.displayName),3)]),_:2},1032,["onClick"]))),128))]),_:1}),t(Nt,{class:"date-popover-menu","onPopover:open":$t},{default:l(()=>[t(Dt,{dividers:""},{default:l(()=>[(a(!0),C(ke,null,Ce(e($),q=>(a(),i(j,{link:"#","no-chevron":"","popover-close":"",title:q.displayName,class:R({"list-item-selected":e(T)===q.type}),key:q.type,onClick:Kt=>wt(q.type)},{after:l(()=>[e(T)===q.type?(a(),i(it,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),footer:l(()=>[q.isUserCustomRange&&e(re)(q.type)?(a(),C("div",wg,[o("span",null,c(e(b)),1),ae[10]||(ae[10]=o("span",null,"-",-1)),ae[11]||(ae[11]=o("br",null,null,-1)),o("span",null,c(e(z)),1)])):u("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1})]),_:1}),t(Nt,{class:"date-aggregation-popover-menu","onPopover:open":$t},{default:l(()=>[e(v)===e(je).TrendAnalysis?(a(),i(Dt,{key:0,dividers:""},{default:l(()=>[(a(!0),C(ke,null,Ce(e(D),q=>(a(),i(j,{link:"#","no-chevron":"","popover-close":"",title:q.displayName,class:R({"list-item-selected":e(d)===q.type}),key:q.type,onClick:Kt=>St(q.type)},{after:l(()=>[e(d)===q.type?(a(),i(it,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1})):e(v)===e(je).AssetTrends?(a(),i(Dt,{key:1,dividers:""},{default:l(()=>[(a(!0),C(ke,null,Ce(e(V),q=>(a(),i(j,{link:"#","no-chevron":"","popover-close":"",title:q.displayName,class:R({"list-item-selected":e(w)===q.type}),key:q.type,onClick:Kt=>ht(q.type)},{after:l(()=>[e(w)===q.type?(a(),i(it,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1})):u("",!0)]),_:1}),t(Dl,{title:e(n)("Custom Date Range"),"min-time":e(k).categoricalChartStartTime,"max-time":e(k).categoricalChartEndTime,show:xe.value,"onUpdate:show":ae[3]||(ae[3]=q=>xe.value=q),"onDateRange:change":Pt},null,8,["title","min-time","max-time","show"]),t(pl,{title:e(n)("Custom Date Range"),"min-time":e(k).trendChartStartYearMonth,"max-time":e(k).trendChartEndYearMonth,show:Fe.value,"onUpdate:show":ae[4]||(ae[4]=q=>Fe.value=q),"onDateRange:change":Pt},null,8,["title","min-time","max-time","show"]),t(bl,{"close-by-outside-click":"","close-on-escape":"",opened:Te.value,"onActions:closed":ae[5]||(ae[5]=q=>Te.value=!1)},{default:l(()=>[t(al,null,{default:l(()=>[t(jt,{class:R({disabled:L.value}),onClick:Ae},{default:l(()=>[X(c(e(n)("Filter Accounts")),1)]),_:1},8,["class"]),e(Q)?(a(),i(jt,{key:0,class:R({disabled:L.value}),onClick:We},{default:l(()=>[X(c(e(n)("Filter Transaction Categories")),1)]),_:1},8,["class"])):u("",!0),e(le)?(a(),i(jt,{key:1,class:R({disabled:L.value}),onClick:at},{default:l(()=>[X(c(e(n)("Filter Transaction Tags")),1)]),_:1},8,["class"])):u("",!0)]),_:1}),e(oe)?(a(),i(al,{key:0},{default:l(()=>[e(k).keyword?(a(),i(ul,{key:0},{default:l(()=>[X(c(e(k).keyword),1)]),_:1})):u("",!0),t(jt,{class:R({disabled:L.value}),onClick:Qe},{default:l(()=>[X(c(e(n)("Filter transaction description")),1)]),_:1},8,["class"])]),_:1})):u("",!0),t(al,null,{default:l(()=>[t(jt,{onClick:lt},{default:l(()=>[X(c(e(n)("Settings")),1)]),_:1})]),_:1}),t(al,null,{default:l(()=>[t(jt,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),Tg={class:"item-actual-title"},Sg={class:"item-actual-title"},xg={class:"item-actual-title"},Ag={class:"item-actual-title"},$g={class:"item-actual-title"},Dg={class:"item-actual-title"},Ig={class:"item-actual-title"},Fg=Oe({__name:"SettingsPage",setup(p){const{tt:g}=He(),{allChartDataTypes:n,allTimezoneTypesUsedForStatistics:h,allSortingTypes:P,allCategoricalChartTypes:N,allCategoricalChartDateRanges:_,allTrendChartDateRanges:A,allAssetTrendsChartDateRanges:U,defaultChartDataType:y,defaultTimezoneType:v,defaultSortingType:d,defaultCategoricalChartType:w,defaultCategoricalChartDateRange:f,defaultTrendChartDateRange:I,defaultAssetTrendsChartDateRange:m}=Us(),$=S(!1),F=S(!1),D=S(!1),V=S(!1),k=S(!1),K=S(!1),T=S(!1);return(b,z)=>{const J=s("f7-navbar"),r=s("f7-block-title"),Y=s("list-item-selection-popup"),te=s("f7-list-item"),x=s("f7-list"),O=s("f7-page");return a(),i(O,null,{default:l(()=>[t(J,{title:e(g)("Statistics Settings"),"back-link":e(g)("Back")},null,8,["title","back-link"]),t(r,{class:"margin-top"},{default:l(()=>[X(c(e(g)("Common Settings")),1)]),_:1}),t(x,{strong:"",inset:"",dividers:"",class:"settings-list"},{default:l(()=>[t(te,{class:"item-truncate-after-text",link:"#",onClick:z[2]||(z[2]=H=>$.value=!0)},{"after-title":l(()=>[o("div",Tg,[o("span",null,c(e(g)("Default Chart Data Type")),1)])]),after:l(()=>[X(c(e(mt)(e(n),e(y))),1)]),default:l(()=>[t(Y,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(g)("Default Chart Data Type"),"enable-filter":!0,"filter-placeholder":e(g)("Chart Data Type"),"filter-no-items-text":e(g)("No results"),items:e(n),show:$.value,"onUpdate:show":z[0]||(z[0]=H=>$.value=H),modelValue:e(y),"onUpdate:modelValue":z[1]||(z[1]=H=>kt(y)?y.value=H:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1}),t(te,{class:"item-truncate-after-text",link:"#",onClick:z[5]||(z[5]=H=>F.value=!0)},{"after-title":l(()=>[o("div",Sg,[o("span",null,c(e(g)("Timezone Used for Date Range")),1)])]),after:l(()=>[X(c(e(mt)(e(h),e(v))),1)]),default:l(()=>[t(Y,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(g)("Timezone Used for Date Range"),"enable-filter":!0,"filter-placeholder":e(g)("Timezone Type"),"filter-no-items-text":e(g)("No results"),items:e(h),show:F.value,"onUpdate:show":z[3]||(z[3]=H=>F.value=H),modelValue:e(v),"onUpdate:modelValue":z[4]||(z[4]=H=>kt(v)?v.value=H:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1}),t(te,{title:e(g)("Default Account Filter"),link:"/settings/filter/account?type=statisticsDefault"},null,8,["title"]),t(te,{title:e(g)("Default Transaction Category Filter"),link:"/settings/filter/category?type=statisticsDefault"},null,8,["title"]),t(te,{class:"item-truncate-after-text",link:"#",onClick:z[8]||(z[8]=H=>D.value=!0)},{"after-title":l(()=>[o("div",xg,[o("span",null,c(e(g)("Default Sort Order")),1)])]),after:l(()=>[X(c(e(mt)(e(P),e(d))),1)]),default:l(()=>[t(Y,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(g)("Default Sort Order"),"enable-filter":!0,"filter-placeholder":e(g)("Sort Order"),"filter-no-items-text":e(g)("No results"),items:e(P),show:D.value,"onUpdate:show":z[6]||(z[6]=H=>D.value=H),modelValue:e(d),"onUpdate:modelValue":z[7]||(z[7]=H=>kt(d)?d.value=H:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1})]),_:1}),t(r,null,{default:l(()=>[X(c(e(g)("Categorical Analysis Settings")),1)]),_:1}),t(x,{strong:"",inset:"",dividers:"",class:"settings-list"},{default:l(()=>[t(te,{class:"item-truncate-after-text",link:"#",onClick:z[11]||(z[11]=H=>V.value=!0)},{"after-title":l(()=>[o("div",Ag,[o("span",null,c(e(g)("Default Chart Type")),1)])]),after:l(()=>[X(c(e(mt)(e(N),e(w))),1)]),default:l(()=>[t(Y,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(g)("Default Chart Type"),"enable-filter":!0,"filter-placeholder":e(g)("Chart Type"),"filter-no-items-text":e(g)("No results"),items:e(N),show:V.value,"onUpdate:show":z[9]||(z[9]=H=>V.value=H),modelValue:e(w),"onUpdate:modelValue":z[10]||(z[10]=H=>kt(w)?w.value=H:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1}),t(te,{class:"item-truncate-after-text",link:"#",onClick:z[14]||(z[14]=H=>k.value=!0)},{"after-title":l(()=>[o("div",$g,[o("span",null,c(e(g)("Default Date Range")),1)])]),after:l(()=>[X(c(e(mt)(e(_),e(f))),1)]),default:l(()=>[t(Y,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(g)("Default Date Range"),"enable-filter":!0,"filter-placeholder":e(g)("Date Range"),"filter-no-items-text":e(g)("No results"),items:e(_),show:k.value,"onUpdate:show":z[12]||(z[12]=H=>k.value=H),modelValue:e(f),"onUpdate:modelValue":z[13]||(z[13]=H=>kt(f)?f.value=H:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1})]),_:1}),t(r,null,{default:l(()=>[X(c(e(g)("Trend Analysis Settings")),1)]),_:1}),t(x,{strong:"",inset:"",dividers:"",class:"settings-list"},{default:l(()=>[t(te,{class:"item-truncate-after-text",link:"#",onClick:z[17]||(z[17]=H=>K.value=!0)},{"after-title":l(()=>[o("div",Dg,[o("span",null,c(e(g)("Default Date Range")),1)])]),after:l(()=>[X(c(e(mt)(e(A),e(I))),1)]),default:l(()=>[t(Y,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(g)("Default Date Range"),"enable-filter":!0,"filter-placeholder":e(g)("Date Range"),"filter-no-items-text":e(g)("No results"),items:e(A),show:K.value,"onUpdate:show":z[15]||(z[15]=H=>K.value=H),modelValue:e(I),"onUpdate:modelValue":z[16]||(z[16]=H=>kt(I)?I.value=H:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1})]),_:1}),t(r,null,{default:l(()=>[X(c(e(g)("Asset Trends Settings")),1)]),_:1}),t(x,{strong:"",inset:"",dividers:"",class:"settings-list"},{default:l(()=>[t(te,{class:"item-truncate-after-text",link:"#",onClick:z[20]||(z[20]=H=>T.value=!0)},{"after-title":l(()=>[o("div",Ig,[o("span",null,c(e(g)("Default Date Range")),1)])]),after:l(()=>[X(c(e(mt)(e(U),e(m))),1)]),default:l(()=>[t(Y,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(g)("Default Date Range"),"enable-filter":!0,"filter-placeholder":e(g)("Date Range"),"filter-no-items-text":e(g)("No results"),items:e(U),show:T.value,"onUpdate:show":z[18]||(z[18]=H=>T.value=H),modelValue:e(m),"onUpdate:modelValue":z[19]||(z[19]=H=>kt(m)?m.value=H:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1})]),_:1})]),_:1})}}}),Vg={class:"transaction-amount-statistics"},Pg={class:"text-income"},Ug={class:"text-expense"},Ng={class:"display-flex flex-direction-column transaction-date"},Bg={class:"transaction-day full-line flex-direction-column"},Eg={class:"transaction-day-of-week full-line flex-direction-column"},Mg={class:"display-flex no-padding-horizontal"},Lg={class:"item-media"},Rg={class:"transaction-icon display-flex align-items-center"},Og={class:"actual-item-inner"},zg={class:"item-title-row"},Yg={class:"item-title"},Hg={class:"transaction-category-name no-padding"},qg={class:"item-after"},Wg={class:"transaction-amount"},Gg={class:"item-text"},jg={class:"transaction-description"},Kg={class:"item-footer"},Zg={class:"transaction-tags"},Xg={class:"transaction-footer"},Qg={class:"full-line padding-bottom padding-top-half"},Jg={class:"display-flex justify-content-space-between"},eh=Oe({__name:"TextSizeSettingsPage",props:{f7router:{}},setup(p){const g=p,{tt:n,getCurrentLanguageTextDirection:h,getWeekdayShortName:P,getCalendarDisplayDayOfMonthFromDateTime:N,formatDateTimeToShortTime:_,formatDateTimeToGregorianLikeLongYearMonth:A,formatAmountToLocalizedNumeralsWithCurrency:U}=He(),y=Ol(),v=S(Ns()),d=S(y.appSettings.fontSize),w=fe(()=>h()),f=fe(()=>Oi(d.value)),I=fe(()=>A(v.value)),m=fe(()=>N(v.value)),$=fe(()=>P(v.value.getWeekDay())),F=fe(()=>_(v.value));function D(){return""}function V(){const k=g.f7router;d.value!==y.appSettings.fontSize&&(y.setFontSize(d.value),Ua(d.value)),k.back()}return(k,K)=>{const T=s("f7-nav-left"),b=s("f7-nav-title"),z=s("f7-link"),J=s("f7-nav-right"),r=s("f7-navbar"),Y=s("f7-icon"),te=s("f7-list-item"),x=s("f7-list"),O=s("f7-accordion-toggle"),H=s("f7-block-title"),W=s("f7-chip"),Q=s("f7-accordion-content"),le=s("f7-accordion-item"),oe=s("f7-block"),ne=s("f7-range"),se=s("f7-page");return a(),i(se,null,{default:l(()=>[t(r,null,{default:l(()=>[t(T,{"back-link":e(n)("Back")},null,8,["back-link"]),t(b,{title:e(n)("Text Size")},null,8,["title"]),t(J,null,{default:l(()=>[t(z,{"icon-f7":"checkmark_alt",onClick:V})]),_:1})]),_:1}),t(oe,{class:R(["no-padding no-margin readonly",f.value])},{default:l(()=>[t(oe,{class:"combination-list-wrapper margin-vertical"},{default:l(()=>[t(le,null,{default:l(()=>[t(H,null,{default:l(()=>[t(O,null,{default:l(()=>[t(x,{strong:"",inset:"",dividers:"","media-list":"",class:"transaction-amount-list combination-list-header combination-list-opened"},{default:l(()=>[t(te,null,{title:l(()=>[o("small",null,c(I.value),1),o("small",Vg,[o("span",Pg,c(`+${e(U)(12345)}`),1),o("span",Ug,c(`-${e(U)(67890)}`),1)]),t(Y,{class:"combination-list-chevron-icon",f7:"chevron_up"})]),_:1})]),_:1})]),_:1})]),_:1}),t(Q,{style:{height:"auto"}},{default:l(()=>[t(x,{strong:"",inset:"",dividers:"","media-list":"","accordion-list":"",class:"transaction-info-list combination-list-content"},{default:l(()=>[t(te,{"chevron-center":"",class:"transaction-info",link:"#"},{media:l(()=>[o("div",Ng,[o("span",Bg,c(m.value),1),o("span",Eg,c($.value),1)])]),inner:l(()=>[o("div",Mg,[o("div",Lg,[o("div",Rg,[t(Y,{f7:"pencil_ellipsis_rectangle"})])]),o("div",Og,[o("div",zg,[o("div",Yg,[o("div",Hg,[o("span",null,c(e(n)("Category Name")),1)])]),o("div",qg,[o("div",Wg,[o("span",null,c(e(U)(12345)),1)])])]),o("div",Gg,[o("div",jg,[o("span",null,c(e(n)("Description")),1)])]),o("div",Kg,[o("div",Zg,[t(W,{"media-text-color":"var(--f7-chip-text-color)",class:"transaction-tag",text:e(n)("Tag Title")},{media:l(()=>[t(Y,{f7:"number"})]),_:1},8,["text"])]),o("div",Xg,[o("span",null,c(F.value),1),K[2]||(K[2]=o("span",null,"",-1)),o("span",null,c(e(n)("Account Name")),1)])])])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["class"]),t(oe,{class:"fontsize-panel no-padding margin-bottom"},{default:l(()=>[t(oe,{strong:"",inset:"",class:"no-padding-bottom margin-bottom"},{default:l(()=>[o("div",Qg,[o("div",Jg,[K[3]||(K[3]=o("div",{class:"fontsize-minimum"},"A",-1)),K[4]||(K[4]=o("div",{class:"fontsize-maximum"},"A",-1)),o("div",{class:"fontsize-default",style:vt(w.value===e(gt).LTR?`left: calc(${100/e(Tl).MaximumFontSize.type}% - 6px)`:`right: calc(${100/e(Tl).MaximumFontSize.type}% - 6px)`)},c(e(n)("Default")),5)]),t(ne,{min:e(Tl).MinimumFontSize.type,max:e(Tl).MaximumFontSize.type,step:1,scale:!0,"scale-steps":e(Tl).MaximumFontSize.type,"scale-sub-steps":1,"format-scale-label":D,value:d.value,"onUpdate:value":K[0]||(K[0]=Z=>d.value=Z),onRangeChange:K[1]||(K[1]=Z=>d.value=Z)},null,8,["min","max","scale-steps","value"])])]),_:1})]),_:1})]),_:1})}}}),th={class:"item-actual-title"},lh={class:"item-actual-title"},nh={key:1},ah={class:"item-actual-title"},oh={key:1},sh={class:"item-actual-title"},ih={class:"item-actual-title"},rh={key:1},uh={class:"item-actual-title"},ch=Oe({__name:"PageSettingsPage",setup(p){const{tt:g}=He(),{showToast:n}=nt(),{loadingAccounts:h,loadingTransactionCategories:P,hasAnyAccount:N,hasAnyVisibleAccount:_,hasAnyTransactionCategory:A,allTimezoneTypesUsedForStatistics:U,allCurrencySortingTypes:y,allAutoSaveTransactionDraftTypes:v,showAmountInHomePage:d,timezoneUsedForStatisticsInHomePage:w,showTotalAmountInTransactionListPage:f,showTagInTransactionListPage:I,autoSaveTransactionDraft:m,isAutoGetCurrentGeoLocation:$,currencySortByInExchangeRatesPage:F,accountsIncludedInHomePageOverviewDisplayContent:D,accountsIncludedInTotalDisplayContent:V,transactionCategoriesIncludedInHomePageOverviewDisplayContent:k}=Fa(),K=Ol(),T=il(),b=rl(),z=S(!1),J=S(!1),r=S(!1),Y=fe({get:()=>K.appSettings.alwaysShowTransactionPicturesInMobileTransactionEditPage,set:x=>K.setAlwaysShowTransactionPicturesInMobileTransactionEditPage(x)});function te(){h.value=!0,T.loadAllAccounts({force:!1}).then(()=>{h.value=!1}).catch(x=>{h.value=!1,x.processed||n(x.message||x)}),b.loadAllCategories({force:!1}).then(()=>{P.value=!1}).catch(x=>{P.value=!1,x.processed||n(x.message||x)})}return te(),(x,O)=>{const H=s("f7-navbar"),W=s("f7-block-title"),Q=s("f7-toggle"),le=s("f7-list-item"),oe=s("list-item-selection-popup"),ne=s("f7-preloader"),se=s("f7-list"),Z=s("f7-page");return a(),i(Z,null,{default:l(()=>[t(H,{title:e(g)("Page Settings"),"back-link":e(g)("Back")},null,8,["title","back-link"]),t(W,{class:"margin-top"},{default:l(()=>[X(c(e(g)("Overview Page")),1)]),_:1}),t(se,{strong:"",inset:"",dividers:"",class:"settings-list"},{default:l(()=>[t(le,null,{"after-title":l(()=>[X(c(e(g)("Show Amount")),1)]),after:l(()=>[t(Q,{checked:e(d),"onToggle:change":O[0]||(O[0]=E=>d.value=E)},null,8,["checked"])]),_:1}),t(le,{class:"item-truncate-after-text",link:"#",onClick:O[3]||(O[3]=E=>z.value=!0)},{"after-title":l(()=>[o("div",th,[o("span",null,c(e(g)("Timezone Used for Statistics")),1)])]),after:l(()=>[X(c(e(mt)(e(U),e(w))),1)]),default:l(()=>[t(oe,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(g)("Timezone Used for Statistics"),"enable-filter":!0,"filter-placeholder":e(g)("Timezone Type"),"filter-no-items-text":e(g)("No results"),items:e(U),show:z.value,"onUpdate:show":O[1]||(O[1]=E=>z.value=E),modelValue:e(w),"onUpdate:modelValue":O[2]||(O[2]=E=>kt(w)?w.value=E:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1}),t(le,{class:"item-truncate-after-text",link:"/settings/filter/account?type=homePageOverview",disabled:!e(N)},{"after-title":l(()=>[o("div",lh,[o("span",null,c(e(g)("Accounts Included in Overview Statistics")),1)])]),after:l(()=>[e(h)?(a(),i(ne,{key:0})):e(h)?u("",!0):(a(),C("div",nh,c(e(D)),1))]),_:1},8,["disabled"]),t(le,{class:"item-truncate-after-text",disabled:!e(A),link:`/settings/filter/category?type=homePageOverview&allowCategoryTypes=${e(_t).Income},${e(_t).Expense}`},{"after-title":l(()=>[o("div",ah,[o("span",null,c(e(g)("Transaction Categories Included in Overview Statistics")),1)])]),after:l(()=>[e(P)?(a(),i(ne,{key:0})):e(P)?u("",!0):(a(),C("div",oh,c(e(k)),1))]),_:1},8,["disabled","link"])]),_:1}),t(W,null,{default:l(()=>[X(c(e(g)("Transaction List Page")),1)]),_:1}),t(se,{strong:"",inset:"",dividers:""},{default:l(()=>[t(le,null,{"after-title":l(()=>[X(c(e(g)("Show Monthly Total Amount")),1)]),after:l(()=>[t(Q,{checked:e(f),"onToggle:change":O[4]||(O[4]=E=>f.value=E)},null,8,["checked"])]),_:1}),t(le,null,{"after-title":l(()=>[X(c(e(g)("Show Transaction Tag")),1)]),after:l(()=>[t(Q,{checked:e(I),"onToggle:change":O[5]||(O[5]=E=>I.value=E)},null,8,["checked"])]),_:1})]),_:1}),t(W,null,{default:l(()=>[X(c(e(g)("Transaction Edit Page")),1)]),_:1}),t(se,{strong:"",inset:"",dividers:""},{default:l(()=>[t(le,{class:"item-truncate-after-text",link:"#",onClick:O[8]||(O[8]=E=>J.value=!0)},{"after-title":l(()=>[o("div",sh,[o("span",null,c(e(g)("Automatically Save Draft")),1)])]),after:l(()=>[X(c(e(Va)(e(v),e(m))),1)]),default:l(()=>[t(oe,{"value-type":"item","key-field":"value","value-field":"value","title-field":"name",title:e(g)("Automatically Save Draft"),"enable-filter":!0,"filter-placeholder":e(g)("Automatically Save Draft"),"filter-no-items-text":e(g)("No results"),items:e(v),show:J.value,"onUpdate:show":O[6]||(O[6]=E=>J.value=E),modelValue:e(m),"onUpdate:modelValue":O[7]||(O[7]=E=>kt(m)?m.value=E:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1}),t(le,null,{"after-title":l(()=>[X(c(e(g)("Automatically Add Geolocation")),1)]),after:l(()=>[t(Q,{checked:e($),"onToggle:change":O[9]||(O[9]=E=>$.value=E)},null,8,["checked"])]),_:1}),t(le,null,{"after-title":l(()=>[X(c(e(g)("Always Show Transaction Pictures")),1)]),after:l(()=>[t(Q,{checked:Y.value,"onToggle:change":O[10]||(O[10]=E=>Y.value=E)},null,8,["checked"])]),_:1})]),_:1}),t(W,null,{default:l(()=>[X(c(e(g)("Account List Page")),1)]),_:1}),t(se,{strong:"",inset:"",dividers:""},{default:l(()=>[t(le,{class:"item-truncate-after-text",link:"/settings/filter/account?type=accountListTotalAmount",disabled:!e(_)},{"after-title":l(()=>[o("div",ih,[o("span",null,c(e(g)("Accounts Included in Total")),1)])]),after:l(()=>[e(h)?(a(),i(ne,{key:0})):e(h)?u("",!0):(a(),C("div",rh,c(e(V)),1))]),_:1},8,["disabled"])]),_:1}),t(W,null,{default:l(()=>[X(c(e(g)("Exchange Rates Data Page")),1)]),_:1}),t(se,{strong:"",inset:"",dividers:""},{default:l(()=>[t(le,{class:"item-truncate-after-text",link:"#",onClick:O[13]||(O[13]=E=>r.value=!0)},{"after-title":l(()=>[o("div",uh,[o("span",null,c(e(g)("Sort by")),1)])]),after:l(()=>[X(c(e(mt)(e(y),e(F))),1)]),default:l(()=>[t(oe,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(g)("Sort by"),"enable-filter":!0,"filter-placeholder":e(g)("Sort by"),"filter-no-items-text":e(g)("No results"),items:e(y),show:r.value,"onUpdate:show":O[11]||(O[11]=E=>r.value=E),modelValue:e(F),"onUpdate:modelValue":O[12]||(O[12]=E=>kt(F)?F.value=E:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1})]),_:1})]),_:1})}}}),dh={class:"padding-inline-start"},fh={key:0,class:"margin-horizontal-half"},ph={key:1},mh=Oe({__name:"ApplicationCloudSyncSettingsPage",props:{f7router:{}},setup(p){const g=p,{tt:n}=He(),{showToast:h,routeBackOnError:P}=nt(),{ALL_APPLICATION_CLOUD_SETTINGS:N,loading:_,enabling:A,disabling:U,enabledApplicationCloudSettings:y,isEnableCloudSync:v,hasEnabledApplicationCloudSettings:d,enabledApplicationCloudSettingKeys:w,isAllSettingsSelected:f,hasSettingSelectedButNotAllChecked:I,updateSettingsSelected:m,selectAllSettings:$,selectNoneSettings:F,selectInvertSettings:D,setUserApplicationCloudSettings:V}=Bs(),k=tl(),K=S(null),T=S(!1);function b(){_.value=!0,k.getUserApplicationCloudSettings().then(Y=>{V(Y),_.value=!1}).catch(Y=>{Y.processed?_.value=!1:(K.value=Y,h(Y.message||Y))})}function z(Y){A.value=!0,Ke(()=>A.value),k.fullUpdateUserApplicationCloudSettings(w.value).then(()=>{A.value=!1,Se(),h(Y?"Synchronized settings have been updated":"Settings sync has been enabled")}).catch(te=>{A.value=!1,Se(),te.processed||h(te.message||te)})}function J(){U.value=!0,Ke(()=>U.value),k.disableUserApplicationCloudSettings().then(()=>{y.value={},U.value=!1,Se(),h("Settings sync has been disabled")}).catch(Y=>{U.value=!1,Se(),Y.processed||h(Y.message||Y)})}function r(){P(g.f7router,K)}return b(),(Y,te)=>{const x=s("f7-nav-left"),O=s("f7-nav-title"),H=s("f7-link"),W=s("f7-nav-right"),Q=s("f7-navbar"),le=s("f7-list-item"),oe=s("f7-list"),ne=s("f7-icon"),se=s("f7-list-button"),Z=s("f7-actions-button"),E=s("f7-actions-group"),M=s("f7-actions"),ee=s("f7-page");return a(),i(ee,{"onPage:afterin":r},{default:l(()=>[t(Q,null,{default:l(()=>[t(x,{"back-link":e(n)("Back")},null,8,["back-link"]),t(O,{title:e(n)("Settings Sync")},null,8,["title"]),t(W,null,{default:l(()=>[t(H,{"icon-f7":"ellipsis",class:R({disabled:e(_)||e(A)||e(U)}),onClick:te[0]||(te[0]=ve=>T.value=!0)},null,8,["class"])]),_:1})]),_:1}),e(_)?(a(),i(oe,{key:0,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(le,{title:"Status",after:"Unknown"})]),_:1})):e(_)?u("",!0):(a(),i(oe,{key:1,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(le,{title:e(n)("Status"),after:e(n)(e(v)?"Enabled":"Disabled")},null,8,["title","after"])]),_:1})),t(oe,{strong:"",inset:"",dividers:"",class:R(["margin-vertical synchronized-settings-list",{disabled:e(_)||e(A)||e(U)}])},{default:l(()=>[t(le,{"group-title":"",sortable:!1},{default:l(()=>[o("small",null,c(e(n)("Synchronized Settings")),1)]),_:1}),(a(!0),C(ke,null,Ce(e(N),ve=>(a(),i(le,{class:"has-child-list-item",checkbox:"",disabled:e(_)||e(A)||e(U),value:ve.categoryName,checked:e(f)(ve),indeterminate:e(I)(ve),key:ve.categoryName,onChange:he=>e(m)(ve,he.target.checked)},{root:l(()=>[o("ul",dh,[(a(!0),C(ke,null,Ce(ve.items,he=>(a(),i(le,{checkbox:"",disabled:e(_)||e(A)||e(U),title:e(n)(he.settingName),value:he.settingKey,checked:e(y)[he.settingKey],key:he.settingKey,onChange:re=>e(y)[he.settingKey]=re.target.checked},{after:l(()=>[he.mobile?(a(),i(ne,{key:0,class:"synchronized-settings-device-icon",f7:"device_phone_portrait"})):u("",!0),he.desktop?(a(),i(ne,{key:1,class:"synchronized-settings-device-icon",f7:"device_desktop"})):u("",!0)]),_:2},1032,["disabled","title","value","checked","onChange"]))),128))])]),title:l(()=>[o("span",null,c(e(n)(ve.categoryName)),1),ve.categorySubName?(a(),C("span",fh,"/")):u("",!0),ve.categorySubName?(a(),C("span",ph,c(e(n)(ve.categorySubName)),1)):u("",!0)]),_:2},1032,["disabled","value","checked","indeterminate","onChange"]))),128))]),_:1},8,["class"]),e(_)?(a(),i(oe,{key:2,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(se,{class:"disabled"},{default:l(()=>[...te[4]||(te[4]=[X("Operate",-1)])]),_:1})]),_:1})):e(_)?u("",!0):(a(),i(oe,{key:3,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[e(v)?u("",!0):(a(),i(se,{key:0,class:R({disabled:e(_)||e(A)||e(U)||!e(d)}),onClick:te[1]||(te[1]=ve=>z(!1))},{default:l(()=>[X(c(e(n)("Enable Settings Sync")),1)]),_:1},8,["class"])),e(v)?(a(),i(se,{key:1,class:R({disabled:e(_)||e(A)||e(U)||!e(d)}),onClick:te[2]||(te[2]=ve=>z(!0))},{default:l(()=>[X(c(e(n)("Update Synchronized Settings")),1)]),_:1},8,["class"])):u("",!0),e(v)?(a(),i(se,{key:2,class:R({disabled:e(_)||e(A)||e(U)}),onClick:J},{default:l(()=>[X(c(e(n)("Disable")),1)]),_:1},8,["class"])):u("",!0)]),_:1})),t(M,{"close-by-outside-click":"","close-on-escape":"",opened:T.value,"onActions:closed":te[3]||(te[3]=ve=>T.value=!1)},{default:l(()=>[t(E,null,{default:l(()=>[t(Z,{class:R({disabled:e(_)||e(A)||e(U)}),onClick:e($)},{default:l(()=>[X(c(e(n)("Select All")),1)]),_:1},8,["class","onClick"]),t(Z,{class:R({disabled:e(_)||e(A)||e(U)}),onClick:e(F)},{default:l(()=>[X(c(e(n)("Select None")),1)]),_:1},8,["class","onClick"]),t(Z,{class:R({disabled:e(_)||e(A)||e(U)}),onClick:e(D)},{default:l(()=>[X(c(e(n)("Invert Selection")),1)]),_:1},8,["class","onClick"])]),_:1}),t(E,null,{default:l(()=>[t(Z,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),vh={key:0,class:"skeleton-text"},gh={key:0,class:"padding-inline-start"},hh=Oe({__name:"AccountFilterSettingsPage",props:{f7route:{},f7router:{}},setup(p){const g=p,n=g.f7route.query,{tt:h}=He(),{showToast:P,routeBackOnError:N}=nt(),{loading:_,showHidden:A,filterContent:U,filterAccountIds:y,title:v,allowHiddenAccount:d,allCategorizedAccounts:w,allVisibleAccountMap:f,hasAnyAvailableAccount:I,hasAnyVisibleAccount:m,isAccountChecked:$,loadFilterAccountIds:F,saveFilterAccountIds:D}=Es(n.type),V=il(),k=S(b()),K=S(null),T=S(!1);function b(){const Q={},le=$a.values();for(const oe of le)Q[oe.type]={opened:!0};return Q}function z(){V.loadAllAccounts({force:!1}).then(()=>{_.value=!1,F()||(P("Parameter Invalid"),K.value="Parameter Invalid")}).catch(Q=>{Q.processed?_.value=!1:(K.value=Q,P(Q.message||Q))})}function J(Q){const le=Q.target,oe=le.value,ne=f.value[oe];ne&&Ms(y.value,ne,!le.checked)}function r(Q){const le=Q.target,oe=le.value,ne=f.value[oe];ne&&(y.value[ne.id]=!le.checked)}function Y(){Ls(y.value,f.value)}function te(){Rs(y.value,f.value)}function x(){Os(y.value,f.value)}function O(){D(),g.f7router.back()}function H(){U.value=""}function W(){N(g.f7router,K)}return z(),(Q,le)=>{const oe=s("f7-nav-left"),ne=s("f7-nav-title"),se=s("f7-link"),Z=s("f7-nav-right"),E=s("f7-searchbar"),M=s("f7-subnavbar"),ee=s("f7-navbar"),ve=s("f7-icon"),he=s("f7-list-item"),re=s("f7-list"),Be=s("f7-accordion-toggle"),Me=s("f7-block-title"),Le=s("f7-accordion-content"),Ye=s("f7-accordion-item"),Ie=s("f7-block"),be=s("f7-badge"),L=s("ItemIcon"),xe=s("f7-actions-button"),Fe=s("f7-actions-group"),Te=s("f7-actions"),Pe=s("f7-page");return a(),i(Pe,{"with-subnavbar":"","onPage:beforein":H,"onPage:afterin":W},{default:l(()=>[t(ee,null,{default:l(()=>[t(oe,{"back-link":e(h)("Back")},null,8,["back-link"]),t(ne,{title:e(h)(e(v))},null,8,["title"]),t(Z,{class:"navbar-compact-icons"},{default:l(()=>[t(se,{"icon-f7":"ellipsis",class:R({disabled:!e(I)}),onClick:le[0]||(le[0]=pe=>T.value=!0)},null,8,["class"]),t(se,{"icon-f7":"checkmark_alt",class:R({disabled:!e(I)}),onClick:O},null,8,["class"])]),_:1}),t(M,{inner:!1},{default:l(()=>[t(E,{"custom-searchs":"",value:e(U),placeholder:e(h)("Find account"),"disable-button-text":e(h)("Cancel"),onChange:le[1]||(le[1]=pe=>U.value=pe.target.value)},null,8,["value","placeholder","disable-button-text"])]),_:1})]),_:1}),e(_)?(a(),C("div",vh,[(a(),C(ke,null,Ce([1,2,3],pe=>t(Ie,{class:"combination-list-wrapper margin-vertical",key:pe},{default:l(()=>[t(Ye,null,{default:l(()=>[t(Me,null,{default:l(()=>[t(Be,null,{default:l(()=>[t(re,{strong:"",inset:"",dividers:"",class:"combination-list-header combination-list-opened"},{default:l(()=>[t(he,{"group-title":""},{default:l(()=>[le[5]||(le[5]=o("small",null,"Account Category",-1)),t(ve,{class:"combination-list-chevron-icon",f7:"chevron_up"})]),_:1})]),_:1})]),_:1})]),_:1}),t(Le,{style:{height:"auto"}},{default:l(()=>[t(re,{strong:"",inset:"",dividers:"","accordion-list":"",class:"combination-list-content"},{default:l(()=>[(a(!0),C(ke,null,Ce(pe===1?[1]:[1,2],B=>(a(),i(he,{checkbox:"",class:"disabled",title:"Account Name",key:B},{media:l(()=>[t(ve,{f7:"app_fill"})]),_:1}))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)),64))])):u("",!0),!e(_)&&!e(m)?(a(),i(re,{key:1,strong:"",inset:"",dividers:"","accordion-list":"",class:"margin-top"},{default:l(()=>[t(he,{title:e(h)("No available account")},null,8,["title"])]),_:1})):u("",!0),dt(t(Ie,{class:"no-margin no-padding"},{default:l(()=>[(a(!0),C(ke,null,Ce(e(w),pe=>(a(),i(Ie,{class:"combination-list-wrapper margin-vertical",key:pe.category},{default:l(()=>[t(Ye,{opened:k.value[pe.category].opened,"onAccordion:open":B=>k.value[pe.category].opened=!0,"onAccordion:close":B=>k.value[pe.category].opened=!1},{default:l(()=>[t(Me,null,{default:l(()=>[t(Be,null,{default:l(()=>[t(re,{strong:"",inset:"",dividers:"",class:R(["combination-list-header",k.value[pe.category].opened?"combination-list-opened":"combination-list-closed"])},{default:l(()=>[t(he,{"group-title":""},{default:l(()=>[o("small",null,c(e(h)(pe.name)),1),t(ve,{class:"combination-list-chevron-icon",f7:k.value[pe.category].opened?"chevron_up":"chevron_down"},null,8,["f7"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024),t(Le,{style:vt({height:k.value[pe.category].opened?"auto":""})},{default:l(()=>[t(re,{strong:"",inset:"",dividers:"","accordion-list":"",class:"combination-list-content"},{default:l(()=>[(a(!0),C(ke,null,Ce(pe.accounts,B=>(a(),i(he,{checkbox:"",class:R({"has-child-list-item":B.type===e(Ot).MultiSubAccounts.type&&B.subAccounts&&B.subAccounts.length>0}),title:B.name,value:B.id,checked:e(Ys)(B,e(y)),indeterminate:e(zs)(B,e(y)),key:B.id,onChange:J},{media:l(()=>[t(L,{"icon-type":"account","icon-id":B.icon,color:B.color},{default:l(()=>[B.hidden?(a(),i(be,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(ve,{f7:"eye_slash_fill"})]),_:1})):u("",!0)]),_:2},1032,["icon-id","color"])]),root:l(()=>[B.type===e(Ot).MultiSubAccounts.type&&B.subAccounts&&B.subAccounts.length>0?(a(),C("ul",gh,[(a(!0),C(ke,null,Ce(B.subAccounts,_e=>(a(),i(he,{checkbox:"",title:_e.name,value:_e.id,checked:e($)(_e,e(y)),key:_e.id,onChange:r},{media:l(()=>[t(L,{"icon-type":"account","icon-id":_e.icon,color:_e.color},{default:l(()=>[_e.hidden?(a(),i(be,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(ve,{f7:"eye_slash_fill"})]),_:1})):u("",!0)]),_:2},1032,["icon-id","color"])]),_:2},1032,["title","value","checked"]))),128))])):u("",!0)]),_:2},1032,["class","title","value","checked","indeterminate"]))),128))]),_:2},1024)]),_:2},1032,["style"])]),_:2},1032,["opened","onAccordion:open","onAccordion:close"])]),_:2},1024))),128))]),_:1},512),[[Tt,!e(_)&&e(m)]]),t(Te,{"close-by-outside-click":"","close-on-escape":"",opened:T.value,"onActions:closed":le[4]||(le[4]=pe=>T.value=!1)},{default:l(()=>[t(Fe,null,{default:l(()=>[t(xe,{class:R({disabled:!e(m)}),onClick:Y},{default:l(()=>[X(c(e(h)("Select All")),1)]),_:1},8,["class"]),t(xe,{class:R({disabled:!e(m)}),onClick:te},{default:l(()=>[X(c(e(h)("Select None")),1)]),_:1},8,["class"]),t(xe,{class:R({disabled:!e(m)}),onClick:x},{default:l(()=>[X(c(e(h)("Invert Selection")),1)]),_:1},8,["class"])]),_:1}),e(d)?(a(),i(Fe,{key:0},{default:l(()=>[e(A)?u("",!0):(a(),i(xe,{key:0,onClick:le[2]||(le[2]=pe=>A.value=!0)},{default:l(()=>[X(c(e(h)("Show Hidden Accounts")),1)]),_:1})),e(A)?(a(),i(xe,{key:1,onClick:le[3]||(le[3]=pe=>A.value=!1)},{default:l(()=>[X(c(e(h)("Hide Hidden Accounts")),1)]),_:1})):u("",!0)]),_:1})):u("",!0),t(Fe,null,{default:l(()=>[t(xe,{bold:"",close:""},{default:l(()=>[X(c(e(h)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),yh={key:0,class:"skeleton-text"},_h={class:"padding-inline-start"},kh={key:0,class:"padding-inline-start"},bh=Oe({__name:"CategoryFilterSettingsPage",props:{f7route:{},f7router:{}},setup(p){const g=p,n=g.f7route.query,{tt:h}=He(),{showToast:P,routeBackOnError:N}=nt(),{loading:_,showHidden:A,filterContent:U,filterCategoryIds:y,title:v,allVisibleTransactionCategories:d,allVisibleTransactionCategoryMap:w,hasAnyAvailableCategory:f,hasAnyVisibleCategory:I,isCategoryChecked:m,getCategoryTypeName:$,loadFilterCategoryIds:F,saveFilterCategoryIds:D}=Hs(n.type,n.allowCategoryTypes),V=rl(),k=S(null),K=S(!1),T=S({[_t.Income.toString()]:{opened:!0},[_t.Expense.toString()]:{opened:!0},[_t.Transfer.toString()]:{opened:!0}});function b(){V.loadAllCategories({force:!1}).then(()=>{_.value=!1,F()||(P("Parameter Invalid"),k.value="Parameter Invalid")}).catch(W=>{W.processed?_.value=!1:(k.value=W,P(W.message||W))})}function z(W){const Q=W.target,le=Q.value,oe=w.value[le];oe&&(y.value[oe.id]=!Q.checked)}function J(W){const Q=W.target,le=Q.value,oe=w.value[le];qs(y.value,!Q.checked,oe)}function r(){Ws(y.value,w.value)}function Y(){Gs(y.value,w.value)}function te(){js(y.value,w.value)}function x(){D(),g.f7router.back()}function O(){U.value=""}function H(){N(g.f7router,k)}return b(),(W,Q)=>{const le=s("f7-nav-left"),oe=s("f7-nav-title"),ne=s("f7-link"),se=s("f7-nav-right"),Z=s("f7-searchbar"),E=s("f7-subnavbar"),M=s("f7-navbar"),ee=s("f7-icon"),ve=s("f7-list-item"),he=s("f7-list"),re=s("f7-accordion-toggle"),Be=s("f7-block-title"),Me=s("f7-accordion-content"),Le=s("f7-accordion-item"),Ye=s("f7-block"),Ie=s("f7-badge"),be=s("ItemIcon"),L=s("f7-actions-button"),xe=s("f7-actions-group"),Fe=s("f7-actions"),Te=s("f7-page");return a(),i(Te,{"with-subnavbar":"","onPage:beforein":O,"onPage:afterin":H},{default:l(()=>[t(M,null,{default:l(()=>[t(le,{"back-link":e(h)("Back")},null,8,["back-link"]),t(oe,{title:e(h)(e(v))},null,8,["title"]),t(se,{class:"navbar-compact-icons"},{default:l(()=>[t(ne,{"icon-f7":"ellipsis",class:R({disabled:!e(f)}),onClick:Q[0]||(Q[0]=Pe=>K.value=!0)},null,8,["class"]),t(ne,{"icon-f7":"checkmark_alt",class:R({disabled:!e(f)}),onClick:x},null,8,["class"])]),_:1}),t(E,{inner:!1},{default:l(()=>[t(Z,{"custom-searchs":"",value:e(U),placeholder:e(h)("Find category"),"disable-button-text":e(h)("Cancel"),onChange:Q[1]||(Q[1]=Pe=>U.value=Pe.target.value)},null,8,["value","placeholder","disable-button-text"])]),_:1})]),_:1}),e(_)?(a(),C("div",yh,[(a(),C(ke,null,Ce([1,2],Pe=>t(Ye,{class:"combination-list-wrapper margin-vertical",key:Pe},{default:l(()=>[t(Le,null,{default:l(()=>[t(Be,null,{default:l(()=>[t(re,null,{default:l(()=>[t(he,{strong:"",inset:"",dividers:"",class:"combination-list-header combination-list-opened"},{default:l(()=>[t(ve,{"group-title":""},{default:l(()=>[Q[5]||(Q[5]=o("small",null,"Transaction Category",-1)),t(ee,{class:"combination-list-chevron-icon",f7:"chevron_up"})]),_:1})]),_:1})]),_:1})]),_:1}),t(Me,{style:{height:"auto"}},{default:l(()=>[t(he,{strong:"",inset:"",dividers:"","accordion-list":"",class:"combination-list-content"},{default:l(()=>[(a(),C(ke,null,Ce([1,2],pe=>t(ve,{checkbox:"",class:"disabled",title:"Category Name",key:pe},{media:l(()=>[t(ee,{f7:"app_fill"})]),root:l(()=>[o("ul",_h,[(a(),C(ke,null,Ce([1,2,3],B=>t(ve,{checkbox:"",class:"disabled",title:"Sub Category Name",key:B},{media:l(()=>[t(ee,{f7:"app_fill"})]),_:1})),64))])]),_:1})),64))]),_:1})]),_:1})]),_:1})]),_:1})),64))])):e(_)?u("",!0):(a(!0),C(ke,{key:1},Ce(e(d),(Pe,pe)=>(a(),i(Ye,{class:"combination-list-wrapper margin-vertical",key:pe},{default:l(()=>[t(Le,{opened:T.value[pe].opened,"onAccordion:open":B=>T.value[pe].opened=!0,"onAccordion:close":B=>T.value[pe].opened=!1},{default:l(()=>[t(Be,null,{default:l(()=>[t(re,null,{default:l(()=>[t(he,{strong:"",inset:"",dividers:"",class:R(["combination-list-header",T.value[pe].opened?"combination-list-opened":"combination-list-closed"])},{default:l(()=>[t(ve,{"group-title":""},{default:l(()=>[o("small",null,c(e($)(parseInt(pe))),1),t(ee,{class:"combination-list-chevron-icon",f7:T.value[pe].opened?"chevron_up":"chevron_down"},null,8,["f7"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024),t(Me,{style:vt({height:T.value[pe].opened?"auto":""})},{default:l(()=>[!Pe||!Pe.length?(a(),i(he,{key:0,strong:"",inset:"",dividers:"","accordion-list":"",class:"combination-list-content"},{default:l(()=>[t(ve,{title:e(h)("No available category")},null,8,["title"])]),_:1})):Pe&&Pe.length?(a(),i(he,{key:1,strong:"",inset:"",dividers:"","accordion-list":"",class:"combination-list-content"},{default:l(()=>[(a(!0),C(ke,null,Ce(Pe,B=>(a(),i(ve,{checkbox:"",class:R({"has-child-list-item":B.subCategories&&B.subCategories.length>0}),title:B.name,value:B.id,checked:e(Zs)(B,e(y)),indeterminate:e(Ks)(B,e(y)),key:B.id,onChange:J},{media:l(()=>[t(be,{"icon-type":"category","icon-id":B.icon,color:B.color},{default:l(()=>[B.hidden?(a(),i(Ie,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(ee,{f7:"eye_slash_fill"})]),_:1})):u("",!0)]),_:2},1032,["icon-id","color"])]),root:l(()=>[B.subCategories&&B.subCategories.length>0?(a(),C("ul",kh,[(a(!0),C(ke,null,Ce(B.subCategories,_e=>(a(),i(ve,{checkbox:"",title:_e.name,value:_e.id,checked:e(m)(_e,e(y)),key:_e.id,onChange:z},{media:l(()=>[t(be,{"icon-type":"category","icon-id":_e.icon,color:_e.color},{default:l(()=>[_e.hidden?(a(),i(Ie,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(ee,{f7:"eye_slash_fill"})]),_:1})):u("",!0)]),_:2},1032,["icon-id","color"])]),_:2},1032,["title","value","checked"]))),128))])):u("",!0)]),_:2},1032,["class","title","value","checked","indeterminate"]))),128))]),_:2},1024)):u("",!0)]),_:2},1032,["style"])]),_:2},1032,["opened","onAccordion:open","onAccordion:close"])]),_:2},1024))),128)),t(Fe,{"close-by-outside-click":"","close-on-escape":"",opened:K.value,"onActions:closed":Q[4]||(Q[4]=Pe=>K.value=!1)},{default:l(()=>[t(xe,null,{default:l(()=>[t(L,{class:R({disabled:!e(I)}),onClick:r},{default:l(()=>[X(c(e(h)("Select All")),1)]),_:1},8,["class"]),t(L,{class:R({disabled:!e(I)}),onClick:Y},{default:l(()=>[X(c(e(h)("Select None")),1)]),_:1},8,["class"]),t(L,{class:R({disabled:!e(I)}),onClick:te},{default:l(()=>[X(c(e(h)("Invert Selection")),1)]),_:1},8,["class"])]),_:1}),t(xe,null,{default:l(()=>[e(A)?u("",!0):(a(),i(L,{key:0,onClick:Q[2]||(Q[2]=Pe=>A.value=!0)},{default:l(()=>[X(c(e(h)("Show Hidden Transaction Categories")),1)]),_:1})),e(A)?(a(),i(L,{key:1,onClick:Q[3]||(Q[3]=Pe=>A.value=!1)},{default:l(()=>[X(c(e(h)("Hide Hidden Transaction Categories")),1)]),_:1})):u("",!0)]),_:1}),t(xe,null,{default:l(()=>[t(L,{bold:"",close:""},{default:l(()=>[X(c(e(h)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),wh=Oe({__name:"TransactionTagFilterSettingsPage",props:{f7route:{},f7router:{}},setup(p){const g=p,n=g.f7route.query,{tt:h}=He(),{showToast:P,routeBackOnError:N}=nt(),{loading:_,showHidden:A,filterContent:U,filterTagIds:y,includeTagFilterType:v,excludeTagFilterType:d,includeTagsCount:w,excludeTagsCount:f,title:I,allVisibleTags:m,hasAnyAvailableTag:$,hasAnyVisibleTag:F,loadFilterTagIds:D,saveFilterTagIds:V}=Xs(n.type),k=ln(),K=S(null),T=S(""),b=S(!1),z=S({default:{opened:!0}});function J(){k.loadAllTags({force:!1}).then(()=>{_.value=!1,D()||(P("Parameter Invalid"),K.value="Parameter Invalid")}).catch(H=>{H.processed?_.value=!1:(K.value=H,P(H.message||H))})}function r(H){y.value[T.value]=H,T.value=""}function Y(H){for(const W of m.value)y.value[W.id]=H}function te(){V(),g.f7router.back()}function x(){U.value=""}function O(){N(g.f7router,K)}return J(),(H,W)=>{const Q=s("f7-nav-left"),le=s("f7-nav-title"),oe=s("f7-link"),ne=s("f7-nav-right"),se=s("f7-searchbar"),Z=s("f7-subnavbar"),E=s("f7-navbar"),M=s("f7-icon"),ee=s("f7-list-item"),ve=s("f7-list"),he=s("f7-accordion-toggle"),re=s("f7-block-title"),Be=s("f7-accordion-content"),Me=s("f7-accordion-item"),Le=s("f7-block"),Ye=s("f7-badge"),Ie=s("f7-popover"),be=s("f7-actions-button"),L=s("f7-actions-group"),xe=s("f7-actions"),Fe=s("f7-page");return a(),i(Fe,{"with-subnavbar":"","onPage:beforein":x,"onPage:afterin":O},{default:l(()=>[t(E,null,{default:l(()=>[t(Q,{"back-link":e(h)("Back")},null,8,["back-link"]),t(le,{title:e(h)(e(I))},null,8,["title"]),t(ne,{class:"navbar-compact-icons"},{default:l(()=>[t(oe,{"icon-f7":"ellipsis",class:R({disabled:!e($)}),onClick:W[0]||(W[0]=Te=>b.value=!0)},null,8,["class"]),t(oe,{"icon-f7":"checkmark_alt",class:R({disabled:!e($)}),onClick:te},null,8,["class"])]),_:1}),t(Z,{inner:!1},{default:l(()=>[t(se,{"custom-searchs":"",value:e(U),placeholder:e(h)("Find tag"),"disable-button-text":e(h)("Cancel"),onChange:W[1]||(W[1]=Te=>U.value=Te.target.value)},null,8,["value","placeholder","disable-button-text"])]),_:1})]),_:1}),e(_)?(a(),i(Le,{key:0,class:"combination-list-wrapper margin-vertical skeleton-text"},{default:l(()=>[t(Me,null,{default:l(()=>[t(re,null,{default:l(()=>[t(he,null,{default:l(()=>[t(ve,{strong:"",inset:"",dividers:"",class:"combination-list-header combination-list-opened"},{default:l(()=>[t(ee,{"group-title":""},{default:l(()=>[W[10]||(W[10]=o("small",null,"Tags",-1)),t(M,{class:"combination-list-chevron-icon",f7:"chevron_up"})]),_:1})]),_:1})]),_:1})]),_:1}),t(Be,{style:{height:"auto"}},{default:l(()=>[t(ve,{strong:"",inset:"",dividers:"","accordion-list":"",class:"combination-list-content"},{default:l(()=>[(a(),C(ke,null,Ce([1,2,3],Te=>t(ee,{checkbox:"",class:"disabled",title:"Tag Name",key:Te},{media:l(()=>[t(M,{f7:"app_fill"})]),_:1})),64))]),_:1})]),_:1})]),_:1})]),_:1})):u("",!0),!e(_)&&!e(F)?(a(),i(ve,{key:1,strong:"",inset:"",dividers:"","accordion-list":"",class:"margin-top"},{default:l(()=>[t(ee,{title:e(h)("No available tag")},null,8,["title"])]),_:1})):u("",!0),dt(t(Le,{class:"combination-list-wrapper margin-vertical",key:"default"},{default:l(()=>[e(w)>1?(a(),i(ve,{key:0,class:"margin-top-half margin-bottom",strong:"",inset:"",dividers:""},{default:l(()=>[(a(!0),C(ke,null,Ce([e(bn).HasAny,e(bn).HasAll],Te=>(a(),i(ee,{radio:"",title:e(h)(Te.name),key:Te.type,value:Te.type,checked:e(v)===Te.type,onChange:Pe=>v.value=Te.type},null,8,["title","value","checked","onChange"]))),128))]),_:1})):u("",!0),e(f)>1?(a(),i(ve,{key:1,class:"margin-top-half margin-bottom",strong:"",inset:"",dividers:""},{default:l(()=>[(a(!0),C(ke,null,Ce([e(bn).NotHasAny,e(bn).NotHasAll],Te=>(a(),i(ee,{radio:"",title:e(h)(Te.name),key:Te.type,value:Te.type,checked:e(d)===Te.type,onChange:Pe=>d.value=Te.type},null,8,["title","value","checked","onChange"]))),128))]),_:1})):u("",!0),t(Me,{opened:z.value.default.opened,"onAccordion:open":W[2]||(W[2]=Te=>z.value.default.opened=!0),"onAccordion:close":W[3]||(W[3]=Te=>z.value.default.opened=!1)},{default:l(()=>[t(re,null,{default:l(()=>[t(he,null,{default:l(()=>[t(ve,{strong:"",inset:"",dividers:"",class:R(["combination-list-header",z.value.default.opened?"combination-list-opened":"combination-list-closed"])},{default:l(()=>[t(ee,{"group-title":""},{default:l(()=>[o("small",null,c(e(h)("Tags")),1),t(M,{class:"combination-list-chevron-icon",f7:z.value.default.opened?"chevron_up":"chevron_down"},null,8,["f7"])]),_:1})]),_:1},8,["class"])]),_:1})]),_:1}),t(Be,{style:vt({height:z.value.default.opened?"auto":""})},{default:l(()=>[t(ve,{strong:"",inset:"",dividers:"","accordion-list":"",class:"combination-list-content"},{default:l(()=>[(a(!0),C(ke,null,Ce(e(m),Te=>dt((a(),i(ee,{link:"#","popover-open":".tag-filter-state-popover-menu",title:Te.name,value:Te.id,key:Te.id,after:e(h)(e(y)[Te.id]===e(Cl).Include?"Included":e(y)[Te.id]===e(Cl).Exclude?"Excluded":"Default"),onClick:Pe=>T.value=Te.id},{media:l(()=>[t(M,{class:"transaction-tag-icon",f7:"number"},{default:l(()=>[Te.hidden?(a(),i(Ye,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(M,{f7:"eye_slash_fill"})]),_:1})):u("",!0)]),_:2},1024)]),_:2},1032,["title","value","after","onClick"])),[[Tt,e(A)||!Te.hidden]])),128))]),_:1})]),_:1},8,["style"])]),_:1},8,["opened"])]),_:1},512),[[Tt,!e(_)&&e(F)]]),t(Ie,{class:"tag-filter-state-popover-menu"},{default:l(()=>[t(ve,{dividers:""},{default:l(()=>[(a(!0),C(ke,null,Ce([{type:e(Cl).Include,displayName:e(h)("Included")},{type:e(Cl).Default,displayName:e(h)("Default")},{type:e(Cl).Exclude,displayName:e(h)("Excluded")}],Te=>(a(),i(ee,{link:"#","no-chevron":"","popover-close":"",title:Te.displayName,class:R({"list-item-selected":e(y)[T.value]===Te.type}),key:Te.type,onClick:Pe=>r(Te.type)},{after:l(()=>[e(y)[T.value]===Te.type?(a(),i(M,{key:0,class:"list-item-checked-icon",f7:"checkmark_alt"})):u("",!0)]),_:2},1032,["title","class","onClick"]))),128))]),_:1})]),_:1}),t(xe,{"close-by-outside-click":"","close-on-escape":"",opened:b.value,"onActions:closed":W[9]||(W[9]=Te=>b.value=!1)},{default:l(()=>[t(L,null,{default:l(()=>[t(be,{class:R({disabled:!e(F)}),onClick:W[4]||(W[4]=Te=>Y(e(Cl).Include))},{default:l(()=>[X(c(e(h)("Set All to Included")),1)]),_:1},8,["class"]),t(be,{class:R({disabled:!e(F)}),onClick:W[5]||(W[5]=Te=>Y(e(Cl).Default))},{default:l(()=>[X(c(e(h)("Set All to Default")),1)]),_:1},8,["class"]),t(be,{class:R({disabled:!e(F)}),onClick:W[6]||(W[6]=Te=>Y(e(Cl).Exclude))},{default:l(()=>[X(c(e(h)("Set All to Excluded")),1)]),_:1},8,["class"])]),_:1}),t(L,null,{default:l(()=>[e(A)?u("",!0):(a(),i(be,{key:0,onClick:W[7]||(W[7]=Te=>A.value=!0)},{default:l(()=>[X(c(e(h)("Show Hidden Transaction Tags")),1)]),_:1})),e(A)?(a(),i(be,{key:1,onClick:W[8]||(W[8]=Te=>A.value=!1)},{default:l(()=>[X(c(e(h)("Hide Hidden Transaction Tags")),1)]),_:1})):u("",!0)]),_:1}),t(L,null,{default:l(()=>[t(be,{bold:"",close:""},{default:l(()=>[X(c(e(h)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),Ch={class:"item-actual-title"},Th=Oe({__name:"SettingsPage",props:{f7router:{}},setup(p){const g=p,{tt:n,formatDateTimeToLongDate:h,initLocale:P}=He(),{showToast:N,showConfirm:_}=nt(),{allThemes:A,allTimezones:U,timeZone:y,isAutoUpdateExchangeRatesData:v,showAccountBalance:d}=Fa(),w=Rl(),f=Ol(),I=tl(),m=Dn(),$=`${Qs()}`,F=S(!1),D=S(!1),V=S(!1),k=fe(()=>I.currentUserNickname||n("User")),K=fe({get:()=>f.appSettings.theme,set:x=>{x!==f.appSettings.theme&&(f.setTheme(x),location.reload())}}),T=fe(()=>{for(const x of U.value)if(x.name===y.value)return x.displayNameWithUtcOffset;return""}),b=fe({get:()=>f.appSettings.swipeBack,set:x=>{x!==f.appSettings.swipeBack&&(f.setEnableSwipeBack(x),location.reload())}}),z=fe({get:()=>f.appSettings.animate,set:x=>{x!==f.appSettings.animate&&(f.setEnableAnimate(x),location.reload())}}),J=fe(()=>f.appSettings.applicationLock),r=fe(()=>{if(!m.exchangeRatesLastUpdateTime)return"";const x=$n(m.exchangeRatesLastUpdateTime);return h(x)});function Y(){_("Are you sure you want to switch to desktop version?",()=>{window.location.replace(Ta())})}function te(){_("Are you sure you want to log out?",()=>{F.value=!0,Ke(()=>F.value),w.logout().then(()=>{F.value=!1,Se(),f.clearAppSettings();const x=P(I.currentUserLanguage,f.appSettings.timeZone);f.updateLocalizedDefaultSettings(x),Gn(I.currentUserExpenseAmountColor,I.currentUserIncomeAmountColor),g.f7router.navigate("/")}).catch(x=>{F.value=!1,Se(),x.processed||N(x.message||x)})})}return(x,O)=>{const H=s("f7-navbar"),W=s("f7-block-title"),Q=s("f7-list-item"),le=s("f7-list-button"),oe=s("f7-list"),ne=s("list-item-selection-popup"),se=s("f7-toggle"),Z=s("f7-page");return a(),i(Z,null,{default:l(()=>[t(H,{title:e(n)("Settings"),"back-link":e(n)("Back")},null,8,["title","back-link"]),t(W,{class:"margin-top"},{default:l(()=>[X(c(k.value),1)]),_:1}),t(oe,{strong:"",inset:"",dividers:""},{default:l(()=>[t(Q,{title:e(n)("User Profile"),link:"/user/profile"},null,8,["title"]),t(Q,{title:e(n)("Transaction Categories"),link:"/category/all"},null,8,["title"]),t(Q,{title:e(n)("Transaction Tags"),link:"/tag/list"},null,8,["title"]),t(Q,{title:e(n)("Transaction Templates"),link:"/template/list"},null,8,["title"]),e(Js)()?(a(),i(Q,{key:0,title:e(n)("Scheduled Transactions"),link:"/schedule/list"},null,8,["title"])):u("",!0),t(Q,{title:e(n)("Data Management"),link:"/user/data/management"},null,8,["title"]),t(Q,{title:e(n)("Two-Factor Authentication"),link:"/user/2fa"},null,8,["title"]),t(Q,{title:e(n)("Device & Sessions"),link:"/user/sessions"},null,8,["title"]),t(le,{class:R({disabled:F.value}),onClick:te},{default:l(()=>[X(c(e(n)("Log Out")),1)]),_:1},8,["class"])]),_:1}),t(W,null,{default:l(()=>[X(c(e(n)("Application")),1)]),_:1}),t(oe,{strong:"",inset:"",dividers:"",class:"settings-list"},{default:l(()=>[t(Q,{link:"#",title:e(n)("Theme"),after:e(Va)(e(A),K.value),onClick:O[2]||(O[2]=E=>D.value=!0)},{default:l(()=>[t(ne,{"value-type":"item","key-field":"value","value-field":"value","title-field":"name",title:e(n)("Theme"),"enable-filter":!0,"filter-placeholder":e(n)("Theme"),"filter-no-items-text":e(n)("No results"),items:e(A),show:D.value,"onUpdate:show":O[0]||(O[0]=E=>D.value=E),modelValue:K.value,"onUpdate:modelValue":O[1]||(O[1]=E=>K.value=E)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["title","after"]),t(Q,{title:e(n)("Text Size"),link:"/settings/textsize"},null,8,["title"]),t(Q,{class:"item-truncate-after-text",link:"#",onClick:O[5]||(O[5]=E=>V.value=!0)},{"after-title":l(()=>[o("div",Ch,[o("span",null,c(e(n)("Timezone")),1)])]),after:l(()=>[X(c(T.value),1)]),default:l(()=>[t(ne,{"value-type":"item","key-field":"name","value-field":"name","title-field":"displayNameWithUtcOffset",title:e(n)("Timezone"),"enable-filter":!0,"filter-placeholder":e(n)("Timezone"),"filter-no-items-text":e(n)("No results"),items:e(U),show:V.value,"onUpdate:show":O[3]||(O[3]=E=>V.value=E),modelValue:e(y),"onUpdate:modelValue":O[4]||(O[4]=E=>kt(y)?y.value=E:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1}),t(Q,{title:e(n)("Application Lock"),after:J.value?e(n)("Enabled"):e(n)("Disabled"),link:"/app_lock"},null,8,["title","after"]),t(Q,{title:e(n)("Exchange Rates Data"),after:r.value,link:"/exchange_rates"},null,8,["title","after"]),t(Q,null,{"after-title":l(()=>[X(c(e(n)("Auto-update Exchange Rates Data")),1)]),after:l(()=>[t(se,{checked:e(v),"onToggle:change":O[6]||(O[6]=E=>v.value=E)},null,8,["checked"])]),_:1}),t(Q,null,{"after-title":l(()=>[X(c(e(n)("Show Account Balance")),1)]),after:l(()=>[t(se,{checked:e(d),"onToggle:change":O[7]||(O[7]=E=>d.value=E)},null,8,["checked"])]),_:1}),t(Q,{title:e(n)("Page Settings"),link:"/settings/page"},null,8,["title"]),t(Q,{title:e(n)("Statistics Settings"),link:"/statistic/settings"},null,8,["title"]),t(Q,{title:e(n)("Settings Sync"),link:"/settings/sync"},null,8,["title"]),t(Q,null,{"after-title":l(()=>[X(c(e(n)("Enable Swipe Back")),1)]),after:l(()=>[t(se,{checked:b.value,"onToggle:change":O[8]||(O[8]=E=>b.value=E)},null,8,["checked"])]),_:1}),t(Q,null,{"after-title":l(()=>[X(c(e(n)("Enable Animation")),1)]),after:l(()=>[t(se,{checked:z.value,"onToggle:change":O[9]||(O[9]=E=>z.value=E)},null,8,["checked"])]),_:1}),t(Q,{link:"#","no-chevron":"",title:e(n)("Switch to Desktop Version"),onClick:Y},null,8,["title"]),t(Q,{title:e(n)("About"),link:"/about",after:$},null,8,["title"])]),_:1})]),_:1})}}}),Sh=Oe({__name:"ApplicationLockPage",setup(p){const{tt:g}=He(),{showToast:n}=nt(),{isSupportedWebAuthn:h,isEnableApplicationLock:P,isEnableApplicationLockWebAuthn:N}=ei(),_=Ol(),A=tl(),U=Ll(),y=S(""),v=S(""),d=S(!1),w=S(!1);function f(m){if(_.appSettings.applicationLock){n("Application lock has been enabled");return}if(!m){y.value="",d.value=!0;return}if(!y.value||y.value.length!==6){Wl(()=>{y.value=""}),n("Invalid PIN code");return}const $=A.currentUserBasicInfo;if(!$||!$.username){Wl(()=>{y.value=""}),n("An error occurred");return}ti($.username,m),_.setEnableApplicationLock(!0),U.saveTransactionDraft(),_.setEnableApplicationLockWebAuthn(!1),wn(),d.value=!1}function I(m){if(!_.appSettings.applicationLock){n("Application lock is not enabled");return}if(!m){v.value="",w.value=!0;return}if(!li(m)){Wl(()=>{v.value=""}),n("Incorrect PIN code");return}ni(),_.setEnableApplicationLock(!1),U.saveTransactionDraft(),_.setEnableApplicationLockWebAuthn(!1),wn(),w.value=!1}return xl(N,m=>{const $=ai();m&&$&&A.currentUserBasicInfo?(Ke(),oi($,A.currentUserBasicInfo).then(({id:F})=>{Se(),si(F),_.setEnableApplicationLockWebAuthn(!0),n("You have enabled WebAuthn successfully")}).catch(F=>{sl.error("failed to enable WebAuthn",F),Se(),F.notSupported?n("WebAuth is not supported on this device"):F.name==="NotAllowedError"?n("User has canceled authentication"):F.invalid?n("Failed to enable WebAuthn"):n("User has canceled or this device does not support WebAuthn"),N.value=!1,_.setEnableApplicationLockWebAuthn(!1),wn()})):(_.setEnableApplicationLockWebAuthn(!1),wn())}),(m,$)=>{const F=s("f7-nav-left"),D=s("f7-nav-title"),V=s("f7-navbar"),k=s("f7-list-item"),K=s("f7-toggle"),T=s("f7-list-button"),b=s("f7-list"),z=s("pin-code-input-sheet"),J=s("f7-page");return a(),i(J,null,{default:l(()=>[t(V,null,{default:l(()=>[t(F,{"back-link":e(g)("Back")},null,8,["back-link"]),t(D,{title:e(g)("Application Lock")},null,8,["title"])]),_:1}),t(b,{strong:"",inset:"",dividers:"",class:"margin-top"},{default:l(()=>[t(k,{title:e(g)("Status"),after:e(g)(e(P)?"Enabled":"Disabled")},null,8,["title","after"]),e(P)?(a(),i(k,{key:0},{default:l(()=>[o("span",null,c(e(g)("Unlock with PIN Code")),1),t(K,{checked:"",disabled:""})]),_:1})):u("",!0),e(P)&&e(h)?(a(),i(k,{key:1},{default:l(()=>[o("span",null,c(e(g)("Unlock with WebAuthn")),1),t(K,{checked:e(N),"onToggle:change":$[0]||($[0]=r=>N.value=r)},null,8,["checked"])]),_:1})):u("",!0),e(P)?(a(),i(T,{key:2,onClick:$[1]||($[1]=r=>I(null))},{default:l(()=>[X(c(e(g)("Disable")),1)]),_:1})):u("",!0),e(P)?u("",!0):(a(),i(T,{key:3,onClick:$[2]||($[2]=r=>f(null))},{default:l(()=>[X(c(e(g)("Enable")),1)]),_:1}))]),_:1}),t(z,{title:e(g)("PIN Code"),hint:e(g)("Please enter a new 6-digit PIN code. The PIN code would encrypt your local data, so you need to enter it every time you open this app. If this PIN code is lost, you will need to log in again."),show:d.value,"onUpdate:show":$[3]||($[3]=r=>d.value=r),modelValue:y.value,"onUpdate:modelValue":$[4]||($[4]=r=>y.value=r),"onPincode:confirm":f},null,8,["title","hint","show","modelValue"]),t(z,{title:e(g)("PIN Code"),hint:e(g)("Your current PIN code is required to disable application lock."),show:w.value,"onUpdate:show":$[5]||($[5]=r=>w.value=r),modelValue:v.value,"onUpdate:modelValue":$[6]||($[6]=r=>v.value=r),"onPincode:confirm":I},null,8,["title","hint","show","modelValue"])]),_:1})}}}),xh={class:"no-padding no-margin"},Ah={class:"smaller"},$h={class:"no-padding no-margin"},Dh={style:{"margin-inline-end":"5px"}},Ih={class:"smaller"},Fh={key:1},Vh={key:2},Ph=Oe({__name:"ListPage",props:{f7router:{}},setup(p){const g=p,{tt:n,getCurrentLanguageTextDirection:h,getCurrentNumeralSystemType:P,getCurrencyName:N,formatAmountToLocalizedNumerals:_,formatExchangeRateAmountToWesternArabicNumerals:A}=He(),{showAlert:U,showToast:y,openExternalUrl:v}=nt(),{baseCurrency:d,baseAmount:w,defaultCurrency:f,exchangeRatesData:I,isUserCustomExchangeRates:m,exchangeRatesDataUpdateTime:$,availableExchangeRates:F,getConvertedAmount:D,setAsBaseline:V}=ii(),k=Dn(),K=S(!1),T=S(El()),b=S(!1),z=S(!1),J=S(!1),r=S(!1),Y=S(null),te=S(!1),x=fe(()=>h()),O=fe(()=>P()),H=fe(()=>_(w.value,d.value)),W=fe(()=>w.value>=1e8||w.value<=-1e8?"ebk-small-amount":w.value>=1e6||w.value<=-1e6?"ebk-normal-amount":"ebk-large-amount");function Q(E){return"exchangeRate_"+E.currencyCode}function le(E){if(K.value){E?.();return}K.value=!0,E||Ke(),k.getLatestExchangeRates({silent:!1,force:!0}).then(()=>{E?.(),K.value=!1,Se(),y("Exchange rates data has been updated")}).catch(M=>{E?.(),K.value=!1,Se(),M.processed||y(M.message||M)})}function oe(){g.f7router.navigate("/exchange_rates/update")}function ne(E,M){if(!E){U("An error occurred");return}if(!M){Y.value=E,te.value=!0;return}te.value=!1,Y.value=null,Ke(),k.deleteUserCustomExchangeRate({currency:E.currencyCode,beforeResolve:ee=>{$l(Q(E),ee)}}).then(()=>{E.currencyCode===d.value&&(d.value=f.value),Se()}).catch(ee=>{Se(),ee.processed||y(ee.message||ee)})}function se(E,M){const ee=k.latestExchangeRateMap[d.value],ve=D(w.value/100,ee,E);if(!ve)return M?O.value.digitZero:dl.WesternArabicNumerals.digitZero;let he=A(ve);return M&&(he=O.value.replaceWesternArabicDigitsToLocalizedDigits(he)),he}function Z(){T.value=El(),b.value=!1}return k.getLatestExchangeRates({silent:!0,force:!1}).then(()=>{if(I.value&&I.value.exchangeRates){const E=I.value.exchangeRates;let M=!1;for(const ee of E)if(ee.currency===d.value){M=!0;break}M||y("There is no exchange rates data for your default currency")}}),(E,M)=>{const ee=s("f7-nav-left"),ve=s("f7-nav-title"),he=s("f7-link"),re=s("f7-nav-right"),Be=s("f7-navbar"),Me=s("list-item-selection-popup"),Le=s("f7-list-item"),Ye=s("number-pad-sheet"),Ie=s("f7-list"),be=s("f7-swipeout-button"),L=s("f7-icon"),xe=s("f7-swipeout-actions"),Fe=s("f7-actions-button"),Te=s("f7-actions-group"),Pe=s("f7-actions"),pe=s("f7-actions-label"),B=s("f7-page");return a(),i(B,{ptr:"","onPtr:refresh":le},{default:l(()=>[t(Be,null,{default:l(()=>[t(ee,{"back-link":e(n)("Back")},null,8,["back-link"]),t(ve,{title:e(n)("Exchange Rates Data")},null,8,["title"]),t(re,null,{default:l(()=>[t(he,{"icon-f7":"ellipsis",onClick:M[0]||(M[0]=_e=>z.value=!0)})]),_:1})]),_:1}),e(I)&&e(I).exchangeRates&&e(I).exchangeRates.length?(a(),i(Ie,{key:0,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Le,{class:"list-item-with-header-and-title list-item-no-item-after",link:"#",header:e(n)("Base Currency"),onClick:M[3]||(M[3]=_e=>J.value=!0)},{title:l(()=>[o("div",xh,[o("span",null,c(e(N)(e(d)))+"",1),o("small",Ah,c(e(d)),1)])]),default:l(()=>[t(Me,{"value-type":"item","key-field":"currencyCode","value-field":"currencyCode","title-field":"currencyDisplayName","after-field":"currencyCode",title:e(n)("Base Currency"),"enable-filter":!0,"filter-placeholder":e(n)("Currency"),"filter-no-items-text":e(n)("No results"),items:e(F),show:J.value,"onUpdate:show":M[1]||(M[1]=_e=>J.value=_e),modelValue:e(d),"onUpdate:modelValue":M[2]||(M[2]=_e=>kt(d)?d.value=_e:null)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header"]),t(Le,{class:R(["currency-base-amount",W.value]),link:"#","no-chevron":"",header:e(n)("Base Amount"),title:H.value,onClick:M[6]||(M[6]=_e=>r.value=!0)},{default:l(()=>[t(Ye,{"min-value":e(yl),"max-value":e(_l),currency:e(d),show:r.value,"onUpdate:show":M[4]||(M[4]=_e=>r.value=_e),modelValue:e(w),"onUpdate:modelValue":M[5]||(M[5]=_e=>kt(w)?w.value=_e:null)},null,8,["min-value","max-value","currency","show","modelValue"])]),_:1},8,["class","header","title"])]),_:1})):u("",!0),!e(I)||!e(I).exchangeRates||!e(I).exchangeRates.length?(a(),i(Ie,{key:1,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Le,{title:e(n)("No exchange rates data")},null,8,["title"])]),_:1})):u("",!0),e(I)&&e(I).exchangeRates&&e(I).exchangeRates.length?(a(),i(Ie,{key:2,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[(a(!0),C(ke,null,Ce(e(F),_e=>(a(),i(Le,{swipeout:"",id:Q(_e),after:se(_e,!0),key:T.value+"_"+_e.currencyCode,"onSwipeout:closed":M[7]||(M[7]=Ne=>Z())},{title:l(()=>[o("div",$h,[o("span",Dh,c(_e.currencyDisplayName),1),o("small",Ih,c(_e.currencyCode),1)])]),default:l(()=>[_e.currencyCode!==e(d)||_e.currencyCode!==e(f)&&e(m)?(a(),i(xe,{key:0,left:x.value===e(gt).RTL,right:x.value===e(gt).LTR},{default:l(()=>[b.value||_e.currencyCode!==e(d)?(a(),i(be,{key:0,color:"primary",close:"",text:e(n)("Set as Base"),class:R({disabled:_e.currencyCode===e(d)}),onClick:Ne=>{e(V)(_e.currencyCode,se(_e,!1)),b.value=!0}},null,8,["text","class","onClick"])):u("",!0),_e.currencyCode!==e(f)&&e(m)?(a(),i(be,{key:1,color:"red",class:"padding-horizontal",onClick:Ne=>ne(_e,!1)},{default:l(()=>[t(L,{f7:"trash"})]),_:1},8,["onClick"])):u("",!0)]),_:2},1032,["left","right"])):u("",!0)]),_:2},1032,["id","after"]))),128))]),_:1})):u("",!0),e(I)&&e(I).exchangeRates&&e(I).exchangeRates.length?(a(),i(Ie,{key:3,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[e($)?(a(),i(Le,{key:0},{default:l(()=>[o("small",null,c(e(n)("Last Updated")),1),o("small",null,c(e($)),1)]),_:1})):u("",!0),t(Le,null,{default:l(()=>[o("small",null,c(e(n)("Data source")),1),o("small",null,[!e(m)&&e(I).referenceUrl?(a(),i(he,{key:0,onClick:M[8]||(M[8]=_e=>e(v)(e(I).referenceUrl))},{default:l(()=>[X(c(e(I).dataSource),1)]),_:1})):!e(m)&&!e(I).referenceUrl?(a(),C("span",Fh,c(e(I).dataSource),1)):e(m)?(a(),C("span",Vh,c(e(n)("User Custom")),1)):u("",!0)])]),_:1})]),_:1})):u("",!0),t(Pe,{"close-by-outside-click":"","close-on-escape":"",opened:z.value,"onActions:closed":M[11]||(M[11]=_e=>z.value=!1)},{default:l(()=>[e(m)?(a(),i(Te,{key:0},{default:l(()=>[t(Fe,{class:R({disabled:K.value}),onClick:M[9]||(M[9]=_e=>oe())},{default:l(()=>[o("span",null,c(e(n)("Update")),1)]),_:1},8,["class"])]),_:1})):u("",!0),t(Te,null,{default:l(()=>[t(Fe,{class:R({disabled:K.value}),onClick:M[10]||(M[10]=_e=>le(void 0))},{default:l(()=>[o("span",null,c(e(n)("Refresh")),1)]),_:1},8,["class"])]),_:1}),t(Te,null,{default:l(()=>[t(Fe,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(Pe,{"close-by-outside-click":"","close-on-escape":"",opened:te.value,"onActions:closed":M[13]||(M[13]=_e=>te.value=!1)},{default:l(()=>[t(Te,null,{default:l(()=>[t(pe,null,{default:l(()=>[X(c(e(n)("Are you sure you want to delete this user custom exchange rate?")),1)]),_:1}),t(Fe,{color:"red",onClick:M[12]||(M[12]=_e=>ne(Y.value,!0))},{default:l(()=>[X(c(e(n)("Delete")),1)]),_:1})]),_:1}),t(Te,null,{default:l(()=>[t(Fe,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),Uh={class:"no-padding no-margin"},Nh={class:"smaller"},Bh={class:"no-padding no-margin"},Eh={class:"smaller"},Mh=Oe({__name:"UpdatePage",props:{f7router:{}},setup(p){const g=p,{tt:n,getAllCurrencies:h,getCurrencyName:P}=He(),{showToast:N}=nt(),_=tl(),A=Dn(),U=S(!1),y=S(_.currentUserDefaultCurrency),v=S(1),d=S(_.currentUserDefaultCurrency),w=S(1),f=S(!1),I=fe(()=>h());function m(){v.value=1,d.value=_.currentUserDefaultCurrency,w.value=1}function $(){const F=g.f7router;U.value=!0,Ke(()=>U.value),A.updateUserCustomExchangeRate({currency:d.value,rate:w.value/v.value}).then(()=>{U.value=!1,Se(),N("You have updated exchange rate"),F.back()}).catch(D=>{U.value=!1,Se(),D.processed||N(D.message||D)})}return m(),(F,D)=>{const V=s("f7-nav-left"),k=s("f7-nav-title"),K=s("f7-link"),T=s("f7-nav-right"),b=s("f7-navbar"),z=s("list-number-input"),J=s("f7-list-item"),r=s("f7-list"),Y=s("f7-icon"),te=s("f7-block"),x=s("list-item-selection-popup"),O=s("f7-page");return a(),i(O,null,{default:l(()=>[t(b,null,{default:l(()=>[t(V,{"back-link":e(n)("Back")},null,8,["back-link"]),t(k,{title:e(n)("Update User Custom Exchange Rate")},null,8,["title"]),t(T,null,{default:l(()=>[t(K,{class:R({disabled:U.value||!v.value||!d.value||!w.value}),text:e(n)("Update"),onClick:$},null,8,["class","text"])]),_:1})]),_:1}),t(r,{form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{list:l(()=>[t(z,{disabled:U.value,label:e(n)("Amount"),placeholder:e(n)("Amount"),"min-value":e(da),"max-value":e(ca),"max-decimal-count":4,modelValue:v.value,"onUpdate:modelValue":D[0]||(D[0]=H=>v.value=H)},null,8,["disabled","label","placeholder","min-value","max-value","modelValue"])]),default:l(()=>[t(J,{class:R(["list-item-with-header-and-title list-item-no-item-after",{disabled:!0}]),link:"#",header:e(n)("Currency"),"no-chevron":!0},{title:l(()=>[o("div",Uh,[o("span",null,c(e(P)(y.value))+"",1),o("small",Nh,c(y.value),1)])]),_:1},8,["header"])]),_:1}),t(te,{class:"display-flex justify-content-center full-line margin-vertical"},{default:l(()=>[t(Y,{class:"separate-icon",f7:"arrow_up_arrow_down"})]),_:1}),t(r,{form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{list:l(()=>[t(z,{disabled:U.value,label:e(n)("Amount"),placeholder:e(n)("Amount"),"min-value":e(da),"max-value":e(ca),"max-decimal-count":4,modelValue:w.value,"onUpdate:modelValue":D[1]||(D[1]=H=>w.value=H)},null,8,["disabled","label","placeholder","min-value","max-value","modelValue"])]),default:l(()=>[t(J,{class:R(["list-item-with-header-and-title list-item-no-item-after",{disabled:U.value}]),link:"#",header:e(n)("Currency"),onClick:D[4]||(D[4]=H=>f.value=!0)},{title:l(()=>[o("div",Bh,[o("span",null,c(e(P)(d.value))+"",1),o("small",Eh,c(d.value),1)])]),default:l(()=>[t(x,{"value-type":"item","key-field":"currencyCode","value-field":"currencyCode","title-field":"displayName","after-field":"currencyCode",title:e(n)("Currency Name"),"enable-filter":!0,"filter-placeholder":e(n)("Currency"),"filter-no-items-text":e(n)("No results"),items:I.value,show:f.value,"onUpdate:show":D[2]||(D[2]=H=>f.value=H),modelValue:d.value,"onUpdate:modelValue":D[3]||(D[3]=H=>d.value=H)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header"])]),_:1})]),_:1})}}}),Lh={class:"margin-top-half"},Rh={class:"contributors-table"},Oh={class:"contributors-table"},zh={key:0},Yh={key:0},Hh={key:0},qh={key:1},Wh={key:2},Gh={key:3,class:"work-break-all"},jh={key:4},Kh={key:5,class:"work-break-all"},Zh=Oe({__name:"AboutPage",setup(p){const{tt:g,getLanguageInfo:n}=He(),{showAlert:h,openExternalUrl:P}=nt(),{clientVersion:N,clientVersionMatchServerVersion:_,serverDisplayVersion:A,clientBuildTime:U,exchangeRatesData:y,isUserCustomExchangeRates:v,mapProviderName:d,mapProviderWebsite:w,contributors:f,licenseLines:I,thirdPartyLicenses:m,refreshBrowserCache:$,init:F}=ri(),D=S(!1),V=S(0),k=fe(()=>V.value>=5);function K(){let T=`${g("Frontend Version")}: ${N}`;A.value&&(T+=`<br/>${g("Backend Version")}: ${A.value}`),V.value++,A.value&&A.value!=="unknown"&&A.value!==N&&h(T)}return F(),(T,b)=>{const z=s("f7-nav-left"),J=s("f7-nav-title"),r=s("f7-link"),Y=s("f7-nav-right"),te=s("f7-navbar"),x=s("f7-block-title"),O=s("f7-list-item"),H=s("f7-list"),W=s("f7-block"),Q=s("f7-page"),le=s("f7-popup"),oe=s("f7-actions-button"),ne=s("f7-actions-group"),se=s("f7-actions");return a(),i(Q,null,{default:l(()=>[t(te,null,{default:l(()=>[t(z,{"back-link":e(g)("Back")},null,8,["back-link"]),t(J,{title:e(g)("About")},null,8,["title"]),t(Y,{class:R({"navbar-hidden-icon":e(_)&&!k.value})},{default:l(()=>[e(_)&&!k.value?(a(),i(r,{key:0,"icon-f7":""})):!e(_)||k.value?(a(),i(r,{key:1,"icon-f7":"ellipsis",onClick:b[0]||(b[0]=Z=>D.value=!0)})):u("",!0)]),_:1},8,["class"])]),_:1}),t(x,{class:"margin-top"},{default:l(()=>[X(c(e(g)("global.app.title")),1)]),_:1}),t(H,{strong:"",inset:"",dividers:""},{default:l(()=>[t(O,{title:e(g)("Version"),after:e(N),onClick:K},null,8,["title","after"]),e(U)?(a(),i(O,{key:0,title:e(g)("Build Time"),after:e(U)},null,8,["title","after"])):u("",!0),t(O,{title:e(g)("Official Website"),link:"#",onClick:b[1]||(b[1]=Z=>e(P)("https://github.com/mayswind/ezbookkeeping"))},null,8,["title"]),t(O,{title:e(g)("Report Issue"),link:"#",onClick:b[2]||(b[2]=Z=>e(P)("https://github.com/mayswind/ezbookkeeping/issues"))},null,8,["title"]),t(O,{title:e(g)("Getting help"),link:"#",onClick:b[3]||(b[3]=Z=>e(P)("https://ezbookkeeping.mayswind.net"))},null,8,["title"]),t(O,{title:e(g)("License"),link:"#","popup-open":".license-popup"},null,8,["title"])]),_:1}),e(y)&&!e(v)?(a(),i(x,{key:0,class:"margin-top"},{default:l(()=>[X(c(e(g)("Exchange Rates Data")),1)]),_:1})):u("",!0),e(y)&&!e(v)?(a(),i(H,{key:1,strong:"",inset:"",dividers:""},{default:l(()=>[e(y).referenceUrl?(a(),i(O,{key:0,title:e(g)("Provider"),after:e(y).dataSource,link:"#",onClick:b[4]||(b[4]=Z=>e(P)(e(y).referenceUrl))},null,8,["title","after"])):u("",!0),e(y).referenceUrl?u("",!0):(a(),i(O,{key:1,title:e(g)("Provider"),after:e(y).dataSource},null,8,["title","after"]))]),_:1})):u("",!0),e(d)?(a(),i(x,{key:2,class:"margin-top"},{default:l(()=>[X(c(e(g)("Map")),1)]),_:1})):u("",!0),e(d)?(a(),i(H,{key:3,strong:"",inset:"",dividers:""},{default:l(()=>[e(w)?(a(),i(O,{key:0,title:e(g)("Provider"),after:e(d),link:"#",onClick:b[5]||(b[5]=Z=>e(P)(e(w)))},null,8,["title","after"])):u("",!0),e(w)?u("",!0):(a(),i(O,{key:1,title:e(g)("Provider"),after:e(d)},null,8,["title","after"]))]),_:1})):u("",!0),t(le,{push:"","swipe-to-close":"","swipe-handler":".swipe-handler",class:"license-popup"},{default:l(()=>[t(Q,null,{default:l(()=>[t(te,null,{default:l(()=>[b[8]||(b[8]=o("div",{class:"swipe-handler"},null,-1)),t(J,{class:"license-title"},{default:l(()=>[X(c(e(g)("License")),1)]),_:1})]),_:1}),t(W,{strong:"",outline:"",class:"license-content no-margin-top"},{default:l(()=>[o("p",null,[(a(!0),C(ke,null,Ce(e(I),(Z,E)=>(a(),C("span",{key:E,style:vt({display:Z?"initial":"block",padding:Z?"0":"0 0 1em 0"})},c(Z),5))),128))]),b[13]||(b[13]=o("hr",null,null,-1)),b[14]||(b[14]=o("p",null,[o("span",null,"ezBookkeeping's codebase and localization translation rely on contributions from the community. The following people have contributed to ezBookkeeping:")],-1)),o("div",null,[b[10]||(b[10]=o("strong",null,"Project Maintainer",-1)),o("div",Lh,[t(r,{target:"_blank",onClick:b[6]||(b[6]=Z=>e(P)("https://github.com/mayswind"))},{default:l(()=>[...b[9]||(b[9]=[X("@mayswind",-1)])]),_:1})])]),b[15]||(b[15]=o("p",{class:"margin-top"},[o("strong",null,"Code Contributors")],-1)),o("table",Rh,[b[11]||(b[11]=o("thead",null,[o("tr",null,[o("th",null,"Contributor")])],-1)),o("tbody",null,[(a(!0),C(ke,null,Ce(e(f).code,(Z,E)=>(a(),C("tr",{key:E},[o("td",null,[t(r,{target:"_blank",onClick:M=>e(P)(`https://github.com/${Z}`)},{default:l(()=>[X(" @"+c(Z),1)]),_:2},1032,["onClick"])])]))),128))])]),b[16]||(b[16]=o("p",{class:"margin-top"},[o("strong",null,"Translation Contributors")],-1)),o("table",Oh,[b[12]||(b[12]=o("thead",null,[o("tr",null,[o("th",null,"Tag"),o("th",null,"Language"),o("th",null,"Contributors")])],-1)),o("tbody",null,[(a(!0),C(ke,null,Ce(e(f).translators,(Z,E)=>dt((a(),C("tr",{key:E},[o("td",null,c(E),1),o("td",null,c(e(n)(E)?.displayName),1),o("td",null,[(a(!0),C(ke,null,Ce(Z,(M,ee)=>(a(),C(ke,{key:M},[t(r,{target:"_blank",onClick:ve=>e(P)(`https://github.com/${M}`)},{default:l(()=>[X(" @"+c(M),1)]),_:2},1032,["onClick"]),ee<Z.length-1?(a(),C("span",zh,", ")):u("",!0)],64))),128)),!Z||Z.length<1?(a(),C("span",Yh,"/")):u("",!0)])])),[[Tt,!!e(n)(E)?.displayName]])),128))])]),b[17]||(b[17]=o("p",{class:"margin-top margin-bottom"},[o("span",null,"ezBookkeeping also contains additional third party software and illustration."),o("br"),o("span",null,"All the third party software / illustration included or linked is redistributed under the terms and conditions of their original licenses.")],-1)),(a(!0),C(ke,null,Ce(e(m),Z=>(a(),C("p",{key:Z.name},[o("strong",null,c(Z.name),1),Z.copyright?(a(),C("br",Hh)):u("",!0),Z.copyright?(a(),C("span",qh,c(Z.copyright),1)):u("",!0),Z.url?(a(),C("br",Wh)):u("",!0),Z.url?(a(),C("span",Gh,c(Z.url),1)):u("",!0),Z.licenseUrl?(a(),C("br",jh)):u("",!0),Z.licenseUrl?(a(),C("span",Kh,"License: "+c(Z.licenseUrl),1)):u("",!0)]))),128))]),_:1})]),_:1})]),_:1}),t(se,{"close-by-outside-click":"","close-on-escape":"",opened:D.value,"onActions:closed":b[7]||(b[7]=Z=>D.value=!1)},{default:l(()=>[t(ne,null,{default:l(()=>[t(oe,{onClick:e($)},{default:l(()=>[X(c(e(g)("Refresh Browser Cache")),1)]),_:1},8,["onClick"])]),_:1}),t(ne,null,{default:l(()=>[t(oe,{bold:"",close:""},{default:l(()=>[X(c(e(g)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1})}}}),Xh={class:"smaller"},Qh=Oe({__name:"UserProfilePage",props:{f7router:{}},setup(p){const g=p,{tt:n,getCurrentLanguageTextDirection:h,getAllLanguageOptions:P,getAllCurrencies:N,getCurrencyName:_,formatFiscalYearStartToGregorianLikeLongMonth:A}=He(),{showAlert:U,showToast:y,routeBackOnError:v}=nt(),{newProfile:d,emailVerified:w,loading:f,resending:I,saving:m,allAccounts:$,allVisibleAccounts:F,allVisibleCategorizedAccounts:D,allWeekDays:V,allCalendarDisplayTypes:k,allDateDisplayTypes:K,allLongDateFormats:T,allShortDateFormats:b,allLongTimeFormats:z,allShortTimeFormats:J,allFiscalYearFormats:r,allCurrencyDisplayTypes:Y,allNumeralSystemTypes:te,allDecimalSeparators:x,allDigitGroupingSymbols:O,allDigitGroupingTypes:H,allCoordinateDisplayTypes:W,allExpenseAmountColorTypes:Q,allIncomeAmountColorTypes:le,allTransactionEditScopeTypes:oe,languageTitle:ne,supportDigitGroupingSymbol:se,inputIsNotChangedProblemMessage:Z,inputInvalidProblemMessage:E,langAndRegionInputInvalidProblemMessage:M,extendInputInvalidProblemMessage:ee,inputIsNotChanged:ve,inputIsInvalid:he,langAndRegionInputIsInvalid:re,extendInputIsInvalid:Be,setCurrentUserProfile:Me,doAfterProfileUpdate:Le}=ui(),Ye=Rl(),Ie=tl(),be=il(),L=S(""),xe=S(!1),Fe=S(null),Te=S(!1),Pe=S(!1),pe=S(!1),B=S(!1),_e=S(!1),Ne=S(!1),me=S(!1),rt=S(!1),ft=S(!1),bt=S(!1),St=S(!1),ht=S(!1),wt=S(!1),Pt=S(!1),ze=S(!1),Ae=S(!1),We=S(!1),at=S(!1),Qe=S(!1),lt=S(!1),$t=S(!1),yt=S(!1),Je=S(!1),ue=fe(()=>P(!0)),ce=fe(()=>N()),ae=fe(()=>{for(const Ct of ue.value)if(Ct.languageTag===d.value.language)return Ct.nativeDisplayName;return n("Unknown")}),Ee=fe(()=>mt(V.value,d.value.firstDayOfWeek));function it(){f.value=!0;const Ct=[be.loadAllAccounts({force:!1}),Ie.getCurrentUserProfile()];Promise.all(Ct).then(j=>{const Dt=j[1];Me(Dt),xe.value=!!Dt.noPassword,f.value=!1}).catch(j=>{j.processed?f.value=!1:(Fe.value=j,y(j.message||j))})}function Vt(Ct){const j=g.f7router;Te.value=!1;const Dt=Z.value||E.value||ee.value||M.value;if(Dt){U(Dt);return}if(d.value.password&&!Ct){Te.value=!0;return}const Nt=h();m.value=!0,Ke(()=>m.value),Ye.updateUserProfile(d.value.toProfileUpdateRequest(L.value)).then(It=>{m.value=!1,Se(),L.value="",Le(It.user),y("Your profile has been successfully updated"),Nt===h()&&j.back()}).catch(It=>{m.value=!1,Se(),L.value="",It.processed||y(It.message||It)})}function ll(){I.value=!0,Ke(()=>I.value),Ye.resendVerifyEmailByLoginedUser().then(()=>{I.value=!1,Se(),y("Validation email has been sent")}).catch(Ct=>{I.value=!1,Se(),Ct.processed||y(Ct.message||Ct)})}function nl(){v(g.f7router,Fe)}return it(),(Ct,j)=>{const Dt=s("f7-nav-left"),Nt=s("f7-nav-title"),It=s("f7-link"),Gt=s("f7-nav-right"),Ht=s("f7-navbar"),Ut=s("f7-list-input"),ye=s("f7-list"),Re=s("f7-list-item"),kl=s("two-column-list-item-selection-sheet"),xt=s("list-item-selection-popup"),Dl=s("f7-block"),pl=s("fiscal-year-start-selection-sheet"),jt=s("f7-actions-button"),al=s("f7-actions-group"),ul=s("f7-actions"),bl=s("password-input-sheet"),Il=s("f7-page");return a(),i(Il,{"onPage:afterin":nl},{default:l(()=>[t(Ht,null,{default:l(()=>[t(Dt,{"back-link":e(n)("Back")},null,8,["back-link"]),t(Nt,{title:e(n)("User Profile")},null,8,["title"]),t(Gt,{class:"navbar-compact-icons"},{default:l(()=>[t(It,{"icon-f7":"ellipsis",class:R({disabled:!e(qn)()||e(f)||e(w)}),onClick:j[0]||(j[0]=q=>Je.value=!0)},null,8,["class"]),t(It,{"icon-f7":"checkmark_alt",class:R({disabled:e(ve)||e(he)||e(m)}),onClick:j[1]||(j[1]=q=>Vt(xe.value))},null,8,["class"])]),_:1})]),_:1}),e(f)?(a(),i(ye,{key:0,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Ut,{label:"Password",placeholder:"Your password"}),t(Ut,{label:"Confirm Password",placeholder:"Re-enter the password"}),t(Ut,{label:"E-mail",placeholder:"Your email address"}),t(Ut,{label:"Nickname",placeholder:"Your nickname"})]),_:1})):u("",!0),e(f)?(a(),i(ye,{key:1,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Default Account",title:"Unspecified"}),t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Editable Transaction Range",title:"All",link:"#"})]),_:1})):u("",!0),e(f)?(a(),i(ye,{key:2,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Default Language",title:"Language",link:"#"}),t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Default Currency",title:"Currency",link:"#"}),t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"First Day of Week",title:"Week Day",link:"#"}),t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Fiscal Year Start Date",title:"January 1"})]),_:1})):u("",!0),e(f)?(a(),i(ye,{key:3,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Calendar Display Type",title:"Calendar",link:"#"}),t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Date Display Type",title:"Calendar",link:"#"}),t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Long Date Format",title:"YYYY-MM-DD",link:"#"}),t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Short Date Format",title:"YYYY-MM-DD",link:"#"}),t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Long Time Format",title:"HH:mm:ss",link:"#"}),t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Short Time Format",title:"HH:mm",link:"#"}),t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Fiscal Year Format",title:"FY YYYY",link:"#"})]),_:1})):u("",!0),e(f)?(a(),i(ye,{key:4,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Currency Display Mode",title:"Currency Symbol",link:"#"}),t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Digit Grouping",title:"Thousands Separator",link:"#"}),t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Digit Grouping Symbol",title:"Comma (,)",link:"#"}),t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Decimal Separator",title:"Dot (.)",link:"#"})]),_:1})):u("",!0),e(f)?(a(),i(ye,{key:5,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Geographic Location Format",title:"Coordinate Format",link:"#"})]),_:1})):u("",!0),e(f)?(a(),i(ye,{key:6,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Expense Amount Color",title:"Amount Color",link:"#"}),t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",header:"Income Amount Color",title:"Amount Color",link:"#"})]),_:1})):u("",!0),e(f)?u("",!0):(a(),i(ye,{key:7,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Ut,{type:"password",autocomplete:"new-password","clear-button":"",label:e(n)("Password"),placeholder:e(n)("Your password"),value:e(d).password,"onUpdate:value":j[2]||(j[2]=q=>e(d).password=q)},null,8,["label","placeholder","value"]),t(Ut,{type:"password",autocomplete:"new-password","clear-button":"",label:e(n)("Confirm Password"),placeholder:e(n)("Re-enter the password"),value:e(d).confirmPassword,"onUpdate:value":j[3]||(j[3]=q=>e(d).confirmPassword=q)},null,8,["label","placeholder","value"]),t(Ut,{type:"email",autocomplete:"email","clear-button":"",label:e(n)("E-mail")+" "+(e(w)?e(n)("(Verified)"):e(n)("(Not Verified)")),placeholder:e(n)("Your email address"),value:e(d).email,"onUpdate:value":j[4]||(j[4]=q=>e(d).email=q)},null,8,["label","placeholder","value"]),t(Ut,{type:"text",autocomplete:"nickname","clear-button":"",label:e(n)("Nickname"),placeholder:e(n)("Your nickname"),value:e(d).nickname,"onUpdate:value":j[5]||(j[5]=q=>e(d).nickname=q)},null,8,["label","placeholder","value"]),e(he)?(a(),i(Re,{key:0,class:"ebk-list-item-error-info",footer:e(n)(e(E)||"")},null,8,["footer"])):u("",!0)]),_:1})),e(f)?u("",!0):(a(),i(ye,{key:8,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Re,{class:R(["list-item-with-header-and-title",{disabled:!e(F).length}]),link:"#","no-chevron":"",header:e(n)("Default Account"),title:e(Ia).findAccountNameById(e($),e(d).defaultAccountId,e(n)("Unspecified")),onClick:j[8]||(j[8]=q=>Pe.value=!0)},{default:l(()=>[t(kl,{"primary-key-field":"id","primary-value-field":"category","primary-title-field":"name","primary-icon-field":"icon","primary-icon-type":"account","primary-sub-items-field":"accounts","primary-title-i18n":!0,"secondary-key-field":"id","secondary-value-field":"id","secondary-title-field":"name","secondary-icon-field":"icon","secondary-icon-type":"account","secondary-color-field":"color","enable-filter":!0,"filter-placeholder":e(n)("Find account"),"filter-no-items-text":e(n)("No available account"),items:e(D),show:Pe.value,"onUpdate:show":j[6]||(j[6]=q=>Pe.value=q),modelValue:e(d).defaultAccountId,"onUpdate:modelValue":j[7]||(j[7]=q=>e(d).defaultAccountId=q)},null,8,["filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["class","header","title"]),t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Editable Transaction Range"),title:e(mt)(e(oe),e(d).transactionEditScope),onClick:j[11]||(j[11]=q=>pe.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Editable Transaction Range"),"enable-filter":!0,"filter-placeholder":e(n)("Date Range"),"filter-no-items-text":e(n)("No results"),items:e(oe),show:pe.value,"onUpdate:show":j[9]||(j[9]=q=>pe.value=q),modelValue:e(d).transactionEditScope,"onUpdate:modelValue":j[10]||(j[10]=q=>e(d).transactionEditScope=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),e(Be)?(a(),i(Re,{key:0,class:"ebk-list-item-error-info",footer:e(n)(e(ee)||"")},null,8,["footer"])):u("",!0)]),_:1})),e(f)?u("",!0):(a(),i(ye,{key:9,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",link:"#",header:e(ne),title:ae.value,onClick:j[14]||(j[14]=q=>B.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"languageTag","value-field":"languageTag","title-field":"nativeDisplayName","after-field":"displayName",title:e(ne),"enable-filter":!0,"filter-placeholder":e(n)("Language"),"filter-no-items-text":e(n)("No results"),items:ue.value,show:B.value,"onUpdate:show":j[12]||(j[12]=q=>B.value=q),modelValue:e(d).language,"onUpdate:modelValue":j[13]||(j[13]=q=>e(d).language=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Re,{class:"list-item-with-header-and-title list-item-no-item-after",link:"#",header:e(n)("Default Currency"),onClick:j[17]||(j[17]=q=>_e.value=!0)},{title:l(()=>[t(Dl,{class:"no-padding no-margin"},{default:l(()=>[o("span",null,c(e(_)(e(d).defaultCurrency))+"",1),o("small",Xh,c(e(d).defaultCurrency),1)]),_:1})]),default:l(()=>[t(xt,{"value-type":"item","key-field":"currencyCode","value-field":"currencyCode","title-field":"displayName","after-field":"currencyCode",title:e(n)("Default Currency"),"enable-filter":!0,"filter-placeholder":e(n)("Currency"),"filter-no-items-text":e(n)("No results"),items:ce.value,show:_e.value,"onUpdate:show":j[15]||(j[15]=q=>_e.value=q),modelValue:e(d).defaultCurrency,"onUpdate:modelValue":j[16]||(j[16]=q=>e(d).defaultCurrency=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header"]),t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("First Day of Week"),title:Ee.value,onClick:j[20]||(j[20]=q=>Ne.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("First Day of Week"),"enable-filter":!0,"filter-placeholder":e(n)("Date"),"filter-no-items-text":e(n)("No results"),items:e(V),show:Ne.value,"onUpdate:show":j[18]||(j[18]=q=>Ne.value=q),modelValue:e(d).firstDayOfWeek,"onUpdate:modelValue":j[19]||(j[19]=q=>e(d).firstDayOfWeek=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Re,{link:"#","no-chevron":"",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Fiscal Year Start Date"),title:e(A)(e(d).fiscalYearStart,e(dl).valueOf(e(d).numeralSystem)??e(dl).Default),onClick:j[23]||(j[23]=q=>me.value=!0)},{default:l(()=>[t(pl,{"numeral-system":e(d).numeralSystem,show:me.value,"onUpdate:show":j[21]||(j[21]=q=>me.value=q),modelValue:e(d).fiscalYearStart,"onUpdate:modelValue":j[22]||(j[22]=q=>e(d).fiscalYearStart=q)},null,8,["numeral-system","show","modelValue"])]),_:1},8,["header","title"])]),_:1})),e(f)?u("",!0):(a(),i(ye,{key:10,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Calendar Display Type"),title:e(mt)(e(k),e(d).calendarDisplayType),onClick:j[26]||(j[26]=q=>rt.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Calendar Display Type"),"enable-filter":!0,"filter-placeholder":e(n)("Calendar Display Type"),"filter-no-items-text":e(n)("No results"),items:e(k),show:rt.value,"onUpdate:show":j[24]||(j[24]=q=>rt.value=q),modelValue:e(d).calendarDisplayType,"onUpdate:modelValue":j[25]||(j[25]=q=>e(d).calendarDisplayType=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Date Display Type"),title:e(mt)(e(K),e(d).dateDisplayType),onClick:j[29]||(j[29]=q=>ft.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Date Display Type"),"enable-filter":!0,"filter-placeholder":e(n)("Date Display Type"),"filter-no-items-text":e(n)("No results"),items:e(K),show:ft.value,"onUpdate:show":j[27]||(j[27]=q=>ft.value=q),modelValue:e(d).dateDisplayType,"onUpdate:modelValue":j[28]||(j[28]=q=>e(d).dateDisplayType=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Long Date Format"),title:e(mt)(e(T),e(d).longDateFormat),onClick:j[32]||(j[32]=q=>bt.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Long Date Format"),"enable-filter":!0,"filter-placeholder":e(n)("Long Date Format"),"filter-no-items-text":e(n)("No results"),items:e(T),show:bt.value,"onUpdate:show":j[30]||(j[30]=q=>bt.value=q),modelValue:e(d).longDateFormat,"onUpdate:modelValue":j[31]||(j[31]=q=>e(d).longDateFormat=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Short Date Format"),title:e(mt)(e(b),e(d).shortDateFormat),onClick:j[35]||(j[35]=q=>St.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Short Date Format"),"enable-filter":!0,"filter-placeholder":e(n)("Short Date Format"),"filter-no-items-text":e(n)("No results"),items:e(b),show:St.value,"onUpdate:show":j[33]||(j[33]=q=>St.value=q),modelValue:e(d).shortDateFormat,"onUpdate:modelValue":j[34]||(j[34]=q=>e(d).shortDateFormat=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Long Time Format"),title:e(mt)(e(z),e(d).longTimeFormat),onClick:j[38]||(j[38]=q=>ht.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Long Time Format"),"enable-filter":!0,"filter-placeholder":e(n)("Long Time Format"),"filter-no-items-text":e(n)("No results"),items:e(z),show:ht.value,"onUpdate:show":j[36]||(j[36]=q=>ht.value=q),modelValue:e(d).longTimeFormat,"onUpdate:modelValue":j[37]||(j[37]=q=>e(d).longTimeFormat=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Short Time Format"),title:e(mt)(e(J),e(d).shortTimeFormat),onClick:j[41]||(j[41]=q=>wt.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Short Time Format"),"enable-filter":!0,"filter-placeholder":e(n)("Short Time Format"),"filter-no-items-text":e(n)("No results"),items:e(J),show:wt.value,"onUpdate:show":j[39]||(j[39]=q=>wt.value=q),modelValue:e(d).shortTimeFormat,"onUpdate:modelValue":j[40]||(j[40]=q=>e(d).shortTimeFormat=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Fiscal Year Format"),title:e(mt)(e(r),e(d).fiscalYearFormat),onClick:j[44]||(j[44]=q=>Pt.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Fiscal Year Format"),"enable-filter":!0,"filter-placeholder":e(n)("Fiscal Year Format"),"filter-no-items-text":e(n)("No results"),items:e(r),show:Pt.value,"onUpdate:show":j[42]||(j[42]=q=>Pt.value=q),modelValue:e(d).fiscalYearFormat,"onUpdate:modelValue":j[43]||(j[43]=q=>e(d).fiscalYearFormat=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"])]),_:1})),e(f)?u("",!0):(a(),i(ye,{key:11,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Currency Display Mode"),title:e(mt)(e(Y),e(d).currencyDisplayType),onClick:j[47]||(j[47]=q=>ze.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Currency Display Mode"),"enable-filter":!0,"filter-placeholder":e(n)("Currency Display Mode"),"filter-no-items-text":e(n)("No results"),items:e(Y),show:ze.value,"onUpdate:show":j[45]||(j[45]=q=>ze.value=q),modelValue:e(d).currencyDisplayType,"onUpdate:modelValue":j[46]||(j[46]=q=>e(d).currencyDisplayType=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Numeral System"),title:e(mt)(e(te),e(d).numeralSystem),onClick:j[50]||(j[50]=q=>Ae.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Numeral System"),"enable-filter":!0,"filter-placeholder":e(n)("Numeral System"),"filter-no-items-text":e(n)("No results"),items:e(te),show:Ae.value,"onUpdate:show":j[48]||(j[48]=q=>Ae.value=q),modelValue:e(d).numeralSystem,"onUpdate:modelValue":j[49]||(j[49]=q=>e(d).numeralSystem=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Digit Grouping"),title:e(mt)(e(H),e(d).digitGrouping),onClick:j[53]||(j[53]=q=>We.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Digit Grouping"),"enable-filter":!0,"filter-placeholder":e(n)("Digit Grouping"),"filter-no-items-text":e(n)("No results"),items:e(H),show:We.value,"onUpdate:show":j[51]||(j[51]=q=>We.value=q),modelValue:e(d).digitGrouping,"onUpdate:modelValue":j[52]||(j[52]=q=>e(d).digitGrouping=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",disabled:!e(se),header:e(n)("Digit Grouping Symbol"),title:e(mt)(e(O),e(d).digitGroupingSymbol),onClick:j[56]||(j[56]=q=>at.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Digit Grouping Symbol"),"enable-filter":!0,"filter-placeholder":e(n)("Digit Grouping Symbol"),"filter-no-items-text":e(n)("No results"),items:e(O),show:at.value,"onUpdate:show":j[54]||(j[54]=q=>at.value=q),modelValue:e(d).digitGroupingSymbol,"onUpdate:modelValue":j[55]||(j[55]=q=>e(d).digitGroupingSymbol=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["disabled","header","title"]),t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Decimal Separator"),title:e(mt)(e(x),e(d).decimalSeparator),onClick:j[59]||(j[59]=q=>Qe.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Decimal Separator"),"enable-filter":!0,"filter-placeholder":e(n)("Decimal Separator"),"filter-no-items-text":e(n)("No results"),items:e(x),show:Qe.value,"onUpdate:show":j[57]||(j[57]=q=>Qe.value=q),modelValue:e(d).decimalSeparator,"onUpdate:modelValue":j[58]||(j[58]=q=>e(d).decimalSeparator=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"])]),_:1})),e(f)?u("",!0):(a(),i(ye,{key:12,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Geographic Location Format"),title:e(mt)(e(W),e(d).coordinateDisplayType),onClick:j[62]||(j[62]=q=>lt.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Geographic Location Format"),"enable-filter":!0,"filter-placeholder":e(n)("Geographic Location Format"),"filter-no-items-text":e(n)("No results"),items:e(W),show:lt.value,"onUpdate:show":j[60]||(j[60]=q=>lt.value=q),modelValue:e(d).coordinateDisplayType,"onUpdate:modelValue":j[61]||(j[61]=q=>e(d).coordinateDisplayType=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"])]),_:1})),e(f)?u("",!0):(a(),i(ye,{key:13,form:"",strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Expense Amount Color"),title:e(mt)(e(Q),e(d).expenseAmountColor),onClick:j[65]||(j[65]=q=>$t.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Expense Amount Color"),"enable-filter":!0,"filter-placeholder":e(n)("Color"),"filter-no-items-text":e(n)("No results"),items:e(Q),show:$t.value,"onUpdate:show":j[63]||(j[63]=q=>$t.value=q),modelValue:e(d).expenseAmountColor,"onUpdate:modelValue":j[64]||(j[64]=q=>e(d).expenseAmountColor=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),t(Re,{link:"#",class:"list-item-with-header-and-title list-item-no-item-after",header:e(n)("Income Amount Color"),title:e(mt)(e(le),e(d).incomeAmountColor),onClick:j[68]||(j[68]=q=>yt.value=!0)},{default:l(()=>[t(xt,{"value-type":"item","key-field":"type","value-field":"type","title-field":"displayName",title:e(n)("Income Amount Color"),"enable-filter":!0,"filter-placeholder":e(n)("Color"),"filter-no-items-text":e(n)("No results"),items:e(le),show:yt.value,"onUpdate:show":j[66]||(j[66]=q=>yt.value=q),modelValue:e(d).incomeAmountColor,"onUpdate:modelValue":j[67]||(j[67]=q=>e(d).incomeAmountColor=q)},null,8,["title","filter-placeholder","filter-no-items-text","items","show","modelValue"])]),_:1},8,["header","title"]),e(re)?(a(),i(Re,{key:0,class:"ebk-list-item-error-info",footer:e(n)(e(M)||"")},null,8,["footer"])):u("",!0)]),_:1})),t(ul,{"close-by-outside-click":"","close-on-escape":"",opened:Je.value,"onActions:closed":j[69]||(j[69]=q=>Je.value=!1)},{default:l(()=>[t(al,null,{default:l(()=>[e(qn)()&&!e(f)&&!e(w)?(a(),i(jt,{key:0,class:R({disabled:e(f)||e(I)}),onClick:ll},{default:l(()=>[X(c(e(n)("Resend Validation Email")),1)]),_:1},8,["class"])):u("",!0)]),_:1}),t(al,null,{default:l(()=>[t(jt,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(bl,{title:e(n)("Modify Password"),hint:e(n)("Please enter your current password when modifying your password"),"confirm-disabled":e(m),"cancel-disabled":e(m),show:Te.value,"onUpdate:show":j[70]||(j[70]=q=>Te.value=q),modelValue:L.value,"onUpdate:modelValue":j[71]||(j[71]=q=>L.value=q),"onPassword:confirm":j[72]||(j[72]=q=>Vt(!0))},null,8,["title","hint","confirm-disabled","cancel-disabled","show","modelValue"])]),_:1})}}}),Jh={class:"display-flex padding justify-content-space-between align-items-center"},ey={class:"ebk-sheet-title"},ty={class:"padding-bottom padding-horizontal"},ly={class:"padding-horizontal padding-bottom"},ny={class:"no-margin-top margin-bottom-half"},ay={class:"margin-top text-align-center"},oy=Oe({__name:"DataManagementPage",props:{f7router:{}},setup(p){const g=p,{tt:n}=He(),{showToast:h,routeBackOnError:P}=nt(),{dataStatistics:N,displayDataStatistics:_,getExportFileName:A}=ci(),U=Rl(),y=tl(),v=S(!0),d=S(null),w=S("csv"),f=S(!1),I=S(null),m=S(""),$=S(!1),F=S(!1),D=S(!1),V=S(!1),k=fe(()=>A(w.value));function K(){v.value=!0,y.getUserDataStatistics().then(r=>{N.value=r,v.value=!1}).catch(r=>{r.processed?v.value=!1:(d.value=r,h(r.message||r))})}function T(){Ke(),f.value=!0,y.getExportedUserData(w.value).then(r=>{I.value=URL.createObjectURL(r),f.value=!1,Se()}).catch(r=>{I.value=null,f.value=!1,Se(),r.processed||h(r.message||r)})}function b(r){if(!r){m.value="",D.value=!0;return}$.value=!0,Ke(()=>$.value),U.clearAllUserTransactions({password:r}).then(()=>{$.value=!1,m.value="",Se(),D.value=!1,h("All transactions has been cleared"),K()}).catch(Y=>{$.value=!1,Se(),Y.processed||h(Y.message||Y)})}function z(r){if(!r){m.value="",V.value=!0;return}$.value=!0,Ke(()=>$.value),U.clearAllUserData({password:r}).then(()=>{$.value=!1,m.value="",Se(),V.value=!1,h("All user data has been cleared"),K()}).catch(Y=>{$.value=!1,Se(),Y.processed||h(Y.message||Y)})}function J(){P(g.f7router,d)}return K(),(r,Y)=>{const te=s("f7-navbar"),x=s("f7-list-item"),O=s("f7-list"),H=s("f7-list-button"),W=s("f7-button"),Q=s("f7-link"),le=s("f7-page-content"),oe=s("f7-sheet"),ne=s("password-input-sheet"),se=s("f7-page");return a(),i(se,{"onPage:afterin":J},{default:l(()=>[t(te,{title:e(n)("Data Management"),"back-link":e(n)("Back")},null,8,["title","back-link"]),v.value?(a(),i(O,{key:0,strong:"",inset:"",dividers:"",class:"margin-vertical skeleton-text"},{default:l(()=>[t(x,{title:"Transactions",after:"Count"}),t(x,{title:"Accounts",after:"Count"}),t(x,{title:"Transaction Categories",after:"Count"}),t(x,{title:"Transaction Tags",after:"Count"}),t(x,{title:"Transaction Pictures",after:"Count"}),t(x,{title:"Transaction Templates",after:"Count"}),t(x,{title:"Scheduled Transactions",after:"Count"})]),_:1})):v.value?u("",!0):(a(),i(O,{key:1,strong:"",inset:"",dividers:"",class:"margin-vertical"},{default:l(()=>[t(x,{title:e(n)("Transactions"),after:e(_)?e(_).totalTransactionCount:"-"},null,8,["title","after"]),t(x,{title:e(n)("Accounts"),after:e(_)?e(_).totalAccountCount:"-"},null,8,["title","after"]),t(x,{title:e(n)("Transaction Categories"),after:e(_)?e(_).totalTransactionCategoryCount:"-"},null,8,["title","after"]),t(x,{title:e(n)("Transaction Tags"),after:e(_)?e(_).totalTransactionTagCount:"-"},null,8,["title","after"]),t(x,{title:e(n)("Transaction Pictures"),after:e(_)?e(_).totalTransactionPictureCount:"-"},null,8,["title","after"]),t(x,{title:e(n)("Transaction Templates"),after:e(_)?e(_).totalTransactionTemplateCount:"-"},null,8,["title","after"]),t(x,{title:e(n)("Scheduled Transactions"),after:e(_)?e(_).totalScheduledTransactionCount:"-"},null,8,["title","after"])]),_:1})),t(O,{strong:"",inset:"",dividers:"",class:R(["margin-vertical",{disabled:v.value}])},{default:l(()=>[e(di)()?(a(),i(H,{key:0,class:R({disabled:!e(N)||!e(N).totalTransactionCount||e(N).totalTransactionCount==="0"}),onClick:Y[0]||(Y[0]=Z=>{I.value=null,F.value=!0})},{default:l(()=>[X(c(e(n)("Export Data")),1)]),_:1},8,["class"])):u("",!0)]),_:1},8,["class"]),t(O,{strong:"",inset:"",dividers:"",class:R(["margin-vertical",{disabled:v.value}])},{default:l(()=>[t(H,{color:"red",onClick:Y[1]||(Y[1]=Z=>b(null))},{default:l(()=>[X(c(e(n)("Clear All Transactions")),1)]),_:1}),t(H,{color:"red",onClick:Y[2]||(Y[2]=Z=>z(null))},{default:l(()=>[X(c(e(n)("Clear All Data")),1)]),_:1})]),_:1},8,["class"]),t(oe,{"swipe-handler":".swipe-handler",style:{height:"auto"},"swipe-to-close":!f.value,"close-on-escape":!f.value,"close-by-backdrop-click":!f.value,"close-by-outside-click":!f.value,opened:F.value,"onSheet:closed":Y[6]||(Y[6]=Z=>{F.value=!1,I.value=null})},{default:l(()=>[Y[11]||(Y[11]=o("div",{class:"swipe-handler"},null,-1)),t(le,{class:"margin-top no-padding-top"},{default:l(()=>[o("div",Jh,[o("div",ey,[o("b",null,c(e(n)("Are you sure you want to export all transaction data to file?")),1)])]),o("div",ty,[t(O,{class:"export-file-type-list no-margin",dividers:""},{default:l(()=>[t(x,{radio:"","radio-icon":"start",class:R({disabled:f.value||I.value}),title:e(n)("CSV (Comma-separated values) File"),checked:w.value==="csv",onChange:Y[3]||(Y[3]=Z=>w.value="csv")},null,8,["class","title","checked"]),t(x,{radio:"","radio-icon":"start",class:R({disabled:f.value||I.value}),title:e(n)("TSV (Tab-separated values) File"),checked:w.value==="tsv",onChange:Y[4]||(Y[4]=Z=>w.value="tsv")},null,8,["class","title","checked"])]),_:1})]),o("div",ly,[o("p",ny,c(e(n)("It may take a long time, please wait for a few minutes.")),1),I.value?u("",!0):(a(),i(W,{key:0,large:"",fill:"",class:R({disabled:f.value}),text:e(n)("Continue"),onClick:T},null,8,["class","text"])),I.value?(a(),i(W,{key:1,large:"",fill:"",external:"",text:e(n)("Save Data"),download:k.value,href:I.value,target:"_blank"},null,8,["text","download","href"])):u("",!0),o("div",ay,[t(Q,{class:R({disabled:f.value}),onClick:Y[5]||(Y[5]=Z=>F.value=!1),text:e(n)("Cancel")},null,8,["class","text"])])])]),_:1})]),_:1},8,["swipe-to-close","close-on-escape","close-by-backdrop-click","close-by-outside-click","opened"]),t(ne,{title:e(n)("Are you sure you want to clear all transactions?"),hint:e(n)("You CANNOT undo this action. This will clear your transactions data. Please enter your current password to confirm."),"confirm-disabled":$.value,"cancel-disabled":$.value,color:"red",show:D.value,"onUpdate:show":Y[7]||(Y[7]=Z=>D.value=Z),modelValue:m.value,"onUpdate:modelValue":Y[8]||(Y[8]=Z=>m.value=Z),"onPassword:confirm":b},null,8,["title","hint","confirm-disabled","cancel-disabled","show","modelValue"]),t(ne,{title:e(n)("Are you sure you want to clear all data?"),hint:e(n)("You CANNOT undo this action. This will clear your accounts, categories, tags and transactions data. Please enter your current password to confirm."),"confirm-disabled":$.value,"cancel-disabled":$.value,color:"red",show:V.value,"onUpdate:show":Y[9]||(Y[9]=Z=>V.value=Z),modelValue:m.value,"onUpdate:modelValue":Y[10]||(Y[10]=Z=>m.value=Z),"onPassword:confirm":z},null,8,["title","hint","confirm-disabled","cancel-disabled","show","modelValue"])]),_:1})}}}),sy={class:"text-align-center"},iy=["src"],ry=Oe({__name:"TwoFactorAuthPage",props:{f7router:{}},setup(p){const g=p,{tt:n}=He(),{showToast:h,routeBackOnError:P}=nt(),N=fi(),_=S(null),A=S(!0),U=S(null),y=S(""),v=S(""),d=S(""),w=S(""),f=S(""),I=S(""),m=S(!1),$=S(!1),F=S(!1),D=S(!1),V=S(!1),k=S(!1),K=S(!1),T=S(!1);function b(){A.value=!0,N.get2FAStatus().then(O=>{_.value=O.enable,A.value=!1}).catch(O=>{O.processed||O.error&&O.error.errorCode===Jl.ApiNotFound?(_.value=null,A.value=!1):(U.value=O,h(O.message||O))})}function z(){v.value="",y.value="",m.value=!0,Ke(()=>m.value),N.enable2FA().then(O=>{m.value=!1,Se(),v.value=O.qrcode,y.value=O.secret,V.value=!0}).catch(O=>{m.value=!1,Se(),O.processed||h(O.message||O)})}function J(){$.value=!0,Ke(()=>$.value),N.confirmEnable2FA({secret:y.value,passcode:d.value}).then(O=>{$.value=!1,Se(),v.value="",y.value="",_.value=!0,V.value=!1,O.recoveryCodes&&O.recoveryCodes.length&&(I.value=O.recoveryCodes.join(`
`),T.value=!0)}).catch(O=>{$.value=!1,Se(),O.processed||h(O.message||O)})}function r(O){if(!O){w.value="",k.value=!0;return}F.value=!0,Ke(()=>F.value),N.disable2FA({password:O}).then(()=>{F.value=!1,Se(),_.value=!1,k.value=!1,h("Two-factor authentication has been disabled")}).catch(H=>{F.value=!1,Se(),H.processed||h(H.message||H)})}function Y(O){if(!O){f.value="",K.value=!0;return}D.value=!0,Ke(()=>D.value),N.regenerate2FARecoveryCode({password:O}).then(H=>{D.value=!1,Se(),K.value=!1,I.value=H.recoveryCodes.join(`
`),T.value=!0}).catch(H=>{D.value=!1,Se(),H.processed||h(H.message||H)})}function te(){P(g.f7router,U)}function x(){h("Backup codes copied")}return b(),(O,H)=>{const W=s("f7-navbar"),Q=s("f7-list-item"),le=s("f7-list-button"),oe=s("f7-list"),ne=s("passcode-input-sheet"),se=s("password-input-sheet"),Z=s("information-sheet"),E=s("f7-page");return a(),i(E,{"onPage:afterin":te},{default:l(()=>[t(W,{title:e(n)("Two-Factor Authentication"),"back-link":e(n)("Back")},null,8,["title","back-link"]),A.value?(a(),i(oe,{key:0,strong:"",inset:"",dividers:"",class:"margin-top skeleton-text"},{default:l(()=>[t(Q,{title:"Status",after:"Unknown"}),t(le,{class:"disabled"},{default:l(()=>[...H[9]||(H[9]=[X("Operate",-1)])]),_:1})]),_:1})):A.value?u("",!0):(a(),i(oe,{key:1,strong:"",inset:"",dividers:"",class:"margin-top"},{default:l(()=>[t(Q,{title:e(n)("Status"),after:e(n)(_.value?"Enabled":"Disabled")},null,8,["title","after"]),_.value===!0?(a(),i(le,{key:0,class:R({disabled:D.value}),onClick:H[0]||(H[0]=M=>Y(null))},{default:l(()=>[X(c(e(n)("Regenerate Backup Codes")),1)]),_:1},8,["class"])):u("",!0),_.value===!0?(a(),i(le,{key:1,class:R({disabled:F.value}),onClick:H[1]||(H[1]=M=>r(null))},{default:l(()=>[X(c(e(n)("Disable")),1)]),_:1},8,["class"])):u("",!0),_.value===!1?(a(),i(le,{key:2,class:R({disabled:m.value}),onClick:z},{default:l(()=>[X(c(e(n)("Enable")),1)]),_:1},8,["class"])):u("",!0)]),_:1})),t(ne,{title:e(n)("Enable Two-Factor Authentication"),hint:e(n)("Please use a two-factor authentication app to scan the qrcode below and enter the current passcode."),"confirm-disabled":$.value,"cancel-disabled":$.value,show:V.value,"onUpdate:show":H[2]||(H[2]=M=>V.value=M),modelValue:d.value,"onUpdate:modelValue":H[3]||(H[3]=M=>d.value=M),"onPasscode:confirm":J},{default:l(()=>[o("div",sy,[o("img",{alt:"qrcode",class:"img-qrcode",src:v.value},null,8,iy)])]),_:1},8,["title","hint","confirm-disabled","cancel-disabled","show","modelValue"]),t(se,{title:e(n)("Disable Two-Factor Authentication"),hint:e(n)("Your current password is required to disable two-factor authentication."),"confirm-disabled":F.value,"cancel-disabled":F.value,show:k.value,"onUpdate:show":H[4]||(H[4]=M=>k.value=M),modelValue:w.value,"onUpdate:modelValue":H[5]||(H[5]=M=>w.value=M),"onPassword:confirm":r},null,8,["title","hint","confirm-disabled","cancel-disabled","show","modelValue"]),t(se,{title:e(n)("Regenerate Backup Codes"),hint:e(n)("Your current password is required to regenerate backup codes for two-factor authentication. If you regenerate backup codes, the previous ones will become invalid."),"confirm-disabled":D.value,"cancel-disabled":D.value,show:K.value,"onUpdate:show":H[6]||(H[6]=M=>K.value=M),modelValue:f.value,"onUpdate:modelValue":H[7]||(H[7]=M=>f.value=M),"onPassword:confirm":Y},null,8,["title","hint","confirm-disabled","cancel-disabled","show","modelValue"]),t(Z,{class:"backup-code-sheet",title:e(n)("Backup Code"),hint:e(n)("Please copy these backup codes to safe place, the following backup codes will be displayed only once. If these codes were lost, you can regenerate them at any time."),information:I.value,"row-count":10,"enable-copy":!0,show:T.value,"onUpdate:show":H[8]||(H[8]=M=>T.value=M),"onInfo:copied":x},null,8,["title","hint","information","show"])]),_:1})}}}),uy=Oe({__name:"SessionListPage",props:{f7router:{}},setup(p){class g extends pi{domId;icon;lastSeenDateTime;constructor(b){super(b.tokenId,b.isCurrent,b.deviceType,b.deviceInfo,b.deviceName,b.lastSeen),this.domId=$(b.tokenId),this.icon=m(b.deviceType),this.lastSeenDateTime=b.lastSeen?N($n(b.lastSeen)):"-"}}const n=p,{tt:h,getCurrentLanguageTextDirection:P,formatDateTimeToLongDateTime:N}=He(),{showConfirm:_,showToast:A,routeBackOnError:U}=nt(),y=Pa(),v=S([]),d=S(!0),w=S(null),f=fe(()=>P()),I=fe(()=>{const T=[];if(!v.value)return T;for(const b of v.value){const z=mi(b);T.push(new g(z))}return T});function m(T){return T===Hl.Phone||T===Hl.Wearable?"device_phone_portrait":T===Hl.Tablet?"device_tablet_portrait":T===Hl.TV?"tv":T===Hl.Api?"chevron_left_slash_chevron_right":T===Hl.MCP?"sparkles":"device_desktop"}function $(T){return"token_"+T.replace(/:/g,"_")}function F(){d.value=!0,y.getAllTokens().then(T=>{v.value=T,d.value=!1}).catch(T=>{T.processed?d.value=!1:(w.value=T,A(T.message||T))})}function D(T){y.getAllTokens().then(b=>{T?.(),Da(b,v.value)?A("Session list is up to date"):A("Session list has been updated"),v.value=b}).catch(b=>{T?.(),b.processed||A(b.message||b)})}function V(T){_("Are you sure you want to logout from this session?",()=>{Ke(),y.revokeToken({tokenId:T.tokenId}).then(()=>{Se(),$l($(T.tokenId),()=>{for(const[b,z]of tn(v.value))b.tokenId===T.tokenId&&v.value.splice(z,1)})}).catch(b=>{Se(),b.processed||A(b.message||b)})})}function k(){v.value.length<2||_("Are you sure you want to logout all other sessions?",()=>{Ke(),y.revokeAllTokens().then(()=>{Se();for(const[T,b]of vi(v.value))T.isCurrent||v.value.splice(b,1);A("You have logged out all other sessions")}).catch(T=>{Se(),T.processed||A(T.message||T)})})}function K(){U(n.f7router,w)}return F(),(T,b)=>{const z=s("f7-nav-left"),J=s("f7-nav-title"),r=s("f7-link"),Y=s("f7-nav-right"),te=s("f7-navbar"),x=s("f7-icon"),O=s("f7-list-item"),H=s("f7-list"),W=s("f7-swipeout-button"),Q=s("f7-swipeout-actions"),le=s("f7-page");return a(),i(le,{ptr:"","onPtr:refresh":D,"onPage:afterin":K},{default:l(()=>[t(te,null,{default:l(()=>[t(z,{"back-link":e(h)("Back")},null,8,["back-link"]),t(J,{title:e(h)("Device & Sessions")},null,8,["title"]),t(Y,null,{default:l(()=>[t(r,{class:R({disabled:I.value.length<2}),text:e(h)("Logout All"),onClick:k},null,8,["class","text"])]),_:1})]),_:1}),d.value?(a(),i(H,{key:0,strong:"",inset:"",dividers:"","media-list":"",class:"margin-top skeleton-text"},{default:l(()=>[t(O,{class:"list-item-media-valign-middle",title:"Current",text:"Device Name (Browser xx.x.xxxx.xx)"},{media:l(()=>[t(x,{f7:"device_phone_portrait"})]),after:l(()=>[...b[0]||(b[0]=[o("small",null,"MM/DD/YYYY HH:mm:ss",-1)])]),_:1})]),_:1})):d.value?u("",!0):(a(),i(H,{key:1,strong:"",inset:"",dividers:"","media-list":"",class:"margin-top"},{default:l(()=>[(a(!0),C(ke,null,Ce(I.value,oe=>(a(),i(O,{class:"list-item-media-valign-middle",swipeout:"",id:oe.domId,title:e(h)(oe.deviceName),text:oe.deviceInfo,key:oe.tokenId},{media:l(()=>[t(x,{f7:oe.icon},null,8,["f7"])]),after:l(()=>[o("small",null,c(oe.lastSeenDateTime),1)]),default:l(()=>[oe.isCurrent?u("",!0):(a(),i(Q,{key:0,left:f.value===e(gt).RTL,right:f.value===e(gt).LTR},{default:l(()=>[t(W,{color:"red",text:e(h)("Log Out"),onClick:ne=>V(oe)},null,8,["text","onClick"])]),_:2},1032,["left","right"]))]),_:2},1032,["id","title","text"]))),128))]),_:1}))]),_:1})}}}),cy=Oe({__name:"AllPage",props:{f7router:{}},setup(p){const g=p,{tt:n}=He(),{showToast:h,routeBackOnError:P}=nt(),N=rl(),_=S(!0),A=S(null);function U(){P(g.f7router,A)}function y(v){const d=!!v;N.loadAllCategories({force:d}).then(()=>{v?.(),d&&h("Category list has been updated")}).catch(w=>{v?.(),w.processed||h(w.message||w)})}return N.loadAllCategories({force:!1}).then(()=>{_.value=!1}).catch(v=>{v.processed?_.value=!1:(A.value=v,h(v.message||v))}),(v,d)=>{const w=s("f7-navbar"),f=s("f7-list-item"),I=s("f7-list"),m=s("f7-page");return a(),i(m,{ptr:"","onPtr:refresh":y,"onPage:afterin":U},{default:l(()=>[t(w,{title:e(n)("Transaction Categories"),"back-link":e(n)("Back")},null,8,["title","back-link"]),_.value?(a(),i(I,{key:0,strong:"",inset:"",dividers:"",class:"margin-top skeleton-text"},{default:l(()=>[t(f,{title:"Expense",link:"#"}),t(f,{title:"Income",link:"#"}),t(f,{title:"Transfer",link:"#"})]),_:1})):_.value?u("",!0):(a(),i(I,{key:1,strong:"",inset:"",dividers:"",class:"margin-top"},{default:l(()=>[t(f,{title:e(n)("Expense"),link:"/category/list?type=2"},null,8,["title"]),t(f,{title:e(n)("Income"),link:"/category/list?type=1"},null,8,["title"]),t(f,{title:e(n)("Transfer"),link:"/category/list?type=3"},null,8,["title"])]),_:1}))]),_:1})}}}),dy=Oe({__name:"ListPage",props:{f7route:{},f7router:{}},setup(p){const g=p,{tt:n,getCurrentLanguageTextDirection:h}=He(),{showAlert:P,showToast:N,routeBackOnError:_}=nt(),{loading:A,primaryCategoryId:U,currentPrimaryCategory:y}=gi(),v=rl(),d=S(!1),w=S(0),f=S(null),I=S(!1),m=S(!1),$=S(null),F=S(!1),D=S(!1),V=S(!1),k=S(!1),K=fe(()=>h()),T=fe(()=>!U.value||U.value===""||U.value==="0"?!v.allTransactionCategories||!v.allTransactionCategories[w.value]?[]:v.allTransactionCategories[w.value]??[]:U.value&&U.value!==""&&U.value!=="0"?!v.allTransactionCategoriesMap||!v.allTransactionCategoriesMap[U.value]?[]:v.allTransactionCategoriesMap[U.value]?.subCategories??[]:[]),b=fe(()=>{let E="";switch(w.value){case _t.Income:E="Income";break;case _t.Expense:E="Expense";break;case _t.Transfer:E="Transfer";break;default:E="Transaction";break}switch(d.value){case!0:E+=" Primary";break;case!1:E+=" Secondary";break}return E+" Categories"}),z=fe(()=>hi(T.value,I.value)),J=fe(()=>yi(T.value,I.value)),r=fe(()=>_i(T.value,I.value)),Y=fe(()=>T.value.length<1);function te(E){return"category_"+E.id}function x(E){return!E||E.indexOf("category_")!==0?null:E.substring(9)}function O(){const E=g.f7route.query;if(w.value=parseInt(E.type||"0"),w.value!==_t.Income&&w.value!==_t.Expense&&w.value!==_t.Transfer){N("Parameter Invalid"),f.value="Parameter Invalid";return}E.id&&E.id!=="0"?(U.value=E.id,d.value=!1):(U.value="0",d.value=!0),A.value=!0,v.loadAllCategories({force:!1}).then(()=>{A.value=!1}).catch(M=>{M.processed?A.value=!1:(f.value=M,N(M.message||M))})}function H(E){if(m.value){E?.();return}const M=!!E;v.loadAllCategories({force:M}).then(()=>{E?.(),M&&N("Category list has been updated")}).catch(ee=>{E?.(),ee.processed||N(ee.message||ee)})}function W(E){g.f7router.navigate("/category/edit?id="+E.id)}function Q(E,M){Ke(),v.hideCategory({category:E,hidden:M}).then(()=>{Se()}).catch(ee=>{Se(),ee.processed||N(ee.message||ee)})}function le(E,M){if(!E){P("An error occurred");return}if(!M){$.value=E,D.value=!0;return}D.value=!1,$.value=null,Ke(),v.deleteCategory({category:E,beforeResolve:ee=>{$l(te(E),ee)}}).then(()=>{Se()}).catch(ee=>{Se(),ee.processed||N(ee.message||ee)})}function oe(){m.value||(I.value=!0,m.value=!0,V.value=!1)}function ne(){if(!V.value){I.value=!1,m.value=!1;return}k.value=!0,Ke(),v.updateCategoryDisplayOrders({type:w.value,parentId:U.value}).then(()=>{k.value=!1,Se(),I.value=!1,m.value=!1,V.value=!1}).catch(E=>{k.value=!1,Se(),E.processed||N(E.message||E)})}function se(E){if(!E||!E.el||!E.el.id){N("Unable to move category");return}const M=x(E.el.id);if(!M){N("Unable to move category");return}v.changeCategoryDisplayOrder({categoryId:M,from:E.from,to:E.to}).then(()=>{V.value=!0}).catch(ee=>{N(ee.message||ee)})}function Z(){v.transactionCategoryListStateInvalid&&!A.value&&H(),_(g.f7router,f)}return O(),(E,M)=>{const ee=s("f7-nav-left"),ve=s("f7-nav-title"),he=s("f7-link"),re=s("f7-nav-right"),Be=s("f7-navbar"),Me=s("f7-icon"),Le=s("f7-list-item"),Ye=s("f7-list"),Ie=s("f7-list-button"),be=s("f7-badge"),L=s("ItemIcon"),xe=s("f7-swipeout-button"),Fe=s("f7-swipeout-actions"),Te=s("f7-actions-button"),Pe=s("f7-actions-group"),pe=s("f7-actions"),B=s("f7-actions-label"),_e=s("f7-page");return a(),i(_e,{ptr:!m.value,"onPtr:refresh":H,"onPage:afterin":Z},{default:l(()=>[t(Be,null,{default:l(()=>[t(ee,{"back-link":e(n)("Back")},null,8,["back-link"]),t(ve,{title:e(n)(b.value)},null,8,["title"]),t(re,{class:"navbar-compact-icons"},{default:l(()=>[m.value?u("",!0):(a(),i(he,{key:0,"icon-f7":"ellipsis",class:R({disabled:!T.value.length}),onClick:M[0]||(M[0]=Ne=>F.value=!0)},null,8,["class"])),m.value?m.value?(a(),i(he,{key:2,text:e(n)("Done"),class:R({disabled:k.value}),onClick:ne},null,8,["text","class"])):u("",!0):(a(),i(he,{key:1,"icon-f7":"plus",href:"/category/add?type="+w.value+"&parentId="+e(U)+(e(y)?`&color=${e(y).color}&icon=${e(y).icon}`:"")},null,8,["href"]))]),_:1})]),_:1}),e(A)?(a(),i(Ye,{key:0,strong:"",inset:"",dividers:"",class:"margin-top skeleton-text"},{default:l(()=>[(a(),C(ke,null,Ce([1,2,3],Ne=>t(Le,{title:"Category Name",link:d.value?"#":null,key:Ne},{media:l(()=>[t(Me,{f7:"app_fill"})]),_:1},8,["link"])),64))]),_:1})):u("",!0),!e(A)&&r.value?(a(),i(Ye,{key:1,strong:"",inset:"",dividers:"",class:"margin-top"},{default:l(()=>[t(Le,{title:e(n)("No available category")},null,8,["title"]),d.value&&Y.value?(a(),i(Ie,{key:0,title:e(n)("Add Default Categories"),href:"/category/preset?type="+w.value},null,8,["title","href"])):u("",!0)]),_:1})):u("",!0),e(A)?u("",!0):(a(),i(Ye,{key:2,strong:"",inset:"",dividers:"",sortable:"",class:"margin-top category-list","sortable-enabled":m.value,"onSortable:sort":se},{default:l(()=>[(a(!0),C(ke,null,Ce(T.value,Ne=>dt((a(),i(Le,{swipeout:"",class:R({"actual-first-child":Ne.id===z.value,"actual-last-child":Ne.id===J.value}),id:te(Ne),title:Ne.name,footer:Ne.comment,link:d.value?"/category/list?type="+w.value+"&id="+Ne.id:null,key:Ne.id,onTaphold:M[1]||(M[1]=me=>oe())},{media:l(()=>[t(L,{"icon-type":"category","icon-id":Ne.icon,color:Ne.color},{default:l(()=>[Ne.hidden?(a(),i(be,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(Me,{f7:"eye_slash_fill"})]),_:1})):u("",!0)]),_:2},1032,["icon-id","color"])]),default:l(()=>[m.value?(a(),i(Fe,{key:0,left:K.value===e(gt).LTR,right:K.value===e(gt).RTL},{default:l(()=>[t(xe,{color:Ne.hidden?"blue":"gray",class:"padding-horizontal",overswipe:"",close:"",onClick:me=>Q(Ne,!Ne.hidden)},{default:l(()=>[t(Me,{f7:Ne.hidden?"eye":"eye_slash"},null,8,["f7"])]),_:2},1032,["color","onClick"])]),_:2},1032,["left","right"])):u("",!0),m.value?u("",!0):(a(),i(Fe,{key:1,left:K.value===e(gt).RTL,right:K.value===e(gt).LTR},{default:l(()=>[t(xe,{color:"orange",close:"",text:e(n)("Edit"),onClick:me=>W(Ne)},null,8,["text","onClick"]),t(xe,{color:"red",class:"padding-horizontal",onClick:me=>le(Ne,!1)},{default:l(()=>[t(Me,{f7:"trash"})]),_:1},8,["onClick"])]),_:2},1032,["left","right"]))]),_:2},1032,["class","id","title","footer","link"])),[[Tt,I.value||!Ne.hidden]])),128))]),_:1},8,["sortable-enabled"])),t(pe,{"close-by-outside-click":"","close-on-escape":"",opened:F.value,"onActions:closed":M[5]||(M[5]=Ne=>F.value=!1)},{default:l(()=>[t(Pe,null,{default:l(()=>[t(Te,{onClick:M[2]||(M[2]=Ne=>oe())},{default:l(()=>[X(c(e(n)("Sort")),1)]),_:1}),I.value?u("",!0):(a(),i(Te,{key:0,onClick:M[3]||(M[3]=Ne=>I.value=!0)},{default:l(()=>[X(c(e(n)("Show Hidden Transaction Categories")),1)]),_:1})),I.value?(a(),i(Te,{key:1,onClick:M[4]||(M[4]=Ne=>I.value=!1)},{default:l(()=>[X(c(e(n)("Hide Hidden Transaction Categories")),1)]),_:1})):u("",!0)]),_:1}),t(Pe,null,{default:l(()=>[t(Te,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(pe,{"close-by-outside-click":"","close-on-escape":"",opened:D.value,"onActions:closed":M[7]||(M[7]=Ne=>D.value=!1)},{default:l(()=>[t(Pe,null,{default:l(()=>[t(B,null,{default:l(()=>[X(c(e(n)("Are you sure you want to delete this category?")),1)]),_:1}),t(Te,{color:"red",onClick:M[6]||(M[6]=Ne=>le($.value,!0))},{default:l(()=>[X(c(e(n)("Delete")),1)]),_:1})]),_:1}),t(Pe,null,{default:l(()=>[t(Te,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1},8,["ptr"])}}}),fy={class:"grid grid-cols-2"},py={class:"list-item-subitem no-chevron"},my={class:"item-link",href:"#"},vy={class:"item-content"},gy={class:"item-inner"},hy={class:"item-title"},yy={class:"list-item-custom-title no-padding"},_y={class:"list-item-subitem no-chevron"},ky={class:"item-link",href:"#"},by={class:"item-content"},wy={class:"item-inner"},Cy={class:"item-title"},Ty={class:"list-item-custom-title no-padding"},Sy={class:"grid grid-cols-2"},xy={class:"list-item-subitem no-chevron"},Ay={class:"item-content"},$y={class:"item-inner"},Dy={class:"item-header"},Iy={class:"item-title"},Fy={class:"list-item-custom-title no-padding"},Vy={class:"list-item-subitem no-chevron"},Py={class:"item-content"},Uy={class:"item-inner"},Ny={class:"item-header"},By={class:"item-title"},Ey={class:"list-item-custom-title no-padding"},ha=Oe({__name:"EditPage",props:{f7route:{},f7router:{}},setup(p){const g=p,n=g.f7route.query,{tt:h}=He(),{showAlert:P,showToast:N,routeBackOnError:_}=nt(),{editCategoryId:A,clientSessionId:U,loading:y,submitting:v,category:d,allAvailableCategories:w,title:f,inputEmptyProblemMessage:I,inputIsEmpty:m}=ki(n.type?parseInt(n.type):void 0,n.parentId),$=rl(),F=S(null),D=S(!1),V=S(!1),k=S(!1);function K(J){return bi.findNameById(w.value,J)}function T(){if(!n.id&&!n.parentId){N("Parameter Invalid"),F.value="Parameter Invalid";return}if(n.id)y.value=!0,A.value=n.id,$.getCategory({categoryId:A.value}).then(J=>{d.value.fillFrom(J),y.value=!1}).catch(J=>{J.processed?y.value=!1:(F.value=J,N(J.message||J))});else if(n.parentId){const J=n.type?parseInt(n.type):void 0;if(J!==_t.Income&&J!==_t.Expense&&J!==_t.Transfer){N("Parameter Invalid"),F.value="Parameter Invalid";return}n.color&&(d.value.color=n.color),n.icon&&(d.value.icon=n.icon),U.value=nn(),y.value=!1}}function b(){const J=g.f7router,r=I.value;if(r){P(r);return}v.value=!0,Ke(()=>v.value),$.saveCategory({category:d.value,isEdit:!!A.value,clientSessionId:U.value}).then(()=>{v.value=!1,Se(),A.value?N("You have saved this category"):N("You have added a new category"),J.back()}).catch(Y=>{v.value=!1,Se(),Y.processed||N(Y.message||Y)})}function z(){_(g.f7router,F)}return T(),(J,r)=>{const Y=s("f7-nav-left"),te=s("f7-nav-title"),x=s("f7-link"),O=s("f7-nav-right"),H=s("f7-navbar"),W=s("f7-list-input"),Q=s("f7-list-item"),le=s("f7-icon"),oe=s("f7-list"),ne=s("list-item-selection-sheet"),se=s("ItemIcon"),Z=s("icon-selection-sheet"),E=s("color-selection-sheet"),M=s("f7-toggle"),ee=s("f7-page"),ve=Kn("textarea-auto-size");return a(),i(ee,{"onPage:afterin":z},{default:l(()=>[t(H,null,{default:l(()=>[t(Y,{"back-link":e(h)("Back")},null,8,["back-link"]),t(te,{title:e(h)(e(f))},null,8,["title"]),t(O,null,{default:l(()=>[t(x,{"icon-f7":"checkmark_alt",class:R({disabled:e(m)||e(v)}),onClick:b},null,8,["class"])]),_:1})]),_:1}),e(y)?(a(),i(oe,{key:0,strong:"",inset:"",dividers:"",class:"margin-top skeleton-text"},{default:l(()=>[t(W,{label:"Category Name",placeholder:"Your category name"}),t(Q,{class:"list-item-with-header-and-title",header:"Primary Category",title:"Primary Category"}),t(Q,{class:"list-item-with-header-and-title list-item-with-multi-item"},{default:l(()=>[o("div",fy,[o("div",py,[o("a",my,[o("div",vy,[o("div",gy,[r[12]||(r[12]=o("div",{class:"item-header"},[o("span",null,"Category Icon")],-1)),o("div",hy,[o("div",yy,[t(le,{f7:"app_fill"})])])])])])]),o("div",_y,[o("a",ky,[o("div",by,[o("div",wy,[r[13]||(r[13]=o("div",{class:"item-header"},[o("span",null,"Category Color")],-1)),o("div",Cy,[o("div",Ty,[t(le,{f7:"app_fill"})])])])])])])])]),_:1}),t(Q,{class:"list-item-toggle",header:"Visible",after:"True"}),t(W,{label:"Description",type:"textarea",placeholder:"Your category description (optional)"})]),_:1})):e(y)?u("",!0):(a(),i(oe,{key:1,form:"",strong:"",inset:"",dividers:"",class:"margin-top"},{default:l(()=>[t(W,{type:"text","clear-button":"",label:e(h)("Category Name"),placeholder:e(h)("Your category name"),value:e(d).name,"onUpdate:value":r[0]||(r[0]=he=>e(d).name=he)},null,8,["label","placeholder","value"]),e(A)&&e(d).parentId&&e(d).parentId!=="0"?(a(),i(Q,{key:0,link:"#","no-chevron":"",class:"list-item-with-header-and-title",header:e(h)("Primary Category"),title:K(e(d).parentId),onClick:r[3]||(r[3]=he=>D.value=!0)},{default:l(()=>[t(ne,{"value-type":"item","key-field":"id","value-field":"id","title-field":"name","icon-field":"icon","icon-type":"category","color-field":"color",items:e(w),show:D.value,"onUpdate:show":r[1]||(r[1]=he=>D.value=he),modelValue:e(d).parentId,"onUpdate:modelValue":r[2]||(r[2]=he=>e(d).parentId=he)},null,8,["items","show","modelValue"])]),_:1},8,["header","title"])):u("",!0),t(Q,{class:"list-item-with-header-and-title list-item-with-multi-item"},{default:l(()=>[o("div",Sy,[o("div",xy,[o("a",{class:"item-link",href:"#",onClick:r[4]||(r[4]=he=>V.value=!0)},[o("div",Ay,[o("div",$y,[o("div",Dy,[o("span",null,c(e(h)("Category Icon")),1)]),o("div",Iy,[o("div",Fy,[t(se,{"icon-type":"category","icon-id":e(d).icon,color:e(d).color},null,8,["icon-id","color"])])])])])]),t(Z,{"all-icon-infos":e(wi),color:e(d).color,show:V.value,"onUpdate:show":r[5]||(r[5]=he=>V.value=he),modelValue:e(d).icon,"onUpdate:modelValue":r[6]||(r[6]=he=>e(d).icon=he)},null,8,["all-icon-infos","color","show","modelValue"])]),o("div",Vy,[o("a",{class:"item-link",href:"#",onClick:r[7]||(r[7]=he=>k.value=!0)},[o("div",Py,[o("div",Uy,[o("div",Ny,[o("span",null,c(e(h)("Category Color")),1)]),o("div",By,[o("div",Ey,[t(se,{"icon-type":"fixed-f7","icon-id":"app_fill",color:e(d).color},null,8,["color"])])])])])]),t(E,{"all-color-infos":e(Ci),show:k.value,"onUpdate:show":r[8]||(r[8]=he=>k.value=he),modelValue:e(d).color,"onUpdate:modelValue":r[9]||(r[9]=he=>e(d).color=he)},null,8,["all-color-infos","show","modelValue"])])])]),_:1}),e(A)?(a(),i(Q,{key:1,title:e(h)("Visible")},{default:l(()=>[t(M,{checked:e(d).visible,"onToggle:change":r[10]||(r[10]=he=>e(d).visible=he)},null,8,["checked"])]),_:1},8,["title"])):u("",!0),dt(t(W,{type:"textarea",style:{height:"auto"},label:e(h)("Description"),placeholder:e(h)("Your category description (optional)"),value:e(d).comment,"onUpdate:value":r[11]||(r[11]=he=>e(d).comment=he)},null,8,["label","placeholder","value"]),[[ve]])]),_:1}))]),_:1})}}}),My=Oe({__name:"PresetPage",props:{f7route:{},f7router:{}},setup(p){const g=p,{tt:n,getCurrentLanguageTag:h,getAllLanguageOptions:P,getAllTransactionDefaultCategories:N}=He(),{showToast:_,routeBackOnError:A}=nt(),U=rl(),y=S(null),v=S(h()),d=S(0),w=S(!1),f=S(!1),I=S(!1),m=fe(()=>P(!1)),$=fe(()=>N(d.value,v.value)),F=fe(()=>Ti($.value)>0);function D(T){switch(T){case _t.Income:return n("Income Categories");case _t.Expense:return n("Expense Categories");case _t.Transfer:return n("Transfer Categories");default:return n("Transaction Categories")}}function V(){const T=g.f7router;w.value=!0,Ke(()=>w.value);const b=Sa($.value),z=Si(b);U.addPresetCategories({categories:z}).then(()=>{w.value=!1,Se(),_("You have added preset categories"),T.back()}).catch(J=>{w.value=!1,Se(),J.processed||_(J.message||J)})}function k(){A(g.f7router,y)}const K=g.f7route.query;return d.value=parseInt(K.type||"0"),d.value!==0&&d.value!==_t.Income&&d.value!==_t.Expense&&d.value!==_t.Transfer&&(_("Parameter Invalid"),y.value="Parameter Invalid"),(T,b)=>{const z=s("f7-nav-left"),J=s("f7-nav-title"),r=s("f7-link"),Y=s("f7-nav-right"),te=s("f7-navbar"),x=s("f7-block-title"),O=s("ItemIcon"),H=s("f7-list-item"),W=s("f7-list"),Q=s("f7-accordion-content"),le=s("f7-block"),oe=s("f7-actions-button"),ne=s("f7-actions-group"),se=s("f7-actions"),Z=s("list-item-selection-sheet"),E=s("f7-page");return a(),i(E,{"onPage:afterin":k},{default:l(()=>[t(te,null,{default:l(()=>[t(z,{"back-link":e(n)("Back")},null,8,["back-link"]),t(J,{title:e(n)("Default Categories")},null,8,["title"]),t(Y,null,{default:l(()=>[F.value?(a(),i(r,{key:0,"icon-f7":"ellipsis",onClick:b[0]||(b[0]=M=>f.value=!0)})):u("",!0),F.value?(a(),i(r,{key:1,text:e(n)("Save"),class:R({disabled:w.value}),onClick:V},null,8,["text","class"])):u("",!0)]),_:1})]),_:1}),(a(!0),C(ke,null,Ce($.value,(M,ee)=>(a(),i(le,{class:"no-padding no-margin",key:ee},{default:l(()=>[t(x,{class:"margin-top margin-horizontal"},{default:l(()=>[X(c(D(parseInt(ee))),1)]),_:2},1024),t(W,{strong:"",inset:"",dividers:"",class:"margin-top"},{default:l(()=>[(a(!0),C(ke,null,Ce(M,(ve,he)=>(a(),i(H,{title:ve.name,"accordion-item":!!ve.subCategories.length,key:he},{media:l(()=>[t(O,{"icon-type":"category","icon-id":ve.icon,color:ve.color},null,8,["icon-id","color"])]),default:l(()=>[ve.subCategories.length?(a(),i(Q,{key:0,class:"padding-inline-start"},{default:l(()=>[t(W,null,{default:l(()=>[(a(!0),C(ke,null,Ce(ve.subCategories,(re,Be)=>(a(),i(H,{title:re.name,key:Be},{media:l(()=>[t(O,{"icon-type":"category","icon-id":re.icon,color:re.color},null,8,["icon-id","color"])]),_:2},1032,["title"]))),128))]),_:2},1024)]),_:2},1024)):u("",!0)]),_:2},1032,["title","accordion-item"]))),128))]),_:2},1024)]),_:2},1024))),128)),t(se,{"close-by-outside-click":"","close-on-escape":"",opened:f.value,"onActions:closed":b[2]||(b[2]=M=>f.value=!1)},{default:l(()=>[t(ne,null,{default:l(()=>[t(oe,{onClick:b[1]||(b[1]=M=>I.value=!0)},{default:l(()=>[X(c(e(n)("Change Language")),1)]),_:1})]),_:1}),t(ne,null,{default:l(()=>[t(oe,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(Z,{"value-type":"item","key-field":"languageTag","value-field":"languageTag","title-field":"nativeDisplayName","after-field":"displayName",items:m.value,show:I.value,"onUpdate:show":b[3]||(b[3]=M=>I.value=M),modelValue:v.value,"onUpdate:modelValue":b[4]||(b[4]=M=>v.value=M)},null,8,["items","show","modelValue"])]),_:1})}}}),Ly={class:"display-flex"},Ry={key:0,class:"transaction-tag-list-item-content list-item-valign-middle padding-inline-start-half"},Oy={class:"display-flex"},zy=Oe({__name:"ListPage",props:{f7router:{}},setup(p){const g=p,{tt:n,getCurrentLanguageTextDirection:h}=He(),{showAlert:P,showToast:N,routeBackOnError:_}=nt(),A=ln(),U=S(null),y=S(Hn.createNewTag()),v=S(!0),d=S(null),w=S(!1),f=S(!1),I=S(null),m=S(!1),$=S(!1),F=S(!1),D=S(!1),V=fe(()=>h()),k=fe(()=>A.allTransactionTags),K=fe(()=>xi(k.value,w.value)),T=fe(()=>Ai(k.value,w.value)),b=fe(()=>$i(k.value,w.value)),z=fe(()=>!!(U.value||y.value.id&&y.value.id!==""));function J(M){return M.id?y.value.name!==""&&y.value.name!==M.name:M.name!==""}function r(M){return"tag_"+M.id}function Y(M){return!M||M.indexOf("tag_")!==0?null:M.substring(4)}function te(){v.value=!0,A.loadAllTags({force:!1}).then(()=>{v.value=!1}).catch(M=>{M.processed?v.value=!1:(d.value=M,N(M.message||M))})}function x(M){if(f.value||z.value){M?.();return}const ee=!!M;A.loadAllTags({force:ee}).then(()=>{M?.(),ee&&N("Tag list has been updated")}).catch(ve=>{M?.(),ve.processed||N(ve.message||ve)})}function O(){U.value=Hn.createNewTag()}function H(M){y.value.id=M.id,y.value.name=M.name}function W(M){Ke(),A.saveTag({tag:M}).then(()=>{Se(),M.id?(y.value.id="",y.value.name=""):U.value=null}).catch(ee=>{Se(),ee.processed||N(ee.message||ee)})}function Q(M){M.id?(y.value.id="",y.value.name=""):U.value=null}function le(M,ee){Ke(),A.hideTag({tag:M,hidden:ee}).then(()=>{Se()}).catch(ve=>{Se(),ve.processed||N(ve.message||ve)})}function oe(M,ee){if(!M){P("An error occurred");return}if(!ee){I.value=M,$.value=!0;return}$.value=!1,I.value=null,Ke(),A.deleteTag({tag:M,beforeResolve:ve=>{$l(r(M),ve)}}).then(()=>{Se()}).catch(ve=>{Se(),ve.processed||N(ve.message||ve)})}function ne(){f.value||z.value||(w.value=!0,f.value=!0,F.value=!1)}function se(){if(!F.value){w.value=!1,f.value=!1;return}D.value=!0,Ke(),A.updateTagDisplayOrders().then(()=>{D.value=!1,Se(),w.value=!1,f.value=!1,F.value=!1}).catch(M=>{D.value=!1,Se(),M.processed||N(M.message||M)})}function Z(M){if(!M||!M.el||!M.el.id){N("Unable to move tag");return}const ee=Y(M.el.id);if(!ee){N("Unable to move tag");return}A.changeTagDisplayOrder({tagId:ee,from:M.from,to:M.to}).then(()=>{F.value=!0}).catch(ve=>{N(ve.message||ve)})}function E(){A.transactionTagListStateInvalid&&!v.value&&x(),_(g.f7router,d)}return te(),(M,ee)=>{const ve=s("f7-nav-left"),he=s("f7-nav-title"),re=s("f7-link"),Be=s("f7-nav-right"),Me=s("f7-navbar"),Le=s("f7-icon"),Ye=s("f7-list-item"),Ie=s("f7-list"),be=s("f7-badge"),L=s("f7-input"),xe=s("f7-button"),Fe=s("f7-swipeout-button"),Te=s("f7-swipeout-actions"),Pe=s("f7-actions-button"),pe=s("f7-actions-group"),B=s("f7-actions"),_e=s("f7-actions-label"),Ne=s("f7-page");return a(),i(Ne,{ptr:!f.value&&!z.value,"onPtr:refresh":x,"onPage:afterin":E},{default:l(()=>[t(Me,null,{default:l(()=>[t(ve,{"back-link":e(n)("Back")},null,8,["back-link"]),t(he,{title:e(n)("Transaction Tags")},null,8,["title"]),t(Be,{class:"navbar-compact-icons"},{default:l(()=>[f.value?u("",!0):(a(),i(re,{key:0,"icon-f7":"ellipsis",class:R({disabled:z.value||!k.value.length}),onClick:ee[0]||(ee[0]=me=>m.value=!0)},null,8,["class"])),f.value?f.value?(a(),i(re,{key:2,text:e(n)("Done"),class:R({disabled:D.value||z.value}),onClick:se},null,8,["text","class"])):u("",!0):(a(),i(re,{key:1,"icon-f7":"plus",class:R({disabled:z.value}),onClick:O},null,8,["class"]))]),_:1})]),_:1}),v.value?(a(),i(Ie,{key:0,strong:"",inset:"",dividers:"",class:"tag-item-list margin-top skeleton-text"},{default:l(()=>[(a(),C(ke,null,Ce([1,2,3],me=>t(Ye,{key:me},{media:l(()=>[t(Le,{class:"transaction-tag-icon",f7:"number"})]),title:l(()=>[...ee[16]||(ee[16]=[o("div",{class:"display-flex"},[o("div",{class:"transaction-tag-list-item-content list-item-valign-middle padding-inline-start-half"},"Tag Name")],-1)])]),_:1})),64))]),_:1})):u("",!0),!v.value&&b.value&&!U.value?(a(),i(Ie,{key:1,strong:"",inset:"",dividers:"",class:"tag-item-list margin-top"},{default:l(()=>[t(Ye,{title:e(n)("No available tag")},null,8,["title"])]),_:1})):u("",!0),v.value?u("",!0):(a(),i(Ie,{key:2,strong:"",inset:"",dividers:"",sortable:"",class:"tag-item-list margin-top","sortable-enabled":f.value,"onSortable:sort":Z},{default:l(()=>[(a(!0),C(ke,null,Ce(k.value,me=>dt((a(),i(Ye,{swipeout:"",class:R({"actual-first-child":me.id===K.value,"actual-last-child":me.id===T.value&&!U.value,"editing-list-item":y.value.id===me.id}),id:r(me),key:me.id,onTaphold:ee[5]||(ee[5]=rt=>ne())},{media:l(()=>[t(Le,{class:"transaction-tag-icon",f7:"number"},{default:l(()=>[me.hidden?(a(),i(be,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(Le,{f7:"eye_slash_fill"})]),_:1})):u("",!0)]),_:2},1024)]),title:l(()=>[o("div",Ly,[y.value.id!==me.id?(a(),C("div",Ry,c(me.name),1)):y.value.id===me.id?(a(),i(L,{key:1,class:"list-title-input padding-inline-start-half",type:"text",placeholder:e(n)("Tag Title"),value:y.value.name,"onUpdate:value":ee[1]||(ee[1]=rt=>y.value.name=rt),onKeyup:ee[2]||(ee[2]=hl(rt=>W(y.value),["enter"]))},null,8,["placeholder","value"])):u("",!0)])]),after:l(()=>[y.value.id===me.id?(a(),i(xe,{key:0,class:R({"no-padding":!0,disabled:!J(me)}),raised:"",fill:"","icon-f7":"checkmark_alt",color:"blue",onClick:ee[3]||(ee[3]=rt=>W(y.value))},null,8,["class"])):u("",!0),y.value.id===me.id?(a(),i(xe,{key:1,class:"no-padding margin-inline-start-half",raised:"",fill:"","icon-f7":"xmark",color:"gray",onClick:ee[4]||(ee[4]=rt=>Q(y.value))})):u("",!0)]),default:l(()=>[f.value&&y.value.id!==me.id?(a(),i(Te,{key:0,left:V.value===e(gt).LTR,right:V.value===e(gt).RTL},{default:l(()=>[t(Fe,{color:me.hidden?"blue":"gray",class:"padding-horizontal",overswipe:"",close:"",onClick:rt=>le(me,!me.hidden)},{default:l(()=>[t(Le,{f7:me.hidden?"eye":"eye_slash"},null,8,["f7"])]),_:2},1032,["color","onClick"])]),_:2},1032,["left","right"])):u("",!0),!f.value&&y.value.id!==me.id?(a(),i(Te,{key:1,left:V.value===e(gt).RTL,right:V.value===e(gt).LTR},{default:l(()=>[t(Fe,{color:"orange",close:"",text:e(n)("Edit"),onClick:rt=>H(me)},null,8,["text","onClick"]),t(Fe,{color:"red",class:"padding-horizontal",onClick:rt=>oe(me,!1)},{default:l(()=>[t(Le,{f7:"trash"})]),_:1},8,["onClick"])]),_:2},1032,["left","right"])):u("",!0)]),_:2},1032,["class","id"])),[[Tt,w.value||!me.hidden]])),128)),U.value?(a(),i(Ye,{key:0,class:"editing-list-item"},{media:l(()=>[t(Le,{class:"transaction-tag-icon",f7:"number"})]),title:l(()=>[o("div",Oy,[t(L,{class:"list-title-input padding-inline-start-half",type:"text",placeholder:e(n)("Tag Title"),value:U.value.name,"onUpdate:value":ee[6]||(ee[6]=me=>U.value.name=me),onKeyup:ee[7]||(ee[7]=hl(me=>W(U.value),["enter"]))},null,8,["placeholder","value"])])]),after:l(()=>[t(xe,{class:R({"no-padding":!0,disabled:!J(U.value)}),raised:"",fill:"","icon-f7":"checkmark_alt",color:"blue",onClick:ee[8]||(ee[8]=me=>W(U.value))},null,8,["class"]),t(xe,{class:"no-padding margin-inline-start-half",raised:"",fill:"","icon-f7":"xmark",color:"gray",onClick:ee[9]||(ee[9]=me=>Q(U.value))})]),_:1})):u("",!0)]),_:1},8,["sortable-enabled"])),t(B,{"close-by-outside-click":"","close-on-escape":"",opened:m.value,"onActions:closed":ee[13]||(ee[13]=me=>m.value=!1)},{default:l(()=>[t(pe,null,{default:l(()=>[t(Pe,{onClick:ee[10]||(ee[10]=me=>ne())},{default:l(()=>[X(c(e(n)("Sort")),1)]),_:1}),w.value?u("",!0):(a(),i(Pe,{key:0,onClick:ee[11]||(ee[11]=me=>w.value=!0)},{default:l(()=>[X(c(e(n)("Show Hidden Transaction Tags")),1)]),_:1})),w.value?(a(),i(Pe,{key:1,onClick:ee[12]||(ee[12]=me=>w.value=!1)},{default:l(()=>[X(c(e(n)("Hide Hidden Transaction Tags")),1)]),_:1})):u("",!0)]),_:1}),t(pe,null,{default:l(()=>[t(Pe,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(B,{"close-by-outside-click":"","close-on-escape":"",opened:$.value,"onActions:closed":ee[15]||(ee[15]=me=>$.value=!1)},{default:l(()=>[t(pe,null,{default:l(()=>[t(_e,null,{default:l(()=>[X(c(e(n)("Are you sure you want to delete this tag?")),1)]),_:1}),t(Pe,{color:"red",onClick:ee[14]||(ee[14]=me=>oe(I.value,!0))},{default:l(()=>[X(c(e(n)("Delete")),1)]),_:1})]),_:1}),t(pe,null,{default:l(()=>[t(Pe,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1},8,["ptr"])}}}),ya=Oe({__name:"ListPage",props:{f7route:{},f7router:{}},setup(p){const g=p,{tt:n,getCurrentLanguageTextDirection:h}=He(),{showAlert:P,showToast:N,routeBackOnError:_}=nt(),A=Xn(),U=S(Rt.Normal.type),y=S(!0),v=S(null),d=S(!1),w=S(!1),f=S(null),I=S(!1),m=S(!1),$=S(!1),F=S(!1),D=fe(()=>h()),V=fe(()=>A.allTransactionTemplates[U.value]||[]),k=fe(()=>Di(V.value,d.value)),K=fe(()=>Ii(V.value,d.value)),T=fe(()=>Fi(V.value,d.value));function b(le){return"template_"+le.id}function z(le){return!le||le.indexOf("template_")!==0?null:le.substring(9)}function J(){g.f7route.path==="/template/list"?U.value=Rt.Normal.type:g.f7route.path==="/schedule/list"&&(U.value=Rt.Schedule.type),y.value=!0,A.loadAllTemplates({templateType:U.value,force:!1}).then(()=>{y.value=!1}).catch(le=>{le.processed?y.value=!1:(v.value=le,N(le.message||le))})}function r(le){if(w.value){le?.();return}const oe=!!le;A.loadAllTemplates({templateType:U.value,force:oe}).then(()=>{le?.(),oe&&N("Template list has been updated")}).catch(ne=>{le?.(),ne.processed||N(ne.message||ne)})}function Y(le){g.f7router.navigate(`/template/edit?id=${le.id}&templateType=${le.templateType}`)}function te(le,oe){Ke(),A.hideTemplate({template:le,hidden:oe}).then(()=>{Se()}).catch(ne=>{Se(),ne.processed||N(ne.message||ne)})}function x(le,oe){if(!le){P("An error occurred");return}if(!oe){f.value=le,m.value=!0;return}m.value=!1,f.value=null,Ke(),A.deleteTemplate({template:le,beforeResolve:ne=>{$l(b(le),ne)}}).then(()=>{Se()}).catch(ne=>{Se(),ne.processed||N(ne.message||ne)})}function O(){w.value||(d.value=!0,w.value=!0,$.value=!1)}function H(){if(!$.value){d.value=!1,w.value=!1;return}F.value=!0,Ke(),A.updateTemplateDisplayOrders({templateType:U.value}).then(()=>{F.value=!1,Se(),d.value=!1,w.value=!1,$.value=!1}).catch(le=>{F.value=!1,Se(),le.processed||N(le.message||le)})}function W(le){if(!le||!le.el||!le.el.id){N("Unable to move template");return}const oe=z(le.el.id);if(!oe){N("Unable to move template");return}A.changeTemplateDisplayOrder({templateType:U.value,templateId:oe,from:le.from,to:le.to}).then(()=>{$.value=!0}).catch(ne=>{N(ne.message||ne)})}function Q(){(!fl(A.transactionTemplateListStatesInvalid[U.value])||A.transactionTemplateListStatesInvalid[U.value])&&!y.value&&r(),_(g.f7router,v)}return J(),(le,oe)=>{const ne=s("f7-nav-left"),se=s("f7-nav-title"),Z=s("f7-link"),E=s("f7-nav-right"),M=s("f7-navbar"),ee=s("f7-icon"),ve=s("f7-list-item"),he=s("f7-list"),re=s("f7-badge"),Be=s("f7-swipeout-button"),Me=s("f7-swipeout-actions"),Le=s("f7-actions-button"),Ye=s("f7-actions-group"),Ie=s("f7-actions"),be=s("f7-actions-label"),L=s("f7-page");return a(),i(L,{ptr:!w.value,"onPtr:refresh":r,"onPage:afterin":Q},{default:l(()=>[t(M,null,{default:l(()=>[t(ne,{"back-link":e(n)("Back")},null,8,["back-link"]),t(se,{title:U.value===e(Rt).Schedule.type?e(n)("Scheduled Transactions"):e(n)("Transaction Templates")},null,8,["title"]),t(E,{class:"navbar-compact-icons"},{default:l(()=>[w.value?u("",!0):(a(),i(Z,{key:0,"icon-f7":"ellipsis",class:R({disabled:!V.value.length}),onClick:oe[0]||(oe[0]=xe=>I.value=!0)},null,8,["class"])),w.value?w.value?(a(),i(Z,{key:2,text:e(n)("Done"),class:R({disabled:F.value}),onClick:H},null,8,["text","class"])):u("",!0):(a(),i(Z,{key:1,"icon-f7":"plus",href:"/template/add?templateType="+U.value},null,8,["href"]))]),_:1})]),_:1}),y.value?(a(),i(he,{key:0,strong:"",inset:"",dividers:"",class:"margin-top skeleton-text"},{default:l(()=>[(a(),C(ke,null,Ce([1,2,3],xe=>t(ve,{title:"Template Name",key:xe},{media:l(()=>[t(ee,{f7:"app_fill"})]),_:1})),64))]),_:1})):u("",!0),!y.value&&T.value?(a(),i(he,{key:1,strong:"",inset:"",dividers:"",class:"margin-top"},{default:l(()=>[U.value===e(Rt).Normal.type?(a(),i(ve,{key:0,title:e(n)("No available template"),footer:e(n)("Once you add templates, you can long press the Add button on the home page to quickly add a new transaction")},null,8,["title","footer"])):U.value===e(Rt).Schedule.type?(a(),i(ve,{key:1,title:e(n)("No available scheduled transactions")},null,8,["title"])):(a(),i(ve,{key:2,title:e(n)("No available template")},null,8,["title"]))]),_:1})):u("",!0),y.value?u("",!0):(a(),i(he,{key:2,strong:"",inset:"",dividers:"",sortable:"",class:"margin-top template-list","sortable-enabled":w.value,"onSortable:sort":W},{default:l(()=>[(a(!0),C(ke,null,Ce(V.value,xe=>dt((a(),i(ve,{swipeout:"",class:R({"actual-first-child":xe.id===k.value,"actual-last-child":xe.id===K.value}),id:b(xe),title:xe.name,key:xe.id,onTaphold:oe[1]||(oe[1]=Fe=>O())},{media:l(()=>[t(ee,{f7:U.value===e(Rt).Schedule.type?"clock":"doc_plaintext"},{default:l(()=>[xe.hidden?(a(),i(re,{key:0,color:"gray",class:"right-bottom-icon"},{default:l(()=>[t(ee,{f7:"eye_slash_fill"})]),_:1})):u("",!0)]),_:2},1032,["f7"])]),default:l(()=>[w.value?(a(),i(Me,{key:0,left:D.value===e(gt).LTR,right:D.value===e(gt).RTL},{default:l(()=>[t(Be,{color:xe.hidden?"blue":"gray",class:"padding-horizontal",overswipe:"",close:"",onClick:Fe=>te(xe,!xe.hidden)},{default:l(()=>[t(ee,{f7:xe.hidden?"eye":"eye_slash"},null,8,["f7"])]),_:2},1032,["color","onClick"])]),_:2},1032,["left","right"])):u("",!0),w.value?u("",!0):(a(),i(Me,{key:1,left:D.value===e(gt).RTL,right:D.value===e(gt).LTR},{default:l(()=>[t(Be,{color:"orange",close:"",text:e(n)("Edit"),onClick:Fe=>Y(xe)},null,8,["text","onClick"]),t(Be,{color:"red",class:"padding-horizontal",onClick:Fe=>x(xe,!1)},{default:l(()=>[t(ee,{f7:"trash"})]),_:1},8,["onClick"])]),_:2},1032,["left","right"]))]),_:2},1032,["class","id","title"])),[[Tt,d.value||!xe.hidden]])),128))]),_:1},8,["sortable-enabled"])),t(Ie,{"close-by-outside-click":"","close-on-escape":"",opened:I.value,"onActions:closed":oe[5]||(oe[5]=xe=>I.value=!1)},{default:l(()=>[t(Ye,null,{default:l(()=>[t(Le,{onClick:oe[2]||(oe[2]=xe=>O())},{default:l(()=>[X(c(e(n)("Sort")),1)]),_:1}),d.value?u("",!0):(a(),i(Le,{key:0,onClick:oe[3]||(oe[3]=xe=>d.value=!0)},{default:l(()=>[X(c(e(n)("Show Hidden Transaction Templates")),1)]),_:1})),d.value?(a(),i(Le,{key:1,onClick:oe[4]||(oe[4]=xe=>d.value=!1)},{default:l(()=>[X(c(e(n)("Hide Hidden Transaction Templates")),1)]),_:1})):u("",!0)]),_:1}),t(Ye,null,{default:l(()=>[t(Le,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"]),t(Ie,{"close-by-outside-click":"","close-on-escape":"",opened:m.value,"onActions:closed":oe[7]||(oe[7]=xe=>m.value=!1)},{default:l(()=>[t(Ye,null,{default:l(()=>[t(be,null,{default:l(()=>[X(c(e(n)("Are you sure you want to delete this template?")),1)]),_:1}),t(Le,{color:"red",onClick:oe[6]||(oe[6]=xe=>x(f.value,!0))},{default:l(()=>[X(c(e(n)("Delete")),1)]),_:1})]),_:1}),t(Ye,null,{default:l(()=>[t(Le,{bold:"",close:""},{default:l(()=>[X(c(e(n)("Cancel")),1)]),_:1})]),_:1})]),_:1},8,["opened"])]),_:1},8,["ptr"])}}});function tt(p){return function({resolve:g}){return g({component:p})}}function ot({router:p,resolve:g,reject:n}){if(!Ml()){n(),p.navigate("/login",{clearPreviousHistory:!0,browserHistory:!1});return}if(!an()){n(),p.navigate("/unlock",{clearPreviousHistory:!0,browserHistory:!1});return}g()}function Yy({router:p,resolve:g,reject:n}){if(!Ml()){n(),p.navigate("/login",{clearPreviousHistory:!0,browserHistory:!1});return}if(an()){n(),p.navigate("/",{clearPreviousHistory:!0,browserHistory:!1});return}g()}function _a({router:p,resolve:g,reject:n}){if(Ml()&&!an()){n(),p.navigate("/unlock",{clearPreviousHistory:!0,browserHistory:!1});return}if(Ml()){n(),p.navigate("/",{clearPreviousHistory:!0,browserHistory:!1});return}g()}const Hy=[{path:"/",async:tt(kf),beforeEnter:[ot],options:{animate:!1}},{path:"/login",async:tt(Pf),beforeEnter:[_a],options:{animate:!1}},{path:"/signup",async:tt(Nf),beforeEnter:[_a],options:{animate:!1}},{path:"/unlock",async:tt(Rf),beforeEnter:[Yy],options:{animate:!1}},{path:"/transaction/list",async:tt(kp),beforeEnter:[ot]},{path:"/transaction/filter/amount",async:tt(Rp),beforeEnter:[ot]},{path:"/transaction/add",async:tt(Ql),beforeEnter:[ot]},{path:"/transaction/edit",async:tt(Ql),beforeEnter:[ot]},{path:"/transaction/detail",async:tt(Ql),beforeEnter:[ot]},{path:"/account/list",async:tt(am),beforeEnter:[ot]},{path:"/account/add",async:tt(ga),beforeEnter:[ot]},{path:"/account/edit",async:tt(ga),beforeEnter:[ot]},{path:"/account/reconciliation_statements",async:tt(jv),beforeEnter:[ot]},{path:"/account/move_all_transactions",async:tt(Kv),beforeEnter:[ot]},{path:"/statistic/transaction",async:tt(Cg),beforeEnter:[ot]},{path:"/statistic/settings",async:tt(Fg),beforeEnter:[ot]},{path:"/settings/textsize",async:tt(eh),beforeEnter:[ot]},{path:"/settings/filter/account",async:tt(hh),beforeEnter:[ot]},{path:"/settings/filter/category",async:tt(bh),beforeEnter:[ot]},{path:"/settings/filter/tag",async:tt(wh),beforeEnter:[ot]},{path:"/settings/page",async:tt(ch),beforeEnter:[ot]},{path:"/settings/sync",async:tt(mh),beforeEnter:[ot]},{path:"/settings",async:tt(Th),beforeEnter:[ot]},{path:"/app_lock",async:tt(Sh),beforeEnter:[ot]},{path:"/exchange_rates",async:tt(Ph),beforeEnter:[ot]},{path:"/exchange_rates/update",async:tt(Mh),beforeEnter:[ot]},{path:"/about",async:tt(Zh),beforeEnter:[ot]},{path:"/user/profile",async:tt(Qh),beforeEnter:[ot]},{path:"/user/data/management",async:tt(oy),beforeEnter:[ot]},{path:"/user/2fa",async:tt(ry),beforeEnter:[ot]},{path:"/user/sessions",async:tt(uy),beforeEnter:[ot]},{path:"/category/all",async:tt(cy),beforeEnter:[ot]},{path:"/category/list",async:tt(dy),beforeEnter:[ot]},{path:"/category/add",async:tt(ha),beforeEnter:[ot]},{path:"/category/edit",async:tt(ha),beforeEnter:[ot]},{path:"/category/preset",async:tt(My),beforeEnter:[ot]},{path:"/tag/list",async:tt(zy),beforeEnter:[ot]},{path:"/template/list",async:tt(ya),beforeEnter:[ot]},{path:"/schedule/list",async:tt(ya),beforeEnter:[ot]},{path:"/template/add",async:tt(Ql),beforeEnter:[ot]},{path:"/template/edit",async:tt(Ql),beforeEnter:[ot]},{path:"(.*)",redirect:"/"}],qy=Oe({__name:"MobileApp",setup(p){const{tt:g,getCurrentLanguageInfo:n,setLanguage:h,initLocale:P}=He(),N=Rl(),_=Ol(),A=Al(),U=tl(),y=Pa(),v=Dn(),d=S({name:"ezBookkeeping",theme:"ios",colors:{primary:"#c67e48"},routes:Hy,darkMode:(()=>{let V="auto";return pa()===ma.Light?V=!1:pa()===ma.Dark&&(V=!0),V})(),touch:{disableContextMenu:!0,tapHold:!0},serviceWorker:{path:Vi()?"./sw.js":void 0,scope:"./"},actions:{animate:ol(),backdrop:!0,closeOnEscape:!0},dialog:{animate:ol(),backdrop:!0},popover:{animate:ol(),backdrop:!0,closeOnEscape:!0},popup:{animate:ol(),backdrop:!0,closeOnEscape:!0,swipeToClose:!0},sheet:{animate:ol(),backdrop:!0,closeOnEscape:!0},smartSelect:{routableModals:!1},view:{animate:ol(),browserHistory:!Ri(),browserHistoryInitialMatch:!0,browserHistoryAnimate:!1,iosSwipeBack:fa(),iosSwipeBackAnimateShadow:!1,mdSwipeBack:fa(),mdSwipeBackAnimateShadow:!1}}),w=S(null),f=S(void 0),I=S(void 0),m=fe(()=>N.currentNotification);function $(V){if(f.value){document.querySelector("meta[name=theme-color]")?.setAttribute("content","#000");return}V?I.value?document.querySelector("meta[name=theme-color]")?.setAttribute("content","#0b0b0b"):document.querySelector("meta[name=theme-color]")?.setAttribute("content","#121212"):I.value?document.querySelector("meta[name=theme-color]")?.setAttribute("content","#949495"):document.querySelector("meta[name=theme-color]")?.setAttribute("content","#f6f6f8")}function F(V){V.push?f.value=V.opened:I.value=V.opened,$(A.framework7DarkMode)}ka(()=>{Ua(_.appSettings.fontSize),el(V=>{A.framework7DarkMode=V.darkMode,$(V.darkMode),V.on("actionsOpen",k=>F(k)),V.on("actionsClose",k=>F(k)),V.on("dialogOpen",k=>F(k)),V.on("dialogClose",k=>F(k)),V.on("popoverOpen",k=>F(k)),V.on("popoverClose",k=>F(k)),V.on("popupOpen",k=>F(k)),V.on("popupClose",k=>F(k)),V.on("sheetOpen",k=>F(k)),V.on("sheetClose",k=>F(k)),V.on("pageBeforeOut",()=>{Jn()&&(V.actions.close(".actions-modal.modal-in",!1),V.dialog.close(".dialog.modal-in",!1),V.popover.close(".popover.modal-in",!1),V.popup.close(".popup.modal-in",!1),V.sheet.close(".sheet-modal.modal-in",!1))}),V.on("darkModeChange",k=>{A.framework7DarkMode=k,$(k)})}),document.addEventListener("DOMContentLoaded",()=>{const V=n();Pi(V?.alternativeLanguageTag)})}),xl(m,V=>{w.value&&(w.value.close(),w.value.destroy(),w.value=null),V&&el(k=>{w.value=k.notification.create({icon:`<img alt="logo" src="${Qn}" />`,title:g("global.app.title"),text:V,closeOnClick:!0,on:{close(){N.setNotificationContent(null)}}}).open()})});let D=P(U.currentUserLanguage,_.appSettings.timeZone);return _.updateLocalizedDefaultSettings(D),Gn(U.currentUserExpenseAmountColor,U.currentUserIncomeAmountColor),Ml()&&(!_.appSettings.applicationLock||an())&&(y.refreshTokenAndRevokeOldToken().then(V=>{V.user&&(D=h(V.user.language),_.updateLocalizedDefaultSettings(D),Gn(V.user.expenseAmountColor,V.user.incomeAmountColor),V.notificationContent&&N.setNotificationContent(V.notificationContent))}),_.appSettings.autoUpdateExchangeRatesData&&v.getLatestExchangeRates({silent:!0,force:!1})),(V,k)=>{const K=s("f7-view"),T=s("f7-app");return a(),i(T,La(Ra(d.value)),{default:l(()=>[t(K,{id:"main-view",class:"safe-areas",main:"",url:"/"})]),_:1},16)}}});qa.use([Wa,Ga,ja,Ka,Za,Xa,Qa,Ja,eo,to,lo,no,ao,oo,so,io,ro,uo,co,fo,po,mo,vo,go,ho,yo,_o,ko,bo,wo,Co,To,So,xo]);const st=Oa(qy),Wy=za(),Gy=Ya(Ui());Ao(st);st.use(Wy);st.use(Gy);st.component("VueDatePicker",Ha);st.component("PinCodeInput",Ni);st.component("MapView",wa);st.component("DateTimePicker",Zn);st.component("MonthPicker",Bi);st.component("TransactionCalendar",Ei);st.component("ItemIcon",Li);st.component("LanguageSelectButton",Wi);st.component("PieChart",cr);st.component("TrendsBarChart",xr);st.component("PinCodeInputSheet",Vr);st.component("PasswordInputSheet",Mr);st.component("PasscodeInputSheet",Hr);st.component("DateTimeSelectionSheet",iu);st.component("DateSelectionSheet",du);st.component("FiscalYearStartSelectionSheet",vu);st.component("DateRangeSelectionSheet",wu);st.component("MonthSelectionSheet",$u);st.component("MonthRangeSelectionSheet",Nu);st.component("ListNumberInput",Bu);st.component("ListItemSelectionSheet",Mu);st.component("ListItemSelectionPopup",Ru);st.component("TwoColumnListItemSelectionSheet",Hu);st.component("TreeViewSelectionSheet",Wu);st.component("IconSelectionSheet",ju);st.component("ColorSelectionSheet",Zu);st.component("InformationSheet",nc);st.component("NumberPadSheet",_c);st.component("MapSheet",Dc);st.component("TransactionTagSelectionSheet",Nc);st.component("ScheduleFrequencySheet",Oc);st.component("AccountBalanceTrendsBarChart",Wc);st.component("AIImageRecognitionSheet",td);st.directive("TextareaAutoSize",ld);st.mount("#app");
